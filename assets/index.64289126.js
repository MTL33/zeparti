(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function df(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var fb={},r5={exports:{}},Ds={},R={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=Symbol.for("react.element"),s7=Symbol.for("react.portal"),o7=Symbol.for("react.fragment"),a7=Symbol.for("react.strict_mode"),l7=Symbol.for("react.profiler"),c7=Symbol.for("react.provider"),u7=Symbol.for("react.context"),f7=Symbol.for("react.forward_ref"),h7=Symbol.for("react.suspense"),d7=Symbol.for("react.memo"),p7=Symbol.for("react.lazy"),RB=Symbol.iterator;function m7(t){return t===null||typeof t!="object"?null:(t=RB&&t[RB]||t["@@iterator"],typeof t=="function"?t:null)}var s5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o5=Object.assign,a5={};function Od(t,e,n){this.props=t,this.context=e,this.refs=a5,this.updater=n||s5}Od.prototype.isReactComponent={};Od.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Od.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l5(){}l5.prototype=Od.prototype;function BC(t,e,n){this.props=t,this.context=e,this.refs=a5,this.updater=n||s5}var RC=BC.prototype=new l5;RC.constructor=BC;o5(RC,Od.prototype);RC.isPureReactComponent=!0;var PB=Array.isArray,c5=Object.prototype.hasOwnProperty,PC={current:null},u5={key:!0,ref:!0,__self:!0,__source:!0};function f5(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)c5.call(e,i)&&!u5.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Vm,type:t,key:s,ref:o,props:r,_owner:PC.current}}function g7(t,e){return{$$typeof:Vm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function DC(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vm}function A7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DB=/\/+/g;function p2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A7(""+t.key):e.toString(36)}function lv(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vm:case s7:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+p2(o,0):i,PB(r)?(n="",t!=null&&(n=t.replace(DB,"$&/")+"/"),lv(r,e,n,"",function(c){return c})):r!=null&&(DC(r)&&(r=g7(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(DB,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",PB(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+p2(s,a);o+=lv(s,e,n,l,r)}else if(l=m7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+p2(s,a++),o+=lv(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function v1(t,e,n){if(t==null)return t;var i=[],r=0;return lv(t,i,"","",function(s){return e.call(n,s,r++)}),i}function v7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qr={current:null},cv={transition:null},_7={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:cv,ReactCurrentOwner:PC};tn.Children={map:v1,forEach:function(t,e,n){v1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return v1(t,function(){e++}),e},toArray:function(t){return v1(t,function(e){return e})||[]},only:function(t){if(!DC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tn.Component=Od;tn.Fragment=o7;tn.Profiler=l7;tn.PureComponent=BC;tn.StrictMode=a7;tn.Suspense=h7;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_7;tn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=o5({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=PC.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)c5.call(e,l)&&!u5.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Vm,type:t.type,key:r,ref:s,props:i,_owner:o}};tn.createContext=function(t){return t={$$typeof:u7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:c7,_context:t},t.Consumer=t};tn.createElement=f5;tn.createFactory=function(t){var e=f5.bind(null,t);return e.type=t,e};tn.createRef=function(){return{current:null}};tn.forwardRef=function(t){return{$$typeof:f7,render:t}};tn.isValidElement=DC;tn.lazy=function(t){return{$$typeof:p7,_payload:{_status:-1,_result:t},_init:v7}};tn.memo=function(t,e){return{$$typeof:d7,type:t,compare:e===void 0?null:e}};tn.startTransition=function(t){var e=cv.transition;cv.transition={};try{t()}finally{cv.transition=e}};tn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tn.useCallback=function(t,e){return Qr.current.useCallback(t,e)};tn.useContext=function(t){return Qr.current.useContext(t)};tn.useDebugValue=function(){};tn.useDeferredValue=function(t){return Qr.current.useDeferredValue(t)};tn.useEffect=function(t,e){return Qr.current.useEffect(t,e)};tn.useId=function(){return Qr.current.useId()};tn.useImperativeHandle=function(t,e,n){return Qr.current.useImperativeHandle(t,e,n)};tn.useInsertionEffect=function(t,e){return Qr.current.useInsertionEffect(t,e)};tn.useLayoutEffect=function(t,e){return Qr.current.useLayoutEffect(t,e)};tn.useMemo=function(t,e){return Qr.current.useMemo(t,e)};tn.useReducer=function(t,e,n){return Qr.current.useReducer(t,e,n)};tn.useRef=function(t){return Qr.current.useRef(t)};tn.useState=function(t){return Qr.current.useState(t)};tn.useSyncExternalStore=function(t,e,n){return Qr.current.useSyncExternalStore(t,e,n)};tn.useTransition=function(){return Qr.current.useTransition()};tn.version="18.2.0";(function(t){t.exports=tn})(R);const tl=TC(R.exports);var h5={exports:{}},d5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,U){var Q=z.length;z.push(U);e:for(;0<Q;){var H=Q-1>>>1,V=z[H];if(0<r(V,U))z[H]=U,z[Q]=V,Q=H;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var U=z[0],Q=z.pop();if(Q!==U){z[0]=Q;e:for(var H=0,V=z.length,J=V>>>1;H<J;){var j=2*(H+1)-1,re=z[j],ee=j+1,ae=z[ee];if(0>r(re,Q))ee<V&&0>r(ae,re)?(z[H]=ae,z[ee]=Q,H=ee):(z[H]=re,z[j]=Q,H=j);else if(ee<V&&0>r(ae,Q))z[H]=ae,z[ee]=Q,H=ee;else break e}}return U}function r(z,U){var Q=z.sortIndex-U.sortIndex;return Q!==0?Q:z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,m=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=z)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function w(z){if(m=!1,x(z),!p)if(n(l)!==null)p=!0,q(E);else{var U=n(c);U!==null&&K(w,U.startTime-z)}}function E(z,U){p=!1,m&&(m=!1,v(b),b=-1),d=!0;var Q=h;try{for(x(U),f=n(l);f!==null&&(!(f.expirationTime>U)||z&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var V=H(f.expirationTime<=U);U=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&i(l),x(U)}else i(l);f=n(l)}if(f!==null)var J=!0;else{var j=n(c);j!==null&&K(w,j.startTime-U),J=!1}return J}finally{f=null,h=Q,d=!1}}var S=!1,M=null,b=-1,B=5,T=-1;function k(){return!(t.unstable_now()-T<B)}function D(){if(M!==null){var z=t.unstable_now();T=z;var U=!0;try{U=M(!0,z)}finally{U?N():(S=!1,M=null)}}else S=!1}var N;if(typeof y=="function")N=function(){y(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Y=O.port2;O.port1.onmessage=D,N=function(){Y.postMessage(null)}}else N=function(){A(D,0)};function q(z){M=z,S||(S=!0,N())}function K(z,U){b=A(function(){z(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,q(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var Q=h;h=U;try{return z()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=h;h=z;try{return U()}finally{h=Q}},t.unstable_scheduleCallback=function(z,U,Q){var H=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,z={id:u++,callback:U,priorityLevel:z,startTime:Q,expirationTime:V,sortIndex:-1},Q>H?(z.sortIndex=Q,e(c,z),n(l)===null&&z===n(c)&&(m?(v(b),b=-1):m=!0,K(w,Q-H))):(z.sortIndex=V,e(l,z),p||d||(p=!0,q(E))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var U=h;return function(){var Q=h;h=U;try{return z.apply(this,arguments)}finally{h=Q}}}})(d5);(function(t){t.exports=d5})(h5);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p5=R.exports,Bs=h5.exports;function Ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m5=new Set,$p={};function pf(t,e){dd(t,e),dd(t+"Capture",e)}function dd(t,e){for($p[t]=e,t=0;t<e.length;t++)m5.add(e[t])}var rl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hb=Object.prototype.hasOwnProperty,y7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LB={},FB={};function x7(t){return hb.call(FB,t)?!0:hb.call(LB,t)?!1:y7.test(t)?FB[t]=!0:(LB[t]=!0,!1)}function w7(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function E7(t,e,n,i){if(e===null||typeof e>"u"||w7(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hr(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nr[t]=new Hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nr[e]=new Hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nr[t]=new Hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nr[t]=new Hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nr[t]=new Hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nr[t]=new Hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nr[t]=new Hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nr[t]=new Hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nr[t]=new Hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var LC=/[\-:]([a-z])/g;function FC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(LC,FC);nr[e]=new Hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(LC,FC);nr[e]=new Hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(LC,FC);nr[e]=new Hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nr[t]=new Hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function kC(t,e,n,i){var r=nr.hasOwnProperty(e)?nr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(E7(e,n,r,i)&&(n=null),i||r===null?x7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var dl=p5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_1=Symbol.for("react.element"),Lh=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),OC=Symbol.for("react.strict_mode"),db=Symbol.for("react.profiler"),g5=Symbol.for("react.provider"),A5=Symbol.for("react.context"),UC=Symbol.for("react.forward_ref"),pb=Symbol.for("react.suspense"),mb=Symbol.for("react.suspense_list"),NC=Symbol.for("react.memo"),Vl=Symbol.for("react.lazy"),v5=Symbol.for("react.offscreen"),kB=Symbol.iterator;function P0(t){return t===null||typeof t!="object"?null:(t=kB&&t[kB]||t["@@iterator"],typeof t=="function"?t:null)}var Wn=Object.assign,m2;function Ap(t){if(m2===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);m2=e&&e[1]||""}return`
`+m2+t}var g2=!1;function A2(t,e){if(!t||g2)return"";g2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{g2=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ap(t):""}function b7(t){switch(t.tag){case 5:return Ap(t.type);case 16:return Ap("Lazy");case 13:return Ap("Suspense");case 19:return Ap("SuspenseList");case 0:case 2:case 15:return t=A2(t.type,!1),t;case 11:return t=A2(t.type.render,!1),t;case 1:return t=A2(t.type,!0),t;default:return""}}function gb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fh:return"Fragment";case Lh:return"Portal";case db:return"Profiler";case OC:return"StrictMode";case pb:return"Suspense";case mb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A5:return(t.displayName||"Context")+".Consumer";case g5:return(t._context.displayName||"Context")+".Provider";case UC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case NC:return e=t.displayName||null,e!==null?e:gb(t.type)||"Memo";case Vl:e=t._payload,t=t._init;try{return gb(t(e))}catch{}}return null}function S7(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gb(e);case 8:return e===OC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C7(t){var e=_5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function y1(t){t._valueTracker||(t._valueTracker=C7(t))}function y5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=_5(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Uv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ab(t,e){var n=e.checked;return Wn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function OB(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=vc(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x5(t,e){e=e.checked,e!=null&&kC(t,"checked",e,!1)}function vb(t,e){x5(t,e);var n=vc(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_b(t,e.type,n):e.hasOwnProperty("defaultValue")&&_b(t,e.type,vc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function UB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _b(t,e,n){(e!=="number"||Uv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vp=Array.isArray;function Zh(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+vc(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function yb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Wn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ye(92));if(vp(n)){if(1<n.length)throw Error(Ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vc(n)}}function w5(t,e){var n=vc(e.value),i=vc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function zB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var x1,b5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(x1=x1||document.createElement("div"),x1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=x1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ip={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M7=["Webkit","ms","Moz","O"];Object.keys(Ip).forEach(function(t){M7.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ip[e]=Ip[t]})});function S5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ip.hasOwnProperty(t)&&Ip[t]?(""+e).trim():e+"px"}function C5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=S5(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var I7=Wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wb(t,e){if(e){if(I7[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ye(62))}}function Eb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bb=null;function zC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sb=null,ed=null,td=null;function GB(t){if(t=qm(t)){if(typeof Sb!="function")throw Error(Ye(280));var e=t.stateNode;e&&(e=V_(e),Sb(t.stateNode,t.type,e))}}function M5(t){ed?td?td.push(t):td=[t]:ed=t}function I5(){if(ed){var t=ed,e=td;if(td=ed=null,GB(t),e)for(t=0;t<e.length;t++)GB(e[t])}}function T5(t,e){return t(e)}function B5(){}var v2=!1;function R5(t,e,n){if(v2)return t(e,n);v2=!0;try{return T5(t,e,n)}finally{v2=!1,(ed!==null||td!==null)&&(B5(),I5())}}function em(t,e){var n=t.stateNode;if(n===null)return null;var i=V_(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ye(231,e,typeof n));return n}var Cb=!1;if(rl)try{var D0={};Object.defineProperty(D0,"passive",{get:function(){Cb=!0}}),window.addEventListener("test",D0,D0),window.removeEventListener("test",D0,D0)}catch{Cb=!1}function T7(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Tp=!1,Nv=null,zv=!1,Mb=null,B7={onError:function(t){Tp=!0,Nv=t}};function R7(t,e,n,i,r,s,o,a,l){Tp=!1,Nv=null,T7.apply(B7,arguments)}function P7(t,e,n,i,r,s,o,a,l){if(R7.apply(this,arguments),Tp){if(Tp){var c=Nv;Tp=!1,Nv=null}else throw Error(Ye(198));zv||(zv=!0,Mb=c)}}function mf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QB(t){if(mf(t)!==t)throw Error(Ye(188))}function D7(t){var e=t.alternate;if(!e){if(e=mf(t),e===null)throw Error(Ye(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return QB(r),t;if(s===i)return QB(r),e;s=s.sibling}throw Error(Ye(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Ye(189))}}if(n.alternate!==i)throw Error(Ye(190))}if(n.tag!==3)throw Error(Ye(188));return n.stateNode.current===n?t:e}function D5(t){return t=D7(t),t!==null?L5(t):null}function L5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=L5(t);if(e!==null)return e;t=t.sibling}return null}var F5=Bs.unstable_scheduleCallback,HB=Bs.unstable_cancelCallback,L7=Bs.unstable_shouldYield,F7=Bs.unstable_requestPaint,si=Bs.unstable_now,k7=Bs.unstable_getCurrentPriorityLevel,GC=Bs.unstable_ImmediatePriority,k5=Bs.unstable_UserBlockingPriority,Gv=Bs.unstable_NormalPriority,O7=Bs.unstable_LowPriority,O5=Bs.unstable_IdlePriority,z_=null,ma=null;function U7(t){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(z_,t,void 0,(t.current.flags&128)===128)}catch{}}var Do=Math.clz32?Math.clz32:G7,N7=Math.log,z7=Math.LN2;function G7(t){return t>>>=0,t===0?32:31-(N7(t)/z7|0)|0}var w1=64,E1=4194304;function _p(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=_p(a):(s&=o,s!==0&&(i=_p(s)))}else o=n&~r,o!==0?i=_p(o):s!==0&&(i=_p(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Do(e),r=1<<n,i|=t[n],e&=~r;return i}function Q7(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H7(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Do(s),a=1<<o,l=r[o];l===-1?((a&n)===0||(a&i)!==0)&&(r[o]=Q7(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ib(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U5(){var t=w1;return w1<<=1,(w1&4194240)===0&&(w1=64),t}function _2(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Do(e),t[e]=n}function V7(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Do(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function QC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Do(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var An=0;function N5(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var z5,HC,G5,Q5,H5,Tb=!1,b1=[],sc=null,oc=null,ac=null,tm=new Map,nm=new Map,Yl=[],W7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VB(t,e){switch(t){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":ac=null;break;case"pointerover":case"pointerout":tm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nm.delete(e.pointerId)}}function L0(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=qm(e),e!==null&&HC(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function j7(t,e,n,i,r){switch(e){case"focusin":return sc=L0(sc,t,e,n,i,r),!0;case"dragenter":return oc=L0(oc,t,e,n,i,r),!0;case"mouseover":return ac=L0(ac,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return tm.set(s,L0(tm.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,nm.set(s,L0(nm.get(s)||null,t,e,n,i,r)),!0}return!1}function V5(t){var e=gu(t.target);if(e!==null){var n=mf(e);if(n!==null){if(e=n.tag,e===13){if(e=P5(n),e!==null){t.blockedOn=e,H5(t.priority,function(){G5(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bb=i,n.target.dispatchEvent(i),bb=null}else return e=qm(n),e!==null&&HC(e),t.blockedOn=n,!1;e.shift()}return!0}function WB(t,e,n){uv(t)&&n.delete(e)}function q7(){Tb=!1,sc!==null&&uv(sc)&&(sc=null),oc!==null&&uv(oc)&&(oc=null),ac!==null&&uv(ac)&&(ac=null),tm.forEach(WB),nm.forEach(WB)}function F0(t,e){t.blockedOn===e&&(t.blockedOn=null,Tb||(Tb=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,q7)))}function im(t){function e(r){return F0(r,t)}if(0<b1.length){F0(b1[0],t);for(var n=1;n<b1.length;n++){var i=b1[n];i.blockedOn===t&&(i.blockedOn=null)}}for(sc!==null&&F0(sc,t),oc!==null&&F0(oc,t),ac!==null&&F0(ac,t),tm.forEach(e),nm.forEach(e),n=0;n<Yl.length;n++)i=Yl[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Yl.length&&(n=Yl[0],n.blockedOn===null);)V5(n),n.blockedOn===null&&Yl.shift()}var nd=dl.ReactCurrentBatchConfig,Hv=!0;function Y7(t,e,n,i){var r=An,s=nd.transition;nd.transition=null;try{An=1,VC(t,e,n,i)}finally{An=r,nd.transition=s}}function X7(t,e,n,i){var r=An,s=nd.transition;nd.transition=null;try{An=4,VC(t,e,n,i)}finally{An=r,nd.transition=s}}function VC(t,e,n,i){if(Hv){var r=Bb(t,e,n,i);if(r===null)T2(t,e,i,Vv,n),VB(t,i);else if(j7(r,t,e,n,i))i.stopPropagation();else if(VB(t,i),e&4&&-1<W7.indexOf(t)){for(;r!==null;){var s=qm(r);if(s!==null&&z5(s),s=Bb(t,e,n,i),s===null&&T2(t,e,i,Vv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else T2(t,e,i,null,n)}}var Vv=null;function Bb(t,e,n,i){if(Vv=null,t=zC(i),t=gu(t),t!==null)if(e=mf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P5(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vv=t,null}function W5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k7()){case GC:return 1;case k5:return 4;case Gv:case O7:return 16;case O5:return 536870912;default:return 16}default:return 16}}var Jl=null,WC=null,fv=null;function j5(){if(fv)return fv;var t,e=WC,n=e.length,i,r="value"in Jl?Jl.value:Jl.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return fv=r.slice(t,1<i?1-i:void 0)}function hv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function S1(){return!0}function jB(){return!1}function Ls(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?S1:jB,this.isPropagationStopped=jB,this}return Wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=S1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=S1)},persist:function(){},isPersistent:S1}),e}var Ud={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jC=Ls(Ud),jm=Wn({},Ud,{view:0,detail:0}),J7=Ls(jm),y2,x2,k0,G_=Wn({},jm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==k0&&(k0&&t.type==="mousemove"?(y2=t.screenX-k0.screenX,x2=t.screenY-k0.screenY):x2=y2=0,k0=t),y2)},movementY:function(t){return"movementY"in t?t.movementY:x2}}),qB=Ls(G_),K7=Wn({},G_,{dataTransfer:0}),$7=Ls(K7),Z7=Wn({},jm,{relatedTarget:0}),w2=Ls(Z7),eQ=Wn({},Ud,{animationName:0,elapsedTime:0,pseudoElement:0}),tQ=Ls(eQ),nQ=Wn({},Ud,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iQ=Ls(nQ),rQ=Wn({},Ud,{data:0}),YB=Ls(rQ),sQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aQ[t])?!!e[t]:!1}function qC(){return lQ}var cQ=Wn({},jm,{key:function(t){if(t.key){var e=sQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qC,charCode:function(t){return t.type==="keypress"?hv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uQ=Ls(cQ),fQ=Wn({},G_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XB=Ls(fQ),hQ=Wn({},jm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qC}),dQ=Ls(hQ),pQ=Wn({},Ud,{propertyName:0,elapsedTime:0,pseudoElement:0}),mQ=Ls(pQ),gQ=Wn({},G_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AQ=Ls(gQ),vQ=[9,13,27,32],YC=rl&&"CompositionEvent"in window,Bp=null;rl&&"documentMode"in document&&(Bp=document.documentMode);var _Q=rl&&"TextEvent"in window&&!Bp,q5=rl&&(!YC||Bp&&8<Bp&&11>=Bp),JB=String.fromCharCode(32),KB=!1;function Y5(t,e){switch(t){case"keyup":return vQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kh=!1;function yQ(t,e){switch(t){case"compositionend":return X5(e);case"keypress":return e.which!==32?null:(KB=!0,JB);case"textInput":return t=e.data,t===JB&&KB?null:t;default:return null}}function xQ(t,e){if(kh)return t==="compositionend"||!YC&&Y5(t,e)?(t=j5(),fv=WC=Jl=null,kh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q5&&e.locale!=="ko"?null:e.data;default:return null}}var wQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $B(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wQ[t.type]:e==="textarea"}function J5(t,e,n,i){M5(i),e=Wv(e,"onChange"),0<e.length&&(n=new jC("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Rp=null,rm=null;function EQ(t){ak(t,0)}function Q_(t){var e=Nh(t);if(y5(e))return t}function bQ(t,e){if(t==="change")return e}var K5=!1;if(rl){var E2;if(rl){var b2="oninput"in document;if(!b2){var ZB=document.createElement("div");ZB.setAttribute("oninput","return;"),b2=typeof ZB.oninput=="function"}E2=b2}else E2=!1;K5=E2&&(!document.documentMode||9<document.documentMode)}function eR(){Rp&&(Rp.detachEvent("onpropertychange",$5),rm=Rp=null)}function $5(t){if(t.propertyName==="value"&&Q_(rm)){var e=[];J5(e,rm,t,zC(t)),R5(EQ,e)}}function SQ(t,e,n){t==="focusin"?(eR(),Rp=e,rm=n,Rp.attachEvent("onpropertychange",$5)):t==="focusout"&&eR()}function CQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Q_(rm)}function MQ(t,e){if(t==="click")return Q_(e)}function IQ(t,e){if(t==="input"||t==="change")return Q_(e)}function TQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var No=typeof Object.is=="function"?Object.is:TQ;function sm(t,e){if(No(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!hb.call(e,r)||!No(t[r],e[r]))return!1}return!0}function tR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nR(t,e){var n=tR(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tR(n)}}function Z5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ek(){for(var t=window,e=Uv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uv(t.document)}return e}function XC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BQ(t){var e=ek(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Z5(n.ownerDocument.documentElement,n)){if(i!==null&&XC(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=nR(n,s);var o=nR(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RQ=rl&&"documentMode"in document&&11>=document.documentMode,Oh=null,Rb=null,Pp=null,Pb=!1;function iR(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pb||Oh==null||Oh!==Uv(i)||(i=Oh,"selectionStart"in i&&XC(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Pp&&sm(Pp,i)||(Pp=i,i=Wv(Rb,"onSelect"),0<i.length&&(e=new jC("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Oh)))}function C1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uh={animationend:C1("Animation","AnimationEnd"),animationiteration:C1("Animation","AnimationIteration"),animationstart:C1("Animation","AnimationStart"),transitionend:C1("Transition","TransitionEnd")},S2={},tk={};rl&&(tk=document.createElement("div").style,"AnimationEvent"in window||(delete Uh.animationend.animation,delete Uh.animationiteration.animation,delete Uh.animationstart.animation),"TransitionEvent"in window||delete Uh.transitionend.transition);function H_(t){if(S2[t])return S2[t];if(!Uh[t])return t;var e=Uh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tk)return S2[t]=e[n];return t}var nk=H_("animationend"),ik=H_("animationiteration"),rk=H_("animationstart"),sk=H_("transitionend"),ok=new Map,rR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bc(t,e){ok.set(t,e),pf(e,[t])}for(var C2=0;C2<rR.length;C2++){var M2=rR[C2],PQ=M2.toLowerCase(),DQ=M2[0].toUpperCase()+M2.slice(1);bc(PQ,"on"+DQ)}bc(nk,"onAnimationEnd");bc(ik,"onAnimationIteration");bc(rk,"onAnimationStart");bc("dblclick","onDoubleClick");bc("focusin","onFocus");bc("focusout","onBlur");bc(sk,"onTransitionEnd");dd("onMouseEnter",["mouseout","mouseover"]);dd("onMouseLeave",["mouseout","mouseover"]);dd("onPointerEnter",["pointerout","pointerover"]);dd("onPointerLeave",["pointerout","pointerover"]);pf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pf("onBeforeInput",["compositionend","keypress","textInput","paste"]);pf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(yp));function sR(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,P7(i,e,void 0,t),t.currentTarget=null}function ak(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;sR(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;sR(r,a,c),s=l}}}if(zv)throw t=Mb,zv=!1,Mb=null,t}function Mn(t,e){var n=e[Ob];n===void 0&&(n=e[Ob]=new Set);var i=t+"__bubble";n.has(i)||(lk(e,t,2,!1),n.add(i))}function I2(t,e,n){var i=0;e&&(i|=4),lk(n,t,i,e)}var M1="_reactListening"+Math.random().toString(36).slice(2);function om(t){if(!t[M1]){t[M1]=!0,m5.forEach(function(n){n!=="selectionchange"&&(LQ.has(n)||I2(n,!1,t),I2(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[M1]||(e[M1]=!0,I2("selectionchange",!1,e))}}function lk(t,e,n,i){switch(W5(e)){case 1:var r=Y7;break;case 4:r=X7;break;default:r=VC}n=r.bind(null,e,n,t),r=void 0,!Cb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function T2(t,e,n,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=gu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}R5(function(){var c=s,u=zC(n),f=[];e:{var h=ok.get(t);if(h!==void 0){var d=jC,p=t;switch(t){case"keypress":if(hv(n)===0)break e;case"keydown":case"keyup":d=uQ;break;case"focusin":p="focus",d=w2;break;case"focusout":p="blur",d=w2;break;case"beforeblur":case"afterblur":d=w2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=qB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=$7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=dQ;break;case nk:case ik:case rk:d=tQ;break;case sk:d=mQ;break;case"scroll":d=J7;break;case"wheel":d=AQ;break;case"copy":case"cut":case"paste":d=iQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=XB}var m=(e&4)!==0,A=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,v!==null&&(w=em(y,v),w!=null&&m.push(am(y,w,x)))),A)break;y=y.return}0<m.length&&(h=new d(h,p,null,n,u),f.push({event:h,listeners:m}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==bb&&(p=n.relatedTarget||n.fromElement)&&(gu(p)||p[sl]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=c,p=p?gu(p):null,p!==null&&(A=mf(p),p!==A||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=c),d!==p)){if(m=qB,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=XB,w="onPointerLeave",v="onPointerEnter",y="pointer"),A=d==null?h:Nh(d),x=p==null?h:Nh(p),h=new m(w,y+"leave",d,n,u),h.target=A,h.relatedTarget=x,w=null,gu(u)===c&&(m=new m(v,y+"enter",p,n,u),m.target=x,m.relatedTarget=A,w=m),A=w,d&&p)t:{for(m=d,v=p,y=0,x=m;x;x=qf(x))y++;for(x=0,w=v;w;w=qf(w))x++;for(;0<y-x;)m=qf(m),y--;for(;0<x-y;)v=qf(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=qf(m),v=qf(v)}m=null}else m=null;d!==null&&oR(f,h,d,m,!1),p!==null&&A!==null&&oR(f,A,p,m,!0)}}e:{if(h=c?Nh(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var E=bQ;else if($B(h))if(K5)E=IQ;else{E=CQ;var S=SQ}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=MQ);if(E&&(E=E(t,c))){J5(f,E,n,u);break e}S&&S(t,h,c),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&_b(h,"number",h.value)}switch(S=c?Nh(c):window,t){case"focusin":($B(S)||S.contentEditable==="true")&&(Oh=S,Rb=c,Pp=null);break;case"focusout":Pp=Rb=Oh=null;break;case"mousedown":Pb=!0;break;case"contextmenu":case"mouseup":case"dragend":Pb=!1,iR(f,n,u);break;case"selectionchange":if(RQ)break;case"keydown":case"keyup":iR(f,n,u)}var M;if(YC)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else kh?Y5(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(q5&&n.locale!=="ko"&&(kh||b!=="onCompositionStart"?b==="onCompositionEnd"&&kh&&(M=j5()):(Jl=u,WC="value"in Jl?Jl.value:Jl.textContent,kh=!0)),S=Wv(c,b),0<S.length&&(b=new YB(b,t,null,n,u),f.push({event:b,listeners:S}),M?b.data=M:(M=X5(n),M!==null&&(b.data=M)))),(M=_Q?yQ(t,n):xQ(t,n))&&(c=Wv(c,"onBeforeInput"),0<c.length&&(u=new YB("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=M))}ak(f,e)})}function am(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=em(t,n),s!=null&&i.unshift(am(t,s,r)),s=em(t,e),s!=null&&i.push(am(t,s,r))),t=t.return}return i}function qf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oR(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=em(n,s),l!=null&&o.unshift(am(n,l,a))):r||(l=em(n,s),l!=null&&o.push(am(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FQ=/\r\n?/g,kQ=/\u0000|\uFFFD/g;function aR(t){return(typeof t=="string"?t:""+t).replace(FQ,`
`).replace(kQ,"")}function I1(t,e,n){if(e=aR(e),aR(t)!==e&&n)throw Error(Ye(425))}function jv(){}var Db=null,Lb=null;function Fb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kb=typeof setTimeout=="function"?setTimeout:void 0,OQ=typeof clearTimeout=="function"?clearTimeout:void 0,lR=typeof Promise=="function"?Promise:void 0,UQ=typeof queueMicrotask=="function"?queueMicrotask:typeof lR<"u"?function(t){return lR.resolve(null).then(t).catch(NQ)}:kb;function NQ(t){setTimeout(function(){throw t})}function B2(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),im(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);im(e)}function lc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nd=Math.random().toString(36).slice(2),fa="__reactFiber$"+Nd,lm="__reactProps$"+Nd,sl="__reactContainer$"+Nd,Ob="__reactEvents$"+Nd,zQ="__reactListeners$"+Nd,GQ="__reactHandles$"+Nd;function gu(t){var e=t[fa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sl]||n[fa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cR(t);t!==null;){if(n=t[fa])return n;t=cR(t)}return e}t=n,n=t.parentNode}return null}function qm(t){return t=t[fa]||t[sl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ye(33))}function V_(t){return t[lm]||null}var Ub=[],zh=-1;function Sc(t){return{current:t}}function Tn(t){0>zh||(t.current=Ub[zh],Ub[zh]=null,zh--)}function En(t,e){zh++,Ub[zh]=t.current,t.current=e}var _c={},br=Sc(_c),is=Sc(!1),ju=_c;function pd(t,e){var n=t.type.contextTypes;if(!n)return _c;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function rs(t){return t=t.childContextTypes,t!=null}function qv(){Tn(is),Tn(br)}function uR(t,e,n){if(br.current!==_c)throw Error(Ye(168));En(br,e),En(is,n)}function ck(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ye(108,S7(t)||"Unknown",r));return Wn({},n,i)}function Yv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_c,ju=br.current,En(br,t),En(is,is.current),!0}function fR(t,e,n){var i=t.stateNode;if(!i)throw Error(Ye(169));n?(t=ck(t,e,ju),i.__reactInternalMemoizedMergedChildContext=t,Tn(is),Tn(br),En(br,t)):Tn(is),En(is,n)}var ja=null,W_=!1,R2=!1;function uk(t){ja===null?ja=[t]:ja.push(t)}function QQ(t){W_=!0,uk(t)}function Cc(){if(!R2&&ja!==null){R2=!0;var t=0,e=An;try{var n=ja;for(An=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ja=null,W_=!1}catch(r){throw ja!==null&&(ja=ja.slice(t+1)),F5(GC,Cc),r}finally{An=e,R2=!1}}return null}var Gh=[],Qh=0,Xv=null,Jv=0,$s=[],Zs=0,qu=null,Ka=1,$a="";function ou(t,e){Gh[Qh++]=Jv,Gh[Qh++]=Xv,Xv=t,Jv=e}function fk(t,e,n){$s[Zs++]=Ka,$s[Zs++]=$a,$s[Zs++]=qu,qu=t;var i=Ka;t=$a;var r=32-Do(i)-1;i&=~(1<<r),n+=1;var s=32-Do(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ka=1<<32-Do(e)+r|n<<r|i,$a=s+t}else Ka=1<<s|n<<r|i,$a=t}function JC(t){t.return!==null&&(ou(t,1),fk(t,1,0))}function KC(t){for(;t===Xv;)Xv=Gh[--Qh],Gh[Qh]=null,Jv=Gh[--Qh],Gh[Qh]=null;for(;t===qu;)qu=$s[--Zs],$s[Zs]=null,$a=$s[--Zs],$s[Zs]=null,Ka=$s[--Zs],$s[Zs]=null}var Cs=null,ws=null,Ln=!1,Mo=null;function hk(t,e){var n=ro(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cs=t,ws=lc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cs=t,ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qu!==null?{id:Ka,overflow:$a}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ro(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cs=t,ws=null,!0):!1;default:return!1}}function Nb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zb(t){if(Ln){var e=ws;if(e){var n=e;if(!hR(t,e)){if(Nb(t))throw Error(Ye(418));e=lc(n.nextSibling);var i=Cs;e&&hR(t,e)?hk(i,n):(t.flags=t.flags&-4097|2,Ln=!1,Cs=t)}}else{if(Nb(t))throw Error(Ye(418));t.flags=t.flags&-4097|2,Ln=!1,Cs=t}}}function dR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cs=t}function T1(t){if(t!==Cs)return!1;if(!Ln)return dR(t),Ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fb(t.type,t.memoizedProps)),e&&(e=ws)){if(Nb(t))throw dk(),Error(Ye(418));for(;e;)hk(t,e),e=lc(e.nextSibling)}if(dR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ws=lc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ws=null}}else ws=Cs?lc(t.stateNode.nextSibling):null;return!0}function dk(){for(var t=ws;t;)t=lc(t.nextSibling)}function md(){ws=Cs=null,Ln=!1}function $C(t){Mo===null?Mo=[t]:Mo.push(t)}var HQ=dl.ReactCurrentBatchConfig;function So(t,e){if(t&&t.defaultProps){e=Wn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Kv=Sc(null),$v=null,Hh=null,ZC=null;function eM(){ZC=Hh=$v=null}function tM(t){var e=Kv.current;Tn(Kv),t._currentValue=e}function Gb(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function id(t,e){$v=t,ZC=Hh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(es=!0),t.firstContext=null)}function lo(t){var e=t._currentValue;if(ZC!==t)if(t={context:t,memoizedValue:e,next:null},Hh===null){if($v===null)throw Error(Ye(308));Hh=t,$v.dependencies={lanes:0,firstContext:t}}else Hh=Hh.next=t;return e}var Au=null;function nM(t){Au===null?Au=[t]:Au.push(t)}function pk(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,nM(e)):(n.next=r.next,r.next=n),e.interleaved=n,ol(t,i)}function ol(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wl=!1;function iM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cc(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(sn&2)!==0){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ol(t,n)}return r=i.interleaved,r===null?(e.next=e,nM(i)):(e.next=r.next,r.next=e),i.interleaved=e,ol(t,n)}function dv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,QC(t,n)}}function pR(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zv(t,e,n,i){var r=t.updateQueue;Wl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,d=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Wn({},f,h);break e;case 2:Wl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(1);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Xu|=o,t.lanes=o,t.memoizedState=f}}function mR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ye(191,r));r.call(i)}}}var gk=new p5.Component().refs;function Qb(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Wn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var j_={isMounted:function(t){return(t=t._reactInternals)?mf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Gr(),r=fc(t),s=nl(i,r);s.payload=e,n!=null&&(s.callback=n),e=cc(t,s,r),e!==null&&(Lo(e,t,r,i),dv(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Gr(),r=fc(t),s=nl(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=cc(t,s,r),e!==null&&(Lo(e,t,r,i),dv(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gr(),i=fc(t),r=nl(n,i);r.tag=2,e!=null&&(r.callback=e),e=cc(t,r,i),e!==null&&(Lo(e,t,i,n),dv(e,t,i))}};function gR(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!sm(n,i)||!sm(r,s):!0}function Ak(t,e,n){var i=!1,r=_c,s=e.contextType;return typeof s=="object"&&s!==null?s=lo(s):(r=rs(e)?ju:br.current,i=e.contextTypes,s=(i=i!=null)?pd(t,r):_c),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=j_,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function AR(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&j_.enqueueReplaceState(e,e.state,null)}function Hb(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=gk,iM(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=lo(s):(s=rs(e)?ju:br.current,r.context=pd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qb(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&j_.enqueueReplaceState(r,r.state,null),Zv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function O0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ye(309));var i=n.stateNode}if(!i)throw Error(Ye(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===gk&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ye(284));if(!n._owner)throw Error(Ye(290,t))}return t}function B1(t,e){throw t=Object.prototype.toString.call(e),Error(Ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vR(t){var e=t._init;return e(t._payload)}function vk(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=hc(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,w){return y===null||y.tag!==6?(y=U2(x,v.mode,w),y.return=v,y):(y=r(y,x),y.return=v,y)}function l(v,y,x,w){var E=x.type;return E===Fh?u(v,y,x.props.children,w,x.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vl&&vR(E)===y.type)?(w=r(y,x.props),w.ref=O0(v,y,x),w.return=v,w):(w=_v(x.type,x.key,x.props,null,v.mode,w),w.ref=O0(v,y,x),w.return=v,w)}function c(v,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=N2(x,v.mode,w),y.return=v,y):(y=r(y,x.children||[]),y.return=v,y)}function u(v,y,x,w,E){return y===null||y.tag!==7?(y=Ru(x,v.mode,w,E),y.return=v,y):(y=r(y,x),y.return=v,y)}function f(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=U2(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case _1:return x=_v(y.type,y.key,y.props,null,v.mode,x),x.ref=O0(v,null,y),x.return=v,x;case Lh:return y=N2(y,v.mode,x),y.return=v,y;case Vl:var w=y._init;return f(v,w(y._payload),x)}if(vp(y)||P0(y))return y=Ru(y,v.mode,x,null),y.return=v,y;B1(v,y)}return null}function h(v,y,x,w){var E=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _1:return x.key===E?l(v,y,x,w):null;case Lh:return x.key===E?c(v,y,x,w):null;case Vl:return E=x._init,h(v,y,E(x._payload),w)}if(vp(x)||P0(x))return E!==null?null:u(v,y,x,w,null);B1(v,x)}return null}function d(v,y,x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(x)||null,a(y,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _1:return v=v.get(w.key===null?x:w.key)||null,l(y,v,w,E);case Lh:return v=v.get(w.key===null?x:w.key)||null,c(y,v,w,E);case Vl:var S=w._init;return d(v,y,x,S(w._payload),E)}if(vp(w)||P0(w))return v=v.get(x)||null,u(y,v,w,E,null);B1(y,w)}return null}function p(v,y,x,w){for(var E=null,S=null,M=y,b=y=0,B=null;M!==null&&b<x.length;b++){M.index>b?(B=M,M=null):B=M.sibling;var T=h(v,M,x[b],w);if(T===null){M===null&&(M=B);break}t&&M&&T.alternate===null&&e(v,M),y=s(T,y,b),S===null?E=T:S.sibling=T,S=T,M=B}if(b===x.length)return n(v,M),Ln&&ou(v,b),E;if(M===null){for(;b<x.length;b++)M=f(v,x[b],w),M!==null&&(y=s(M,y,b),S===null?E=M:S.sibling=M,S=M);return Ln&&ou(v,b),E}for(M=i(v,M);b<x.length;b++)B=d(M,v,b,x[b],w),B!==null&&(t&&B.alternate!==null&&M.delete(B.key===null?b:B.key),y=s(B,y,b),S===null?E=B:S.sibling=B,S=B);return t&&M.forEach(function(k){return e(v,k)}),Ln&&ou(v,b),E}function m(v,y,x,w){var E=P0(x);if(typeof E!="function")throw Error(Ye(150));if(x=E.call(x),x==null)throw Error(Ye(151));for(var S=E=null,M=y,b=y=0,B=null,T=x.next();M!==null&&!T.done;b++,T=x.next()){M.index>b?(B=M,M=null):B=M.sibling;var k=h(v,M,T.value,w);if(k===null){M===null&&(M=B);break}t&&M&&k.alternate===null&&e(v,M),y=s(k,y,b),S===null?E=k:S.sibling=k,S=k,M=B}if(T.done)return n(v,M),Ln&&ou(v,b),E;if(M===null){for(;!T.done;b++,T=x.next())T=f(v,T.value,w),T!==null&&(y=s(T,y,b),S===null?E=T:S.sibling=T,S=T);return Ln&&ou(v,b),E}for(M=i(v,M);!T.done;b++,T=x.next())T=d(M,v,b,T.value,w),T!==null&&(t&&T.alternate!==null&&M.delete(T.key===null?b:T.key),y=s(T,y,b),S===null?E=T:S.sibling=T,S=T);return t&&M.forEach(function(D){return e(v,D)}),Ln&&ou(v,b),E}function A(v,y,x,w){if(typeof x=="object"&&x!==null&&x.type===Fh&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _1:e:{for(var E=x.key,S=y;S!==null;){if(S.key===E){if(E=x.type,E===Fh){if(S.tag===7){n(v,S.sibling),y=r(S,x.props.children),y.return=v,v=y;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vl&&vR(E)===S.type){n(v,S.sibling),y=r(S,x.props),y.ref=O0(v,S,x),y.return=v,v=y;break e}n(v,S);break}else e(v,S);S=S.sibling}x.type===Fh?(y=Ru(x.props.children,v.mode,w,x.key),y.return=v,v=y):(w=_v(x.type,x.key,x.props,null,v.mode,w),w.ref=O0(v,y,x),w.return=v,v=w)}return o(v);case Lh:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=r(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=N2(x,v.mode,w),y.return=v,v=y}return o(v);case Vl:return S=x._init,A(v,y,S(x._payload),w)}if(vp(x))return p(v,y,x,w);if(P0(x))return m(v,y,x,w);B1(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,x),y.return=v,v=y):(n(v,y),y=U2(x,v.mode,w),y.return=v,v=y),o(v)):n(v,y)}return A}var gd=vk(!0),_k=vk(!1),Ym={},ga=Sc(Ym),cm=Sc(Ym),um=Sc(Ym);function vu(t){if(t===Ym)throw Error(Ye(174));return t}function rM(t,e){switch(En(um,e),En(cm,t),En(ga,Ym),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xb(e,t)}Tn(ga),En(ga,e)}function Ad(){Tn(ga),Tn(cm),Tn(um)}function yk(t){vu(um.current);var e=vu(ga.current),n=xb(e,t.type);e!==n&&(En(cm,t),En(ga,n))}function sM(t){cm.current===t&&(Tn(ga),Tn(cm))}var zn=Sc(0);function e_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P2=[];function oM(){for(var t=0;t<P2.length;t++)P2[t]._workInProgressVersionPrimary=null;P2.length=0}var pv=dl.ReactCurrentDispatcher,D2=dl.ReactCurrentBatchConfig,Yu=0,Vn=null,wi=null,Li=null,t_=!1,Dp=!1,fm=0,VQ=0;function fr(){throw Error(Ye(321))}function aM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!No(t[n],e[n]))return!1;return!0}function lM(t,e,n,i,r,s){if(Yu=s,Vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pv.current=t===null||t.memoizedState===null?YQ:XQ,t=n(i,r),Dp){s=0;do{if(Dp=!1,fm=0,25<=s)throw Error(Ye(301));s+=1,Li=wi=null,e.updateQueue=null,pv.current=JQ,t=n(i,r)}while(Dp)}if(pv.current=n_,e=wi!==null&&wi.next!==null,Yu=0,Li=wi=Vn=null,t_=!1,e)throw Error(Ye(300));return t}function cM(){var t=fm!==0;return fm=0,t}function oa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?Vn.memoizedState=Li=t:Li=Li.next=t,Li}function co(){if(wi===null){var t=Vn.alternate;t=t!==null?t.memoizedState:null}else t=wi.next;var e=Li===null?Vn.memoizedState:Li.next;if(e!==null)Li=e,wi=t;else{if(t===null)throw Error(Ye(310));wi=t,t={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},Li===null?Vn.memoizedState=Li=t:Li=Li.next=t}return Li}function hm(t,e){return typeof e=="function"?e(t):e}function L2(t){var e=co(),n=e.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=t;var i=wi,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Yu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Vn.lanes|=u,Xu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,No(i,e.memoizedState)||(es=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Vn.lanes|=s,Xu|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function F2(t){var e=co(),n=e.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);No(s,e.memoizedState)||(es=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function xk(){}function wk(t,e){var n=Vn,i=co(),r=e(),s=!No(i.memoizedState,r);if(s&&(i.memoizedState=r,es=!0),i=i.queue,uM(Sk.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Li!==null&&Li.memoizedState.tag&1){if(n.flags|=2048,dm(9,bk.bind(null,n,i,r,e),void 0,null),Oi===null)throw Error(Ye(349));(Yu&30)!==0||Ek(n,e,r)}return r}function Ek(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bk(t,e,n,i){e.value=n,e.getSnapshot=i,Ck(e)&&Mk(t)}function Sk(t,e,n){return n(function(){Ck(e)&&Mk(t)})}function Ck(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!No(t,n)}catch{return!0}}function Mk(t){var e=ol(t,1);e!==null&&Lo(e,t,1,-1)}function _R(t){var e=oa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hm,lastRenderedState:t},e.queue=t,t=t.dispatch=qQ.bind(null,Vn,t),[e.memoizedState,t]}function dm(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ik(){return co().memoizedState}function mv(t,e,n,i){var r=oa();Vn.flags|=t,r.memoizedState=dm(1|e,n,void 0,i===void 0?null:i)}function q_(t,e,n,i){var r=co();i=i===void 0?null:i;var s=void 0;if(wi!==null){var o=wi.memoizedState;if(s=o.destroy,i!==null&&aM(i,o.deps)){r.memoizedState=dm(e,n,s,i);return}}Vn.flags|=t,r.memoizedState=dm(1|e,n,s,i)}function yR(t,e){return mv(8390656,8,t,e)}function uM(t,e){return q_(2048,8,t,e)}function Tk(t,e){return q_(4,2,t,e)}function Bk(t,e){return q_(4,4,t,e)}function Rk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pk(t,e,n){return n=n!=null?n.concat([t]):null,q_(4,4,Rk.bind(null,e,t),n)}function fM(){}function Dk(t,e){var n=co();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&aM(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Lk(t,e){var n=co();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&aM(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Fk(t,e,n){return(Yu&21)===0?(t.baseState&&(t.baseState=!1,es=!0),t.memoizedState=n):(No(n,e)||(n=U5(),Vn.lanes|=n,Xu|=n,t.baseState=!0),e)}function WQ(t,e){var n=An;An=n!==0&&4>n?n:4,t(!0);var i=D2.transition;D2.transition={};try{t(!1),e()}finally{An=n,D2.transition=i}}function kk(){return co().memoizedState}function jQ(t,e,n){var i=fc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ok(t))Uk(e,n);else if(n=pk(t,e,n,i),n!==null){var r=Gr();Lo(n,t,i,r),Nk(n,e,i)}}function qQ(t,e,n){var i=fc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ok(t))Uk(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,No(a,o)){var l=e.interleaved;l===null?(r.next=r,nM(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=pk(t,e,r,i),n!==null&&(r=Gr(),Lo(n,t,i,r),Nk(n,e,i))}}function Ok(t){var e=t.alternate;return t===Vn||e!==null&&e===Vn}function Uk(t,e){Dp=t_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nk(t,e,n){if((n&4194240)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,QC(t,n)}}var n_={readContext:lo,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},YQ={readContext:lo,useCallback:function(t,e){return oa().memoizedState=[t,e===void 0?null:e],t},useContext:lo,useEffect:yR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mv(4194308,4,Rk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mv(4194308,4,t,e)},useInsertionEffect:function(t,e){return mv(4,2,t,e)},useMemo:function(t,e){var n=oa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=oa();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=jQ.bind(null,Vn,t),[i.memoizedState,t]},useRef:function(t){var e=oa();return t={current:t},e.memoizedState=t},useState:_R,useDebugValue:fM,useDeferredValue:function(t){return oa().memoizedState=t},useTransition:function(){var t=_R(!1),e=t[0];return t=WQ.bind(null,t[1]),oa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Vn,r=oa();if(Ln){if(n===void 0)throw Error(Ye(407));n=n()}else{if(n=e(),Oi===null)throw Error(Ye(349));(Yu&30)!==0||Ek(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,yR(Sk.bind(null,i,s,t),[t]),i.flags|=2048,dm(9,bk.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=oa(),e=Oi.identifierPrefix;if(Ln){var n=$a,i=Ka;n=(i&~(1<<32-Do(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=fm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VQ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XQ={readContext:lo,useCallback:Dk,useContext:lo,useEffect:uM,useImperativeHandle:Pk,useInsertionEffect:Tk,useLayoutEffect:Bk,useMemo:Lk,useReducer:L2,useRef:Ik,useState:function(){return L2(hm)},useDebugValue:fM,useDeferredValue:function(t){var e=co();return Fk(e,wi.memoizedState,t)},useTransition:function(){var t=L2(hm)[0],e=co().memoizedState;return[t,e]},useMutableSource:xk,useSyncExternalStore:wk,useId:kk,unstable_isNewReconciler:!1},JQ={readContext:lo,useCallback:Dk,useContext:lo,useEffect:uM,useImperativeHandle:Pk,useInsertionEffect:Tk,useLayoutEffect:Bk,useMemo:Lk,useReducer:F2,useRef:Ik,useState:function(){return F2(hm)},useDebugValue:fM,useDeferredValue:function(t){var e=co();return wi===null?e.memoizedState=t:Fk(e,wi.memoizedState,t)},useTransition:function(){var t=F2(hm)[0],e=co().memoizedState;return[t,e]},useMutableSource:xk,useSyncExternalStore:wk,useId:kk,unstable_isNewReconciler:!1};function vd(t,e){try{var n="",i=e;do n+=b7(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function k2(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Vb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KQ=typeof WeakMap=="function"?WeakMap:Map;function zk(t,e,n){n=nl(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){r_||(r_=!0,eS=i),Vb(t,e)},n}function Gk(t,e,n){n=nl(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Vb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vb(t,e),typeof i!="function"&&(uc===null?uc=new Set([this]):uc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function xR(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new KQ;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=fH.bind(null,t,e,n),e.then(t,t))}function wR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ER(t,e,n,i,r){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nl(-1,1),e.tag=2,cc(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var $Q=dl.ReactCurrentOwner,es=!1;function Or(t,e,n,i){e.child=t===null?_k(e,null,n,i):gd(e,t.child,n,i)}function bR(t,e,n,i,r){n=n.render;var s=e.ref;return id(e,r),i=lM(t,e,n,i,s,r),n=cM(),t!==null&&!es?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,al(t,e,r)):(Ln&&n&&JC(e),e.flags|=1,Or(t,e,i,r),e.child)}function SR(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!_M(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Qk(t,e,s,i,r)):(t=_v(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&r)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:sm,n(o,i)&&t.ref===e.ref)return al(t,e,r)}return e.flags|=1,t=hc(s,i),t.ref=e.ref,t.return=e,e.child=t}function Qk(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(sm(s,i)&&t.ref===e.ref)if(es=!1,e.pendingProps=i=s,(t.lanes&r)!==0)(t.flags&131072)!==0&&(es=!0);else return e.lanes=t.lanes,al(t,e,r)}return Wb(t,e,n,i,r)}function Hk(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},En(Wh,_s),_s|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,En(Wh,_s),_s|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,En(Wh,_s),_s|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,En(Wh,_s),_s|=i;return Or(t,e,r,n),e.child}function Vk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wb(t,e,n,i,r){var s=rs(n)?ju:br.current;return s=pd(e,s),id(e,r),n=lM(t,e,n,i,s,r),i=cM(),t!==null&&!es?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,al(t,e,r)):(Ln&&i&&JC(e),e.flags|=1,Or(t,e,n,r),e.child)}function CR(t,e,n,i,r){if(rs(n)){var s=!0;Yv(e)}else s=!1;if(id(e,r),e.stateNode===null)gv(t,e),Ak(e,n,i),Hb(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=lo(c):(c=rs(n)?ju:br.current,c=pd(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&AR(e,o,i,c),Wl=!1;var h=e.memoizedState;o.state=h,Zv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||is.current||Wl?(typeof u=="function"&&(Qb(e,n,u,i),l=e.memoizedState),(a=Wl||gR(e,n,a,i,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,mk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:So(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=lo(l):(l=rs(n)?ju:br.current,l=pd(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&AR(e,o,i,l),Wl=!1,h=e.memoizedState,o.state=h,Zv(e,i,o,r);var p=e.memoizedState;a!==f||h!==p||is.current||Wl?(typeof d=="function"&&(Qb(e,n,d,i),p=e.memoizedState),(c=Wl||gR(e,n,c,i,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return jb(t,e,n,i,s,r)}function jb(t,e,n,i,r,s){Vk(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&fR(e,n,!1),al(t,e,s);i=e.stateNode,$Q.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=gd(e,t.child,null,s),e.child=gd(e,null,a,s)):Or(t,e,a,s),e.memoizedState=i.state,r&&fR(e,n,!0),e.child}function Wk(t){var e=t.stateNode;e.pendingContext?uR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uR(t,e.context,!1),rM(t,e.containerInfo)}function MR(t,e,n,i,r){return md(),$C(r),e.flags|=256,Or(t,e,n,i),e.child}var qb={dehydrated:null,treeContext:null,retryLane:0};function Yb(t){return{baseLanes:t,cachePool:null,transitions:null}}function jk(t,e,n){var i=e.pendingProps,r=zn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),En(zn,r&1),t===null)return zb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=J_(o,i,0,null),t=Ru(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yb(n),e.memoizedState=qb,t):hM(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return ZQ(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return(o&1)===0&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=hc(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=hc(a,s):(s=Ru(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Yb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qb,i}return s=t.child,t=s.sibling,i=hc(s,{mode:"visible",children:i.children}),(e.mode&1)===0&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function hM(t,e){return e=J_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function R1(t,e,n,i){return i!==null&&$C(i),gd(e,t.child,null,n),t=hM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZQ(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=k2(Error(Ye(422))),R1(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=J_({mode:"visible",children:i.children},r,0,null),s=Ru(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&gd(e,t.child,null,o),e.child.memoizedState=Yb(o),e.memoizedState=qb,s);if((e.mode&1)===0)return R1(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ye(419)),i=k2(s,i,void 0),R1(t,e,o,i)}if(a=(o&t.childLanes)!==0,es||a){if(i=Oi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(i.suspendedLanes|o))!==0?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ol(t,r),Lo(i,t,r,-1))}return vM(),i=k2(Error(Ye(421))),R1(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=hH.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ws=lc(r.nextSibling),Cs=e,Ln=!0,Mo=null,t!==null&&($s[Zs++]=Ka,$s[Zs++]=$a,$s[Zs++]=qu,Ka=t.id,$a=t.overflow,qu=e),e=hM(e,i.children),e.flags|=4096,e)}function IR(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Gb(t.return,e,n)}function O2(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function qk(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Or(t,e,i.children,n),i=zn.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&IR(t,n,e);else if(t.tag===19)IR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(En(zn,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&e_(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),O2(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&e_(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}O2(e,!0,n,null,s);break;case"together":O2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gv(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function al(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xu|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(Ye(153));if(e.child!==null){for(t=e.child,n=hc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eH(t,e,n){switch(e.tag){case 3:Wk(e),md();break;case 5:yk(e);break;case 1:rs(e.type)&&Yv(e);break;case 4:rM(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;En(Kv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(En(zn,zn.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?jk(t,e,n):(En(zn,zn.current&1),t=al(t,e,n),t!==null?t.sibling:null);En(zn,zn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,(t.flags&128)!==0){if(i)return qk(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),En(zn,zn.current),i)break;return null;case 22:case 23:return e.lanes=0,Hk(t,e,n)}return al(t,e,n)}var Yk,Xb,Xk,Jk;Yk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xb=function(){};Xk=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,vu(ga.current);var s=null;switch(n){case"input":r=Ab(t,r),i=Ab(t,i),s=[];break;case"select":r=Wn({},r,{value:void 0}),i=Wn({},i,{value:void 0}),s=[];break;case"textarea":r=yb(t,r),i=yb(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=jv)}wb(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($p.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($p.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Mn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Jk=function(t,e,n,i){n!==i&&(e.flags|=4)};function U0(t,e){if(!Ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function hr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function tH(t,e,n){var i=e.pendingProps;switch(KC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(e),null;case 1:return rs(e.type)&&qv(),hr(e),null;case 3:return i=e.stateNode,Ad(),Tn(is),Tn(br),oM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(T1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Mo!==null&&(iS(Mo),Mo=null))),Xb(t,e),hr(e),null;case 5:sM(e);var r=vu(um.current);if(n=e.type,t!==null&&e.stateNode!=null)Xk(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ye(166));return hr(e),null}if(t=vu(ga.current),T1(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[fa]=e,i[lm]=s,t=(e.mode&1)!==0,n){case"dialog":Mn("cancel",i),Mn("close",i);break;case"iframe":case"object":case"embed":Mn("load",i);break;case"video":case"audio":for(r=0;r<yp.length;r++)Mn(yp[r],i);break;case"source":Mn("error",i);break;case"img":case"image":case"link":Mn("error",i),Mn("load",i);break;case"details":Mn("toggle",i);break;case"input":OB(i,s),Mn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Mn("invalid",i);break;case"textarea":NB(i,s),Mn("invalid",i)}wb(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&I1(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&I1(i.textContent,a,t),r=["children",""+a]):$p.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mn("scroll",i)}switch(n){case"input":y1(i),UB(i,s,!0);break;case"textarea":y1(i),zB(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=jv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[fa]=e,t[lm]=i,Yk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Eb(n,i),n){case"dialog":Mn("cancel",t),Mn("close",t),r=i;break;case"iframe":case"object":case"embed":Mn("load",t),r=i;break;case"video":case"audio":for(r=0;r<yp.length;r++)Mn(yp[r],t);r=i;break;case"source":Mn("error",t),r=i;break;case"img":case"image":case"link":Mn("error",t),Mn("load",t),r=i;break;case"details":Mn("toggle",t),r=i;break;case"input":OB(t,i),r=Ab(t,i),Mn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Wn({},i,{value:void 0}),Mn("invalid",t);break;case"textarea":NB(t,i),r=yb(t,i),Mn("invalid",t);break;default:r=i}wb(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?C5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&b5(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zp(t,l):typeof l=="number"&&Zp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($p.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Mn("scroll",t):l!=null&&kC(t,s,l,o))}switch(n){case"input":y1(t),UB(t,i,!1);break;case"textarea":y1(t),zB(t);break;case"option":i.value!=null&&t.setAttribute("value",""+vc(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Zh(t,!!i.multiple,s,!1):i.defaultValue!=null&&Zh(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=jv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hr(e),null;case 6:if(t&&e.stateNode!=null)Jk(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ye(166));if(n=vu(um.current),vu(ga.current),T1(e)){if(i=e.stateNode,n=e.memoizedProps,i[fa]=e,(s=i.nodeValue!==n)&&(t=Cs,t!==null))switch(t.tag){case 3:I1(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&I1(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[fa]=e,e.stateNode=i}return hr(e),null;case 13:if(Tn(zn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ln&&ws!==null&&(e.mode&1)!==0&&(e.flags&128)===0)dk(),md(),e.flags|=98560,s=!1;else if(s=T1(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ye(317));s[fa]=e}else md(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;hr(e),s=!1}else Mo!==null&&(iS(Mo),Mo=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(zn.current&1)!==0?Ei===0&&(Ei=3):vM())),e.updateQueue!==null&&(e.flags|=4),hr(e),null);case 4:return Ad(),Xb(t,e),t===null&&om(e.stateNode.containerInfo),hr(e),null;case 10:return tM(e.type._context),hr(e),null;case 17:return rs(e.type)&&qv(),hr(e),null;case 19:if(Tn(zn),s=e.memoizedState,s===null)return hr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)U0(s,!1);else{if(Ei!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=e_(t),o!==null){for(e.flags|=128,U0(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return En(zn,zn.current&1|2),e.child}t=t.sibling}s.tail!==null&&si()>_d&&(e.flags|=128,i=!0,U0(s,!1),e.lanes=4194304)}else{if(!i)if(t=e_(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),U0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ln)return hr(e),null}else 2*si()-s.renderingStartTime>_d&&n!==1073741824&&(e.flags|=128,i=!0,U0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=si(),e.sibling=null,n=zn.current,En(zn,i?n&1|2:n&1),e):(hr(e),null);case 22:case 23:return AM(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(_s&1073741824)!==0&&(hr(e),e.subtreeFlags&6&&(e.flags|=8192)):hr(e),null;case 24:return null;case 25:return null}throw Error(Ye(156,e.tag))}function nH(t,e){switch(KC(e),e.tag){case 1:return rs(e.type)&&qv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ad(),Tn(is),Tn(br),oM(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return sM(e),null;case 13:if(Tn(zn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ye(340));md()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tn(zn),null;case 4:return Ad(),null;case 10:return tM(e.type._context),null;case 22:case 23:return AM(),null;case 24:return null;default:return null}}var P1=!1,vr=!1,iH=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Vh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Jn(t,e,i)}else n.current=null}function Jb(t,e,n){try{n()}catch(i){Jn(t,e,i)}}var TR=!1;function rH(t,e){if(Db=Hv,t=ek(),XC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var d;f!==n||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lb={focusedElem:t,selectionRange:n},Hv=!1,ot=e;ot!==null;)if(e=ot,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ot=t;else for(;ot!==null;){e=ot;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,A=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:So(e.type,m),A);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(w){Jn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ot=t;break}ot=e.return}return p=TR,TR=!1,p}function Lp(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Jb(e,n,s)}r=r.next}while(r!==i)}}function Y_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Kb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kk(t){var e=t.alternate;e!==null&&(t.alternate=null,Kk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fa],delete e[lm],delete e[Ob],delete e[zQ],delete e[GQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $k(t){return t.tag===5||t.tag===3||t.tag===4}function BR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$k(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $b(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jv));else if(i!==4&&(t=t.child,t!==null))for($b(t,e,n),t=t.sibling;t!==null;)$b(t,e,n),t=t.sibling}function Zb(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zb(t,e,n),t=t.sibling;t!==null;)Zb(t,e,n),t=t.sibling}var $i=null,Co=!1;function Tl(t,e,n){for(n=n.child;n!==null;)Zk(t,e,n),n=n.sibling}function Zk(t,e,n){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(z_,n)}catch{}switch(n.tag){case 5:vr||Vh(n,e);case 6:var i=$i,r=Co;$i=null,Tl(t,e,n),$i=i,Co=r,$i!==null&&(Co?(t=$i,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$i.removeChild(n.stateNode));break;case 18:$i!==null&&(Co?(t=$i,n=n.stateNode,t.nodeType===8?B2(t.parentNode,n):t.nodeType===1&&B2(t,n),im(t)):B2($i,n.stateNode));break;case 4:i=$i,r=Co,$i=n.stateNode.containerInfo,Co=!0,Tl(t,e,n),$i=i,Co=r;break;case 0:case 11:case 14:case 15:if(!vr&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Jb(n,e,o),r=r.next}while(r!==i)}Tl(t,e,n);break;case 1:if(!vr&&(Vh(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Jn(n,e,a)}Tl(t,e,n);break;case 21:Tl(t,e,n);break;case 22:n.mode&1?(vr=(i=vr)||n.memoizedState!==null,Tl(t,e,n),vr=i):Tl(t,e,n);break;default:Tl(t,e,n)}}function RR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iH),e.forEach(function(i){var r=dH.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ao(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$i=a.stateNode,Co=!1;break e;case 3:$i=a.stateNode.containerInfo,Co=!0;break e;case 4:$i=a.stateNode.containerInfo,Co=!0;break e}a=a.return}if($i===null)throw Error(Ye(160));Zk(s,o,r),$i=null,Co=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Jn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eO(e,t),e=e.sibling}function eO(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ao(e,t),Zo(t),i&4){try{Lp(3,t,t.return),Y_(3,t)}catch(m){Jn(t,t.return,m)}try{Lp(5,t,t.return)}catch(m){Jn(t,t.return,m)}}break;case 1:Ao(e,t),Zo(t),i&512&&n!==null&&Vh(n,n.return);break;case 5:if(Ao(e,t),Zo(t),i&512&&n!==null&&Vh(n,n.return),t.flags&32){var r=t.stateNode;try{Zp(r,"")}catch(m){Jn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&x5(r,s),Eb(a,o);var c=Eb(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?C5(r,f):u==="dangerouslySetInnerHTML"?b5(r,f):u==="children"?Zp(r,f):kC(r,u,f,c)}switch(a){case"input":vb(r,s);break;case"textarea":w5(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Zh(r,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zh(r,!!s.multiple,s.defaultValue,!0):Zh(r,!!s.multiple,s.multiple?[]:"",!1))}r[lm]=s}catch(m){Jn(t,t.return,m)}}break;case 6:if(Ao(e,t),Zo(t),i&4){if(t.stateNode===null)throw Error(Ye(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Jn(t,t.return,m)}}break;case 3:if(Ao(e,t),Zo(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{im(e.containerInfo)}catch(m){Jn(t,t.return,m)}break;case 4:Ao(e,t),Zo(t);break;case 13:Ao(e,t),Zo(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(mM=si())),i&4&&RR(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(vr=(c=vr)||u,Ao(e,t),vr=c):Ao(e,t),Zo(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&(t.mode&1)!==0)for(ot=t,u=t.child;u!==null;){for(f=ot=u;ot!==null;){switch(h=ot,d=h.child,h.tag){case 0:case 11:case 14:case 15:Lp(4,h,h.return);break;case 1:Vh(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Jn(i,n,m)}}break;case 5:Vh(h,h.return);break;case 22:if(h.memoizedState!==null){DR(f);continue}}d!==null?(d.return=h,ot=d):DR(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=S5("display",o))}catch(m){Jn(t,t.return,m)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Jn(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ao(e,t),Zo(t),i&4&&RR(t);break;case 21:break;default:Ao(e,t),Zo(t)}}function Zo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($k(n)){var i=n;break e}n=n.return}throw Error(Ye(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Zp(r,""),i.flags&=-33);var s=BR(t);Zb(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=BR(t);$b(t,a,o);break;default:throw Error(Ye(161))}}catch(l){Jn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sH(t,e,n){ot=t,tO(t)}function tO(t,e,n){for(var i=(t.mode&1)!==0;ot!==null;){var r=ot,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||P1;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||vr;a=P1;var c=vr;if(P1=o,(vr=l)&&!c)for(ot=r;ot!==null;)o=ot,l=o.child,o.tag===22&&o.memoizedState!==null?LR(r):l!==null?(l.return=o,ot=l):LR(r);for(;s!==null;)ot=s,tO(s),s=s.sibling;ot=r,P1=a,vr=c}PR(t)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,ot=s):PR(t)}}function PR(t){for(;ot!==null;){var e=ot;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:vr||Y_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vr)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:So(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mR(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&im(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}vr||e.flags&512&&Kb(e)}catch(h){Jn(e,e.return,h)}}if(e===t){ot=null;break}if(n=e.sibling,n!==null){n.return=e.return,ot=n;break}ot=e.return}}function DR(t){for(;ot!==null;){var e=ot;if(e===t){ot=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ot=n;break}ot=e.return}}function LR(t){for(;ot!==null;){var e=ot;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Y_(4,e)}catch(l){Jn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Jn(e,r,l)}}var s=e.return;try{Kb(e)}catch(l){Jn(e,s,l)}break;case 5:var o=e.return;try{Kb(e)}catch(l){Jn(e,o,l)}}}catch(l){Jn(e,e.return,l)}if(e===t){ot=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ot=a;break}ot=e.return}}var oH=Math.ceil,i_=dl.ReactCurrentDispatcher,dM=dl.ReactCurrentOwner,ao=dl.ReactCurrentBatchConfig,sn=0,Oi=null,di=null,tr=0,_s=0,Wh=Sc(0),Ei=0,pm=null,Xu=0,X_=0,pM=0,Fp=null,$r=null,mM=0,_d=1/0,Ha=null,r_=!1,eS=null,uc=null,D1=!1,Kl=null,s_=0,kp=0,tS=null,Av=-1,vv=0;function Gr(){return(sn&6)!==0?si():Av!==-1?Av:Av=si()}function fc(t){return(t.mode&1)===0?1:(sn&2)!==0&&tr!==0?tr&-tr:HQ.transition!==null?(vv===0&&(vv=U5()),vv):(t=An,t!==0||(t=window.event,t=t===void 0?16:W5(t.type)),t)}function Lo(t,e,n,i){if(50<kp)throw kp=0,tS=null,Error(Ye(185));Wm(t,n,i),((sn&2)===0||t!==Oi)&&(t===Oi&&((sn&2)===0&&(X_|=n),Ei===4&&Xl(t,tr)),ss(t,i),n===1&&sn===0&&(e.mode&1)===0&&(_d=si()+500,W_&&Cc()))}function ss(t,e){var n=t.callbackNode;H7(t,e);var i=Qv(t,t===Oi?tr:0);if(i===0)n!==null&&HB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&HB(n),e===1)t.tag===0?QQ(FR.bind(null,t)):uk(FR.bind(null,t)),UQ(function(){(sn&6)===0&&Cc()}),n=null;else{switch(N5(i)){case 1:n=GC;break;case 4:n=k5;break;case 16:n=Gv;break;case 536870912:n=O5;break;default:n=Gv}n=cO(n,nO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nO(t,e){if(Av=-1,vv=0,(sn&6)!==0)throw Error(Ye(327));var n=t.callbackNode;if(rd()&&t.callbackNode!==n)return null;var i=Qv(t,t===Oi?tr:0);if(i===0)return null;if((i&30)!==0||(i&t.expiredLanes)!==0||e)e=o_(t,i);else{e=i;var r=sn;sn|=2;var s=rO();(Oi!==t||tr!==e)&&(Ha=null,_d=si()+500,Bu(t,e));do try{cH();break}catch(a){iO(t,a)}while(1);eM(),i_.current=s,sn=r,di!==null?e=0:(Oi=null,tr=0,e=Ei)}if(e!==0){if(e===2&&(r=Ib(t),r!==0&&(i=r,e=nS(t,r))),e===1)throw n=pm,Bu(t,0),Xl(t,i),ss(t,si()),n;if(e===6)Xl(t,i);else{if(r=t.current.alternate,(i&30)===0&&!aH(r)&&(e=o_(t,i),e===2&&(s=Ib(t),s!==0&&(i=s,e=nS(t,s))),e===1))throw n=pm,Bu(t,0),Xl(t,i),ss(t,si()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Ye(345));case 2:au(t,$r,Ha);break;case 3:if(Xl(t,i),(i&130023424)===i&&(e=mM+500-si(),10<e)){if(Qv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Gr(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=kb(au.bind(null,t,$r,Ha),e);break}au(t,$r,Ha);break;case 4:if(Xl(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Do(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=si()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*oH(i/1960))-i,10<i){t.timeoutHandle=kb(au.bind(null,t,$r,Ha),i);break}au(t,$r,Ha);break;case 5:au(t,$r,Ha);break;default:throw Error(Ye(329))}}}return ss(t,si()),t.callbackNode===n?nO.bind(null,t):null}function nS(t,e){var n=Fp;return t.current.memoizedState.isDehydrated&&(Bu(t,e).flags|=256),t=o_(t,e),t!==2&&(e=$r,$r=n,e!==null&&iS(e)),t}function iS(t){$r===null?$r=t:$r.push.apply($r,t)}function aH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!No(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xl(t,e){for(e&=~pM,e&=~X_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Do(e),i=1<<n;t[n]=-1,e&=~i}}function FR(t){if((sn&6)!==0)throw Error(Ye(327));rd();var e=Qv(t,0);if((e&1)===0)return ss(t,si()),null;var n=o_(t,e);if(t.tag!==0&&n===2){var i=Ib(t);i!==0&&(e=i,n=nS(t,i))}if(n===1)throw n=pm,Bu(t,0),Xl(t,e),ss(t,si()),n;if(n===6)throw Error(Ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,au(t,$r,Ha),ss(t,si()),null}function gM(t,e){var n=sn;sn|=1;try{return t(e)}finally{sn=n,sn===0&&(_d=si()+500,W_&&Cc())}}function Ju(t){Kl!==null&&Kl.tag===0&&(sn&6)===0&&rd();var e=sn;sn|=1;var n=ao.transition,i=An;try{if(ao.transition=null,An=1,t)return t()}finally{An=i,ao.transition=n,sn=e,(sn&6)===0&&Cc()}}function AM(){_s=Wh.current,Tn(Wh)}function Bu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OQ(n)),di!==null)for(n=di.return;n!==null;){var i=n;switch(KC(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&qv();break;case 3:Ad(),Tn(is),Tn(br),oM();break;case 5:sM(i);break;case 4:Ad();break;case 13:Tn(zn);break;case 19:Tn(zn);break;case 10:tM(i.type._context);break;case 22:case 23:AM()}n=n.return}if(Oi=t,di=t=hc(t.current,null),tr=_s=e,Ei=0,pm=null,pM=X_=Xu=0,$r=Fp=null,Au!==null){for(e=0;e<Au.length;e++)if(n=Au[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Au=null}return t}function iO(t,e){do{var n=di;try{if(eM(),pv.current=n_,t_){for(var i=Vn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}t_=!1}if(Yu=0,Li=wi=Vn=null,Dp=!1,fm=0,dM.current=null,n===null||n.return===null){Ei=1,pm=e,di=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=tr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if((u.mode&1)===0&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=wR(o);if(d!==null){d.flags&=-257,ER(d,o,a,s,e),d.mode&1&&xR(s,c,e),e=d,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if((e&1)===0){xR(s,c,e),vM();break e}l=Error(Ye(426))}}else if(Ln&&a.mode&1){var A=wR(o);if(A!==null){(A.flags&65536)===0&&(A.flags|=256),ER(A,o,a,s,e),$C(vd(l,a));break e}}s=l=vd(l,a),Ei!==4&&(Ei=2),Fp===null?Fp=[s]:Fp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=zk(s,l,e);pR(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(uc===null||!uc.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Gk(s,a,e);pR(s,w);break e}}s=s.return}while(s!==null)}oO(n)}catch(E){e=E,di===n&&n!==null&&(di=n=n.return);continue}break}while(1)}function rO(){var t=i_.current;return i_.current=n_,t===null?n_:t}function vM(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Oi===null||(Xu&268435455)===0&&(X_&268435455)===0||Xl(Oi,tr)}function o_(t,e){var n=sn;sn|=2;var i=rO();(Oi!==t||tr!==e)&&(Ha=null,Bu(t,e));do try{lH();break}catch(r){iO(t,r)}while(1);if(eM(),sn=n,i_.current=i,di!==null)throw Error(Ye(261));return Oi=null,tr=0,Ei}function lH(){for(;di!==null;)sO(di)}function cH(){for(;di!==null&&!L7();)sO(di)}function sO(t){var e=lO(t.alternate,t,_s);t.memoizedProps=t.pendingProps,e===null?oO(t):di=e,dM.current=null}function oO(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=tH(n,e,_s),n!==null){di=n;return}}else{if(n=nH(n,e),n!==null){n.flags&=32767,di=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ei=6,di=null;return}}if(e=e.sibling,e!==null){di=e;return}di=e=t}while(e!==null);Ei===0&&(Ei=5)}function au(t,e,n){var i=An,r=ao.transition;try{ao.transition=null,An=1,uH(t,e,n,i)}finally{ao.transition=r,An=i}return null}function uH(t,e,n,i){do rd();while(Kl!==null);if((sn&6)!==0)throw Error(Ye(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ye(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(V7(t,s),t===Oi&&(di=Oi=null,tr=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||D1||(D1=!0,cO(Gv,function(){return rd(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=ao.transition,ao.transition=null;var o=An;An=1;var a=sn;sn|=4,dM.current=null,rH(t,n),eO(n,t),BQ(Lb),Hv=!!Db,Lb=Db=null,t.current=n,sH(n),F7(),sn=a,An=o,ao.transition=s}else t.current=n;if(D1&&(D1=!1,Kl=t,s_=r),s=t.pendingLanes,s===0&&(uc=null),U7(n.stateNode),ss(t,si()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(r_)throw r_=!1,t=eS,eS=null,t;return(s_&1)!==0&&t.tag!==0&&rd(),s=t.pendingLanes,(s&1)!==0?t===tS?kp++:(kp=0,tS=t):kp=0,Cc(),null}function rd(){if(Kl!==null){var t=N5(s_),e=ao.transition,n=An;try{if(ao.transition=null,An=16>t?16:t,Kl===null)var i=!1;else{if(t=Kl,Kl=null,s_=0,(sn&6)!==0)throw Error(Ye(331));var r=sn;for(sn|=4,ot=t.current;ot!==null;){var s=ot,o=s.child;if((ot.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ot=c;ot!==null;){var u=ot;switch(u.tag){case 0:case 11:case 15:Lp(8,u,s)}var f=u.child;if(f!==null)f.return=u,ot=f;else for(;ot!==null;){u=ot;var h=u.sibling,d=u.return;if(Kk(u),u===c){ot=null;break}if(h!==null){h.return=d,ot=h;break}ot=d}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var A=m.sibling;m.sibling=null,m=A}while(m!==null)}}ot=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ot=o;else e:for(;ot!==null;){if(s=ot,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Lp(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ot=v;break e}ot=s.return}}var y=t.current;for(ot=y;ot!==null;){o=ot;var x=o.child;if((o.subtreeFlags&2064)!==0&&x!==null)x.return=o,ot=x;else e:for(o=y;ot!==null;){if(a=ot,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Y_(9,a)}}catch(E){Jn(a,a.return,E)}if(a===o){ot=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ot=w;break e}ot=a.return}}if(sn=r,Cc(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(z_,t)}catch{}i=!0}return i}finally{An=n,ao.transition=e}}return!1}function kR(t,e,n){e=vd(n,e),e=zk(t,e,1),t=cc(t,e,1),e=Gr(),t!==null&&(Wm(t,1,e),ss(t,e))}function Jn(t,e,n){if(t.tag===3)kR(t,t,n);else for(;e!==null;){if(e.tag===3){kR(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(uc===null||!uc.has(i))){t=vd(n,t),t=Gk(e,t,1),e=cc(e,t,1),t=Gr(),e!==null&&(Wm(e,1,t),ss(e,t));break}}e=e.return}}function fH(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Gr(),t.pingedLanes|=t.suspendedLanes&n,Oi===t&&(tr&n)===n&&(Ei===4||Ei===3&&(tr&130023424)===tr&&500>si()-mM?Bu(t,0):pM|=n),ss(t,e)}function aO(t,e){e===0&&((t.mode&1)===0?e=1:(e=E1,E1<<=1,(E1&130023424)===0&&(E1=4194304)));var n=Gr();t=ol(t,e),t!==null&&(Wm(t,e,n),ss(t,n))}function hH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aO(t,n)}function dH(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ye(314))}i!==null&&i.delete(e),aO(t,n)}var lO;lO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||is.current)es=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return es=!1,eH(t,e,n);es=(t.flags&131072)!==0}else es=!1,Ln&&(e.flags&1048576)!==0&&fk(e,Jv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;gv(t,e),t=e.pendingProps;var r=pd(e,br.current);id(e,n),r=lM(null,e,i,t,r,n);var s=cM();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rs(i)?(s=!0,Yv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,iM(e),r.updater=j_,e.stateNode=r,r._reactInternals=e,Hb(e,i,t,n),e=jb(null,e,i,!0,s,n)):(e.tag=0,Ln&&s&&JC(e),Or(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(gv(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=mH(i),t=So(i,t),r){case 0:e=Wb(null,e,i,t,n);break e;case 1:e=CR(null,e,i,t,n);break e;case 11:e=bR(null,e,i,t,n);break e;case 14:e=SR(null,e,i,So(i.type,t),n);break e}throw Error(Ye(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:So(i,r),Wb(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:So(i,r),CR(t,e,i,r,n);case 3:e:{if(Wk(e),t===null)throw Error(Ye(387));i=e.pendingProps,s=e.memoizedState,r=s.element,mk(t,e),Zv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vd(Error(Ye(423)),e),e=MR(t,e,i,n,r);break e}else if(i!==r){r=vd(Error(Ye(424)),e),e=MR(t,e,i,n,r);break e}else for(ws=lc(e.stateNode.containerInfo.firstChild),Cs=e,Ln=!0,Mo=null,n=_k(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(md(),i===r){e=al(t,e,n);break e}Or(t,e,i,n)}e=e.child}return e;case 5:return yk(e),t===null&&zb(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Fb(i,r)?o=null:s!==null&&Fb(i,s)&&(e.flags|=32),Vk(t,e),Or(t,e,o,n),e.child;case 6:return t===null&&zb(e),null;case 13:return jk(t,e,n);case 4:return rM(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=gd(e,null,i,n):Or(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:So(i,r),bR(t,e,i,r,n);case 7:return Or(t,e,e.pendingProps,n),e.child;case 8:return Or(t,e,e.pendingProps.children,n),e.child;case 12:return Or(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,En(Kv,i._currentValue),i._currentValue=o,s!==null)if(No(s.value,o)){if(s.children===r.children&&!is.current){e=al(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=nl(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gb(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ye(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gb(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Or(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,id(e,n),r=lo(r),i=i(r),e.flags|=1,Or(t,e,i,n),e.child;case 14:return i=e.type,r=So(i,e.pendingProps),r=So(i.type,r),SR(t,e,i,r,n);case 15:return Qk(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:So(i,r),gv(t,e),e.tag=1,rs(i)?(t=!0,Yv(e)):t=!1,id(e,n),Ak(e,i,r),Hb(e,i,r,n),jb(null,e,i,!0,t,n);case 19:return qk(t,e,n);case 22:return Hk(t,e,n)}throw Error(Ye(156,e.tag))};function cO(t,e){return F5(t,e)}function pH(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ro(t,e,n,i){return new pH(t,e,n,i)}function _M(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mH(t){if(typeof t=="function")return _M(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UC)return 11;if(t===NC)return 14}return 2}function hc(t,e){var n=t.alternate;return n===null?(n=ro(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _v(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")_M(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fh:return Ru(n.children,r,s,e);case OC:o=8,r|=8;break;case db:return t=ro(12,n,e,r|2),t.elementType=db,t.lanes=s,t;case pb:return t=ro(13,n,e,r),t.elementType=pb,t.lanes=s,t;case mb:return t=ro(19,n,e,r),t.elementType=mb,t.lanes=s,t;case v5:return J_(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g5:o=10;break e;case A5:o=9;break e;case UC:o=11;break e;case NC:o=14;break e;case Vl:o=16,i=null;break e}throw Error(Ye(130,t==null?t:typeof t,""))}return e=ro(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ru(t,e,n,i){return t=ro(7,t,i,e),t.lanes=n,t}function J_(t,e,n,i){return t=ro(22,t,i,e),t.elementType=v5,t.lanes=n,t.stateNode={isHidden:!1},t}function U2(t,e,n){return t=ro(6,t,null,e),t.lanes=n,t}function N2(t,e,n){return e=ro(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gH(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_2(0),this.expirationTimes=_2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_2(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yM(t,e,n,i,r,s,o,a,l){return t=new gH(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ro(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iM(s),t}function AH(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lh,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function uO(t){if(!t)return _c;t=t._reactInternals;e:{if(mf(t)!==t||t.tag!==1)throw Error(Ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ye(171))}if(t.tag===1){var n=t.type;if(rs(n))return ck(t,n,e)}return e}function fO(t,e,n,i,r,s,o,a,l){return t=yM(n,i,!0,t,r,s,o,a,l),t.context=uO(null),n=t.current,i=Gr(),r=fc(n),s=nl(i,r),s.callback=e!=null?e:null,cc(n,s,r),t.current.lanes=r,Wm(t,r,i),ss(t,i),t}function K_(t,e,n,i){var r=e.current,s=Gr(),o=fc(r);return n=uO(n),e.context===null?e.context=n:e.pendingContext=n,e=nl(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=cc(r,e,o),t!==null&&(Lo(t,r,o,s),dv(t,r,o)),o}function a_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xM(t,e){OR(t,e),(t=t.alternate)&&OR(t,e)}function vH(){return null}var hO=typeof reportError=="function"?reportError:function(t){console.error(t)};function wM(t){this._internalRoot=t}$_.prototype.render=wM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ye(409));K_(t,e,null,null)};$_.prototype.unmount=wM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ju(function(){K_(null,t,null,null)}),e[sl]=null}};function $_(t){this._internalRoot=t}$_.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q5();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yl.length&&e!==0&&e<Yl[n].priority;n++);Yl.splice(n,0,t),n===0&&V5(t)}};function EM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Z_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function UR(){}function _H(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=a_(o);s.call(c)}}var o=fO(e,i,t,0,null,!1,!1,"",UR);return t._reactRootContainer=o,t[sl]=o.current,om(t.nodeType===8?t.parentNode:t),Ju(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=a_(l);a.call(c)}}var l=yM(t,0,!1,null,null,!1,!1,"",UR);return t._reactRootContainer=l,t[sl]=l.current,om(t.nodeType===8?t.parentNode:t),Ju(function(){K_(e,l,n,i)}),l}function ey(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=a_(o);a.call(l)}}K_(e,o,t,r)}else o=_H(n,e,t,r,i);return a_(o)}z5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_p(e.pendingLanes);n!==0&&(QC(e,n|1),ss(e,si()),(sn&6)===0&&(_d=si()+500,Cc()))}break;case 13:Ju(function(){var i=ol(t,1);if(i!==null){var r=Gr();Lo(i,t,1,r)}}),xM(t,1)}};HC=function(t){if(t.tag===13){var e=ol(t,134217728);if(e!==null){var n=Gr();Lo(e,t,134217728,n)}xM(t,134217728)}};G5=function(t){if(t.tag===13){var e=fc(t),n=ol(t,e);if(n!==null){var i=Gr();Lo(n,t,e,i)}xM(t,e)}};Q5=function(){return An};H5=function(t,e){var n=An;try{return An=t,e()}finally{An=n}};Sb=function(t,e,n){switch(e){case"input":if(vb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=V_(i);if(!r)throw Error(Ye(90));y5(i),vb(i,r)}}}break;case"textarea":w5(t,n);break;case"select":e=n.value,e!=null&&Zh(t,!!n.multiple,e,!1)}};T5=gM;B5=Ju;var yH={usingClientEntryPoint:!1,Events:[qm,Nh,V_,M5,I5,gM]},N0={findFiberByHostInstance:gu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xH={bundleType:N0.bundleType,version:N0.version,rendererPackageName:N0.rendererPackageName,rendererConfig:N0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D5(t),t===null?null:t.stateNode},findFiberByHostInstance:N0.findFiberByHostInstance||vH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L1.isDisabled&&L1.supportsFiber)try{z_=L1.inject(xH),ma=L1}catch{}}Ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yH;Ds.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!EM(e))throw Error(Ye(200));return AH(t,e,null,n)};Ds.createRoot=function(t,e){if(!EM(t))throw Error(Ye(299));var n=!1,i="",r=hO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yM(t,1,!1,null,null,n,!1,i,r),t[sl]=e.current,om(t.nodeType===8?t.parentNode:t),new wM(e)};Ds.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ye(188)):(t=Object.keys(t).join(","),Error(Ye(268,t)));return t=D5(e),t=t===null?null:t.stateNode,t};Ds.flushSync=function(t){return Ju(t)};Ds.hydrate=function(t,e,n){if(!Z_(e))throw Error(Ye(200));return ey(null,t,e,!0,n)};Ds.hydrateRoot=function(t,e,n){if(!EM(t))throw Error(Ye(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=hO;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fO(e,null,t,1,n!=null?n:null,r,!1,s,o),t[sl]=e.current,om(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new $_(e)};Ds.render=function(t,e,n){if(!Z_(e))throw Error(Ye(200));return ey(null,t,e,!1,n)};Ds.unmountComponentAtNode=function(t){if(!Z_(t))throw Error(Ye(40));return t._reactRootContainer?(Ju(function(){ey(null,null,t,!1,function(){t._reactRootContainer=null,t[sl]=null})}),!0):!1};Ds.unstable_batchedUpdates=gM;Ds.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Z_(n))throw Error(Ye(200));if(t==null||t._reactInternals===void 0)throw Error(Ye(38));return ey(t,e,n,!1,i)};Ds.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Ds})(r5);var bM,NR=r5.exports;bM=fb.createRoot=NR.createRoot,fb.hydrateRoot=NR.hydrateRoot;var dO={exports:{}},SM={exports:{}},pO=function(e,n){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(n,r)}},wH=pO,CM=Object.prototype.toString,MM=function(t){return function(e){var n=CM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function gf(t){return t=t.toLowerCase(),function(n){return MM(n)===t}}function IM(t){return Array.isArray(t)}function l_(t){return typeof t>"u"}function EH(t){return t!==null&&!l_(t)&&t.constructor!==null&&!l_(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var mO=gf("ArrayBuffer");function bH(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&mO(t.buffer),e}function SH(t){return typeof t=="string"}function CH(t){return typeof t=="number"}function gO(t){return t!==null&&typeof t=="object"}function yv(t){if(MM(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var MH=gf("Date"),IH=gf("File"),TH=gf("Blob"),BH=gf("FileList");function TM(t){return CM.call(t)==="[object Function]"}function RH(t){return gO(t)&&TM(t.pipe)}function PH(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||CM.call(t)===e||TM(t.toString)&&t.toString()===e)}var DH=gf("URLSearchParams");function LH(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function FH(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function BM(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),IM(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function rS(){var t={};function e(r,s){yv(t[s])&&yv(r)?t[s]=rS(t[s],r):yv(r)?t[s]=rS({},r):IM(r)?t[s]=r.slice():t[s]=r}for(var n=0,i=arguments.length;n<i;n++)BM(arguments[n],e);return t}function kH(t,e,n){return BM(e,function(r,s){n&&typeof r=="function"?t[s]=wH(r,n):t[s]=r}),t}function OH(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function UH(t,e,n,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function NH(t,e,n){var i,r,s,o={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],o[s]||(e[s]=t[s],o[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function zH(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var i=t.indexOf(e,n);return i!==-1&&i===n}function GH(t){if(!t)return null;var e=t.length;if(l_(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var QH=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),ir={isArray:IM,isArrayBuffer:mO,isBuffer:EH,isFormData:PH,isArrayBufferView:bH,isString:SH,isNumber:CH,isObject:gO,isPlainObject:yv,isUndefined:l_,isDate:MH,isFile:IH,isBlob:TH,isFunction:TM,isStream:RH,isURLSearchParams:DH,isStandardBrowserEnv:FH,forEach:BM,merge:rS,extend:kH,trim:LH,stripBOM:OH,inherits:UH,toFlatObject:NH,kindOf:MM,kindOfTest:gf,endsWith:zH,toArray:GH,isTypedArray:QH,isFileList:BH},Yf=ir;function zR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var AO=function(e,n,i){if(!n)return e;var r;if(i)r=i(n);else if(Yf.isURLSearchParams(n))r=n.toString();else{var s=[];Yf.forEach(n,function(l,c){l===null||typeof l>"u"||(Yf.isArray(l)?c=c+"[]":l=[l],Yf.forEach(l,function(f){Yf.isDate(f)?f=f.toISOString():Yf.isObject(f)&&(f=JSON.stringify(f)),s.push(zR(c)+"="+zR(f))}))}),r=s.join("&")}if(r){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e},HH=ir;function ty(){this.handlers=[]}ty.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};ty.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ty.prototype.forEach=function(e){HH.forEach(this.handlers,function(i){i!==null&&e(i)})};var VH=ty,WH=ir,jH=function(e,n){WH.forEach(e,function(r,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=r,delete e[s])})},vO=ir;function yd(t,e,n,i,r){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}vO.inherits(yd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var _O=yd.prototype,yO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){yO[t]={value:t}});Object.defineProperties(yd,yO);Object.defineProperty(_O,"isAxiosError",{value:!0});yd.from=function(t,e,n,i,r,s){var o=Object.create(_O);return vO.toFlatObject(t,o,function(l){return l!==Error.prototype}),yd.call(o,t.message,e,n,i,r),o.name=t.name,s&&Object.assign(o,s),o};var zd=yd,xO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vo=ir;function qH(t,e){e=e||new FormData;var n=[];function i(s){return s===null?"":vo.isDate(s)?s.toISOString():vo.isArrayBuffer(s)||vo.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function r(s,o){if(vo.isPlainObject(s)||vo.isArray(s)){if(n.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);n.push(s),vo.forEach(s,function(l,c){if(!vo.isUndefined(l)){var u=o?o+"."+c:c,f;if(l&&!o&&typeof l=="object"){if(vo.endsWith(c,"{}"))l=JSON.stringify(l);else if(vo.endsWith(c,"[]")&&(f=vo.toArray(l))){f.forEach(function(h){!vo.isUndefined(h)&&e.append(u,i(h))});return}}r(l,u)}}),n.pop()}else e.append(o,i(s))}return r(t),e}var wO=qH,z2,GR;function YH(){if(GR)return z2;GR=1;var t=zd;return z2=function(n,i,r){var s=r.config.validateStatus;!r.status||!s||s(r.status)?n(r):i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},z2}var G2,QR;function XH(){if(QR)return G2;QR=1;var t=ir;return G2=t.isStandardBrowserEnv()?function(){return{write:function(i,r,s,o,a,l){var c=[];c.push(i+"="+encodeURIComponent(r)),t.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),t.isString(o)&&c.push("path="+o),t.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),G2}var JH=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},KH=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},$H=JH,ZH=KH,EO=function(e,n){return e&&!$H(n)?ZH(e,n):n},Q2,HR;function eV(){if(HR)return Q2;HR=1;var t=ir,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Q2=function(i){var r={},s,o,a;return i&&t.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),s=t.trim(c.substr(0,a)).toLowerCase(),o=t.trim(c.substr(a+1)),s){if(r[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([o]):r[s]=r[s]?r[s]+", "+o:o}}),r},Q2}var H2,VR;function tV(){if(VR)return H2;VR=1;var t=ir;return H2=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function s(o){var a=o;return n&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=s(window.location.href),function(a){var l=t.isString(a)?s(a):a;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}(),H2}var V2,WR;function ny(){if(WR)return V2;WR=1;var t=zd,e=ir;function n(i){t.call(this,i==null?"canceled":i,t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(n,t,{__CANCEL__:!0}),V2=n,V2}var W2,jR;function nV(){return jR||(jR=1,W2=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}),W2}var j2,qR;function YR(){if(qR)return j2;qR=1;var t=ir,e=YH(),n=XH(),i=AO,r=EO,s=eV(),o=tV(),a=xO,l=zd,c=ny(),u=nV();return j2=function(h){return new Promise(function(p,m){var A=h.data,v=h.headers,y=h.responseType,x;function w(){h.cancelToken&&h.cancelToken.unsubscribe(x),h.signal&&h.signal.removeEventListener("abort",x)}t.isFormData(A)&&t.isStandardBrowserEnv()&&delete v["Content-Type"];var E=new XMLHttpRequest;if(h.auth){var S=h.auth.username||"",M=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";v.Authorization="Basic "+btoa(S+":"+M)}var b=r(h.baseURL,h.url);E.open(h.method.toUpperCase(),i(b,h.params,h.paramsSerializer),!0),E.timeout=h.timeout;function B(){if(!!E){var D="getAllResponseHeaders"in E?s(E.getAllResponseHeaders()):null,N=!y||y==="text"||y==="json"?E.responseText:E.response,O={data:N,status:E.status,statusText:E.statusText,headers:D,config:h,request:E};e(function(q){p(q),w()},function(q){m(q),w()},O),E=null}}if("onloadend"in E?E.onloadend=B:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(B)},E.onabort=function(){!E||(m(new l("Request aborted",l.ECONNABORTED,h,E)),E=null)},E.onerror=function(){m(new l("Network Error",l.ERR_NETWORK,h,E,E)),E=null},E.ontimeout=function(){var N=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",O=h.transitional||a;h.timeoutErrorMessage&&(N=h.timeoutErrorMessage),m(new l(N,O.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,h,E)),E=null},t.isStandardBrowserEnv()){var T=(h.withCredentials||o(b))&&h.xsrfCookieName?n.read(h.xsrfCookieName):void 0;T&&(v[h.xsrfHeaderName]=T)}"setRequestHeader"in E&&t.forEach(v,function(N,O){typeof A>"u"&&O.toLowerCase()==="content-type"?delete v[O]:E.setRequestHeader(O,N)}),t.isUndefined(h.withCredentials)||(E.withCredentials=!!h.withCredentials),y&&y!=="json"&&(E.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&E.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(x=function(D){!E||(m(!D||D&&D.type?new c:D),E.abort(),E=null)},h.cancelToken&&h.cancelToken.subscribe(x),h.signal&&(h.signal.aborted?x():h.signal.addEventListener("abort",x))),A||(A=null);var k=u(b);if(k&&["http","https","file"].indexOf(k)===-1){m(new l("Unsupported protocol "+k+":",l.ERR_BAD_REQUEST,h));return}E.send(A)})},j2}var q2,XR;function iV(){return XR||(XR=1,q2=null),q2}var Di=ir,JR=jH,KR=zd,rV=xO,sV=wO,oV={"Content-Type":"application/x-www-form-urlencoded"};function $R(t,e){!Di.isUndefined(t)&&Di.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function aV(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=YR()),t}function lV(t,e,n){if(Di.isString(t))try{return(e||JSON.parse)(t),Di.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}var iy={transitional:rV,adapter:aV(),transformRequest:[function(e,n){if(JR(n,"Accept"),JR(n,"Content-Type"),Di.isFormData(e)||Di.isArrayBuffer(e)||Di.isBuffer(e)||Di.isStream(e)||Di.isFile(e)||Di.isBlob(e))return e;if(Di.isArrayBufferView(e))return e.buffer;if(Di.isURLSearchParams(e))return $R(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Di.isObject(e),r=n&&n["Content-Type"],s;if((s=Di.isFileList(e))||i&&r==="multipart/form-data"){var o=this.env&&this.env.FormData;return sV(s?{"files[]":e}:e,o&&new o)}else if(i||r==="application/json")return $R(n,"application/json"),lV(e);return e}],transformResponse:[function(e){var n=this.transitional||iy.transitional,i=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||r&&Di.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?KR.from(o,KR.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:iV()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Di.forEach(["delete","get","head"],function(e){iy.headers[e]={}});Di.forEach(["post","put","patch"],function(e){iy.headers[e]=Di.merge(oV)});var RM=iy,cV=ir,uV=RM,fV=function(e,n,i){var r=this||uV;return cV.forEach(i,function(o){e=o.call(r,e,n)}),e},Y2,ZR;function bO(){return ZR||(ZR=1,Y2=function(e){return!!(e&&e.__CANCEL__)}),Y2}var e4=ir,X2=fV,hV=bO(),dV=RM,pV=ny();function J2(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pV}var mV=function(e){J2(e),e.headers=e.headers||{},e.data=X2.call(e,e.data,e.headers,e.transformRequest),e.headers=e4.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),e4.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var n=e.adapter||dV.adapter;return n(e).then(function(r){return J2(e),r.data=X2.call(e,r.data,r.headers,e.transformResponse),r},function(r){return hV(r)||(J2(e),r&&r.response&&(r.response.data=X2.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})},ms=ir,SO=function(e,n){n=n||{};var i={};function r(u,f){return ms.isPlainObject(u)&&ms.isPlainObject(f)?ms.merge(u,f):ms.isPlainObject(f)?ms.merge({},f):ms.isArray(f)?f.slice():f}function s(u){if(ms.isUndefined(n[u])){if(!ms.isUndefined(e[u]))return r(void 0,e[u])}else return r(e[u],n[u])}function o(u){if(!ms.isUndefined(n[u]))return r(void 0,n[u])}function a(u){if(ms.isUndefined(n[u])){if(!ms.isUndefined(e[u]))return r(void 0,e[u])}else return r(void 0,n[u])}function l(u){if(u in n)return r(e[u],n[u]);if(u in e)return r(void 0,e[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return ms.forEach(Object.keys(e).concat(Object.keys(n)),function(f){var h=c[f]||s,d=h(f);ms.isUndefined(d)&&h!==l||(i[f]=d)}),i},K2,t4;function CO(){return t4||(t4=1,K2={version:"0.27.2"}),K2}var gV=CO().version,jl=zd,PM={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){PM[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var n4={};PM.transitional=function(e,n,i){function r(s,o){return"[Axios v"+gV+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,a){if(e===!1)throw new jl(r(o," has been removed"+(n?" in "+n:"")),jl.ERR_DEPRECATED);return n&&!n4[o]&&(n4[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function AV(t,e,n){if(typeof t!="object")throw new jl("options must be an object",jl.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),r=i.length;r-- >0;){var s=i[r],o=e[s];if(o){var a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new jl("option "+s+" must be "+l,jl.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jl("Unknown option "+s,jl.ERR_BAD_OPTION)}}var vV={assertOptions:AV,validators:PM},MO=ir,_V=AO,i4=VH,r4=mV,ry=SO,yV=EO,IO=vV,Xf=IO.validators;function xd(t){this.defaults=t,this.interceptors={request:new i4,response:new i4}}xd.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ry(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&IO.assertOptions(i,{silentJSONParsing:Xf.transitional(Xf.boolean),forcedJSONParsing:Xf.transitional(Xf.boolean),clarifyTimeoutError:Xf.transitional(Xf.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(n)===!1||(s=s&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var a;if(!s){var l=[r4,void 0];for(Array.prototype.unshift.apply(l,r),l=l.concat(o),a=Promise.resolve(n);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=n;r.length;){var u=r.shift(),f=r.shift();try{c=u(c)}catch(h){f(h);break}}try{a=r4(c)}catch(h){return Promise.reject(h)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};xd.prototype.getUri=function(e){e=ry(this.defaults,e);var n=yV(e.baseURL,e.url);return _V(n,e.params,e.paramsSerializer)};MO.forEach(["delete","get","head","options"],function(e){xd.prototype[e]=function(n,i){return this.request(ry(i||{},{method:e,url:n,data:(i||{}).data}))}});MO.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,a){return this.request(ry(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xd.prototype[e]=n(),xd.prototype[e+"Form"]=n(!0)});var xV=xd,$2,s4;function wV(){if(s4)return $2;s4=1;var t=ny();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var r=this;this.promise.then(function(s){if(!!r._listeners){var o,a=r._listeners.length;for(o=0;o<a;o++)r._listeners[o](s);r._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){r.subscribe(l),o=l}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},n(function(o){r.reason||(r.reason=new t(o),i(r.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(!!this._listeners){var r=this._listeners.indexOf(i);r!==-1&&this._listeners.splice(r,1)}},e.source=function(){var i,r=new e(function(o){i=o});return{token:r,cancel:i}},$2=e,$2}var Z2,o4;function EV(){return o4||(o4=1,Z2=function(e){return function(i){return e.apply(null,i)}}),Z2}var ew,a4;function bV(){if(a4)return ew;a4=1;var t=ir;return ew=function(n){return t.isObject(n)&&n.isAxiosError===!0},ew}var l4=ir,SV=pO,xv=xV,CV=SO,MV=RM;function TO(t){var e=new xv(t),n=SV(xv.prototype.request,e);return l4.extend(n,xv.prototype,e),l4.extend(n,e),n.create=function(r){return TO(CV(t,r))},n}var os=TO(MV);os.Axios=xv;os.CanceledError=ny();os.CancelToken=wV();os.isCancel=bO();os.VERSION=CO().version;os.toFormData=wO;os.AxiosError=zd;os.Cancel=os.CanceledError;os.all=function(e){return Promise.all(e)};os.spread=EV();os.isAxiosError=bV();SM.exports=os;SM.exports.default=os;(function(t){t.exports=SM.exports})(dO);const IV=TC(dO.exports);var sy={exports:{}},oy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TV=R.exports,BV=Symbol.for("react.element"),RV=Symbol.for("react.fragment"),PV=Object.prototype.hasOwnProperty,DV=TV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LV={key:!0,ref:!0,__self:!0,__source:!0};function BO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)PV.call(e,i)&&!LV.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:BV,type:t,key:s,ref:o,props:r,_owner:DV.current}}oy.Fragment=RV;oy.jsx=BO;oy.jsxs=BO;(function(t){t.exports=oy})(sy);const Sr=sy.exports.Fragment,$=sy.exports.jsx,it=sy.exports.jsxs,c4=()=>{const[t,e]=R.exports.useState(),[n,i]=R.exports.useState("");R.exports.useEffect(()=>{console.log("je fredjhs"),t!==void 0&&o()},[t]);const r=async()=>{try{const l=await IV.get(`https://api.xrlab.cepegra.be/api/appusers?filters[pseudo][$eqi]=${n}`);l.data.data.length===0?e({id:-1,pseudo:""}):e({id:l.data.data[0].id,pseudo:l.data.data[0].attributes.pseudo})}catch(l){console.log("api down",l)}},s=l=>{l.preventDefault(),r(),i("")},o=()=>{if(t!==void 0)if(t.id===-1){const l=document.querySelector("#msgUser");l.classList.remove("hidden"),l.classList.add("msg"),setTimeout(()=>{l.classList.add("hidden"),l.classList.remove("msg")},2e3)}else localStorage.setItem("userInfo",JSON.stringify(t)),window.location.href="HomeScreen"};return it("main",{className:"flex flex-col justify-between h-screen",children:[it("button",{className:"btn btn-block py-2 rounded-none btn-primary",children:[$("i",{className:"fa-sharp fa-solid fa-download px-4"})," Installer l'application"]}),$("h1",{className:"text-2xl font-bold text-center",children:"je suis un logoooo lol"}),it("section",{className:"flex flex-col my-0 mx-auto w-4/5",children:[$("button",{className:"btn my-4",children:"Scanner QR Code"})," ",$("div",{className:"flex flex-col w-full border-opacity-50",children:$("div",{className:"divider",children:"Se connecter"})}),it("form",{className:"flex flex-col",onSubmit:s,children:[it("div",{className:"flex",children:[$("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",onChange:l=>{i(l.target.value)},value:n}),$("button",{className:"btn",role:"submit",children:$("i",{className:"fa-solid fa-chevron-right"})})]}),$("div",{className:"hidden",id:"msgUser",children:it("div",{children:[$("i",{className:"fa-lg fa-solid fa-triangle-exclamation"}),$("span",{children:"Erreur de pseudo"})]})})]})]}),it("footer",{className:"flex justify-around py-6",children:[$("img",{src:"./assets/logo-cepegra.png",alt:"Logo du Cepegra",width:"50",className:"w-3/12"}),$("img",{src:"./assets/logo-forem.png",alt:"Logo du Forem",className:"w-3/12"})]})]})},FV=()=>{const t=JSON.parse(localStorage.getItem("userInfo"));return it("main",{children:[$("section",{className:"border-2 border-red-700 h-2/3",children:t!==null&&it("p",{children:["Bonjour ",t.pseudo,", comment \xE7a va bien ? "]})}),it("section",{className:"w-screen bottom-8 flex flex-col gap-8 h-1/3",children:[$("a",{className:"shutter"}),it("button",{className:"btn btn-ar",children:[$("i",{className:"fa-solid fa-child-reaching"})," Jouons"]})]})]})},kV=()=>$("main",{children:$("h1",{children:"c'est nous qu'on l'a fait"})}),OV=()=>$("main",{children:$("h1",{children:"Notifications"})}),UV=()=>$("main",{children:$("h1",{children:"bonjour gallerie"})});function u4(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function DM(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:u4(e[n])&&u4(t[n])&&Object.keys(e[n]).length>0&&DM(t[n],e[n])})}const RO={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function as(){const t=typeof document<"u"?document:{};return DM(t,RO),t}const NV={document:RO,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Ni(){const t=typeof window<"u"?window:{};return DM(t,NV),t}function zV(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get(){return e},set(n){e.__proto__=n}})}class $l extends Array{constructor(e){typeof e=="number"?super(e):(super(...e||[]),zV(this))}}function Xm(t=[]){const e=[];return t.forEach(n=>{Array.isArray(n)?e.push(...Xm(n)):e.push(n)}),e}function PO(t,e){return Array.prototype.filter.call(t,e)}function GV(t){const e=[];for(let n=0;n<t.length;n+=1)e.indexOf(t[n])===-1&&e.push(t[n]);return e}function QV(t,e){if(typeof t!="string")return[t];const n=[],i=e.querySelectorAll(t);for(let r=0;r<i.length;r+=1)n.push(i[r]);return n}function lt(t,e){const n=Ni(),i=as();let r=[];if(!e&&t instanceof $l)return t;if(!t)return new $l(r);if(typeof t=="string"){const s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let o="div";s.indexOf("<li")===0&&(o="ul"),s.indexOf("<tr")===0&&(o="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(o="tr"),s.indexOf("<tbody")===0&&(o="table"),s.indexOf("<option")===0&&(o="select");const a=i.createElement(o);a.innerHTML=s;for(let l=0;l<a.childNodes.length;l+=1)r.push(a.childNodes[l])}else r=QV(t.trim(),e||i)}else if(t.nodeType||t===n||t===i)r.push(t);else if(Array.isArray(t)){if(t instanceof $l)return t;r=t}return new $l(GV(r))}lt.fn=$l.prototype;function HV(...t){const e=Xm(t.map(n=>n.split(" ")));return this.forEach(n=>{n.classList.add(...e)}),this}function VV(...t){const e=Xm(t.map(n=>n.split(" ")));return this.forEach(n=>{n.classList.remove(...e)}),this}function WV(...t){const e=Xm(t.map(n=>n.split(" ")));this.forEach(n=>{e.forEach(i=>{n.classList.toggle(i)})})}function jV(...t){const e=Xm(t.map(n=>n.split(" ")));return PO(this,n=>e.filter(i=>n.classList.contains(i)).length>0).length>0}function qV(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(let n=0;n<this.length;n+=1)if(arguments.length===2)this[n].setAttribute(t,e);else for(const i in t)this[n][i]=t[i],this[n].setAttribute(i,t[i]);return this}function YV(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function XV(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function JV(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?`${t}ms`:t;return this}function KV(...t){let[e,n,i,r]=t;typeof t[1]=="function"&&([e,i,r]=t,n=void 0),r||(r=!1);function s(c){const u=c.target;if(!u)return;const f=c.target.dom7EventData||[];if(f.indexOf(c)<0&&f.unshift(c),lt(u).is(n))i.apply(u,f);else{const h=lt(u).parents();for(let d=0;d<h.length;d+=1)lt(h[d]).is(n)&&i.apply(h[d],f)}}function o(c){const u=c&&c.target?c.target.dom7EventData||[]:[];u.indexOf(c)<0&&u.unshift(c),i.apply(this,u)}const a=e.split(" ");let l;for(let c=0;c<this.length;c+=1){const u=this[c];if(n)for(l=0;l<a.length;l+=1){const f=a[l];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[f]||(u.dom7LiveListeners[f]=[]),u.dom7LiveListeners[f].push({listener:i,proxyListener:s}),u.addEventListener(f,s,r)}else for(l=0;l<a.length;l+=1){const f=a[l];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[f]||(u.dom7Listeners[f]=[]),u.dom7Listeners[f].push({listener:i,proxyListener:o}),u.addEventListener(f,o,r)}}return this}function $V(...t){let[e,n,i,r]=t;typeof t[1]=="function"&&([e,i,r]=t,n=void 0),r||(r=!1);const s=e.split(" ");for(let o=0;o<s.length;o+=1){const a=s[o];for(let l=0;l<this.length;l+=1){const c=this[l];let u;if(!n&&c.dom7Listeners?u=c.dom7Listeners[a]:n&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[a]),u&&u.length)for(let f=u.length-1;f>=0;f-=1){const h=u[f];i&&h.listener===i||i&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===i?(c.removeEventListener(a,h.proxyListener,r),u.splice(f,1)):i||(c.removeEventListener(a,h.proxyListener,r),u.splice(f,1))}}}return this}function ZV(...t){const e=Ni(),n=t[0].split(" "),i=t[1];for(let r=0;r<n.length;r+=1){const s=n[r];for(let o=0;o<this.length;o+=1){const a=this[o];if(e.CustomEvent){const l=new e.CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0});a.dom7EventData=t.filter((c,u)=>u>0),a.dispatchEvent(l),a.dom7EventData=[],delete a.dom7EventData}}}return this}function eW(t){const e=this;function n(i){i.target===this&&(t.call(this,i),e.off("transitionend",n))}return t&&e.on("transitionend",n),this}function tW(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function nW(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function iW(){if(this.length>0){const t=Ni(),e=as(),n=this[0],i=n.getBoundingClientRect(),r=e.body,s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,a=n===t?t.scrollY:n.scrollTop,l=n===t?t.scrollX:n.scrollLeft;return{top:i.top+a-s,left:i.left+l-o}}return null}function rW(){const t=Ni();return this[0]?t.getComputedStyle(this[0],null):{}}function sW(t,e){const n=Ni();let i;if(arguments.length===1)if(typeof t=="string"){if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(i=0;i<this.length;i+=1)for(const r in t)this[i].style[r]=t[r];return this}if(arguments.length===2&&typeof t=="string"){for(i=0;i<this.length;i+=1)this[i].style[t]=e;return this}return this}function oW(t){return t?(this.forEach((e,n)=>{t.apply(e,[e,n])}),this):this}function aW(t){const e=PO(this,t);return lt(e)}function lW(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function cW(t){if(typeof t>"u")return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function uW(t){const e=Ni(),n=as(),i=this[0];let r,s;if(!i||typeof t>"u")return!1;if(typeof t=="string"){if(i.matches)return i.matches(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);for(r=lt(t),s=0;s<r.length;s+=1)if(r[s]===i)return!0;return!1}if(t===n)return i===n;if(t===e)return i===e;if(t.nodeType||t instanceof $l){for(r=t.nodeType?[t]:t,s=0;s<r.length;s+=1)if(r[s]===i)return!0;return!1}return!1}function fW(){let t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function hW(t){if(typeof t>"u")return this;const e=this.length;if(t>e-1)return lt([]);if(t<0){const n=e+t;return n<0?lt([]):lt([this[n]])}return lt([this[t]])}function dW(...t){let e;const n=as();for(let i=0;i<t.length;i+=1){e=t[i];for(let r=0;r<this.length;r+=1)if(typeof e=="string"){const s=n.createElement("div");for(s.innerHTML=e;s.firstChild;)this[r].appendChild(s.firstChild)}else if(e instanceof $l)for(let s=0;s<e.length;s+=1)this[r].appendChild(e[s]);else this[r].appendChild(e)}return this}function pW(t){const e=as();let n,i;for(n=0;n<this.length;n+=1)if(typeof t=="string"){const r=e.createElement("div");for(r.innerHTML=t,i=r.childNodes.length-1;i>=0;i-=1)this[n].insertBefore(r.childNodes[i],this[n].childNodes[0])}else if(t instanceof $l)for(i=0;i<t.length;i+=1)this[n].insertBefore(t[i],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this}function mW(t){return this.length>0?t?this[0].nextElementSibling&&lt(this[0].nextElementSibling).is(t)?lt([this[0].nextElementSibling]):lt([]):this[0].nextElementSibling?lt([this[0].nextElementSibling]):lt([]):lt([])}function gW(t){const e=[];let n=this[0];if(!n)return lt([]);for(;n.nextElementSibling;){const i=n.nextElementSibling;t?lt(i).is(t)&&e.push(i):e.push(i),n=i}return lt(e)}function AW(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&lt(e.previousElementSibling).is(t)?lt([e.previousElementSibling]):lt([]):e.previousElementSibling?lt([e.previousElementSibling]):lt([])}return lt([])}function vW(t){const e=[];let n=this[0];if(!n)return lt([]);for(;n.previousElementSibling;){const i=n.previousElementSibling;t?lt(i).is(t)&&e.push(i):e.push(i),n=i}return lt(e)}function _W(t){const e=[];for(let n=0;n<this.length;n+=1)this[n].parentNode!==null&&(t?lt(this[n].parentNode).is(t)&&e.push(this[n].parentNode):e.push(this[n].parentNode));return lt(e)}function yW(t){const e=[];for(let n=0;n<this.length;n+=1){let i=this[n].parentNode;for(;i;)t?lt(i).is(t)&&e.push(i):e.push(i),i=i.parentNode}return lt(e)}function xW(t){let e=this;return typeof t>"u"?lt([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function wW(t){const e=[];for(let n=0;n<this.length;n+=1){const i=this[n].querySelectorAll(t);for(let r=0;r<i.length;r+=1)e.push(i[r])}return lt(e)}function EW(t){const e=[];for(let n=0;n<this.length;n+=1){const i=this[n].children;for(let r=0;r<i.length;r+=1)(!t||lt(i[r]).is(t))&&e.push(i[r])}return lt(e)}function bW(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}const f4={addClass:HV,removeClass:VV,hasClass:jV,toggleClass:WV,attr:qV,removeAttr:YV,transform:XV,transition:JV,on:KV,off:$V,trigger:ZV,transitionEnd:eW,outerWidth:tW,outerHeight:nW,styles:rW,offset:iW,css:sW,each:oW,html:lW,text:cW,is:uW,index:fW,eq:hW,append:dW,prepend:pW,next:mW,nextAll:gW,prev:AW,prevAll:vW,parent:_W,parents:yW,closest:xW,find:wW,children:EW,filter:aW,remove:bW};Object.keys(f4).forEach(t=>{Object.defineProperty(lt.fn,t,{value:f4[t],writable:!0})});function SW(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function sS(t,e=0){return setTimeout(t,e)}function mm(){return Date.now()}function CW(t){const e=Ni();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function MW(t,e="x"){const n=Ni();let i,r,s;const o=CW(t);return n.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function F1(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function IW(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function ys(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<t.length;i+=1){const r=t[i];if(r!=null&&!IW(r)){const s=Object.keys(Object(r)).filter(o=>n.indexOf(o)<0);for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=Object.getOwnPropertyDescriptor(r,l);c!==void 0&&c.enumerable&&(F1(e[l])&&F1(r[l])?r[l].__swiper__?e[l]=r[l]:ys(e[l],r[l]):!F1(e[l])&&F1(r[l])?(e[l]={},r[l].__swiper__?e[l]=r[l]:ys(e[l],r[l])):e[l]=r[l])}}}return e}function k1(t,e,n){t.style.setProperty(e,n)}function DO({swiper:t,targetPosition:e,side:n}){const i=Ni(),r=-t.translate;let s=null,o;const a=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const l=e>r?"next":"prev",c=(f,h)=>l==="next"&&f>=h||l==="prev"&&f<=h,u=()=>{o=new Date().getTime(),s===null&&(s=o);const f=Math.max(Math.min((o-s)/a,1),0),h=.5-Math.cos(f*Math.PI)/2;let d=r+h*(e-r);if(c(d,e)&&(d=e),t.wrapperEl.scrollTo({[n]:d}),c(d,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:d})}),i.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=i.requestAnimationFrame(u)};u()}let tw;function TW(){const t=Ni(),e=as();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let i=!1;try{const r=Object.defineProperty({},"passive",{get(){i=!0}});t.addEventListener("testPassiveListener",null,r)}catch{}return i}(),gestures:function(){return"ongesturestart"in t}()}}function LO(){return tw||(tw=TW()),tw}let nw;function BW({userAgent:t}={}){const e=LO(),n=Ni(),i=n.navigator.platform,r=t||n.navigator.userAgent,s={ios:!1,android:!1},o=n.screen.width,a=n.screen.height,l=r.match(/(Android);?[\s\/]+([\d.]+)?/);let c=r.match(/(iPad).*OS\s([\d_]+)/);const u=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=i==="Win32";let d=i==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&d&&e.touch&&p.indexOf(`${o}x${a}`)>=0&&(c=r.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),d=!1),l&&!h&&(s.os="android",s.android=!0),(c||f||u)&&(s.os="ios",s.ios=!0),s}function RW(t={}){return nw||(nw=BW(t)),nw}let iw;function PW(){const t=Ni();function e(){const n=t.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}return{isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function DW(){return iw||(iw=PW()),iw}function LW({swiper:t,on:e,emit:n}){const i=Ni();let r=null,s=null;const o=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(r=new ResizeObserver(u=>{s=i.requestAnimationFrame(()=>{const{width:f,height:h}=t;let d=f,p=h;u.forEach(({contentBoxSize:m,contentRect:A,target:v})=>{v&&v!==t.el||(d=A?A.width:(m[0]||m).inlineSize,p=A?A.height:(m[0]||m).blockSize)}),(d!==f||p!==h)&&o()})}),r.observe(t.el))},l=()=>{s&&i.cancelAnimationFrame(s),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null)},c=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof i.ResizeObserver<"u"){a();return}i.addEventListener("resize",o),i.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",c)})}function FW({swiper:t,extendParams:e,on:n,emit:i}){const r=[],s=Ni(),o=(c,u={})=>{const f=s.MutationObserver||s.WebkitMutationObserver,h=new f(d=>{if(d.length===1){i("observerUpdate",d[0]);return}const p=function(){i("observerUpdate",d[0])};s.requestAnimationFrame?s.requestAnimationFrame(p):s.setTimeout(p,0)});h.observe(c,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),r.push(h)},a=()=>{if(!!t.params.observer){if(t.params.observeParents){const c=t.$el.parents();for(let u=0;u<c.length;u+=1)o(c[u])}o(t.$el[0],{childList:t.params.observeSlideChildren}),o(t.$wrapperEl[0],{attributes:!1})}},l=()=>{r.forEach(c=>{c.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",a),n("destroy",l)}const kW={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=n?"unshift":"push";return t.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(...s){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy,e.apply(i,s)}return r.__emitterProxy=e,i.on(t,r,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[i].splice(s,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,i,r;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],i=t.slice(1,t.length),r=e):(n=t[0].events,i=t[0].data,r=t[0].context||e),i.unshift(r),(Array.isArray(n)?n:n.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(r,[o,...i])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(r,i)})}),e}};function OW(){const t=this;let e,n;const i=t.$el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i[0].clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i[0].clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),n=n-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function UW(){const t=this;function e(T){return t.isHorizontal()?T:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[T]}function n(T,k){return parseFloat(T.getPropertyValue(e(k))||0)}const i=t.params,{$wrapperEl:r,size:s,rtlTranslate:o,wrongRTL:a}=t,l=t.virtual&&i.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,u=r.children(`.${t.params.slideClass}`),f=l?t.virtual.slides.length:u.length;let h=[];const d=[],p=[];let m=i.slidesOffsetBefore;typeof m=="function"&&(m=i.slidesOffsetBefore.call(t));let A=i.slidesOffsetAfter;typeof A=="function"&&(A=i.slidesOffsetAfter.call(t));const v=t.snapGrid.length,y=t.slidesGrid.length;let x=i.spaceBetween,w=-m,E=0,S=0;if(typeof s>"u")return;typeof x=="string"&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*s),t.virtualSize=-x,o?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(k1(t.wrapperEl,"--swiper-centered-offset-before",""),k1(t.wrapperEl,"--swiper-centered-offset-after",""));const M=i.grid&&i.grid.rows>1&&t.grid;M&&t.grid.initSlides(f);let b;const B=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(T=>typeof i.breakpoints[T].slidesPerView<"u").length>0;for(let T=0;T<f;T+=1){b=0;const k=u.eq(T);if(M&&t.grid.updateSlide(T,k,f,e),k.css("display")!=="none"){if(i.slidesPerView==="auto"){B&&(u[T].style[e("width")]="");const D=getComputedStyle(k[0]),N=k[0].style.transform,O=k[0].style.webkitTransform;if(N&&(k[0].style.transform="none"),O&&(k[0].style.webkitTransform="none"),i.roundLengths)b=t.isHorizontal()?k.outerWidth(!0):k.outerHeight(!0);else{const Y=n(D,"width"),q=n(D,"padding-left"),K=n(D,"padding-right"),z=n(D,"margin-left"),U=n(D,"margin-right"),Q=D.getPropertyValue("box-sizing");if(Q&&Q==="border-box")b=Y+z+U;else{const{clientWidth:H,offsetWidth:V}=k[0];b=Y+q+K+z+U+(V-H)}}N&&(k[0].style.transform=N),O&&(k[0].style.webkitTransform=O),i.roundLengths&&(b=Math.floor(b))}else b=(s-(i.slidesPerView-1)*x)/i.slidesPerView,i.roundLengths&&(b=Math.floor(b)),u[T]&&(u[T].style[e("width")]=`${b}px`);u[T]&&(u[T].swiperSlideSize=b),p.push(b),i.centeredSlides?(w=w+b/2+E/2+x,E===0&&T!==0&&(w=w-s/2-x),T===0&&(w=w-s/2-x),Math.abs(w)<1/1e3&&(w=0),i.roundLengths&&(w=Math.floor(w)),S%i.slidesPerGroup===0&&h.push(w),d.push(w)):(i.roundLengths&&(w=Math.floor(w)),(S-Math.min(t.params.slidesPerGroupSkip,S))%t.params.slidesPerGroup===0&&h.push(w),d.push(w),w=w+b+x),t.virtualSize+=b+x,E=b,S+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+A,o&&a&&(i.effect==="slide"||i.effect==="coverflow")&&r.css({width:`${t.virtualSize+i.spaceBetween}px`}),i.setWrapperSize&&r.css({[e("width")]:`${t.virtualSize+i.spaceBetween}px`}),M&&t.grid.updateWrapperSize(b,h,e),!i.centeredSlides){const T=[];for(let k=0;k<h.length;k+=1){let D=h[k];i.roundLengths&&(D=Math.floor(D)),h[k]<=t.virtualSize-s&&T.push(D)}h=T,Math.floor(t.virtualSize-s)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-s)}if(h.length===0&&(h=[0]),i.spaceBetween!==0){const T=t.isHorizontal()&&o?"marginLeft":e("marginRight");u.filter((k,D)=>i.cssMode?D!==u.length-1:!0).css({[T]:`${x}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let T=0;p.forEach(D=>{T+=D+(i.spaceBetween?i.spaceBetween:0)}),T-=i.spaceBetween;const k=T-s;h=h.map(D=>D<0?-m:D>k?k+A:D)}if(i.centerInsufficientSlides){let T=0;if(p.forEach(k=>{T+=k+(i.spaceBetween?i.spaceBetween:0)}),T-=i.spaceBetween,T<s){const k=(s-T)/2;h.forEach((D,N)=>{h[N]=D-k}),d.forEach((D,N)=>{d[N]=D+k})}}if(Object.assign(t,{slides:u,snapGrid:h,slidesGrid:d,slidesSizesGrid:p}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){k1(t.wrapperEl,"--swiper-centered-offset-before",`${-h[0]}px`),k1(t.wrapperEl,"--swiper-centered-offset-after",`${t.size/2-p[p.length-1]/2}px`);const T=-t.snapGrid[0],k=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(D=>D+T),t.slidesGrid=t.slidesGrid.map(D=>D+k)}if(f!==c&&t.emit("slidesLengthChange"),h.length!==v&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),d.length!==y&&t.emit("slidesGridLengthChange"),i.watchSlidesProgress&&t.updateSlidesOffset(),!l&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const T=`${i.containerModifierClass}backface-hidden`,k=t.$el.hasClass(T);f<=i.maxBackfaceHiddenSlides?k||t.$el.addClass(T):k&&t.$el.removeClass(T)}}function NW(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:e.slides.eq(a)[0];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||lt([])).each(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!i)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;r=a>r?a:r}(r||r===0)&&e.$wrapperEl.css("height",`${r}px`)}function zW(){const t=this,e=t.slides;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=t.isHorizontal()?e[n].offsetLeft:e[n].offsetTop}function GW(t=this&&this.translate||0){const e=this,n=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;r&&(o=t),i.removeClass(n.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let a=0;a<i.length;a+=1){const l=i[a];let c=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=i[0].swiperSlideOffset);const u=(o+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),f=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),h=-(o-c),d=h+e.slidesSizesGrid[a];(h>=0&&h<e.size-1||d>1&&d<=e.size||h<=0&&d>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(a),i.eq(a).addClass(n.slideVisibleClass)),l.progress=r?-u:u,l.originalProgress=r?-f:f}e.visibleSlides=lt(e.visibleSlides)}function QW(t){const e=this;if(typeof t>"u"){const c=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*c||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o}=e;const a=s,l=o;i===0?(r=0,s=!0,o=!0):(r=(t-e.minTranslate())/i,s=r<=0,o=r>=1),Object.assign(e,{progress:r,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!a&&e.emit("reachBeginning toEdge"),o&&!l&&e.emit("reachEnd toEdge"),(a&&!s||l&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}function HW(){const t=this,{slides:e,params:n,$wrapperEl:i,activeIndex:r,realIndex:s}=t,o=t.virtual&&n.virtual.enabled;e.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`);let a;o?a=t.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${r}"]`):a=e.eq(r),a.addClass(n.slideActiveClass),n.loop&&(a.hasClass(n.slideDuplicateClass)?i.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass):i.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass));let l=a.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&l.length===0&&(l=e.eq(0),l.addClass(n.slideNextClass));let c=a.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&c.length===0&&(c=e.eq(-1),c.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?i.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):i.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),c.hasClass(n.slideDuplicateClass)?i.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):i.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),t.emitSlidesClasses()}function VW(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:i,snapGrid:r,params:s,activeIndex:o,realIndex:a,snapIndex:l}=e;let c=t,u;if(typeof c>"u"){for(let h=0;h<i.length;h+=1)typeof i[h+1]<"u"?n>=i[h]&&n<i[h+1]-(i[h+1]-i[h])/2?c=h:n>=i[h]&&n<i[h+1]&&(c=h+1):n>=i[h]&&(c=h);s.normalizeSlideIndex&&(c<0||typeof c>"u")&&(c=0)}if(r.indexOf(n)>=0)u=r.indexOf(n);else{const h=Math.min(s.slidesPerGroupSkip,c);u=h+Math.floor((c-h)/s.slidesPerGroup)}if(u>=r.length&&(u=r.length-1),c===o){u!==l&&(e.snapIndex=u,e.emit("snapIndexChange"));return}const f=parseInt(e.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(e,{snapIndex:u,realIndex:f,previousIndex:o,activeIndex:c}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==f&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function WW(t){const e=this,n=e.params,i=lt(t).closest(`.${n.slideClass}`)[0];let r=!1,s;if(i){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===i){r=!0,s=o;break}}if(i&&r)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(lt(i).attr("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const jW={updateSize:OW,updateSlides:UW,updateAutoHeight:NW,updateSlidesOffset:zW,updateSlidesProgress:GW,updateProgress:QW,updateSlidesClasses:HW,updateActiveIndex:VW,updateClickedSlide:WW};function qW(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:i,translate:r,$wrapperEl:s}=e;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let o=MW(s[0],t);return i&&(o=-o),o||0}function YW(t,e){const n=this,{rtlTranslate:i,params:r,$wrapperEl:s,wrapperEl:o,progress:a}=n;let l=0,c=0;const u=0;n.isHorizontal()?l=i?-t:t:c=t,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||s.transform(`translate3d(${l}px, ${c}px, ${u}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c;let f;const h=n.maxTranslate()-n.minTranslate();h===0?f=0:f=(t-n.minTranslate())/h,f!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function XW(){return-this.snapGrid[0]}function JW(){return-this.snapGrid[this.snapGrid.length-1]}function KW(t=0,e=this.params.speed,n=!0,i=!0,r){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&t>l?u=l:i&&t<c?u=c:u=t,s.updateProgress(u),o.cssMode){const f=s.isHorizontal();if(e===0)a[f?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return DO({swiper:s,targetPosition:-u,side:f?"left":"top"}),!0;a.scrollTo({[f?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}const $W={getTranslate:qW,setTranslate:YW,minTranslate:XW,maxTranslate:JW,translateTo:KW};function ZW(t,e){const n=this;n.params.cssMode||n.$wrapperEl.transition(t),n.emit("setTransition",t,e)}function FO({swiper:t,runCallbacks:e,direction:n,step:i}){const{activeIndex:r,previousIndex:s}=t;let o=n;if(o||(r>s?o="next":r<s?o="prev":o="reset"),t.emit(`transition${i}`),e&&r!==s){if(o==="reset"){t.emit(`slideResetTransition${i}`);return}t.emit(`slideChangeTransition${i}`),o==="next"?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`)}}function ej(t=!0,e){const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),FO({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function tj(t=!0,e){const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),FO({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const nj={setTransition:ZW,transitionStart:ej,transitionEnd:tj};function ij(t=0,e=this.params.speed,n=!0,i,r){if(typeof t!="number"&&typeof t!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if(typeof t=="string"){const x=parseInt(t,10);if(!isFinite(x))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=x}const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:f,rtlTranslate:h,wrapperEl:d,enabled:p}=s;if(s.animating&&a.preventInteractionOnTransition||!p&&!i&&!r)return!1;const m=Math.min(s.params.slidesPerGroupSkip,o);let A=m+Math.floor((o-m)/s.params.slidesPerGroup);A>=l.length&&(A=l.length-1);const v=-l[A];if(a.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const w=-Math.floor(v*100),E=Math.floor(c[x]*100),S=Math.floor(c[x+1]*100);typeof c[x+1]<"u"?w>=E&&w<S-(S-E)/2?o=x:w>=E&&w<S&&(o=x+1):w>=E&&(o=x)}if(s.initialized&&o!==f&&(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate()||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(f||0)!==o))return!1;o!==(u||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(v);let y;if(o>f?y="next":o<f?y="prev":y="reset",h&&-v===s.translate||!h&&v===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(v),y!=="reset"&&(s.transitionStart(n,y),s.transitionEnd(n,y)),!1;if(a.cssMode){const x=s.isHorizontal(),w=h?v:-v;if(e===0){const E=s.virtual&&s.params.virtual.enabled;E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),d[x?"scrollLeft":"scrollTop"]=w,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1})}else{if(!s.support.smoothScroll)return DO({swiper:s,targetPosition:w,side:x?"left":"top"}),!0;d.scrollTo({[x?"left":"top"]:w,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(v),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(n,y),e===0?s.transitionEnd(n,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(w){!s||s.destroyed||w.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,y))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0}function rj(t=0,e=this.params.speed,n=!0,i){if(typeof t=="string"){const o=parseInt(t,10);if(!isFinite(o))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=o}const r=this;let s=t;return r.params.loop&&(s+=r.loopedSlides),r.slideTo(s,e,n,i)}function sj(t=this.params.speed,e=!0,n){const i=this,{animating:r,enabled:s,params:o}=i;if(!s)return i;let a=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<o.slidesPerGroupSkip?1:a;if(o.loop){if(r&&o.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return o.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+l,t,e,n)}function oj(t=this.params.speed,e=!0,n){const i=this,{params:r,animating:s,snapGrid:o,slidesGrid:a,rtlTranslate:l,enabled:c}=i;if(!c)return i;if(r.loop){if(s&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}const u=l?i.translate:-i.translate;function f(A){return A<0?-Math.floor(Math.abs(A)):Math.floor(A)}const h=f(u),d=o.map(A=>f(A));let p=o[d.indexOf(h)-1];if(typeof p>"u"&&r.cssMode){let A;o.forEach((v,y)=>{h>=v&&(A=y)}),typeof A<"u"&&(p=o[A>0?A-1:A])}let m=0;if(typeof p<"u"&&(m=a.indexOf(p),m<0&&(m=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(m=m-i.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),r.rewind&&i.isBeginning){const A=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(A,t,e,n)}return i.slideTo(m,t,e,n)}function aj(t=this.params.speed,e=!0,n){const i=this;return i.slideTo(i.activeIndex,t,e,n)}function lj(t=this.params.speed,e=!0,n,i=.5){const r=this;let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const c=r.snapGrid[a],u=r.snapGrid[a+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[a-1],u=r.snapGrid[a];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,t,e,n)}function cj(){const t=this,{params:e,$wrapperEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let r=t.clickedIndex,s;if(e.loop){if(t.animating)return;s=parseInt(lt(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?r<t.loopedSlides-i/2||r>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),r=n.children(`.${e.slideClass}[data-swiper-slide-index="${s}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),sS(()=>{t.slideTo(r)})):t.slideTo(r):r>t.slides.length-i?(t.loopFix(),r=n.children(`.${e.slideClass}[data-swiper-slide-index="${s}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),sS(()=>{t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}const uj={slideTo:ij,slideToLoop:rj,slideNext:sj,slidePrev:oj,slideReset:aj,slideToClosest:lj,slideToClickedSlide:cj};function fj(){const t=this,e=as(),{params:n,$wrapperEl:i}=t,r=i.children().length>0?lt(i.children()[0].parentNode):i;r.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let s=r.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const l=n.slidesPerGroup-s.length%n.slidesPerGroup;if(l!==n.slidesPerGroup){for(let c=0;c<l;c+=1){const u=lt(e.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);r.append(u)}s=r.children(`.${n.slideClass}`)}}n.slidesPerView==="auto"&&!n.loopedSlides&&(n.loopedSlides=s.length),t.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),t.loopedSlides+=n.loopAdditionalSlides,t.loopedSlides>s.length&&t.params.loopedSlidesLimit&&(t.loopedSlides=s.length);const o=[],a=[];s.each((l,c)=>{lt(l).attr("data-swiper-slide-index",c)});for(let l=0;l<t.loopedSlides;l+=1){const c=l-Math.floor(l/s.length)*s.length;a.push(s.eq(c)[0]),o.unshift(s.eq(s.length-c-1)[0])}for(let l=0;l<a.length;l+=1)r.append(lt(a[l].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let l=o.length-1;l>=0;l-=1)r.prepend(lt(o[l].cloneNode(!0)).addClass(n.slideDuplicateClass))}function hj(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:n,loopedSlides:i,allowSlidePrev:r,allowSlideNext:s,snapGrid:o,rtlTranslate:a}=t;let l;t.allowSlidePrev=!0,t.allowSlideNext=!0;const u=-o[e]-t.getTranslate();e<i?(l=n.length-i*3+e,l+=i,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((a?-t.translate:t.translate)-u)):e>=n.length-i&&(l=-n.length+e+i,l+=i,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((a?-t.translate:t.translate)-u)),t.allowSlidePrev=r,t.allowSlideNext=s,t.emit("loopFix")}function dj(){const t=this,{$wrapperEl:e,params:n,slides:i}=t;e.children(`.${n.slideClass}.${n.slideDuplicateClass},.${n.slideClass}.${n.slideBlankClass}`).remove(),i.removeAttr("data-swiper-slide-index")}const pj={loopCreate:fj,loopFix:hj,loopDestroy:dj};function mj(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;n.style.cursor="move",n.style.cursor=t?"grabbing":"grab"}function gj(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const Aj={setGrabCursor:mj,unsetGrabCursor:gj};function vj(t,e=this){function n(i){if(!i||i===as()||i===Ni())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(t);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(e)}function _j(t){const e=this,n=as(),i=Ni(),r=e.touchEventsData,{params:s,touches:o,enabled:a}=e;if(!a||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=lt(l.target);if(s.touchEventsTarget==="wrapper"&&!c.closest(e.wrapperEl).length||(r.isTouchEvent=l.type==="touchstart",!r.isTouchEvent&&"which"in l&&l.which===3)||!r.isTouchEvent&&"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",f=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&f&&(c=lt(f[0]));const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,d=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(d?vj(h,c[0]):c.closest(h)[0])){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler)[0])return;o.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,o.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;const p=o.currentX,m=o.currentY,A=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,v=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(A&&(p<=v||p>=i.innerWidth-v))if(A==="prevent")t.preventDefault();else return;if(Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=m,r.touchStartTime=mm(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1),l.type!=="touchstart"){let y=!0;c.is(r.focusableElements)&&(y=!1,c[0].nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&lt(n.activeElement).is(r.focusableElements)&&n.activeElement!==c[0]&&n.activeElement.blur();const x=y&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||x)&&!c[0].isContentEditable&&l.preventDefault()}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function yj(t){const e=as(),n=this,i=n.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=n;if(!a)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l);return}if(i.isTouchEvent&&l.type!=="touchmove")return;const c=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u=l.type==="touchmove"?c.pageX:l.pageX,f=l.type==="touchmove"?c.pageY:l.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=f;return}if(!n.allowTouchMove){lt(l.target).is(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:u,startY:f,currentX:u,currentY:f}),i.touchStartTime=mm());return}if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(f<s.startY&&n.translate<=n.maxTranslate()||f>s.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<s.startX&&n.translate<=n.maxTranslate()||u>s.startX&&n.translate>=n.minTranslate())return}if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&lt(l.target).is(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}if(i.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=u,s.currentY=f;const h=s.currentX-s.startX,d=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(h**2+d**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let v;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:h*h+d*d>=25&&(v=Math.atan2(Math.abs(d),Math.abs(h))*180/Math.PI,i.isScrolling=n.isHorizontal()?v>r.touchAngle:90-v>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&!r.cssMode&&n.loopFix(),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),i.isMoved=!0;let p=n.isHorizontal()?h:d;s.diff=p,p*=r.touchRatio,o&&(p=-p),n.swipeDirection=p>0?"prev":"next",i.currentTranslate=p+i.startTranslate;let m=!0,A=r.resistanceRatio;if(r.touchReleaseOnEdges&&(A=0),p>0&&i.currentTranslate>n.minTranslate()?(m=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+p)**A)):p<0&&i.currentTranslate<n.maxTranslate()&&(m=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-p)**A)),m&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(p)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function xj(t){const e=this,n=e.touchEventsData,{params:i,touches:r,rtlTranslate:s,slidesGrid:o,enabled:a}=e;if(!a)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}i.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=mm(),u=c-n.touchStartTime;if(e.allowClick){const y=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(y&&y[0]||l.target),e.emit("tap click",l),u<300&&c-n.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(n.lastClickTime=mm(),sS(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||r.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let f;if(i.followFinger?f=s?e.translate:-e.translate:f=-n.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}let h=0,d=e.slidesSizesGrid[0];for(let y=0;y<o.length;y+=y<i.slidesPerGroupSkip?1:i.slidesPerGroup){const x=y<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof o[y+x]<"u"?f>=o[y]&&f<o[y+x]&&(h=y,d=o[y+x]-o[y]):f>=o[y]&&(h=y,d=o[o.length-1]-o[o.length-2])}let p=null,m=null;i.rewind&&(e.isBeginning?m=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(p=0));const A=(f-o[h])/d,v=h<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(u>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(A>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?p:h+v):e.slideTo(h)),e.swipeDirection==="prev"&&(A>1-i.longSwipesRatio?e.slideTo(h+v):m!==null&&A<0&&Math.abs(A)>i.longSwipesRatio?e.slideTo(m):e.slideTo(h))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl)?l.target===e.navigation.nextEl?e.slideTo(h+v):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(p!==null?p:h+v),e.swipeDirection==="prev"&&e.slideTo(m!==null?m:h))}}function h4(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function wj(t){const e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function Ej(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let r;const s=t.maxTranslate()-t.minTranslate();s===0?r=0:r=(t.translate-t.minTranslate())/s,r!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let d4=!1;function bj(){}const kO=(t,e)=>{const n=as(),{params:i,touchEvents:r,el:s,wrapperEl:o,device:a,support:l}=t,c=!!i.nested,u=e==="on"?"addEventListener":"removeEventListener",f=e;if(!l.touch)s[u](r.start,t.onTouchStart,!1),n[u](r.move,t.onTouchMove,c),n[u](r.end,t.onTouchEnd,!1);else{const h=r.start==="touchstart"&&l.passiveListener&&i.passiveListeners?{passive:!0,capture:!1}:!1;s[u](r.start,t.onTouchStart,h),s[u](r.move,t.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),s[u](r.end,t.onTouchEnd,h),r.cancel&&s[u](r.cancel,t.onTouchEnd,h)}(i.preventClicks||i.preventClicksPropagation)&&s[u]("click",t.onClick,!0),i.cssMode&&o[u]("scroll",t.onScroll),i.updateOnWindowResize?t[f](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",h4,!0):t[f]("observerUpdate",h4,!0)};function Sj(){const t=this,e=as(),{params:n,support:i}=t;t.onTouchStart=_j.bind(t),t.onTouchMove=yj.bind(t),t.onTouchEnd=xj.bind(t),n.cssMode&&(t.onScroll=Ej.bind(t)),t.onClick=wj.bind(t),i.touch&&!d4&&(e.addEventListener("touchstart",bj),d4=!0),kO(t,"on")}function Cj(){kO(this,"off")}const Mj={attachEvents:Sj,detachEvents:Cj},p4=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function Ij(){const t=this,{activeIndex:e,initialized:n,loopedSlides:i=0,params:r,$el:s}=t,o=r.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const a=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const c=(a in o?o[a]:void 0)||t.originalParams,u=p4(t,r),f=p4(t,c),h=r.enabled;u&&!f?(s.removeClass(`${r.containerModifierClass}grid ${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&f&&(s.addClass(`${r.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&r.grid.fill==="column")&&s.addClass(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(A=>{const v=r[A]&&r[A].enabled,y=c[A]&&c[A].enabled;v&&!y&&t[A].disable(),!v&&y&&t[A].enable()});const d=c.direction&&c.direction!==r.direction,p=r.loop&&(c.slidesPerView!==r.slidesPerView||d);d&&n&&t.changeDirection(),ys(t.params,c);const m=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),h&&!m?t.disable():!h&&m&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",c),p&&n&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-i+t.loopedSlides,0,!1)),t.emit("breakpoint",c)}function Tj(t,e="window",n){if(!t||e==="container"&&!n)return;let i=!1;const r=Ni(),s=e==="window"?r.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=n.clientWidth&&(i=l)}return i||"max"}const Bj={setBreakpoint:Ij,getBreakpoint:Tj};function Rj(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(e+r)}):typeof i=="string"&&n.push(e+i)}),n}function Pj(){const t=this,{classNames:e,params:n,rtl:i,$el:r,device:s,support:o}=t,a=Rj(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),r.addClass([...e].join(" ")),t.emitContainerClasses()}function Dj(){const t=this,{$el:e,classNames:n}=t;e.removeClass(n.join(" ")),t.emitContainerClasses()}const Lj={addClasses:Pj,removeClasses:Dj};function Fj(t,e,n,i,r,s){const o=Ni();let a;function l(){s&&s()}!lt(t).parent("picture")[0]&&(!t.complete||!r)&&e?(a=new o.Image,a.onload=l,a.onerror=l,i&&(a.sizes=i),n&&(a.srcset=n),e&&(a.src=e)):l()}function kj(){const t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t>"u"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(let n=0;n<t.imagesToLoad.length;n+=1){const i=t.imagesToLoad[n];t.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}const Oj={loadImage:Fj,preloadImages:kj};function Uj(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const r=t.slides.length-1,s=t.slidesGrid[r]+t.slidesSizesGrid[r]+i*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const Nj={checkOverflow:Uj},m4={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function zj(t,e){return function(i={}){const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){ys(e,i);return}if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&t[r]===!0&&(t[r]={auto:!0}),!(r in t&&"enabled"in s)){ys(e,i);return}t[r]===!0&&(t[r]={enabled:!0}),typeof t[r]=="object"&&!("enabled"in t[r])&&(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),ys(e,i)}}const rw={eventsEmitter:kW,update:jW,translate:$W,transition:nj,slide:uj,loop:pj,grabCursor:Aj,events:Mj,breakpoints:Bj,checkOverflow:Nj,classes:Lj,images:Oj},sw={};class Ur{constructor(...e){let n,i;if(e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?i=e[0]:[n,i]=e,i||(i={}),i=ys({},i),n&&!i.el&&(i.el=n),i.el&&lt(i.el).length>1){const a=[];return lt(i.el).each(l=>{const c=ys({},i,{el:l});a.push(new Ur(c))}),a}const r=this;r.__swiper__=!0,r.support=LO(),r.device=RW({userAgent:i.userAgent}),r.browser=DW(),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],i.modules&&Array.isArray(i.modules)&&r.modules.push(...i.modules);const s={};r.modules.forEach(a=>{a({swiper:r,extendParams:zj(i,s),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})});const o=ys({},m4,s);return r.params=ys({},o,sw,i),r.originalParams=ys({},r.params),r.passedParams=ys({},i),r.params&&r.params.on&&Object.keys(r.params.on).forEach(a=>{r.on(a,r.params.on[a])}),r.params&&r.params.onAny&&r.onAny(r.params.onAny),r.$=lt,Object.assign(r,{enabled:r.params.enabled,el:n,classNames:[],slides:lt(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return r.params.direction==="horizontal"},isVertical(){return r.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:function(){const l=["touchstart","touchmove","touchend","touchcancel"],c=["pointerdown","pointermove","pointerup"];return r.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},r.touchEventsDesktop={start:c[0],move:c[1],end:c[2]},r.support.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:mm(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;!e.enabled||(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.each(i=>{const r=e.getSlideClasses(i);n.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i;let u=1;if(r.centeredSlides){let f=s[c].swiperSlideSize,h;for(let d=c+1;d<s.length;d+=1)s[d]&&!h&&(f+=s[d].swiperSlideSize,u+=1,f>l&&(h=!0));for(let d=c-1;d>=0;d-=1)s[d]&&!h&&(f+=s[d].swiperSlideSize,u+=1,f>l&&(h=!0))}else if(e==="current")for(let f=c+1;f<s.length;f+=1)(n?o[f]+a[f]-o[c]<l:o[f]-o[c]<l)&&(u+=1);else for(let f=c-1;f>=0;f-=1)o[c]-o[f]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||r()),i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.$el.removeClass(`${i.params.containerModifierClass}${r}`).addClass(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.each(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.$el.addClass(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.$el.removeClass(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;const i=lt(e||n.params.el);if(e=i[0],!e)return!1;e.swiper=n;const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const a=lt(e.shadowRoot.querySelector(r()));return a.children=l=>i.children(l),a}return i.children?i.children(r()):lt(i).children(r())})();if(o.length===0&&n.params.createElements){const l=as().createElement("div");o=lt(l),l.className=n.params.wrapperClass,i.append(l),i.children(`.${n.params.slideClass}`).each(c=>{o.append(c)})}return Object.assign(n,{$el:i,el:e,$wrapperEl:o,wrapperEl:o[0],mounted:!0,rtl:e.dir.toLowerCase()==="rtl"||i.css("direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(e.dir.toLowerCase()==="rtl"||i.css("direction")==="rtl"),wrongRTL:o.css("display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.params.loop&&n.loopCreate(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.preloadImages&&n.preloadImages(),n.params.loop?n.slideTo(n.params.initialSlide+n.loopedSlides,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.attachEvents(),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const i=this,{params:r,$el:s,$wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),s.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.$el[0].swiper=null,SW(i)),i.destroyed=!0),null}static extendDefaults(e){ys(sw,e)}static get extendedDefaults(){return sw}static get defaults(){return m4}static installModule(e){Ur.prototype.__modules__||(Ur.prototype.__modules__=[]);const n=Ur.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Ur.installModule(n)),Ur):(Ur.installModule(e),Ur)}}Object.keys(rw).forEach(t=>{Object.keys(rw[t]).forEach(e=>{Ur.prototype[e]=rw[t][e]})});Ur.use([LW,FW]);function Gj(t,e,n,i){const r=as();return t.params.createElements&&Object.keys(i).forEach(s=>{if(!n[s]&&n.auto===!0){let o=t.$el.children(`.${i[s]}`)[0];o||(o=r.createElement("div"),o.className=i[s],t.$el.append(o)),n[s]=o,e[s]=o}}),n}function OO({swiper:t,extendParams:e,on:n,emit:i}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function r(d){let p;return d&&(p=lt(d),t.params.uniqueNavElements&&typeof d=="string"&&p.length>1&&t.$el.find(d).length===1&&(p=t.$el.find(d))),p}function s(d,p){const m=t.params.navigation;d&&d.length>0&&(d[p?"addClass":"removeClass"](m.disabledClass),d[0]&&d[0].tagName==="BUTTON"&&(d[0].disabled=p),t.params.watchOverflow&&t.enabled&&d[t.isLocked?"addClass":"removeClass"](m.lockClass))}function o(){if(t.params.loop)return;const{$nextEl:d,$prevEl:p}=t.navigation;s(p,t.isBeginning&&!t.params.rewind),s(d,t.isEnd&&!t.params.rewind)}function a(d){d.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),i("navigationPrev"))}function l(d){d.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),i("navigationNext"))}function c(){const d=t.params.navigation;if(t.params.navigation=Gj(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(d.nextEl||d.prevEl))return;const p=r(d.nextEl),m=r(d.prevEl);p&&p.length>0&&p.on("click",l),m&&m.length>0&&m.on("click",a),Object.assign(t.navigation,{$nextEl:p,nextEl:p&&p[0],$prevEl:m,prevEl:m&&m[0]}),t.enabled||(p&&p.addClass(d.lockClass),m&&m.addClass(d.lockClass))}function u(){const{$nextEl:d,$prevEl:p}=t.navigation;d&&d.length&&(d.off("click",l),d.removeClass(t.params.navigation.disabledClass)),p&&p.length&&(p.off("click",a),p.removeClass(t.params.navigation.disabledClass))}n("init",()=>{t.params.navigation.enabled===!1?h():(c(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{u()}),n("enable disable",()=>{const{$nextEl:d,$prevEl:p}=t.navigation;d&&d[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),p&&p[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)}),n("click",(d,p)=>{const{$nextEl:m,$prevEl:A}=t.navigation,v=p.target;if(t.params.navigation.hideOnClick&&!lt(v).is(A)&&!lt(v).is(m)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===v||t.pagination.el.contains(v)))return;let y;m?y=m.hasClass(t.params.navigation.hiddenClass):A&&(y=A.hasClass(t.params.navigation.hiddenClass)),i(y===!0?"navigationShow":"navigationHide"),m&&m.toggleClass(t.params.navigation.hiddenClass),A&&A.toggleClass(t.params.navigation.hiddenClass)}});const f=()=>{t.$el.removeClass(t.params.navigation.navigationDisabledClass),c(),o()},h=()=>{t.$el.addClass(t.params.navigation.navigationDisabledClass),u()};Object.assign(t.navigation,{enable:f,disable:h,update:o,init:c,destroy:u})}function Ku(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Zl(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:Ku(e[i])&&Ku(t[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?t[i]=e[i]:Zl(t[i],e[i]):t[i]=e[i]})}function UO(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function NO(t={}){return t.pagination&&typeof t.pagination.el>"u"}function zO(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function GO(t=""){const e=t.split(" ").map(i=>i.trim()).filter(i=>!!i),n=[];return e.forEach(i=>{n.indexOf(i)<0&&n.push(i)}),n.join(" ")}const QO=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function Qj(t={},e=!0){const n={on:{}},i={},r={};Zl(n,Ur.defaults),Zl(n,Ur.extendedDefaults),n._emitClasses=!0,n.init=!1;const s={},o=QO.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?Ku(t[l])?(n[l]={},r[l]={},Zl(n[l],t[l]),Zl(r[l],t[l])):(n[l]=t[l],r[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:r,rest:s,events:i}}function Hj({el:t,nextEl:e,prevEl:n,paginationEl:i,scrollbarEl:r,swiper:s},o){UO(o)&&e&&n&&(s.params.navigation.nextEl=e,s.originalParams.navigation.nextEl=e,s.params.navigation.prevEl=n,s.originalParams.navigation.prevEl=n),NO(o)&&i&&(s.params.pagination.el=i,s.originalParams.pagination.el=i),zO(o)&&r&&(s.params.scrollbar.el=r,s.originalParams.scrollbar.el=r),s.init(t)}const HO=(t,e)=>{let n=e.slidesPerView;if(e.breakpoints){const r=Ur.prototype.getBreakpoint(e.breakpoints),s=r in e.breakpoints?e.breakpoints[r]:void 0;s&&s.slidesPerView&&(n=s.slidesPerView)}let i=Math.ceil(parseFloat(e.loopedSlides||n,10));return i+=e.loopAdditionalSlides,i>t.length&&e.loopedSlidesLimit&&(i=t.length),i};function Vj(t,e,n){const i=e.map((l,c)=>tl.cloneElement(l,{swiper:t,"data-swiper-slide-index":c}));function r(l,c,u){return tl.cloneElement(l,{key:`${l.key}-duplicate-${c}-${u}`,className:`${l.props.className||""} ${n.slideDuplicateClass}`})}if(n.loopFillGroupWithBlank){const l=n.slidesPerGroup-i.length%n.slidesPerGroup;if(l!==n.slidesPerGroup)for(let c=0;c<l;c+=1){const u=$("div",{className:`${n.slideClass} ${n.slideBlankClass}`});i.push(u)}}n.slidesPerView==="auto"&&!n.loopedSlides&&(n.loopedSlides=i.length);const s=HO(i,n),o=[],a=[];for(let l=0;l<s;l+=1){const c=l-Math.floor(l/i.length)*i.length;a.push(r(i[c],l,"append")),o.unshift(r(i[i.length-c-1],l,"prepend"))}return t&&(t.loopedSlides=s),[...o,...i,...a]}function Wj(t,e,n,i,r){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&i){const l=i.map(r),c=n.map(r);l.join("")!==c.join("")&&o("children"),i.length!==n.length&&o("children")}return QO.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(Ku(t[l])&&Ku(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(f=>{t[l][f]!==e[l][f]&&o(l)}),u.forEach(f=>{t[l][f]!==e[l][f]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}function VO(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function WO(t){const e=[];return tl.Children.toArray(t).forEach(n=>{VO(n)?e.push(n):n.props&&n.props.children&&WO(n.props.children).forEach(i=>e.push(i))}),e}function jj(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return tl.Children.toArray(t).forEach(i=>{if(VO(i))e.push(i);else if(i.props&&i.props.slot&&n[i.props.slot])n[i.props.slot].push(i);else if(i.props&&i.props.children){const r=WO(i.props.children);r.length>0?r.forEach(s=>e.push(s)):n["container-end"].push(i)}else n["container-end"].push(i)}),{slides:e,slots:n}}function qj({swiper:t,slides:e,passedParams:n,changedParams:i,nextEl:r,prevEl:s,scrollbarEl:o,paginationEl:a}){const l=i.filter(E=>E!=="children"&&E!=="direction"),{params:c,pagination:u,navigation:f,scrollbar:h,virtual:d,thumbs:p}=t;let m,A,v,y,x;i.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(m=!0),i.includes("controller")&&n.controller&&n.controller.control&&c.controller&&!c.controller.control&&(A=!0),i.includes("pagination")&&n.pagination&&(n.pagination.el||a)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(v=!0),i.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(y=!0),i.includes("navigation")&&n.navigation&&(n.navigation.prevEl||s)&&(n.navigation.nextEl||r)&&(c.navigation||c.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(x=!0);const w=E=>{!t[E]||(t[E].destroy(),E==="navigation"?(c[E].prevEl=void 0,c[E].nextEl=void 0,t[E].prevEl=void 0,t[E].nextEl=void 0):(c[E].el=void 0,t[E].el=void 0))};l.forEach(E=>{if(Ku(c[E])&&Ku(n[E]))Zl(c[E],n[E]);else{const S=n[E];(S===!0||S===!1)&&(E==="navigation"||E==="pagination"||E==="scrollbar")?S===!1&&w(E):c[E]=n[E]}}),l.includes("controller")&&!A&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),i.includes("children")&&e&&d&&c.virtual.enabled?(d.slides=e,d.update(!0)):i.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),m&&p.init()&&p.update(!0),A&&(t.controller.control=c.controller.control),v&&(a&&(c.pagination.el=a),u.init(),u.render(),u.update()),y&&(o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),x&&(r&&(c.navigation.nextEl=r),s&&(c.navigation.prevEl=s),f.init(),f.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),i.includes("direction")&&t.changeDirection(n.direction,!1),t.update()}function Yj(t,e,n){if(!n)return null;const i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return e.filter((r,s)=>s>=n.from&&s<=n.to).map(r=>tl.cloneElement(r,{swiper:t,style:i}))}const Xj=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Op(t,e){return typeof window>"u"?R.exports.useEffect(t,e):R.exports.useLayoutEffect(t,e)}const Jj=R.exports.createContext(null),Kj=R.exports.createContext(null),LM=R.exports.forwardRef(function(t,e){let{className:n,tag:i="div",wrapperTag:r="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[c,u]=R.exports.useState("swiper"),[f,h]=R.exports.useState(null),[d,p]=R.exports.useState(!1),m=R.exports.useRef(!1),A=R.exports.useRef(null),v=R.exports.useRef(null),y=R.exports.useRef(null),x=R.exports.useRef(null),w=R.exports.useRef(null),E=R.exports.useRef(null),S=R.exports.useRef(null),M=R.exports.useRef(null),{params:b,passedParams:B,rest:T,events:k}=Qj(a),{slides:D,slots:N}=jj(s),O=()=>{p(!d)};Object.assign(b.on,{_containerClasses(U,Q){u(Q)}});const Y=()=>{if(Object.assign(b.on,k),l=!0,v.current=new Ur(b),v.current.loopCreate=()=>{},v.current.loopDestroy=()=>{},b.loop&&(v.current.loopedSlides=HO(D,b)),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=D;const U={cache:!1,slides:D,renderExternal:h,renderExternalUpdate:!1};Zl(v.current.params.virtual,U),Zl(v.current.originalParams.virtual,U)}};A.current||Y(),v.current&&v.current.on("_beforeBreakpoint",O);const q=()=>{l||!k||!v.current||Object.keys(k).forEach(U=>{v.current.on(U,k[U])})},K=()=>{!k||!v.current||Object.keys(k).forEach(U=>{v.current.off(U,k[U])})};R.exports.useEffect(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",O)}),R.exports.useEffect(()=>{!m.current&&v.current&&(v.current.emitSlidesClasses(),m.current=!0)}),Op(()=>{if(e&&(e.current=A.current),!!A.current)return v.current.destroyed&&Y(),Hj({el:A.current,nextEl:w.current,prevEl:E.current,paginationEl:S.current,scrollbarEl:M.current,swiper:v.current},b),o&&o(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),Op(()=>{q();const U=Wj(B,y.current,D,x.current,Q=>Q.key);return y.current=B,x.current=D,U.length&&v.current&&!v.current.destroyed&&qj({swiper:v.current,slides:D,passedParams:B,changedParams:U,nextEl:w.current,prevEl:E.current,scrollbarEl:M.current,paginationEl:S.current}),()=>{K()}}),Op(()=>{Xj(v.current)},[f]);function z(){return b.virtual?Yj(v.current,D,f):!b.loop||v.current&&v.current.destroyed?D.map(U=>tl.cloneElement(U,{swiper:v.current})):Vj(v.current,D,b)}return $(i,{ref:A,className:GO(`${c}${n?` ${n}`:""}`),...T,children:it(Kj.Provider,{value:v.current,children:[N["container-start"],it(r,{className:"swiper-wrapper",children:[N["wrapper-start"],z(),N["wrapper-end"]]}),UO(b)&&it(Sr,{children:[$("div",{ref:E,className:"swiper-button-prev"}),$("div",{ref:w,className:"swiper-button-next"})]}),zO(b)&&$("div",{ref:M,className:"swiper-scrollbar"}),NO(b)&&$("div",{ref:S,className:"swiper-pagination"}),N["container-end"]]})})});LM.displayName="Swiper";const FM=R.exports.forwardRef(function(t,e){let{tag:n="div",children:i,className:r="",swiper:s,zoom:o,virtualIndex:a,...l}=t===void 0?{}:t;const c=R.exports.useRef(null),[u,f]=R.exports.useState("swiper-slide");function h(m,A,v){A===c.current&&f(v)}Op(()=>{if(e&&(e.current=c.current),!(!c.current||!s)){if(s.destroyed){u!=="swiper-slide"&&f("swiper-slide");return}return s.on("_slideClass",h),()=>{!s||s.off("_slideClass",h)}}}),Op(()=>{s&&c.current&&!s.destroyed&&f(s.getSlideClasses(c.current))},[s]);const d={isActive:u.indexOf("swiper-slide-active")>=0||u.indexOf("swiper-slide-duplicate-active")>=0,isVisible:u.indexOf("swiper-slide-visible")>=0,isDuplicate:u.indexOf("swiper-slide-duplicate")>=0,isPrev:u.indexOf("swiper-slide-prev")>=0||u.indexOf("swiper-slide-duplicate-prev")>=0,isNext:u.indexOf("swiper-slide-next")>=0||u.indexOf("swiper-slide-duplicate-next")>=0},p=()=>typeof i=="function"?i(d):i;return $(n,{ref:c,className:GO(`${u}${r?` ${r}`:""}`),"data-swiper-slide-index":a,...l,children:$(Jj.Provider,{value:d,children:o?$("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0,children:p()}):p()})})});FM.displayName="SwiperSlide";const $j=[{title:"Bulbasaur",imageUrl:"./assets/charaTemp/bulbasaur.png"},{title:"Charmander",imageUrl:"./assets/charaTemp/charmander.png"},{title:"Squirtle",imageUrl:"./assets/charaTemp/squirtle.png"}],Zj={resources:$j},eq=t=>{const e=t.target;document.body.style.backgroundImage=`url(${e})`},tq=()=>$("section",{className:"border-2 border-red-700 h-2/3",children:$(LM,{navigation:!0,modules:[OO],className:"mySwiper my-auto h-full",children:Zj.resources.map((t,e)=>$(FM,{children:$("a",{onClick:eq,"data-url":t.imageUrl,className:"cursor-pointer w-2/3 mx-auto mb-12",children:$("img",{src:t.imageUrl||"",alt:"ffkeofk"})})},e))})}),nq=[{title:"Find me on Twitter",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/any"},{title:"Welcome to Ark Labs",link:"https://ark-labs.co.uk",imageUrl:"https://placeimg.com/300/300/animals"},{title:"Some sort of third title",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/architecture"},{title:"A personal site perhaps?",link:"https://robkendal.co.uk",imageUrl:"https://placeimg.com/300/300/nature"},{title:"Super item number five",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/people"},{title:"Super item number six",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/tech"},{title:"Super item number seven",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/animals"},{title:"Super item number eight",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/people"},{title:"Super item number the last",link:"https://twitter.com/kendalmintcode",imageUrl:"https://placeimg.com/300/300/tech"}],iq={resources:nq},rq=t=>{const e=t.currentTarget.dataset.url;document.body.style.backgroundImage=`url(${e})`},sq=()=>$(Sr,{children:$("div",{className:"h-1/3",children:$(LM,{loop:!0,navigation:!0,modules:[OO],spaceBetween:30,className:"mySwiper flex flex-col justify-center",children:iq.resources.map((t,e)=>$(FM,{children:$("a",{onClick:rq,"data-url":t.imageUrl,className:"cursor-pointer mx-auto h-36",children:$("img",{src:t.imageUrl||"",alt:"ffkeofk"})})},e))})})}),oq=()=>it("main",{children:[$(tq,{}),$(sq,{})]});var wv={},kM={};Object.defineProperty(kM,"__esModule",{value:!0});const aq="2.1.1";kM.default=aq;var ow={},ay={};Object.defineProperty(ay,"__esModule",{value:!0});ay.VERSION=void 0;ay.VERSION="2.0.5";var aw={},Af={},dc={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.Event1=zo.Event=void 0;class lq{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){const n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(){for(let e=0,n=this._funcs.length;e<n;e++)this._funcs[e]()}}zo.Event=lq;class cq{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){const n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(e){for(let n=0,i=this._funcs.length;n<i;n++)this._funcs[n](e)}}zo.Event1=cq;var rn={},oS;(function(t){t[t.UNKNOWN=131072]="UNKNOWN",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=4]="CODE_39",t[t.CODE_93=8]="CODE_93",t[t.CODE_128=16]="CODE_128",t[t.DATA_MATRIX=32]="DATA_MATRIX",t[t.EAN_8=64]="EAN_8",t[t.EAN_13=128]="EAN_13",t[t.ITF=256]="ITF",t[t.MAXICODE=512]="MAXICODE",t[t.PDF_417=1024]="PDF_417",t[t.QR_CODE=2048]="QR_CODE",t[t.RSS_14=4096]="RSS_14",t[t.RSS_EXPANDED=8192]="RSS_EXPANDED",t[t.UPC_A=16384]="UPC_A",t[t.UPC_E=32768]="UPC_E",t[t.UPC_EAN_EXTENSION=65536]="UPC_EAN_EXTENSION",t[t.ALL=131071]="ALL"})(oS||(oS={}));var aS;(function(t){t[t.EYE_LEFT=0]="EYE_LEFT",t[t.EYE_RIGHT=1]="EYE_RIGHT",t[t.EAR_LEFT=2]="EAR_LEFT",t[t.EAR_RIGHT=3]="EAR_RIGHT",t[t.NOSE_BRIDGE=4]="NOSE_BRIDGE",t[t.NOSE_TIP=5]="NOSE_TIP",t[t.NOSE_BASE=6]="NOSE_BASE",t[t.LIP_TOP=7]="LIP_TOP",t[t.LIP_BOTTOM=8]="LIP_BOTTOM",t[t.MOUTH_CENTER=9]="MOUTH_CENTER",t[t.CHIN=10]="CHIN",t[t.EYEBROW_LEFT=11]="EYEBROW_LEFT",t[t.EYEBROW_RIGHT=12]="EYEBROW_RIGHT"})(aS||(aS={}));var lS;(function(t){t[t.WORLD=3]="WORLD",t[t.MINUS_Z_AWAY_FROM_USER=4]="MINUS_Z_AWAY_FROM_USER",t[t.MINUS_Z_HEADING=5]="MINUS_Z_HEADING",t[t.UNCHANGED=6]="UNCHANGED"})(lS||(lS={}));var $u;(function(t){t[t.LOG_LEVEL_NONE=0]="LOG_LEVEL_NONE",t[t.LOG_LEVEL_ERROR=1]="LOG_LEVEL_ERROR",t[t.LOG_LEVEL_WARNING=2]="LOG_LEVEL_WARNING",t[t.LOG_LEVEL_VERBOSE=3]="LOG_LEVEL_VERBOSE"})($u||($u={}));var g4;(function(t){t[t.FRAME_PIXEL_FORMAT_I420=0]="FRAME_PIXEL_FORMAT_I420",t[t.FRAME_PIXEL_FORMAT_I420A=1]="FRAME_PIXEL_FORMAT_I420A",t[t.FRAME_PIXEL_FORMAT_I422=2]="FRAME_PIXEL_FORMAT_I422",t[t.FRAME_PIXEL_FORMAT_I444=3]="FRAME_PIXEL_FORMAT_I444",t[t.FRAME_PIXEL_FORMAT_NV12=4]="FRAME_PIXEL_FORMAT_NV12",t[t.FRAME_PIXEL_FORMAT_RGBA=5]="FRAME_PIXEL_FORMAT_RGBA",t[t.FRAME_PIXEL_FORMAT_BGRA=6]="FRAME_PIXEL_FORMAT_BGRA",t[t.FRAME_PIXEL_FORMAT_Y=7]="FRAME_PIXEL_FORMAT_Y"})(g4||(g4={}));var il;(function(t){t[t.IMAGE_TRACKER_TYPE_PLANAR=0]="IMAGE_TRACKER_TYPE_PLANAR",t[t.IMAGE_TRACKER_TYPE_CYLINDRICAL=1]="IMAGE_TRACKER_TYPE_CYLINDRICAL",t[t.IMAGE_TRACKER_TYPE_CONICAL=2]="IMAGE_TRACKER_TYPE_CONICAL"})(il||(il={}));class uq{constructor(e){this._messageSender=e,this._freeBufferPool=[],this._buffer=new ArrayBuffer(16),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1,this._timeoutSet=!1,this._appender={int:n=>this.int(n),bool:n=>this.int(n?1:0),float:n=>this.float(n),string:n=>this.string(n),dataWithLength:n=>this.arrayBuffer(n),type:n=>this.int(n),matrix4x4:n=>this.float32ArrayBuffer(n),matrix3x3:n=>this.float32ArrayBuffer(n),identityCoefficients:n=>this.float32ArrayBuffer(n),expressionCoefficients:n=>this.float32ArrayBuffer(n),cameraModel:n=>this.float32ArrayBuffer(n),timestamp:n=>this.double(n),barcodeFormat:n=>this.int(n),faceLandmarkName:n=>this.int(n),instantTrackerTransformOrientation:n=>this.int(n),logLevel:n=>this.int(n)},this._freeBufferPool.push(new ArrayBuffer(16)),this._freeBufferPool.push(new ArrayBuffer(16))}bufferReturn(e){this._freeBufferPool.push(e)}_ensureArrayBuffer(e){let n=(this._offset+e+8)*4;if(this._buffer&&this._buffer.byteLength>=n)return;let i;if(!i){let s=n;s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s++,i=new ArrayBuffer(s)}let r=this._buffer?this._i32View:void 0;this._buffer=i,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),r&&this._i32View.set(r.subarray(0,this._offset))}sendMessage(e,n){this._ensureArrayBuffer(4),this._startOffset=this._offset,this._i32View[this._offset+1]=e,this._offset+=2,n(this._appender),this._i32View[this._startOffset]=this._offset-this._startOffset,this._startOffset=-1,this._sendOneTime()}_sendOneTime(){this._timeoutSet===!1&&(this._timeoutSet=!0,setTimeout(()=>{this._timeoutSet=!1,this._send()},0))}_send(){if(this._freeBufferPool.length===0){this._sendOneTime();return}this._i32View[0]=this._offset,this._messageSender(this._buffer),this._buffer=void 0,this._buffer=this._freeBufferPool.pop(),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u8cView=new Uint8ClampedArray(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=1,this._startOffset=-1}int(e){this._ensureArrayBuffer(1),this._i32View[this._offset]=e,this._offset++}double(e){this._ensureArrayBuffer(2),this._offset%2===1&&this._offset++,this._f64View[this._offset/2]=e,this._offset+=2}float(e){this._ensureArrayBuffer(1),this._f32View[this._offset]=e,this._offset++}int32Array(e){this._ensureArrayBuffer(e.length);for(let n=0;n<e.length;++n)this._i32View[this._offset+n]=e[n];this._offset+=e.length}float32Array(e){this._ensureArrayBuffer(e.length);for(let n=0;n<e.length;++n)this._f32View[this._offset+n]=e[n];this._offset+=e.length}booleanArray(e){this._ensureArrayBuffer(e.length);for(let n=0;n<e.length;++n)this._i32View[this._offset+n]=e[n]?1:0;this._offset+=e.length}uint8ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8View.set(e,this._offset*4),this._offset+=e.byteLength>>2,(e.byteLength&3)!==0&&this._offset++}arrayBuffer(e){let n=new Uint8Array(e);this.uint8ArrayBuffer(n)}uint8ClampedArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.byteLength,this._offset++,this._u8cView.set(e,this._offset*4),this._offset+=e.byteLength>>2,(e.byteLength&3)!==0&&this._offset++}float32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._f32View.set(e,this._offset),this._offset+=e.length}uint16ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++;let n=this._offset*2;this._u16View.set(e,n),this._offset+=e.length>>1,(e.length&1)!==0&&this._offset++}int32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._i32View.set(e,this._offset),this._offset+=e.length}uint32ArrayBuffer(e){this._ensureArrayBuffer(e.byteLength/4),this._i32View[this._offset]=e.length,this._offset++,this._u32View.set(e,this._offset),this._offset+=e.length}string(e){let i=new TextEncoder().encode(e);this._ensureArrayBuffer(i.byteLength/4),this._i32View[this._offset]=i.byteLength,this._offset++,this._u8View.set(i,this._offset*4),this._offset+=i.byteLength>>2,(i.byteLength&3)!==0&&this._offset++}}class fq{constructor(){this._buffer=new ArrayBuffer(0),this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,this._startOffset=-1,this._processor={int:()=>this._i32View[this._startOffset++],bool:()=>this._i32View[this._startOffset++]===1,type:()=>this._i32View[this._startOffset++],float:()=>this._f32View[this._startOffset++],timestamp:()=>{this._startOffset%2===1&&this._startOffset++;let e=this._f64View[this._startOffset/2];return this._startOffset+=2,e},string:()=>{let e=this._i32View[this._startOffset++],i=new TextDecoder().decode(new Uint8Array(this._buffer,this._startOffset*4,e));return this._startOffset+=e>>2,(e&3)!==0&&this._startOffset++,i},dataWithLength:()=>{let e=this._i32View[this._startOffset++],n=new Uint8Array(e);return n.set(this._u8View.subarray(this._startOffset*4,this._startOffset*4+e)),this._startOffset+=n.byteLength>>2,(n.byteLength&3)!==0&&this._startOffset++,n.buffer},matrix4x4:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+16)),this._startOffset+=e,n},matrix3x3:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+9)),this._startOffset+=e,n},identityCoefficients:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+50)),this._startOffset+=e,n},expressionCoefficients:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+29)),this._startOffset+=e,n},cameraModel:()=>{let e=this._i32View[this._startOffset++],n=new Float32Array(e);return n.set(this._f32View.subarray(this._startOffset,this._startOffset+6)),this._startOffset+=e,n},barcodeFormat:()=>this._i32View[this._startOffset++],faceLandmarkName:()=>this._i32View[this._startOffset++],instantTrackerTransformOrientation:()=>this._i32View[this._startOffset++],logLevel:()=>this._i32View[this._startOffset++]}}setData(e){this._buffer=e,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer),this._f64View=new Float64Array(this._buffer),this._u8View=new Uint8Array(this._buffer),this._u16View=new Uint16Array(this._buffer),this._u32View=new Uint32Array(this._buffer),this._offset=0,this._length=0,e.byteLength>=4&&(this._offset=1,this._length=this._i32View[0]),this._startOffset=-1}hasMessage(){return this._offset+1<this._length}forMessages(e){for(;this.hasMessage();){let n=this._i32View[this._offset],i=this._i32View[this._offset+1];this._startOffset=this._offset+2,this._offset+=n,e(i,this._processor)}}}class hq{constructor(e){this._messageSender=e,this._globalState={log_level:1},this.serializer=new uq(n=>{this._messageSender(n)}),this.deserializer=new fq,this._latestId=1,this._pipeline_state_by_instance=new Map,this._camera_source_state_by_instance=new Map,this._sequence_source_state_by_instance=new Map,this._image_tracker_state_by_instance=new Map,this._face_tracker_state_by_instance=new Map,this._face_mesh_state_by_instance=new Map,this._face_landmark_state_by_instance=new Map,this._barcode_finder_state_by_instance=new Map,this._instant_world_tracker_state_by_instance=new Map,this.impl={log_level:()=>this._globalState.log_level,log_level_set:n=>{this.serializer.sendMessage(34,i=>{i.logLevel(n)})},analytics_project_id_set:n=>{this.serializer.sendMessage(31,i=>{i.string(n)})},pipeline_create:()=>{let n=this._latestId++,i={current_frame_user_data:0,camera_model:new Float32Array([300,300,160,120,0,0]),camera_pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_camera_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),camera_frame_device_attitude:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),frame_number:0};return this._pipeline_state_by_instance.set(n,i),this.serializer.sendMessage(27,r=>{r.type(n)}),n},pipeline_destroy:n=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this._pipeline_state_by_instance.delete(n),this.serializer.sendMessage(28,r=>{r.type(n)})},pipeline_frame_update:n=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(9,r=>{r.type(n)})},pipeline_frame_number:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.frame_number},pipeline_camera_model:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.camera_model},pipeline_camera_frame_user_data:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.current_frame_user_data},pipeline_camera_frame_submit:(n,i,r,s,o,a,l,c)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(8,f=>{f.type(n),f.dataWithLength(i),f.int(r),f.int(s),f.int(o),f.matrix4x4(a),f.cameraModel(l),f.bool(c)})},pipeline_camera_frame_submit_raw_pointer:(n,i,r,s,o,a,l,c,u,f,h)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed")},pipeline_camera_frame_camera_attitude:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.camera_frame_camera_attitude},pipeline_camera_frame_device_attitude:n=>{let i=this._pipeline_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.camera_frame_device_attitude},pipeline_motion_accelerometer_submit:(n,i,r,s,o)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(10,l=>{l.type(n),l.timestamp(i),l.float(r),l.float(s),l.float(o)})},pipeline_motion_rotation_rate_submit:(n,i,r,s,o)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(11,l=>{l.type(n),l.timestamp(i),l.float(r),l.float(s),l.float(o)})},pipeline_motion_attitude_submit:(n,i,r,s,o)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(12,l=>{l.type(n),l.timestamp(i),l.float(r),l.float(s),l.float(o)})},pipeline_motion_attitude_matrix_submit:(n,i)=>{if(!this._pipeline_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(13,s=>{s.type(n),s.matrix4x4(i)})},camera_source_create:(n,i)=>{let r=this._latestId++,s={};return this._camera_source_state_by_instance.set(r,s),this.serializer.sendMessage(29,o=>{o.type(r),o.type(n),o.string(i)}),r},camera_source_destroy:n=>{if(!this._camera_source_state_by_instance.get(n))throw new Error("This object has been destroyed");this._camera_source_state_by_instance.delete(n),this.serializer.sendMessage(30,r=>{r.type(n)})},sequence_source_create:n=>{let i=this._latestId++,r={};return this._sequence_source_state_by_instance.set(i,r),this.serializer.sendMessage(35,s=>{s.type(i),s.type(n)}),i},sequence_source_destroy:n=>{if(!this._sequence_source_state_by_instance.get(n))throw new Error("This object has been destroyed");this._sequence_source_state_by_instance.delete(n),this.serializer.sendMessage(36,r=>{r.type(n)})},image_tracker_create:n=>{let i=this._latestId++,r={enabled:!0,target_loaded_version:-1,anchor_count:0,anchor_id:[],anchor_pose:[]};return this._image_tracker_state_by_instance.set(i,r),this.serializer.sendMessage(2,s=>{s.type(i),s.type(n)}),i},image_tracker_destroy:n=>{if(!this._image_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this._image_tracker_state_by_instance.delete(n),this.serializer.sendMessage(14,r=>{r.type(n)})},image_tracker_target_load_from_memory:(n,i)=>{if(!this._image_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(4,s=>{s.type(n),s.dataWithLength(i)})},image_tracker_target_loaded_version:n=>{let i=this._image_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.target_loaded_version},image_tracker_enabled:n=>{let i=this._image_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},image_tracker_enabled_set:(n,i)=>{if(!this._image_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(3,s=>{s.type(n),s.bool(i)})},image_tracker_anchor_count:n=>{let i=this._image_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.anchor_count},image_tracker_anchor_id:(n,i)=>{let r=this._image_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_id[i]},image_tracker_anchor_pose_raw:(n,i)=>{let r=this._image_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_pose[i]},face_tracker_create:n=>{let i=this._latestId++,r={enabled:!0,model_loaded:-1,max_faces:1,anchor_count:0,anchor_id:[],anchor_pose:[],anchor_identity_coefficients:[],anchor_expression_coefficients:[]};return this._face_tracker_state_by_instance.set(i,r),this.serializer.sendMessage(20,s=>{s.type(i),s.type(n)}),i},face_tracker_destroy:n=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this._face_tracker_state_by_instance.delete(n),this.serializer.sendMessage(21,r=>{r.type(n)})},face_tracker_model_load_from_memory:(n,i)=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(22,s=>{s.type(n),s.dataWithLength(i)})},face_tracker_model_loaded_version:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.model_loaded},face_tracker_enabled_set:(n,i)=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(23,s=>{s.type(n),s.bool(i)})},face_tracker_enabled:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},face_tracker_max_faces_set:(n,i)=>{if(!this._face_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(24,s=>{s.type(n),s.int(i)})},face_tracker_max_faces:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.max_faces},face_tracker_anchor_count:n=>{let i=this._face_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.anchor_count},face_tracker_anchor_id:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_id[i]},face_tracker_anchor_pose_raw:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_pose[i]},face_tracker_anchor_identity_coefficients:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_identity_coefficients[i]},face_tracker_anchor_expression_coefficients:(n,i)=>{let r=this._face_tracker_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.anchor_expression_coefficients[i]},face_mesh_create:()=>{let n=this._latestId++,i={};return this._face_mesh_state_by_instance.set(n,i),this.serializer.sendMessage(25,r=>{r.type(n)}),n},face_mesh_destroy:n=>{if(!this._face_mesh_state_by_instance.get(n))throw new Error("This object has been destroyed");this._face_mesh_state_by_instance.delete(n),this.serializer.sendMessage(26,r=>{r.type(n)})},face_landmark_create:n=>{let i=this._latestId++,r={};return this._face_landmark_state_by_instance.set(i,r),this.serializer.sendMessage(32,s=>{s.type(i),s.faceLandmarkName(n)}),i},face_landmark_destroy:n=>{if(!this._face_landmark_state_by_instance.get(n))throw new Error("This object has been destroyed");this._face_landmark_state_by_instance.delete(n),this.serializer.sendMessage(33,r=>{r.type(n)})},barcode_finder_create:n=>{let i=this._latestId++,r={enabled:!0,number_found:0,found_text:[],found_format:[],formats:(1<<17)-1};return this._barcode_finder_state_by_instance.set(i,r),this.serializer.sendMessage(16,s=>{s.type(i),s.type(n)}),i},barcode_finder_destroy:n=>{if(!this._barcode_finder_state_by_instance.get(n))throw new Error("This object has been destroyed");this._barcode_finder_state_by_instance.delete(n),this.serializer.sendMessage(17,r=>{r.type(n)})},barcode_finder_enabled_set:(n,i)=>{if(!this._barcode_finder_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(18,s=>{s.type(n),s.bool(i)})},barcode_finder_enabled:n=>{let i=this._barcode_finder_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},barcode_finder_found_number:n=>{let i=this._barcode_finder_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.number_found},barcode_finder_found_text:(n,i)=>{let r=this._barcode_finder_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.found_text[i]},barcode_finder_found_format:(n,i)=>{let r=this._barcode_finder_state_by_instance.get(n);if(!r)throw new Error("This object has been destroyed");return r.found_format[i]},barcode_finder_formats:n=>{let i=this._barcode_finder_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.formats},barcode_finder_formats_set:(n,i)=>{if(!this._barcode_finder_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(19,s=>{s.type(n),s.barcodeFormat(i)})},instant_world_tracker_create:n=>{let i=this._latestId++,r={enabled:!0,pose:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};return this._instant_world_tracker_state_by_instance.set(i,r),this.serializer.sendMessage(5,s=>{s.type(i),s.type(n)}),i},instant_world_tracker_destroy:n=>{if(!this._instant_world_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this._instant_world_tracker_state_by_instance.delete(n),this.serializer.sendMessage(15,r=>{r.type(n)})},instant_world_tracker_enabled_set:(n,i)=>{if(!this._instant_world_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(6,s=>{s.type(n),s.bool(i)})},instant_world_tracker_enabled:n=>{let i=this._instant_world_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.enabled},instant_world_tracker_anchor_pose_raw:n=>{let i=this._instant_world_tracker_state_by_instance.get(n);if(!i)throw new Error("This object has been destroyed");return i.pose},instant_world_tracker_anchor_pose_set_from_camera_offset_raw:(n,i,r,s,o)=>{if(!this._instant_world_tracker_state_by_instance.get(n))throw new Error("This object has been destroyed");this.serializer.sendMessage(7,l=>{l.type(n),l.float(i),l.float(r),l.float(s),l.instantTrackerTransformOrientation(o)})}}}processMessages(e){this.deserializer.setData(e),this.deserializer.forMessages((n,i)=>{switch(n){case 7:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.frame_number=i.int();break}case 6:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.camera_model=i.cameraModel();break}case 5:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.current_frame_user_data=i.int();break}case 11:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.camera_frame_camera_attitude=i.matrix4x4();break}case 12:{let r=i.type(),s=this._pipeline_state_by_instance.get(r);if(!s)return;s.camera_frame_device_attitude=i.matrix4x4();break}case 19:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;s.target_loaded_version=i.int();break}case 1:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;s.anchor_count=i.int();break}case 2:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_id[o]=i.string();break}case 3:{let r=i.type(),s=this._image_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_pose[o]=i.matrix4x4();break}case 18:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;s.model_loaded=i.int();break}case 13:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;s.anchor_count=i.int();break}case 14:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_id[o]=i.string();break}case 15:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_pose[o]=i.matrix4x4();break}case 16:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_identity_coefficients[o]=i.identityCoefficients();break}case 17:{let r=i.type(),s=this._face_tracker_state_by_instance.get(r);if(!s)return;let o=i.int();s.anchor_expression_coefficients[o]=i.expressionCoefficients();break}case 8:{let r=i.type(),s=this._barcode_finder_state_by_instance.get(r);if(!s)return;s.number_found=i.int();break}case 9:{let r=i.type(),s=this._barcode_finder_state_by_instance.get(r);if(!s)return;let o=i.int();s.found_text[o]=i.string();break}case 10:{let r=i.type(),s=this._barcode_finder_state_by_instance.get(r);if(!s)return;let o=i.int();s.found_format[o]=i.barcodeFormat();break}case 4:{let r=i.type(),s=this._instant_world_tracker_state_by_instance.get(r);if(!s)return;s.pose=i.matrix4x4();break}}})}}function uo(t,e,n){let i=t.createShader(e);if(!i)throw new Error("Unable to create shader");t.shaderSource(i,n),t.compileShader(i);let r=t.getShaderInfoLog(i);if(r&&r.trim().length>0)throw new Error("Shader compile error: "+r);return i}function Gd(t,e){t.linkProgram(e);let n=t.getProgramInfoLog(e);if(n&&n.trim().length>0)throw new Error("Unable to link: "+n)}let xp,lu,cu,Ev={};function dq(){xp=void 0,lu=void 0,cu=void 0,Ev={}}function pq(t){if(lu)return lu;if(lu=t.createBuffer(),!lu)throw new Error("Unable to create buffer object");let e=[-.5,.125,0,-.5,-.125,0,.5,.125,0,.5,-.125,0];return t.bindBuffer(t.ARRAY_BUFFER,lu),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),lu}function mq(t){if(cu)return cu;if(cu=t.createBuffer(),!cu)throw new Error("Unable to create buffer object");let e=[0,1,0,0,1,1,1,0];return t.bindBuffer(t.ARRAY_BUFFER,cu),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),cu}function gq(t,e,n,i,r){let s=_q(t),o=pq(t),a=mq(t);t.disable(t.DEPTH_TEST),t.useProgram(s.prog),t.uniformMatrix4fv(s.unif_proj,!1,e),t.uniformMatrix4fv(s.unif_camera,!1,n),t.uniformMatrix4fv(s.unif_matrix,!1,i),t.bindBuffer(t.ARRAY_BUFFER,o),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,yq(t,r)),t.uniform1i(s.unif_skinSampler,0),t.vertexAttribPointer(s.attr_position,3,t.FLOAT,!1,3*4,0),t.enableVertexAttribArray(s.attr_position),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(s.attr_textureCoord,2,t.FLOAT,!1,2*4,0),t.enableVertexAttribArray(s.attr_textureCoord),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.disableVertexAttribArray(s.attr_position),t.disableVertexAttribArray(s.attr_textureCoord),t.bindBuffer(t.ARRAY_BUFFER,null)}let Aq=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 projMatrix;
uniform mat4 cameraMatrix;
uniform mat4 modelViewMatrix;
attribute vec4 position;
attribute vec2 textureCoord;

varying highp vec2 vTextureCoord;

void main()
{
    gl_Position = projMatrix * cameraMatrix * modelViewMatrix * position;
    vTextureCoord = textureCoord;
}`,vq=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
uniform sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2D(skinSampler, vTextureCoord);
}`;function _q(t){if(xp)return xp;let e=t.createProgram();if(!e)throw new Error("Unable to create program");let n=uo(t,t.VERTEX_SHADER,Aq),i=uo(t,t.FRAGMENT_SHADER,vq);t.attachShader(e,n),t.attachShader(e,i),Gd(t,e);let r=t.getUniformLocation(e,"projMatrix");if(!r)throw new Error("Unable to get uniform location projMatrix");let s=t.getUniformLocation(e,"modelViewMatrix");if(!s)throw new Error("Unable to get uniform location modelViewMatrix");let o=t.getUniformLocation(e,"cameraMatrix");if(!o)throw new Error("Unable to get uniform location cameraMatrix");let a=t.getUniformLocation(e,"skinSampler");if(!a)throw new Error("Unable to get uniform location skinSampler");return xp={prog:e,unif_matrix:s,unif_proj:r,unif_camera:o,unif_skinSampler:a,attr_position:t.getAttribLocation(e,"position"),attr_textureCoord:t.getAttribLocation(e,"textureCoord")},xp}function yq(t,e){if(Ev[e])return Ev[e];let n=t.createTexture();if(!n)throw new Error("Unable to create texture");Ev[e]=n,t.bindTexture(t.TEXTURE_2D,n);const i=0,r=t.RGBA,s=1,o=1,a=0,l=t.RGBA,c=t.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,i,r,s,o,a,l,c,u);const f=new Image;return f.onload=function(){t.bindTexture(t.TEXTURE_2D,n),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,i,r,l,c,f),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)},f.src=e,n}var ct=1e-6,Gt=typeof Float32Array<"u"?Float32Array:Array,Bo=Math.random;function xq(t){Gt=t}var wq=Math.PI/180;function Eq(t){return t*wq}function bq(t,e){return Math.abs(t-e)<=ct*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const Sq=Object.freeze(Object.defineProperty({__proto__:null,EPSILON:ct,get ARRAY_TYPE(){return Gt},RANDOM:Bo,setMatrixArrayType:xq,toRadian:Eq,equals:bq},Symbol.toStringTag,{value:"Module"}));function Cq(){var t=new Gt(4);return Gt!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function Mq(t){var e=new Gt(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Iq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Tq(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function Bq(t,e,n,i){var r=new Gt(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function Rq(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function Pq(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function Dq(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*s-r*i;return o?(o=1/o,t[0]=s*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t):null}function Lq(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function Fq(t){return t[0]*t[3]-t[2]*t[1]}function jO(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*a+s*l,t[1]=r*a+o*l,t[2]=i*c+s*u,t[3]=r*c+o*u,t}function kq(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+s*a,t[1]=r*l+o*a,t[2]=i*-a+s*l,t[3]=r*-a+o*l,t}function Oq(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1];return t[0]=i*a,t[1]=r*a,t[2]=s*l,t[3]=o*l,t}function Uq(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t}function Nq(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function zq(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Gq(t){return Math.hypot(t[0],t[1],t[2],t[3])}function Qq(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]}function Hq(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function qO(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Vq(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Wq(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=ct*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=ct*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=ct*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=ct*Math.max(1,Math.abs(s),Math.abs(c))}function jq(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function qq(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}var Yq=jO,Xq=qO;const Jq=Object.freeze(Object.defineProperty({__proto__:null,create:Cq,clone:Mq,copy:Iq,identity:Tq,fromValues:Bq,set:Rq,transpose:Pq,invert:Dq,adjoint:Lq,determinant:Fq,multiply:jO,rotate:kq,scale:Oq,fromRotation:Uq,fromScaling:Nq,str:zq,frob:Gq,LDU:Qq,add:Hq,subtract:qO,exactEquals:Vq,equals:Wq,multiplyScalar:jq,multiplyScalarAndAdd:qq,mul:Yq,sub:Xq},Symbol.toStringTag,{value:"Module"}));function Kq(){var t=new Gt(6);return Gt!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function $q(t){var e=new Gt(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Zq(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function eY(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function tY(t,e,n,i,r,s){var o=new Gt(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o[4]=r,o[5]=s,o}function nY(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function iY(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=n*s-i*r;return l?(l=1/l,t[0]=s*l,t[1]=-i*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*a-s*o)*l,t[5]=(i*o-n*a)*l,t):null}function rY(t){return t[0]*t[3]-t[1]*t[2]}function YO(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],f=n[2],h=n[3],d=n[4],p=n[5];return t[0]=i*c+s*u,t[1]=r*c+o*u,t[2]=i*f+s*h,t[3]=r*f+o*h,t[4]=i*d+s*p+a,t[5]=r*d+o*p+l,t}function sY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*c,t[1]=r*u+o*c,t[2]=i*-c+s*u,t[3]=r*-c+o*u,t[4]=a,t[5]=l,t}function oY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i*c,t[1]=r*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function aY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=i*c+s*u+a,t[5]=r*c+o*u+l,t}function lY(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function cY(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function uY(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function fY(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function hY(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function dY(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function XO(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function pY(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function mY(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t}function gY(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function AY(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],f=e[3],h=e[4],d=e[5];return Math.abs(n-l)<=ct*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-c)<=ct*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-u)<=ct*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-f)<=ct*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-h)<=ct*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-d)<=ct*Math.max(1,Math.abs(a),Math.abs(d))}var vY=YO,_Y=XO;const yY=Object.freeze(Object.defineProperty({__proto__:null,create:Kq,clone:$q,copy:Zq,identity:eY,fromValues:tY,set:nY,invert:iY,determinant:rY,multiply:YO,rotate:sY,scale:oY,translate:aY,fromRotation:lY,fromScaling:cY,fromTranslation:uY,str:fY,frob:hY,add:dY,subtract:XO,multiplyScalar:pY,multiplyScalarAndAdd:mY,exactEquals:gY,equals:AY,mul:vY,sub:_Y},Symbol.toStringTag,{value:"Module"}));function JO(){var t=new Gt(9);return Gt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function xY(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function wY(t){var e=new Gt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function EY(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function bY(t,e,n,i,r,s,o,a,l){var c=new Gt(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=r,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function SY(t,e,n,i,r,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function CY(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function MY(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function IY(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=-u*s+a*l,d=c*s-o*l,p=n*f+i*h+r*d;return p?(p=1/p,t[0]=f*p,t[1]=(-u*i+r*c)*p,t[2]=(a*i-r*o)*p,t[3]=h*p,t[4]=(u*n-r*l)*p,t[5]=(-a*n+r*s)*p,t[6]=d*p,t[7]=(-c*n+i*l)*p,t[8]=(o*n-i*s)*p,t):null}function TY(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=r*c-i*u,t[2]=i*a-r*o,t[3]=a*l-s*u,t[4]=n*u-r*l,t[5]=r*s-n*a,t[6]=s*c-o*l,t[7]=i*l-n*c,t[8]=n*o-i*s,t}function BY(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*r+o*a)+i*(l*r-s*a)}function KO(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=n[0],d=n[1],p=n[2],m=n[3],A=n[4],v=n[5],y=n[6],x=n[7],w=n[8];return t[0]=h*i+d*o+p*c,t[1]=h*r+d*a+p*u,t[2]=h*s+d*l+p*f,t[3]=m*i+A*o+v*c,t[4]=m*r+A*a+v*u,t[5]=m*s+A*l+v*f,t[6]=y*i+x*o+w*c,t[7]=y*r+x*a+w*u,t[8]=y*s+x*l+w*f,t}function RY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=n[0],d=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=h*i+d*o+c,t[7]=h*r+d*a+u,t[8]=h*s+d*l+f,t}function PY(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*i+h*o,t[1]=d*r+h*a,t[2]=d*s+h*l,t[3]=d*o-h*i,t[4]=d*a-h*r,t[5]=d*l-h*s,t[6]=c,t[7]=u,t[8]=f,t}function DY(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function LY(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function FY(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kY(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function OY(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function UY(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,f=i*a,h=r*o,d=r*a,p=r*l,m=s*o,A=s*a,v=s*l;return t[0]=1-f-p,t[3]=u-v,t[6]=h+A,t[1]=u+v,t[4]=1-c-p,t[7]=d-m,t[2]=h-A,t[5]=d+m,t[8]=1-c-f,t}function NY(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],A=e[14],v=e[15],y=n*a-i*o,x=n*l-r*o,w=n*c-s*o,E=i*l-r*a,S=i*c-s*a,M=r*c-s*l,b=u*m-f*p,B=u*A-h*p,T=u*v-d*p,k=f*A-h*m,D=f*v-d*m,N=h*v-d*A,O=y*N-x*D+w*k+E*T-S*B+M*b;return O?(O=1/O,t[0]=(a*N-l*D+c*k)*O,t[1]=(l*T-o*N-c*B)*O,t[2]=(o*D-a*T+c*b)*O,t[3]=(r*D-i*N-s*k)*O,t[4]=(n*N-r*T+s*B)*O,t[5]=(i*T-n*D-s*b)*O,t[6]=(m*M-A*S+v*E)*O,t[7]=(A*w-p*M-v*x)*O,t[8]=(p*S-m*w+v*y)*O,t):null}function zY(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function GY(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function QY(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function HY(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function $O(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function VY(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function WY(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function jY(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qY(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],f=e[0],h=e[1],d=e[2],p=e[3],m=e[4],A=e[5],v=e[6],y=e[7],x=e[8];return Math.abs(n-f)<=ct*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-h)<=ct*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-d)<=ct*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-p)<=ct*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-m)<=ct*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-A)<=ct*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-v)<=ct*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-y)<=ct*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-x)<=ct*Math.max(1,Math.abs(u),Math.abs(x))}var YY=KO,XY=$O;const JY=Object.freeze(Object.defineProperty({__proto__:null,create:JO,fromMat4:xY,clone:wY,copy:EY,fromValues:bY,set:SY,identity:CY,transpose:MY,invert:IY,adjoint:TY,determinant:BY,multiply:KO,translate:RY,rotate:PY,scale:DY,fromTranslation:LY,fromRotation:FY,fromScaling:kY,fromMat2d:OY,fromQuat:UY,normalFromMat4:NY,projection:zY,str:GY,frob:QY,add:HY,subtract:$O,multiplyScalar:VY,multiplyScalarAndAdd:WY,exactEquals:jY,equals:qY,mul:YY,sub:XY},Symbol.toStringTag,{value:"Module"}));function ln(){var t=new Gt(16);return Gt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function KY(t){var e=new Gt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ZY(t,e,n,i,r,s,o,a,l,c,u,f,h,d,p,m){var A=new Gt(16);return A[0]=t,A[1]=e,A[2]=n,A[3]=i,A[4]=r,A[5]=s,A[6]=o,A[7]=a,A[8]=l,A[9]=c,A[10]=u,A[11]=f,A[12]=h,A[13]=d,A[14]=p,A[15]=m,A}function eX(t,e,n,i,r,s,o,a,l,c,u,f,h,d,p,m,A){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=m,t[15]=A,t}function ZO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tX(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function OM(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],A=e[14],v=e[15],y=n*a-i*o,x=n*l-r*o,w=n*c-s*o,E=i*l-r*a,S=i*c-s*a,M=r*c-s*l,b=u*m-f*p,B=u*A-h*p,T=u*v-d*p,k=f*A-h*m,D=f*v-d*m,N=h*v-d*A,O=y*N-x*D+w*k+E*T-S*B+M*b;return O?(O=1/O,t[0]=(a*N-l*D+c*k)*O,t[1]=(r*D-i*N-s*k)*O,t[2]=(m*M-A*S+v*E)*O,t[3]=(h*S-f*M-d*E)*O,t[4]=(l*T-o*N-c*B)*O,t[5]=(n*N-r*T+s*B)*O,t[6]=(A*w-p*M-v*x)*O,t[7]=(u*M-h*w+d*x)*O,t[8]=(o*D-a*T+c*b)*O,t[9]=(i*T-n*D-s*b)*O,t[10]=(p*S-m*w+v*y)*O,t[11]=(f*w-u*S-d*y)*O,t[12]=(a*B-o*k-l*b)*O,t[13]=(n*k-i*B+r*b)*O,t[14]=(m*x-p*E-A*y)*O,t[15]=(u*E-f*x+h*y)*O,t):null}function nX(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],A=e[14],v=e[15];return t[0]=a*(h*v-d*A)-f*(l*v-c*A)+m*(l*d-c*h),t[1]=-(i*(h*v-d*A)-f*(r*v-s*A)+m*(r*d-s*h)),t[2]=i*(l*v-c*A)-a*(r*v-s*A)+m*(r*c-s*l),t[3]=-(i*(l*d-c*h)-a*(r*d-s*h)+f*(r*c-s*l)),t[4]=-(o*(h*v-d*A)-u*(l*v-c*A)+p*(l*d-c*h)),t[5]=n*(h*v-d*A)-u*(r*v-s*A)+p*(r*d-s*h),t[6]=-(n*(l*v-c*A)-o*(r*v-s*A)+p*(r*c-s*l)),t[7]=n*(l*d-c*h)-o*(r*d-s*h)+u*(r*c-s*l),t[8]=o*(f*v-d*m)-u*(a*v-c*m)+p*(a*d-c*f),t[9]=-(n*(f*v-d*m)-u*(i*v-s*m)+p*(i*d-s*f)),t[10]=n*(a*v-c*m)-o*(i*v-s*m)+p*(i*c-s*a),t[11]=-(n*(a*d-c*f)-o*(i*d-s*f)+u*(i*c-s*a)),t[12]=-(o*(f*A-h*m)-u*(a*A-l*m)+p*(a*h-l*f)),t[13]=n*(f*A-h*m)-u*(i*A-r*m)+p*(i*h-r*f),t[14]=-(n*(a*A-l*m)-o*(i*A-r*m)+p*(i*l-r*a)),t[15]=n*(a*h-l*f)-o*(i*h-r*f)+u*(i*l-r*a),t}function iX(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],d=t[12],p=t[13],m=t[14],A=t[15],v=e*o-n*s,y=e*a-i*s,x=e*l-r*s,w=n*a-i*o,E=n*l-r*o,S=i*l-r*a,M=c*p-u*d,b=c*m-f*d,B=c*A-h*d,T=u*m-f*p,k=u*A-h*p,D=f*A-h*m;return v*D-y*k+x*T+w*B-E*b+S*M}function en(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],A=e[13],v=e[14],y=e[15],x=n[0],w=n[1],E=n[2],S=n[3];return t[0]=x*i+w*a+E*f+S*m,t[1]=x*r+w*l+E*h+S*A,t[2]=x*s+w*c+E*d+S*v,t[3]=x*o+w*u+E*p+S*y,x=n[4],w=n[5],E=n[6],S=n[7],t[4]=x*i+w*a+E*f+S*m,t[5]=x*r+w*l+E*h+S*A,t[6]=x*s+w*c+E*d+S*v,t[7]=x*o+w*u+E*p+S*y,x=n[8],w=n[9],E=n[10],S=n[11],t[8]=x*i+w*a+E*f+S*m,t[9]=x*r+w*l+E*h+S*A,t[10]=x*s+w*c+E*d+S*v,t[11]=x*o+w*u+E*p+S*y,x=n[12],w=n[13],E=n[14],S=n[15],t[12]=x*i+w*a+E*f+S*m,t[13]=x*r+w*l+E*h+S*A,t[14]=x*s+w*c+E*d+S*v,t[15]=x*o+w*u+E*p+S*y,t}function rX(t,e,n){var i=n[0],r=n[1],s=n[2],o,a,l,c,u,f,h,d,p,m,A,v;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],f=e[5],h=e[6],d=e[7],p=e[8],m=e[9],A=e[10],v=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=m,t[10]=A,t[11]=v,t[12]=o*i+u*r+p*s+e[12],t[13]=a*i+f*r+m*s+e[13],t[14]=l*i+h*r+A*s+e[14],t[15]=c*i+d*r+v*s+e[15]),t}function sX(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function oX(t,e,n,i){var r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o),l,c,u,f,h,d,p,m,A,v,y,x,w,E,S,M,b,B,T,k,D,N,O,Y;return a<ct?null:(a=1/a,r*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,f=e[0],h=e[1],d=e[2],p=e[3],m=e[4],A=e[5],v=e[6],y=e[7],x=e[8],w=e[9],E=e[10],S=e[11],M=r*r*u+c,b=s*r*u+o*l,B=o*r*u-s*l,T=r*s*u-o*l,k=s*s*u+c,D=o*s*u+r*l,N=r*o*u+s*l,O=s*o*u-r*l,Y=o*o*u+c,t[0]=f*M+m*b+x*B,t[1]=h*M+A*b+w*B,t[2]=d*M+v*b+E*B,t[3]=p*M+y*b+S*B,t[4]=f*T+m*k+x*D,t[5]=h*T+A*k+w*D,t[6]=d*T+v*k+E*D,t[7]=p*T+y*k+S*D,t[8]=f*N+m*O+x*Y,t[9]=h*N+A*O+w*Y,t[10]=d*N+v*O+E*Y,t[11]=p*N+y*O+S*Y,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function aX(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*i,t[5]=o*r+u*i,t[6]=a*r+f*i,t[7]=l*r+h*i,t[8]=c*r-s*i,t[9]=u*r-o*i,t[10]=f*r-a*i,t[11]=h*r-l*i,t}function lX(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*i,t[1]=o*r-u*i,t[2]=a*r-f*i,t[3]=l*r-h*i,t[8]=s*i+c*r,t[9]=o*i+u*r,t[10]=a*i+f*r,t[11]=l*i+h*r,t}function cX(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*i,t[1]=o*r+u*i,t[2]=a*r+f*i,t[3]=l*r+h*i,t[4]=c*r-s*i,t[5]=u*r-o*i,t[6]=f*r-a*i,t[7]=h*r-l*i,t}function c_(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Zi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wd(t,e,n){var i=n[0],r=n[1],s=n[2],o=Math.hypot(i,r,s),a,l,c;return o<ct?null:(o=1/o,i*=o,r*=o,s*=o,a=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=i*i*c+l,t[1]=r*i*c+s*a,t[2]=s*i*c-r*a,t[3]=0,t[4]=i*r*c-s*a,t[5]=r*r*c+l,t[6]=s*r*c+i*a,t[7]=0,t[8]=i*s*c+r*a,t[9]=r*s*c-i*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function uX(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fX(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hX(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e6(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=i+i,l=r+r,c=s+s,u=i*a,f=i*l,h=i*c,d=r*l,p=r*c,m=s*c,A=o*a,v=o*l,y=o*c;return t[0]=1-(d+m),t[1]=f+y,t[2]=h-v,t[3]=0,t[4]=f-y,t[5]=1-(u+m),t[6]=p+A,t[7]=0,t[8]=h+v,t[9]=p-A,t[10]=1-(u+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function dX(t,e){var n=new Gt(3),i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=i*i+r*r+s*s+o*o;return f>0?(n[0]=(a*o+u*i+l*s-c*r)*2/f,n[1]=(l*o+u*r+c*i-a*s)*2/f,n[2]=(c*o+u*s+a*r-l*i)*2/f):(n[0]=(a*o+u*i+l*s-c*r)*2,n[1]=(l*o+u*r+c*i-a*s)*2,n[2]=(c*o+u*s+a*r-l*i)*2),e6(t,e,n),t}function t6(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function n6(t,e){var n=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,u),t}function i6(t,e){var n=new Gt(3);n6(n,e);var i=1/n[0],r=1/n[1],s=1/n[2],o=e[0]*i,a=e[1]*r,l=e[2]*s,c=e[4]*i,u=e[5]*r,f=e[6]*s,h=e[8]*i,d=e[9]*r,p=e[10]*s,m=o+u+p,A=0;return m>0?(A=Math.sqrt(m+1)*2,t[3]=.25*A,t[0]=(f-d)/A,t[1]=(h-l)/A,t[2]=(a-c)/A):o>u&&o>p?(A=Math.sqrt(1+o-u-p)*2,t[3]=(f-d)/A,t[0]=.25*A,t[1]=(a+c)/A,t[2]=(h+l)/A):u>p?(A=Math.sqrt(1+u-o-p)*2,t[3]=(h-l)/A,t[0]=(a+c)/A,t[1]=.25*A,t[2]=(f+d)/A):(A=Math.sqrt(1+p-o-u)*2,t[3]=(a-c)/A,t[0]=(h+l)/A,t[1]=(f+d)/A,t[2]=.25*A),t}function pX(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],l=r+r,c=s+s,u=o+o,f=r*l,h=r*c,d=r*u,p=s*c,m=s*u,A=o*u,v=a*l,y=a*c,x=a*u,w=i[0],E=i[1],S=i[2];return t[0]=(1-(p+A))*w,t[1]=(h+x)*w,t[2]=(d-y)*w,t[3]=0,t[4]=(h-x)*E,t[5]=(1-(f+A))*E,t[6]=(m+v)*E,t[7]=0,t[8]=(d+y)*S,t[9]=(m-v)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function mX(t,e,n,i,r){var s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,f=a+a,h=s*c,d=s*u,p=s*f,m=o*u,A=o*f,v=a*f,y=l*c,x=l*u,w=l*f,E=i[0],S=i[1],M=i[2],b=r[0],B=r[1],T=r[2],k=(1-(m+v))*E,D=(d+w)*E,N=(p-x)*E,O=(d-w)*S,Y=(1-(h+v))*S,q=(A+y)*S,K=(p+x)*M,z=(A-y)*M,U=(1-(h+m))*M;return t[0]=k,t[1]=D,t[2]=N,t[3]=0,t[4]=O,t[5]=Y,t[6]=q,t[7]=0,t[8]=K,t[9]=z,t[10]=U,t[11]=0,t[12]=n[0]+b-(k*b+O*B+K*T),t[13]=n[1]+B-(D*b+Y*B+z*T),t[14]=n[2]+T-(N*b+q*B+U*T),t[15]=1,t}function gX(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,f=i*a,h=r*o,d=r*a,p=r*l,m=s*o,A=s*a,v=s*l;return t[0]=1-f-p,t[1]=u+v,t[2]=h-A,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=h+A,t[9]=d-m,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r6(t,e,n,i,r,s,o){var a=1/(n-e),l=1/(r-i),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function s6(t,e,n,i,r){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t}var AX=s6;function vX(t,e,n,i,r){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(i-r),t[10]=r*o,t[14]=r*i*o):(t[10]=-1,t[14]=-i),t}function _X(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(r+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((o-a)*l*.5),t[9]=(r-s)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function o6(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*c,t[15]=1,t}var yX=o6;function xX(t,e,n,i,r,s,o){var a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=s*c,t[15]=1,t}function wX(t,e,n,i){var r,s,o,a,l,c,u,f,h,d,p=e[0],m=e[1],A=e[2],v=i[0],y=i[1],x=i[2],w=n[0],E=n[1],S=n[2];return Math.abs(p-w)<ct&&Math.abs(m-E)<ct&&Math.abs(A-S)<ct?ZO(t):(u=p-w,f=m-E,h=A-S,d=1/Math.hypot(u,f,h),u*=d,f*=d,h*=d,r=y*h-x*f,s=x*u-v*h,o=v*f-y*u,d=Math.hypot(r,s,o),d?(d=1/d,r*=d,s*=d,o*=d):(r=0,s=0,o=0),a=f*o-h*s,l=h*r-u*o,c=u*s-f*r,d=Math.hypot(a,l,c),d?(d=1/d,a*=d,l*=d,c*=d):(a=0,l=0,c=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(r*p+s*m+o*A),t[13]=-(a*p+l*m+c*A),t[14]=-(u*p+f*m+h*A),t[15]=1,t)}function EX(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=i[0],l=i[1],c=i[2],u=r-n[0],f=s-n[1],h=o-n[2],d=u*u+f*f+h*h;d>0&&(d=1/Math.sqrt(d),u*=d,f*=d,h*=d);var p=l*h-c*f,m=c*u-a*h,A=a*f-l*u;return d=p*p+m*m+A*A,d>0&&(d=1/Math.sqrt(d),p*=d,m*=d,A*=d),t[0]=p,t[1]=m,t[2]=A,t[3]=0,t[4]=f*A-h*m,t[5]=h*p-u*A,t[6]=u*m-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=h,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function bX(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function SX(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function CX(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function a6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function MX(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function IX(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function TX(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function BX(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],f=t[9],h=t[10],d=t[11],p=t[12],m=t[13],A=t[14],v=t[15],y=e[0],x=e[1],w=e[2],E=e[3],S=e[4],M=e[5],b=e[6],B=e[7],T=e[8],k=e[9],D=e[10],N=e[11],O=e[12],Y=e[13],q=e[14],K=e[15];return Math.abs(n-y)<=ct*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-x)<=ct*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(r-w)<=ct*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(s-E)<=ct*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(o-S)<=ct*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(a-M)<=ct*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-b)<=ct*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-B)<=ct*Math.max(1,Math.abs(c),Math.abs(B))&&Math.abs(u-T)<=ct*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(f-k)<=ct*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-D)<=ct*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(d-N)<=ct*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(p-O)<=ct*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(m-Y)<=ct*Math.max(1,Math.abs(m),Math.abs(Y))&&Math.abs(A-q)<=ct*Math.max(1,Math.abs(A),Math.abs(q))&&Math.abs(v-K)<=ct*Math.max(1,Math.abs(v),Math.abs(K))}var RX=en,PX=a6;const DX=Object.freeze(Object.defineProperty({__proto__:null,create:ln,clone:KY,copy:$Y,fromValues:ZY,set:eX,identity:ZO,transpose:tX,invert:OM,adjoint:nX,determinant:iX,multiply:en,translate:rX,scale:sX,rotate:oX,rotateX:aX,rotateY:lX,rotateZ:cX,fromTranslation:c_,fromScaling:Zi,fromRotation:wd,fromXRotation:uX,fromYRotation:fX,fromZRotation:hX,fromRotationTranslation:e6,fromQuat2:dX,getTranslation:t6,getScaling:n6,getRotation:i6,fromRotationTranslationScale:pX,fromRotationTranslationScaleOrigin:mX,fromQuat:gX,frustum:r6,perspectiveNO:s6,perspective:AX,perspectiveZO:vX,perspectiveFromFieldOfView:_X,orthoNO:o6,ortho:yX,orthoZO:xX,lookAt:wX,targetTo:EX,str:bX,frob:SX,add:CX,subtract:a6,multiplyScalar:MX,multiplyScalarAndAdd:IX,exactEquals:TX,equals:BX,mul:RX,sub:PX},Symbol.toStringTag,{value:"Module"}));function Qd(){var t=new Gt(3);return Gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function LX(t){var e=new Gt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function UM(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function cS(t,e,n){var i=new Gt(3);return i[0]=t,i[1]=e,i[2]=n,i}function FX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function kX(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function OX(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function l6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function c6(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function u6(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function UX(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function NX(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function zX(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function GX(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function QX(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function HX(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function VX(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function f6(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.hypot(n,i,r)}function h6(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function d6(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function WX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function jX(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function NM(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function zM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Up(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function qX(t,e,n,i){var r=e[0],s=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t}function YX(t,e,n,i,r,s){var o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+i[0]*c+r[0]*u,t[1]=e[1]*a+n[1]*l+i[1]*c+r[1]*u,t[2]=e[2]*a+n[2]*l+i[2]*c+r[2]*u,t}function XX(t,e,n,i,r,s){var o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,f=3*l*o,h=l*s;return t[0]=e[0]*c+n[0]*u+i[0]*f+r[0]*h,t[1]=e[1]*c+n[1]*u+i[1]*f+r[1]*h,t[2]=e[2]*c+n[2]*u+i[2]*f+r[2]*h,t}function JX(t,e){e=e||1;var n=Bo()*2*Math.PI,i=Bo()*2-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}function ly(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function KX(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function $X(t,e,n){var i=n[0],r=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=r*c-s*l,f=s*a-i*c,h=i*l-r*a,d=r*h-s*f,p=s*u-i*h,m=i*f-r*u,A=o*2;return u*=A,f*=A,h*=A,d*=2,p*=2,m*=2,t[0]=a+u+d,t[1]=l+f+p,t[2]=c+h+m,t}function ZX(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function eJ(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function tJ(t,e,n,i){var r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function nJ(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+i*i+r*r),c=Math.sqrt(s*s+o*o+a*a),u=l*c,f=u&&zM(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function iJ(t){return t[0]=0,t[1]=0,t[2]=0,t}function rJ(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function sJ(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function oJ(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(n-s)<=ct*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=ct*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=ct*Math.max(1,Math.abs(r),Math.abs(a))}var aJ=l6,lJ=c6,cJ=u6,uJ=f6,fJ=h6,p6=UM,hJ=d6,dJ=function(){var t=Qd();return function(e,n,i,r,s,o){var a,l;for(n||(n=3),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}();const pJ=Object.freeze(Object.defineProperty({__proto__:null,create:Qd,clone:LX,length:UM,fromValues:cS,copy:FX,set:kX,add:OX,subtract:l6,multiply:c6,divide:u6,ceil:UX,floor:NX,min:zX,max:GX,round:QX,scale:HX,scaleAndAdd:VX,distance:f6,squaredDistance:h6,squaredLength:d6,negate:WX,inverse:jX,normalize:NM,dot:zM,cross:Up,lerp:qX,hermite:YX,bezier:XX,random:JX,transformMat4:ly,transformMat3:KX,transformQuat:$X,rotateX:ZX,rotateY:eJ,rotateZ:tJ,angle:nJ,zero:iJ,str:rJ,exactEquals:sJ,equals:oJ,sub:aJ,mul:lJ,div:cJ,dist:uJ,sqrDist:fJ,len:p6,sqrLen:hJ,forEach:dJ},Symbol.toStringTag,{value:"Module"}));function m6(){var t=new Gt(4);return Gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function g6(t){var e=new Gt(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function A6(t,e,n,i){var r=new Gt(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function v6(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function _6(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function y6(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function x6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function w6(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function E6(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function mJ(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function gJ(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function AJ(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function vJ(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function _J(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function b6(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function yJ(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function S6(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return Math.hypot(n,i,r,s)}function C6(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return n*n+i*i+r*r+s*s}function GM(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.hypot(e,n,i,r)}function QM(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function xJ(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function wJ(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function M6(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}function I6(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function EJ(t,e,n,i){var r=n[0]*i[1]-n[1]*i[0],s=n[0]*i[2]-n[2]*i[0],o=n[0]*i[3]-n[3]*i[0],a=n[1]*i[2]-n[2]*i[1],l=n[1]*i[3]-n[3]*i[1],c=n[2]*i[3]-n[3]*i[2],u=e[0],f=e[1],h=e[2],d=e[3];return t[0]=f*c-h*l+d*a,t[1]=-(u*c)+h*o-d*s,t[2]=u*l-f*o+d*r,t[3]=-(u*a)+f*s-h*r,t}function T6(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a),t}function bJ(t,e){e=e||1;var n,i,r,s,o,a;do n=Bo()*2-1,i=Bo()*2-1,o=n*n+i*i;while(o>=1);do r=Bo()*2-1,s=Bo()*2-1,a=r*r+s*s;while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=e*n,t[1]=e*i,t[2]=e*r*l,t[3]=e*s*l,t}function SJ(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}function CJ(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*i+a*s-l*r,f=c*r+l*i-o*s,h=c*s+o*r-a*i,d=-o*i-a*r-l*s;return t[0]=u*c+d*-o+f*-l-h*-a,t[1]=f*c+d*-a+h*-o-u*-l,t[2]=h*c+d*-l+u*-a-f*-o,t[3]=e[3],t}function MJ(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function IJ(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function B6(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function R6(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=ct*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=ct*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=ct*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=ct*Math.max(1,Math.abs(s),Math.abs(c))}var TJ=x6,BJ=w6,RJ=E6,PJ=S6,DJ=C6,LJ=GM,FJ=QM,kJ=function(){var t=m6();return function(e,n,i,r,s,o){var a,l;for(n||(n=4),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();const OJ=Object.freeze(Object.defineProperty({__proto__:null,create:m6,clone:g6,fromValues:A6,copy:v6,set:_6,add:y6,subtract:x6,multiply:w6,divide:E6,ceil:mJ,floor:gJ,min:AJ,max:vJ,round:_J,scale:b6,scaleAndAdd:yJ,distance:S6,squaredDistance:C6,length:GM,squaredLength:QM,negate:xJ,inverse:wJ,normalize:M6,dot:I6,cross:EJ,lerp:T6,random:bJ,transformMat4:SJ,transformQuat:CJ,zero:MJ,str:IJ,exactEquals:B6,equals:R6,sub:TJ,mul:BJ,div:RJ,dist:PJ,sqrDist:DJ,len:LJ,sqrLen:FJ,forEach:kJ},Symbol.toStringTag,{value:"Module"}));function u_(){var t=new Gt(4);return Gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function UJ(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function P6(t,e,n){n=n*.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function NJ(t,e){var n=Math.acos(e[3])*2,i=Math.sin(n/2);return i>ct?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function zJ(t,e){var n=VM(t,e);return Math.acos(2*n*n-1)}function D6(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,t}function L6(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a,t}function F6(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a,t}function k6(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function GJ(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function O6(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=Math.sqrt(n*n+i*i+r*r),a=Math.exp(s),l=o>0?a*Math.sin(o)/o:0;return t[0]=n*l,t[1]=i*l,t[2]=r*l,t[3]=a*Math.cos(o),t}function U6(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=Math.sqrt(n*n+i*i+r*r),a=o>0?Math.atan2(o,s)/o:0;return t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=.5*Math.log(n*n+i*i+r*r+s*s),t}function QJ(t,e,n){return U6(t,e),z6(t,t,n),O6(t,t),t}function bv(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],f=n[3],h,d,p,m,A;return d=r*l+s*c+o*u+a*f,d<0&&(d=-d,l=-l,c=-c,u=-u,f=-f),1-d>ct?(h=Math.acos(d),p=Math.sin(h),m=Math.sin((1-i)*h)/p,A=Math.sin(i*h)/p):(m=1-i,A=i),t[0]=m*r+A*l,t[1]=m*s+A*c,t[2]=m*o+A*u,t[3]=m*a+A*f,t}function HJ(t){var e=Bo(),n=Bo(),i=Bo(),r=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=s*Math.sin(2*Math.PI*i),t[3]=s*Math.cos(2*Math.PI*i),t}function VJ(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a,t}function WJ(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function N6(t,e){var n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[o*3+o]+1),t[r]=.5*i,i=.5/i,t[3]=(e[s*3+o]-e[o*3+s])*i,t[s]=(e[s*3+r]+e[r*3+s])*i,t[o]=(e[o*3+r]+e[r*3+o])*i}return t}function jJ(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var s=Math.sin(e),o=Math.cos(e),a=Math.sin(n),l=Math.cos(n),c=Math.sin(i),u=Math.cos(i);return t[0]=s*l*u-o*a*c,t[1]=o*a*u+s*l*c,t[2]=o*l*c-s*a*u,t[3]=o*l*u+s*a*c,t}function qJ(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var YJ=g6,XJ=A6,HM=v6,JJ=_6,KJ=y6,$J=D6,z6=b6,VM=I6,ZJ=T6,WM=GM,eK=WM,jM=QM,tK=jM,qM=M6,nK=B6,iK=R6,rK=function(){var t=Qd(),e=cS(1,0,0),n=cS(0,1,0);return function(i,r,s){var o=zM(r,s);return o<-.999999?(Up(t,e,r),p6(t)<1e-6&&Up(t,n,r),NM(t,t),P6(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Up(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,qM(i,i))}}(),sK=function(){var t=u_(),e=u_();return function(n,i,r,s,o,a){return bv(t,i,o,a),bv(e,r,s,a),bv(n,t,e,2*a*(1-a)),n}}(),oK=function(){var t=JO();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],qM(e,N6(e,t))}}();const aK=Object.freeze(Object.defineProperty({__proto__:null,create:u_,identity:UJ,setAxisAngle:P6,getAxisAngle:NJ,getAngle:zJ,multiply:D6,rotateX:L6,rotateY:F6,rotateZ:k6,calculateW:GJ,exp:O6,ln:U6,pow:QJ,slerp:bv,random:HJ,invert:VJ,conjugate:WJ,fromMat3:N6,fromEuler:jJ,str:qJ,clone:YJ,fromValues:XJ,copy:HM,set:JJ,add:KJ,mul:$J,scale:z6,dot:VM,lerp:ZJ,length:WM,len:eK,squaredLength:jM,sqrLen:tK,normalize:qM,exactEquals:nK,equals:iK,rotationTo:rK,sqlerp:sK,setAxes:oK},Symbol.toStringTag,{value:"Module"}));function lK(){var t=new Gt(8);return Gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function cK(t){var e=new Gt(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function uK(t,e,n,i,r,s,o,a){var l=new Gt(8);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=r,l[5]=s,l[6]=o,l[7]=a,l}function fK(t,e,n,i,r,s,o){var a=new Gt(8);a[0]=t,a[1]=e,a[2]=n,a[3]=i;var l=r*.5,c=s*.5,u=o*.5;return a[4]=l*i+c*n-u*e,a[5]=c*i+u*t-l*n,a[6]=u*i+l*e-c*t,a[7]=-l*t-c*e-u*n,a}function G6(t,e,n){var i=n[0]*.5,r=n[1]*.5,s=n[2]*.5,o=e[0],a=e[1],l=e[2],c=e[3];return t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=i*c+r*l-s*a,t[5]=r*c+s*o-i*l,t[6]=s*c+i*a-r*o,t[7]=-i*o-r*a-s*l,t}function hK(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0]*.5,t[5]=e[1]*.5,t[6]=e[2]*.5,t[7]=0,t}function dK(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function pK(t,e){var n=u_();i6(n,e);var i=new Gt(3);return t6(i,e),G6(t,n,i),t}function Q6(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function mK(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function gK(t,e,n,i,r,s,o,a,l){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t}var AK=HM;function vK(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var _K=HM;function yK(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function xK(t,e){var n=e[4],i=e[5],r=e[6],s=e[7],o=-e[0],a=-e[1],l=-e[2],c=e[3];return t[0]=(n*c+s*o+i*l-r*a)*2,t[1]=(i*c+s*a+r*o-n*l)*2,t[2]=(r*c+s*l+n*a-i*o)*2,t}function wK(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0]*.5,l=n[1]*.5,c=n[2]*.5,u=e[4],f=e[5],h=e[6],d=e[7];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=o*a+r*c-s*l+u,t[5]=o*l+s*a-i*c+f,t[6]=o*c+i*l-r*a+h,t[7]=-i*a-r*l-s*c+d,t}function EK(t,e,n){var i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=a*o+u*i+l*s-c*r,h=l*o+u*r+c*i-a*s,d=c*o+u*s+a*r-l*i,p=u*o-a*i-l*r-c*s;return L6(t,e,n),i=t[0],r=t[1],s=t[2],o=t[3],t[4]=f*o+p*i+h*s-d*r,t[5]=h*o+p*r+d*i-f*s,t[6]=d*o+p*s+f*r-h*i,t[7]=p*o-f*i-h*r-d*s,t}function bK(t,e,n){var i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=a*o+u*i+l*s-c*r,h=l*o+u*r+c*i-a*s,d=c*o+u*s+a*r-l*i,p=u*o-a*i-l*r-c*s;return F6(t,e,n),i=t[0],r=t[1],s=t[2],o=t[3],t[4]=f*o+p*i+h*s-d*r,t[5]=h*o+p*r+d*i-f*s,t[6]=d*o+p*s+f*r-h*i,t[7]=p*o-f*i-h*r-d*s,t}function SK(t,e,n){var i=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=a*o+u*i+l*s-c*r,h=l*o+u*r+c*i-a*s,d=c*o+u*s+a*r-l*i,p=u*o-a*i-l*r-c*s;return k6(t,e,n),i=t[0],r=t[1],s=t[2],o=t[3],t[4]=f*o+p*i+h*s-d*r,t[5]=h*o+p*r+d*i-f*s,t[6]=d*o+p*s+f*r-h*i,t[7]=p*o-f*i-h*r-d*s,t}function CK(t,e,n){var i=n[0],r=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=e[3];return t[0]=a*o+u*i+l*s-c*r,t[1]=l*o+u*r+c*i-a*s,t[2]=c*o+u*s+a*r-l*i,t[3]=u*o-a*i-l*r-c*s,a=e[4],l=e[5],c=e[6],u=e[7],t[4]=a*o+u*i+l*s-c*r,t[5]=l*o+u*r+c*i-a*s,t[6]=c*o+u*s+a*r-l*i,t[7]=u*o-a*i-l*r-c*s,t}function MK(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,a=n[4],l=n[5],c=n[6],u=n[7],t[4]=i*u+o*a+r*c-s*l,t[5]=r*u+o*l+s*a-i*c,t[6]=s*u+o*c+i*l-r*a,t[7]=o*u-i*a-r*l-s*c,t}function IK(t,e,n,i){if(Math.abs(i)<ct)return Q6(t,e);var r=Math.hypot(n[0],n[1],n[2]);i=i*.5;var s=Math.sin(i),o=s*n[0]/r,a=s*n[1]/r,l=s*n[2]/r,c=Math.cos(i),u=e[0],f=e[1],h=e[2],d=e[3];t[0]=u*c+d*o+f*l-h*a,t[1]=f*c+d*a+h*o-u*l,t[2]=h*c+d*l+u*a-f*o,t[3]=d*c-u*o-f*a-h*l;var p=e[4],m=e[5],A=e[6],v=e[7];return t[4]=p*c+v*o+m*l-A*a,t[5]=m*c+v*a+A*o-p*l,t[6]=A*c+v*l+p*a-m*o,t[7]=v*c-p*o-m*a-A*l,t}function TK(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function H6(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[4],l=n[5],c=n[6],u=n[7],f=e[4],h=e[5],d=e[6],p=e[7],m=n[0],A=n[1],v=n[2],y=n[3];return t[0]=i*y+o*m+r*v-s*A,t[1]=r*y+o*A+s*m-i*v,t[2]=s*y+o*v+i*A-r*m,t[3]=o*y-i*m-r*A-s*v,t[4]=i*u+o*a+r*c-s*l+f*y+p*m+h*v-d*A,t[5]=r*u+o*l+s*a-i*c+h*y+p*A+d*m-f*v,t[6]=s*u+o*c+i*l-r*a+d*y+p*v+f*A-h*m,t[7]=o*u-i*a-r*l-s*c+p*y-f*m-h*A-d*v,t}var BK=H6;function RK(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var V6=VM;function PK(t,e,n,i){var r=1-i;return V6(e,n)<0&&(i=-i),t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i,t[3]=e[3]*r+n[3]*i,t[4]=e[4]*r+n[4]*i,t[5]=e[5]*r+n[5]*i,t[6]=e[6]*r+n[6]*i,t[7]=e[7]*r+n[7]*i,t}function DK(t,e){var n=cy(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function LK(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var W6=WM,FK=W6,cy=jM,kK=cy;function OK(t,e){var n=cy(e);if(n>0){n=Math.sqrt(n);var i=e[0]/n,r=e[1]/n,s=e[2]/n,o=e[3]/n,a=e[4],l=e[5],c=e[6],u=e[7],f=i*a+r*l+s*c+o*u;t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=(a-i*f)/n,t[5]=(l-r*f)/n,t[6]=(c-s*f)/n,t[7]=(u-o*f)/n}return t}function UK(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function NK(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function zK(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=e[0],f=e[1],h=e[2],d=e[3],p=e[4],m=e[5],A=e[6],v=e[7];return Math.abs(n-u)<=ct*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-f)<=ct*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-h)<=ct*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-d)<=ct*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-p)<=ct*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=ct*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-A)<=ct*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-v)<=ct*Math.max(1,Math.abs(c),Math.abs(v))}const GK=Object.freeze(Object.defineProperty({__proto__:null,create:lK,clone:cK,fromValues:uK,fromRotationTranslationValues:fK,fromRotationTranslation:G6,fromTranslation:hK,fromRotation:dK,fromMat4:pK,copy:Q6,identity:mK,set:gK,getReal:AK,getDual:vK,setReal:_K,setDual:yK,getTranslation:xK,translate:wK,rotateX:EK,rotateY:bK,rotateZ:SK,rotateByQuatAppend:CK,rotateByQuatPrepend:MK,rotateAroundAxis:IK,add:TK,multiply:H6,mul:BK,scale:RK,dot:V6,lerp:PK,invert:DK,conjugate:LK,length:W6,len:FK,squaredLength:cy,sqrLen:kK,normalize:OK,str:UK,exactEquals:NK,equals:zK},Symbol.toStringTag,{value:"Module"}));function To(){var t=new Gt(2);return Gt!=Float32Array&&(t[0]=0,t[1]=0),t}function QK(t){var e=new Gt(2);return e[0]=t[0],e[1]=t[1],e}function HK(t,e){var n=new Gt(2);return n[0]=t,n[1]=e,n}function _u(t,e){return t[0]=e[0],t[1]=e[1],t}function VK(t,e,n){return t[0]=e,t[1]=n,t}function uS(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function f_(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function j6(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function q6(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function WK(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function jK(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function qK(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function YK(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function XK(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function fS(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function JK(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function Y6(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.hypot(n,i)}function X6(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function h_(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function J6(t){var e=t[0],n=t[1];return e*e+n*n}function KK(t,e){return t[0]=-e[0],t[1]=-e[1],t}function $K(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function ZK(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function e$(t,e){return t[0]*e[0]+t[1]*e[1]}function t$(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function n$(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function i$(t,e){e=e||1;var n=Bo()*2*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function r$(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t}function s$(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function o$(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function a$(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}function l$(t,e,n,i){var r=e[0]-n[0],s=e[1]-n[1],o=Math.sin(i),a=Math.cos(i);return t[0]=r*a-s*o+n[0],t[1]=r*o+s*a+n[1],t}function c$(t,e){var n=t[0],i=t[1],r=e[0],s=e[1],o=Math.sqrt(n*n+i*i)*Math.sqrt(r*r+s*s),a=o&&(n*r+i*s)/o;return Math.acos(Math.min(Math.max(a,-1),1))}function u$(t){return t[0]=0,t[1]=0,t}function f$(t){return"vec2("+t[0]+", "+t[1]+")"}function h$(t,e){return t[0]===e[0]&&t[1]===e[1]}function d$(t,e){var n=t[0],i=t[1],r=e[0],s=e[1];return Math.abs(n-r)<=ct*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-s)<=ct*Math.max(1,Math.abs(i),Math.abs(s))}var p$=h_,m$=f_,g$=j6,A$=q6,v$=Y6,_$=X6,y$=J6,x$=function(){var t=To();return function(e,n,i,r,s,o){var a,l;for(n||(n=2),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,a=i;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();const w$=Object.freeze(Object.defineProperty({__proto__:null,create:To,clone:QK,fromValues:HK,copy:_u,set:VK,add:uS,subtract:f_,multiply:j6,divide:q6,ceil:WK,floor:jK,min:qK,max:YK,round:XK,scale:fS,scaleAndAdd:JK,distance:Y6,squaredDistance:X6,length:h_,squaredLength:J6,negate:KK,inverse:$K,normalize:ZK,dot:e$,cross:t$,lerp:n$,random:i$,transformMat2:r$,transformMat2d:s$,transformMat3:o$,transformMat4:a$,rotate:l$,angle:c$,zero:u$,str:f$,exactEquals:h$,equals:d$,len:p$,sub:m$,mul:g$,div:A$,dist:v$,sqrDist:_$,sqrLen:y$,forEach:x$},Symbol.toStringTag,{value:"Module"})),E$=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:Sq,mat2:Jq,mat2d:yY,mat3:JY,mat4:DX,quat:aK,quat2:GK,vec2:w$,vec3:pJ,vec4:OJ},Symbol.toStringTag,{value:"Module"}));function A4(t,e,n,i=.01,r=100){let s=t[2]*2,o=t[3]*2,a=ln();r6(a,i*(-.5-t[2])/t[0],i*(s-.5-t[2])/t[0],i*(o-.5-t[3])/t[1],i*(-.5-t[3])/t[1],i,r),a[4]*=-1,a[5]*=-1,a[6]*=-1,a[7]*=-1;let l=ln();Zi(l,[.5*s,.5*o,1]),en(a,l,a),wd(l,Zu(!1)*Math.PI/180,[0,0,1]),en(a,l,a);let c=Qd();c[0]=s,c[1]=o,c[2]=0,ly(c,c,l);let u=Math.abs(c[0]),f=Math.abs(c[1]),h=1;return u/e>f/n?h=n/f:h=e/u,Zi(l,[h,h,1]),en(a,l,a),Zi(l,[2/e,2/n,1]),en(a,l,a),wd(l,Zu(!1)*Math.PI/-180,[0,0,1]),en(a,a,l),a}function Zu(t){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return t?90:270;case"landscape-secondary":return 180;case"portrait-secondary":return t?270:90;default:return 0}else if(window.orientation!==void 0)switch(window.orientation){case 0:return t?90:270;case 90:return 0;case 180:return t?270:90;case-90:return 180}return 0}class K6{constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(){for(var e=0,n=this._funcs.length;e<n;e++)this._funcs[e]()}}class b${constructor(){this._funcs=[]}bind(e){this._funcs.push(e)}unbind(e){let n=this._funcs.indexOf(e);n>-1&&this._funcs.splice(n,1)}emit(e){for(var n=0,i=this._funcs.length;n<i;n++)this._funcs[n](e)}}class S${constructor(){this.onOutgoingMessage=new K6,this.onIncomingMessage=new b$,this._outgoingMessages=[]}postIncomingMessage(e){this.onIncomingMessage.emit(e)}postOutgoingMessage(e,n){this._outgoingMessages.push({msg:e,transferables:n}),this.onOutgoingMessage.emit()}getOutgoingMessages(){let e=this._outgoingMessages;return this._outgoingMessages=[],e}}var C$=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let sd=new S$;function M$(t){return C$(this,void 0,void 0,function*(){t||(t=new Worker(""+new URL("worker.4f75b262.js",import.meta.url).href,{type:"module"})),t.postMessage({t:"wasm",url:new URL(""+new URL("zappar-cv.7223745e.wasm",import.meta.url).href,self.location).toString()}),yield I$(t);function e(){let n=sd.getOutgoingMessages();for(let i of n)t.postMessage(i.msg,i.transferables)}sd.onOutgoingMessage.bind(e),e(),t.addEventListener("message",n=>{sd.postIncomingMessage(n.data)})})}function I$(t){return new Promise(e=>{let n=i=>{i.data==="loaded"&&(t.removeEventListener("message",n),e())};t.addEventListener("message",n)})}var d_={exports:{}};(function(t,e){(function(n,i){var r="0.7.30",s="",o="?",a="function",l="undefined",c="object",u="string",f="major",h="model",d="name",p="type",m="vendor",A="version",v="architecture",y="console",x="mobile",w="tablet",E="smarttv",S="wearable",M="embedded",b=255,B="Amazon",T="Apple",k="ASUS",D="BlackBerry",N="Browser",O="Chrome",Y="Edge",q="Firefox",K="Google",z="Huawei",U="LG",Q="Microsoft",H="Motorola",V="Opera",J="Samsung",j="Sony",re="Xiaomi",ee="Zebra",ae="Facebook",ce=function(X,W){var ne={};for(var ue in X)W[ue]&&W[ue].length%2===0?ne[ue]=W[ue].concat(X[ue]):ne[ue]=X[ue];return ne},ge=function(X){var W={};for(var ne in X)W[X[ne].toUpperCase()]=X[ne];return W},xe=function(X,W){return typeof X===u?Se(W).indexOf(Se(X))!==-1:!1},Se=function(X){return X.toLowerCase()},oe=function(X){return typeof X===u?X.replace(/[^\d\.]/g,s).split(".")[0]:i},he=function(X,W){if(typeof X===u)return X=X.replace(/^\s\s*/,s).replace(/\s\s*$/,s),typeof W===l?X:X.substring(0,b)},Re=function(X,W){for(var ne=0,ue,ve,Ge,be,De,me;ne<W.length&&!De;){var je=W[ne],ie=W[ne+1];for(ue=ve=0;ue<je.length&&!De;)if(De=je[ue++].exec(X),De)for(Ge=0;Ge<ie.length;Ge++)me=De[++ve],be=ie[Ge],typeof be===c&&be.length>0?be.length==2?typeof be[1]==a?this[be[0]]=be[1].call(this,me):this[be[0]]=be[1]:be.length==3?typeof be[1]===a&&!(be[1].exec&&be[1].test)?this[be[0]]=me?be[1].call(this,me,be[2]):i:this[be[0]]=me?me.replace(be[1],be[2]):i:be.length==4&&(this[be[0]]=me?be[3].call(this,me.replace(be[1],be[2])):i):this[be]=me||i;ne+=2}},Ie=function(X,W){for(var ne in W)if(typeof W[ne]===c&&W[ne].length>0){for(var ue=0;ue<W[ne].length;ue++)if(xe(W[ne][ue],X))return ne===o?i:ne}else if(xe(W[ne],X))return ne===o?i:ne;return X},Te={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},qe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ye={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,A],[/opios[\/ ]+([\w\.]+)/i],[A,[d,V+" Mini"]],[/\bopr\/([\w\.]+)/i],[A,[d,V]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,A],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[d,"UC"+N]],[/\bqbcore\/([\w\.]+)/i],[A,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[A,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[A,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+N],A],[/\bfocus\/([\w\.]+)/i],[A,[d,q+" Focus"]],[/\bopt\/([\w\.]+)/i],[A,[d,V+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[d,V+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[d,"MIUI "+N]],[/fxios\/([-\w\.]+)/i],[A,[d,q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+N]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+N],A],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,A],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,ae],A],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,A],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[d,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,O+" WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[d,"Android "+N]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,A],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[A,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[A,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[A,Ie,Te]],[/(webkit|khtml)\/([\w\.]+)/i],[d,A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[d,q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,A]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,Se]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,s,Se]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,Se]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[m,J],[p,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[m,J],[p,x]],[/\((ip(?:hone|od)[\w ]*);/i],[h,[m,T],[p,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[m,T],[p,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[m,z],[p,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[h,[m,z],[p,x]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[m,re],[p,x]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[m,re],[p,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[h,[m,"OPPO"],[p,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[m,"Vivo"],[p,x]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[m,"Realme"],[p,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[m,H],[p,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[m,H],[p,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[m,U],[p,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[m,U],[p,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[m,"Lenovo"],[p,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[m,"Nokia"],[p,x]],[/(pixel c)\b/i],[h,[m,K],[p,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[m,K],[p,x]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[m,j],[p,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[m,j],[p,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[m,"OnePlus"],[p,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[m,B],[p,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[m,B],[p,x]],[/(playbook);[-\w\),; ]+(rim)/i],[h,m,[p,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[m,D],[p,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[m,k],[p,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[m,k],[p,x]],[/(nexus 9)/i],[h,[m,"HTC"],[p,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[m,[h,/_/g," "],[p,x]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[m,"Acer"],[p,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[m,"Meizu"],[p,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[m,"Sharp"],[p,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,h,[p,x]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,h,[p,w]],[/(surface duo)/i],[h,[m,Q],[p,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[m,"Fairphone"],[p,x]],[/(u304aa)/i],[h,[m,"AT&T"],[p,x]],[/\bsie-(\w*)/i],[h,[m,"Siemens"],[p,x]],[/\b(rct\w+) b/i],[h,[m,"RCA"],[p,w]],[/\b(venue[\d ]{2,7}) b/i],[h,[m,"Dell"],[p,w]],[/\b(q(?:mv|ta)\w+) b/i],[h,[m,"Verizon"],[p,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[m,"Barnes & Noble"],[p,w]],[/\b(tm\d{3}\w+) b/i],[h,[m,"NuVision"],[p,w]],[/\b(k88) b/i],[h,[m,"ZTE"],[p,w]],[/\b(nx\d{3}j) b/i],[h,[m,"ZTE"],[p,x]],[/\b(gen\d{3}) b.+49h/i],[h,[m,"Swiss"],[p,x]],[/\b(zur\d{3}) b/i],[h,[m,"Swiss"],[p,w]],[/\b((zeki)?tb.*\b) b/i],[h,[m,"Zeki"],[p,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],h,[p,w]],[/\b(ns-?\w{0,9}) b/i],[h,[m,"Insignia"],[p,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[m,"NextBook"],[p,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],h,[p,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],h,[p,x]],[/\b(ph-1) /i],[h,[m,"Essential"],[p,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[m,"Envizen"],[p,w]],[/\b(trio[-\w\. ]+) b/i],[h,[m,"MachSpeed"],[p,w]],[/\btu_(1491) b/i],[h,[m,"Rotor"],[p,w]],[/(shield[\w ]+) b/i],[h,[m,"Nvidia"],[p,w]],[/(sprint) (\w+)/i],[m,h,[p,x]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[m,Q],[p,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[m,ee],[p,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[m,ee],[p,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,h,[p,y]],[/droid.+; (shield) bui/i],[h,[m,"Nvidia"],[p,y]],[/(playstation [345portablevi]+)/i],[h,[m,j],[p,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[m,Q],[p,y]],[/smart-tv.+(samsung)/i],[m,[p,E]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[m,J],[p,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,U],[p,E]],[/(apple) ?tv/i],[m,[h,T+" TV"],[p,E]],[/crkey/i],[[h,O+"cast"],[m,K],[p,E]],[/droid.+aft(\w)( bui|\))/i],[h,[m,B],[p,E]],[/\(dtv[\);].+(aquos)/i],[h,[m,"Sharp"],[p,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,he],[h,he],[p,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,E]],[/((pebble))app/i],[m,h,[p,S]],[/droid.+; (glass) \d/i],[h,[m,K],[p,S]],[/droid.+; (wt63?0{2,3})\)/i],[h,[m,ee],[p,S]],[/(quest( 2)?)/i],[h,[m,ae],[p,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,M]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[p,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,w]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[p,x]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[d,Y+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,A],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,A],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[A,Ie,qe]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[A,Ie,qe]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[A,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[A,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,A],[/\(bb(10);/i],[A,[d,D]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[A,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[d,q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[A,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[A,[d,O+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],A],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,A],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],A],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,A]]},Oe=function(X,W){if(typeof X===c&&(W=X,X=i),!(this instanceof Oe))return new Oe(X,W).getResult();var ne=X||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:s),ue=W?ce(ye,W):ye;return this.getBrowser=function(){var ve={};return ve[d]=i,ve[A]=i,Re.call(ve,ne,ue.browser),ve.major=oe(ve.version),ve},this.getCPU=function(){var ve={};return ve[v]=i,Re.call(ve,ne,ue.cpu),ve},this.getDevice=function(){var ve={};return ve[m]=i,ve[h]=i,ve[p]=i,Re.call(ve,ne,ue.device),ve},this.getEngine=function(){var ve={};return ve[d]=i,ve[A]=i,Re.call(ve,ne,ue.engine),ve},this.getOS=function(){var ve={};return ve[d]=i,ve[A]=i,Re.call(ve,ne,ue.os),ve},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ne},this.setUA=function(ve){return ne=typeof ve===u&&ve.length>b?he(ve,b):ve,this},this.setUA(ne),this};Oe.VERSION=r,Oe.BROWSER=ge([d,A,f]),Oe.CPU=ge([v]),Oe.DEVICE=ge([h,m,p,y,x,E,w,S,M]),Oe.ENGINE=Oe.OS=ge([d,A]),t.exports&&(e=t.exports=Oe),e.UAParser=Oe;var Ve=typeof n!==l&&(n.jQuery||n.Zepto);if(Ve&&!Ve.ua){var Pe=new Oe;Ve.ua=Pe.getResult(),Ve.ua.get=function(){return Pe.getUA()},Ve.ua.set=function(X){Pe.setUA(X);var W=Pe.getResult();for(var ne in W)Ve.ua[ne]=W[ne]}}})(typeof window=="object"?window:He)})(d_,d_.exports);var Ed=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let T$=new d_.exports.UAParser,gm=!1,Am=!1,vm=!1,p_=!1;(!window.DeviceOrientationEvent||!window.DeviceOrientationEvent.requestPermission)&&(Am=!0);function $6(){return Ed(this,void 0,void 0,function*(){if(navigator.permissions&&navigator.permissions.query)try{let t=yield navigator.permissions.query({name:"camera"});vm=t.state==="denied",gm=t.state==="granted"}catch{}})}$6();function B$(){return gm}function R$(){return Am}function P$(){return vm}function D$(){return p_}function Z6(){return vm||p_}function hS(){return gm&&Am}function e8(){return Ed(this,void 0,void 0,function*(){yield n8(),yield t8()})}function t8(){return Ed(this,void 0,void 0,function*(){try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),gm=!0,vm=!1}catch{gm=!1,vm=!0}})}function n8(){return Ed(this,void 0,void 0,function*(){if(window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission&&(yield window.DeviceOrientationEvent.requestPermission())!=="granted")return Am=!1,p_=!0,!1;Am=!0,p_=!1})}function v4(){return Ed(this,void 0,void 0,function*(){if(yield $6(),hS())return!0;let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            max-width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Almost there...</div>
        <div class="zappar-text">In order to provide this augmented reality experience, we need access to your device's camera and motion sensors.</div>
        <button id="zappar-permission-request-button">Grant Access</button>
    </div>
`,document.body.append(t);let e=t.querySelector("#zappar-permission-request-button");return yield new Promise(n=>{e==null||e.addEventListener("click",()=>Ed(this,void 0,void 0,function*(){for(yield e8(),t.remove();;){if(yield L$(),Z6()){n(!1);return}if(hS()){n(!0);return}}}))})})}function L$(){return new Promise(t=>requestAnimationFrame(()=>t()))}function F$(){switch(T$.getBrowser().name){case"Chrome":O$();break;default:k$();break}}function k$(){let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            max-width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Permission is Needed</div>
        <div class="zappar-text">Permission to access your device's camera and motion sensors is necessary for this experience. Please reload the page to try again.</div>
        <button id="zappar-permission-reload-button">Reload</button>
    </div>
`,document.body.append(t);let e=t.querySelector("#zappar-permission-reload-button");e==null||e.addEventListener("click",()=>window.location.reload())}function O$(){let t=document.createElement("div");t.classList.add("zappar-permission-request"),t.innerHTML=`
    <style>
        .zappar-permission-request {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            background-color: rgba(0, 0, 0, 0.9);
            font-family: sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .zappar-inner {
            width: 400px;
            text-align: center;
        }
        .zappar-title {
            font-size: 20px;
        }
        .zappar-text {
            font-size: 14px;
            padding: 15px;
        }
        .zappar-inner > button {
            background: none;
            outline: none;
            border: 2px solid white;
            border-radius: 10px;
            color: white;
            padding: 10px 40px;
            text-transform: uppercase;
        }
    </style>
    <div class="zappar-inner">
        <div class="zappar-title">Permission is Needed</div>
        <div class="zappar-text">Permission to access your device's camera and motion sensors is necessary for this experience.<br/><br/>To grant access, please tap the ! button in the address bar of your browser, then "Site settings", and finally "Clear and reset". You can then reload the page to try again.</div>
        <button id="zappar-permission-reload-button">Reload</button>
    </div>
`,document.body.append(t);let e=t.querySelector("#zappar-permission-reload-button");e==null||e.addEventListener("click",()=>window.location.reload())}let uy=$u.LOG_LEVEL_ERROR;function U$(t){uy=t}function Go(...t){uy>=$u.LOG_LEVEL_VERBOSE&&console.log("[Zappar] INFO",...t)}function m_(...t){uy>=$u.LOG_LEVEL_ERROR&&console.error("[Zappar] ERROR",...t)}function Kt(...t){uy>=$u.LOG_LEVEL_VERBOSE&&console.log("[Zappar] WARN",...t)}let N$=1,YM=new Map;function z$(){let t=N$++;return YM.set(t,new Q$),Go("face_mesh_t initialized"),t}function G$(t){YM.delete(t)}function Lr(t){return YM.get(t)}class Q${constructor(){this.render_mean_=new Float32Array,this.render_identity_=new Float32Array(50),this.render_expression_=new Float32Array(29),this.render_uvs_=new Float32Array,this.render_indices_=new Uint16Array,this.vertices_=new Float32Array,this.normals_=new Float32Array,this.normalsCalculated_=!1,this.modelVersion_=-1,this.mirrored_=!1}loadFromMemory(e,n,i,r,s){let o=0,a=new Uint16Array(e),l=new Int32Array(e),c=new Float32Array(e),u=()=>{let v=l[o++],y=l[o++],x=v*y,w=c.subarray(o,o+x);return o+=x,w},f=()=>{let v=l[o++],y=a.subarray(o*2,o*2+v);return o+=v/2,y};this.render_mean_=u(),this.render_identity_=u(),this.render_expression_=u(),this.render_uvs_=u();let h=f(),d=o<l.length?f():new Uint16Array,p=o<l.length?f():new Uint16Array,m=o<l.length?f():new Uint16Array,A=o<l.length?f():new Uint16Array;if(!n&&!i&&!r&&!s)this.render_indices_=h;else{let v=h.length;n&&(v+=d.length),i&&(v+=p.length),r&&(v+=m.length),s&&(v+=A.length),this.render_indices_=new Uint16Array(v),this.render_indices_.set(h,0);let y=h.length;n&&(this.render_indices_.set(d,y),y+=d.length),i&&(this.render_indices_.set(p,y),y+=p.length),r&&(this.render_indices_.set(m,y),y+=m.length),s&&(this.render_indices_.set(A,y),y+=A.length)}this.vertices_=new Float32Array(this.render_mean_),this.normals_=new Float32Array(this.vertices_.length),this.modelVersion_++}getVertices(){return this.vertices_}getUVs(){return this.render_uvs_}getIndices(){if(this.mirrored_){if(!this.render_indices_reversed){this.render_indices_reversed=new Uint16Array(this.render_indices_.length);for(let e=0;e<this.render_indices_.length;e+=3)this.render_indices_reversed[e]=this.render_indices_[e+2],this.render_indices_reversed[e+1]=this.render_indices_[e+1],this.render_indices_reversed[e+2]=this.render_indices_[e]}return this.render_indices_reversed}return this.render_indices_}getNormals(){return this.normalsCalculated_||this.calculateNormals(),this.normals_}getModelVersion(){return this.modelVersion_}getLandmarkDataForVertex(e){let n=[this.render_mean_[e*3],this.render_mean_[e*3+1],this.render_mean_[e*3+2]],i=[];for(let s=0;s<50;s++)i.push(this.render_identity_[e*3*50+s]),i.push(this.render_identity_[(e*3+1)*50+s]),i.push(this.render_identity_[(e*3+2)*50+s]);let r=[];for(let s=0;s<29;s++)r.push(this.render_expression_[e*3*29+s]),r.push(this.render_expression_[(e*3+1)*29+s]),r.push(this.render_expression_[(e*3+2)*29+s]);return{mean:n,identity:i,expression:r}}update(e,n,i){if(this.render_mean_.length!==0&&this.render_identity_.length!==0&&this.render_expression_.length!==0){this.mirrored_=i,this.vertices_.set(this.render_mean_);for(let r=0;r<e.length;r++)for(let s=0;s<this.vertices_.length;s++)this.vertices_[s]+=e[r]*this.render_identity_[s*e.length+r];for(let r=0;r<n.length;r++)for(let s=0;s<this.vertices_.length;s++)this.vertices_[s]+=n[r]*this.render_expression_[s*n.length+r];if(i)for(let r=0;r<this.vertices_.length;r+=3)this.vertices_[r]*=-1;this.normalsCalculated_=!1}}calculateNormals(){let e=this.getIndices(),n=this.vertices_,i=new Float32Array(e.length);if(!n)return;let r=e.length,s=this.normals_,o=new Float32Array([0,0,0]),a=new Float32Array([0,0,0]),l=new Float32Array([0,0,0]);for(let u=0;u<r;u+=3){let f=e[u]*3,h=e[u+1]*3,d=e[u+2]*3;o[0]=n[h]-n[f],o[1]=n[h+1]-n[f+1],o[2]=n[h+2]-n[f+2],a[0]=n[d]-n[f],a[1]=n[d+1]-n[f+1],a[2]=n[d+2]-n[f+2],Up(l,o,a);let p=UM(l);i[u]=l[0]/p,i[u+1]=l[1]/p,i[u+2]=l[2]/p}s.fill(0);for(let u=0;u<r;u+=3){let f=e[u]*3,h=e[u+1]*3,d=e[u+2]*3;s[f]+=i[u],s[f+1]+=i[u+1],s[f+2]+=i[u+2],s[h]+=i[u],s[h+1]+=i[u+1],s[h+2]+=i[u+2],s[d]+=i[u],s[d+1]+=i[u+1],s[d+2]+=i[u+2]}let c=s.length/3;for(let u=0;u<c;u++){let f=u*3;o[0]=s[f],o[1]=s[f+1],o[2]=s[f+2],NM(a,o),s[f]=a[0],s[f+1]=a[1],s[f+2]=a[2]}this.normalsCalculated_=!0}}let H$=ln();class V${constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._vbo=void 0,this._shader&&this._gl.deleteProgram(this._shader.prog),this._shader=void 0}_generate(e,n){if(this._vbo)return this._vbo;if(this._vbo||(this._vbo=e.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");let i=new Float32Array([-1,-1,0,0,0,-1,1,0,0,1,1,-1,0,1,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]);return e.bindBuffer(e.ARRAY_BUFFER,this._vbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._vbo}drawCameraFrame(e,n,i,r){if(!i.texture)return;let s=this._gl;s.disable(s.DEPTH_TEST),s.disable(s.SCISSOR_TEST),s.disable(s.CULL_FACE),s.disable(s.BLEND);let o=this._getCameraShader(s),a=this._generate(s,i);s.activeTexture(s.TEXTURE0),s.useProgram(o.prog),s.uniformMatrix4fv(o.unif_skinTexTransform,!1,i8(i.dataWidth,i.dataHeight,e,n,i.uvTransform||H$,r)),s.uniform1i(o.unif_skinSampler,0),s.bindTexture(s.TEXTURE_2D,i.texture),s.bindBuffer(s.ARRAY_BUFFER,a),s.vertexAttribPointer(o.attr_position,3,s.FLOAT,!1,5*4,0),s.enableVertexAttribArray(o.attr_position),s.vertexAttribPointer(o.attr_texCoord,2,s.FLOAT,!1,5*4,3*4),s.enableVertexAttribArray(o.attr_texCoord),s.drawArrays(s.TRIANGLES,0,6),s.disableVertexAttribArray(o.attr_position),s.disableVertexAttribArray(o.attr_texCoord),s.bindTexture(s.TEXTURE_2D,null),s.bindBuffer(s.ARRAY_BUFFER,null),s.useProgram(null)}_getCameraShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=uo(e,e.VERTEX_SHADER,W$),r=uo(e,e.FRAGMENT_SHADER,j$);e.attachShader(n,i),e.attachShader(n,r),Gd(e,n);let s=e.getUniformLocation(n,"skinTexTransform");if(!s)throw new Error("Unable to get uniform location skinTexTransform");let o=e.getUniformLocation(n,"skinSampler");if(!o)throw new Error("Unable to get uniform location skinSampler");return this._shader={prog:n,unif_skinTexTransform:s,unif_skinSampler:o,attr_position:e.getAttribLocation(n,"position"),attr_texCoord:e.getAttribLocation(n,"texCoord")},this._shader}}let W$=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

attribute vec4 position;
attribute vec4 texCoord;
varying vec4 skinTexVarying;
uniform mat4 skinTexTransform;

void main()
{
    gl_Position = position;
    skinTexVarying = skinTexTransform * texCoord;
}`,j$=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying vec4 skinTexVarying;
uniform lowp sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2DProj(skinSampler, skinTexVarying);
}`;function q$(){if(window.screen.orientation)switch(window.screen.orientation.type){case"portrait-primary":return 270;case"landscape-secondary":return 180;case"portrait-secondary":return 90;default:return 0}else if(window.orientation!==void 0)switch(window.orientation){case 0:return 270;case 90:return 0;case 180:return 90;case-90:return 180}return 0}function i8(t,e,n,i,r,s){let o=ln(),a=ln();c_(a,[-.5,-.5,0]),en(o,a,o),s&&(Zi(a,[-1,1,1]),en(o,a,o)),wd(a,-1*q$()*Math.PI/180,[0,0,1]),en(o,a,o);let l=Qd();l[0]=n,l[1]=i,l[2]=0,ly(l,l,a);let c=Math.abs(l[0]),u=Math.abs(l[1]);Zi(a,[1,-1,1]),en(o,a,o);let f=c/u,h=t/e;return f>h?Zi(a,[1,h/f,1]):Zi(a,[f/h,1,1]),en(o,a,o),c_(a,[.5,.5,0]),en(o,a,o),en(o,r,o),o}class Y${constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._normalbo&&this._gl.deleteBuffer(this._normalbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._normalbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,n){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=n.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,n){if(this._vbo||(this._vbo=n.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._vbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._vbo}_generateNormalBO(e,n){if(this._normalbo||(this._normalbo=n.createBuffer()),!this._normalbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._normalbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._normalbo}drawFace(e,n){let i=this._gl,r=this._getShader(i),s=this._generateVBO(n.getVertices(),i),o=this._generateNormalBO(n.getNormals(),i),a=this._generateIBO(n.getIndices(),i);i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.useProgram(r.prog),i.uniformMatrix4fv(r.unif_matrix,!1,e),i.bindBuffer(i.ARRAY_BUFFER,s),i.vertexAttribPointer(r.attr_position,3,i.FLOAT,!1,3*4,0),i.enableVertexAttribArray(r.attr_position),i.bindBuffer(i.ARRAY_BUFFER,o),i.vertexAttribPointer(r.attr_normal,3,i.FLOAT,!1,3*4,0),i.enableVertexAttribArray(r.attr_normal),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,a),i.drawElements(i.TRIANGLES,n.getIndices().length,i.UNSIGNED_SHORT,0),i.disableVertexAttribArray(r.attr_position),i.disableVertexAttribArray(r.attr_normal),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=uo(e,e.VERTEX_SHADER,X$),r=uo(e,e.FRAGMENT_SHADER,J$);e.attachShader(n,i),e.attachShader(n,r),Gd(e,n);let s=e.getUniformLocation(n,"matrix");if(!s)throw new Error("Unable to get uniform location mattrix");return this._shader={prog:n,unif_matrix:s,attr_position:e.getAttribLocation(n,"position"),attr_normal:e.getAttribLocation(n,"normal")},this._shader}}let X$=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
attribute vec4 position;
attribute vec3 normal;
varying highp vec3 vnormal;

void main()
{
    gl_Position = matrix * position;
    vnormal = normal;
}`,J$=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying vec4 skinTexVarying;
varying highp vec3 vnormal;
uniform lowp sampler2D skinSampler;

void main()
{
    vec3 normal2 = 0.5 * vnormal + 0.5;
    gl_FragColor = vec4(normal2.x , normal2.y, normal2.z, 1.0);
}`;class K${constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._uvbo&&this._gl.deleteBuffer(this._uvbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._uvbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,n){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=n.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,n){if(this._vbo||(this._vbo=n.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._vbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._vbo}_generateUVBO(e,n){if(this._uvbo||(this._uvbo=n.createBuffer()),!this._uvbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._uvbo),n.bufferData(n.ARRAY_BUFFER,e,n.STREAM_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._uvbo}drawFace(e,n,i,r,s,o){let a=this._gl,l=this._getShader(a),c=this._generateVBO(n,a),u=this._generateUVBO(r,a),f=this._generateIBO(s,a);a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.useProgram(l.prog),a.uniformMatrix4fv(l.unif_matrix,!1,e),a.uniformMatrix4fv(l.unif_uvmatrix,!1,i),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o),a.uniform1i(l.unif_sampler,0),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(l.attr_position,3,a.FLOAT,!1,3*4,0),a.enableVertexAttribArray(l.attr_position),a.bindBuffer(a.ARRAY_BUFFER,u),a.vertexAttribPointer(l.attr_uv,3,a.FLOAT,!1,3*4,0),a.enableVertexAttribArray(l.attr_uv),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f),a.drawElements(a.TRIANGLES,2304*3,a.UNSIGNED_SHORT,0),a.disableVertexAttribArray(l.attr_position),a.disableVertexAttribArray(l.attr_uv),a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=uo(e,e.VERTEX_SHADER,$$),r=uo(e,e.FRAGMENT_SHADER,Z$);e.attachShader(n,i),e.attachShader(n,r),Gd(e,n);let s=e.getUniformLocation(n,"matrix");if(!s)throw new Error("Unable to get uniform location matrix");let o=e.getUniformLocation(n,"uvmatrix");if(!o)throw new Error("Unable to get uniform location matrix");let a=e.getUniformLocation(n,"uSampler");if(!a)throw new Error("Unable to get uniform location sampler");return this._shader={prog:n,unif_matrix:s,unif_sampler:a,unif_uvmatrix:o,attr_position:e.getAttribLocation(n,"position"),attr_uv:e.getAttribLocation(n,"uv"),attr_texturecoord:e.getAttribLocation(n,"aTextureCoord")},this._shader}}let $$=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
uniform mat4 uvmatrix;
attribute vec4 position;
attribute vec3 normal;
attribute vec3 uv;

// varying highp vec3 vnormal;

varying highp vec2 vTextureCoord;
varying highp float vAlpha;

void main()
{
    gl_Position = matrix * position;
    vec4 ret = uvmatrix * vec4(uv.x, uv.y, uv.z, 1.0);
    ret.x /= ret.w * 2.0;
    ret.y /= ret.w * 2.0;
    ret.x += 0.5;
    ret.y += 0.0;
    vAlpha = 1.0;
    vTextureCoord = ret.xy;
}`,Z$=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
varying highp vec3 vnormal;
varying highp float vAlpha;
uniform lowp sampler2D uSampler;

void main()
{
    // vec3 normal2 = 0.5 * vnormal + 0.5;
    vec4 p = texture2D(uSampler, vTextureCoord);
    p.a = vAlpha;
    gl_FragColor = p; // vec4(normal2.x , normal2.y, normal2.z, 1.0);
}`;var Nn;(function(t){t[t.CAMERA_FRAME=0]="CAMERA_FRAME",t[t.ACCELEROMETER=1]="ACCELEROMETER",t[t.ROTATION_RATE=2]="ROTATION_RATE",t[t.ATTITUDE=3]="ATTITUDE",t[t.ATTITUDE_MATRIX=4]="ATTITUDE_MATRIX"})(Nn||(Nn={}));class wt{constructor(e){this._insertionByte=0,this._numberPackets=0,this._started=!1,this._hasLoggedUnsuppored=!1,this._data=new ArrayBuffer(this._estimatedSize(e,320,240)),this._dataView=new DataView(this._data),this._dataUint8=new Uint8Array(this._data),this._dataFloat32=new Float32Array(this._data)}_estimatedSize(e,n,i){return wt.headerSizeBytes+(wt.psbPacketType+wt.cameraPacketSizeBytes+n*i)*e}start(){this._started=!0,this._insertionByte=0,this._numberPackets=0,this._growArrayBuffer(wt.headerSizeBytes);let n=new TextEncoder().encode("UAR1");this._dataUint8.set(n),this._dataView.setUint32(4,0,!0),this._insertionByte+=8}stop(){this._started=!1;let e=this._data.slice(0,this._insertionByte);this._data=e,this._dataUint8=new Uint8Array(this._data),this._dataFloat32=new Float32Array(this._data),this._dataView=new DataView(this._data)}data(){return this._dataUint8}appendCameraFrame(e){if(!this._started)return;if(!e.data){if(this._hasLoggedUnsuppored)return;this._hasLoggedUnsuppored=!0,m_("Unable to record frames from this camera source");return}if(e.data.byteLength!==e.dataWidth*e.dataHeight){m_("Unable to record frame to sequence: greyscale array doesn't match dimensions");return}let n=wt.psbPacketType+wt.cameraPacketSizeBytes+e.dataWidth*e.dataHeight;this._growArrayBuffer(n),this._dataView.setUint32(this._insertionByte,Nn.CAMERA_FRAME,!0),this._insertionByte+=wt.psbPacketType,this._dataView.setUint32(this._insertionByte,e.dataWidth,!0),this._insertionByte+=wt.psbCameraFrameWidth,this._dataView.setUint32(this._insertionByte,e.dataHeight,!0),this._insertionByte+=wt.psbCameraFrameHeight,this._dataFloat32.set(e.cameraToDevice,this._insertionByte/4),this._insertionByte+=wt.psbCameraToDeviceTransform,this._dataFloat32.set(e.cameraModel,this._insertionByte/4),this._insertionByte+=wt.psbCameraModel,this._dataView.setUint32(this._insertionByte,e.userFacing?1:0,!0),this._insertionByte+=wt.psbFlags,this._dataUint8.set(new Uint8Array(e.data),this._insertionByte),this._insertionByte+=e.data.byteLength,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}appendAccelerometer(e,n,i,r){this._appendTimestampedVec3(Nn.ACCELEROMETER,e,n,i,r)}appendRotationRate(e,n,i,r){this._appendTimestampedVec3(Nn.ROTATION_RATE,e,n,i,r)}appendAttitude(e,n,i,r){this._appendTimestampedVec3(Nn.ATTITUDE,e,n,i,r)}_appendTimestampedVec3(e,n,i,r,s){if(!this._started)return;let o=wt.psbPacketType+wt.accelerometerPacketSizeBytes;this._growArrayBuffer(o),this._dataView.setUint32(this._insertionByte,e,!0),this._insertionByte+=wt.psbPacketType,this._dataView.setUint32(this._insertionByte,n,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,i,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,r,!0),this._insertionByte+=4,this._dataView.setFloat32(this._insertionByte,s,!0),this._insertionByte+=4,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}appendAttitudeMatrix(e){if(!this._started)return;let n=wt.psbPacketType+wt.attitudeMatrixPacketSizeBytes;this._growArrayBuffer(n),this._dataView.setUint32(this._insertionByte,Nn.ATTITUDE_MATRIX,!0),this._insertionByte+=wt.psbPacketType,this._dataFloat32.set(e,this._insertionByte/4),this._insertionByte+=wt.attitudeMatrixPacketSizeBytes,this._numberPackets++,this._dataView.setUint32(4,this._numberPackets,!0)}_growArrayBuffer(e){for(;this._insertionByte+e>this._data.byteLength;){let n=Math.max(this._data.byteLength*2,this._estimatedSize(50,320,240)),i=new ArrayBuffer(n),r=new Uint8Array(i);r.set(this._dataUint8),this._data=i,this._dataUint8=r,this._dataFloat32=new Float32Array(this._data),this._dataView=new DataView(this._data)}}}wt.headerSizeBytes=8;wt.psbPacketType=4;wt.psbCameraFrameWidth=4;wt.psbCameraFrameHeight=4;wt.psbFlags=4;wt.psbCameraToDeviceTransform=4*16;wt.psbCameraModel=4*6;wt.cameraPacketSizeBytes=wt.psbCameraFrameWidth+wt.psbCameraFrameHeight+wt.psbCameraToDeviceTransform+wt.psbCameraModel+wt.psbFlags;wt.accelerometerPacketSizeBytes=4*4;wt.rotationRatePacketSizeBytes=4*4;wt.attitudePacketSizeBytes=4*4;wt.attitudeMatrixPacketSizeBytes=4*16;class eZ{constructor(e){this._data=e,this.dataByPacket=new Map,this.dataByCameraFrame=new Map,this.numberPackets=0,this.numberCameraFrames=0,this.numberAccelerometerPackets=0,this.numberRotationRatePackets=0,this.numberAttitudePackets=0,this.numberAttitudeMatrixPackets=0;let n=new TextDecoder,i="";try{i=n.decode(this._data.slice(0,4))}catch{throw new Error("Unable to decode header - perhaps this isn't a sequence file?")}if(i!=="UAR1")throw new Error(`Invalid - perhaps this isn't a sequence file: ${i}`);let r=0,s=new DataView(this._data);this.numberPackets=s.getUint32(4,!0),r+=wt.headerSizeBytes;for(let o=0;o<this.numberPackets;o++){let a=s.getUint32(r,!0);switch(r+=wt.psbPacketType,a){case Nn.CAMERA_FRAME:{let l=s.getUint32(r,!0);r+=wt.psbCameraFrameWidth;let c=s.getUint32(r,!0);r+=wt.psbCameraFrameHeight;let u=new Float32Array(this._data,r,wt.psbCameraToDeviceTransform/4);r+=wt.psbCameraToDeviceTransform;let f=new Float32Array(this._data,r,wt.psbCameraModel/4);r+=wt.psbCameraModel;let h=s.getUint32(r,!0);r+=wt.psbFlags;let d=h===1,p=new Uint8Array(this._data,r,l*c);r+=l*c;let m={type:Nn.CAMERA_FRAME,width:l,height:c,cameraToDevice:u,cameraModel:f,userFacing:d,greyscale:p};this.dataByPacket.set(o,m),this.dataByCameraFrame.set(this.numberCameraFrames,m),this.numberCameraFrames++;break}case Nn.ACCELEROMETER:{let l=s.getUint32(r,!0);r+=4;let c=s.getFloat32(r,!0);r+=4;let u=s.getFloat32(r,!0);r+=4;let f=s.getFloat32(r,!0);r+=4,this.dataByPacket.set(o,{type:Nn.ACCELEROMETER,t:l,x:c,y:u,z:f}),this.numberAccelerometerPackets++;break}case Nn.ROTATION_RATE:{let l=s.getUint32(r,!0);r+=4;let c=s.getFloat32(r,!0);r+=4;let u=s.getFloat32(r,!0);r+=4;let f=s.getFloat32(r,!0);r+=4,this.dataByPacket.set(o,{type:Nn.ROTATION_RATE,t:l,x:c,y:u,z:f}),this.numberRotationRatePackets++;break}case Nn.ATTITUDE:{let l=s.getUint32(r,!0);r+=4;let c=s.getFloat32(r,!0);r+=4;let u=s.getFloat32(r,!0);r+=4;let f=s.getFloat32(r,!0);r+=4,this.dataByPacket.set(o,{type:Nn.ATTITUDE,t:l,x:c,y:u,z:f}),this.numberAttitudePackets++;break}case Nn.ATTITUDE_MATRIX:{let l=new Float32Array(this._data,r,wt.attitudeMatrixPacketSizeBytes/4);r+=wt.attitudeMatrixPacketSizeBytes,this.dataByPacket.set(o,{type:Nn.ATTITUDE_MATRIX,attitude:l}),this.numberAttitudeMatrixPackets++;break}}}}}class fy{}var _4;(function(t){t[t.OBJECT_URL=0]="OBJECT_URL",t[t.SRC_OBJECT=1]="SRC_OBJECT"})(_4||(_4={}));let Et={deviceMotionMutliplier:-1,blacklisted:!1,showGyroPermissionsWarningIfNecessary:!1,showSafariPermissionsResetIfNecessary:!1,requestHighFrameRate:!1,videoWidth:640,videoHeight:480,dataWidth:320,dataHeight:240,videoElementInDOM:!1,preferMediaStreamTrackProcessorCamera:!1,preferImageBitmapCamera:!1};typeof window<"u"&&(window.zeeProfile=Et,window.location.href.indexOf("_mstppipeline")>=0&&(console.log("Configuring for MSTP camera pipeline (if supported)"),Et.preferMediaStreamTrackProcessorCamera=!0),window.location.href.indexOf("_imagebitmappipeline")>=0&&(console.log("Configuring for ImageBitmap camera pipeline (if supported)"),Et.preferImageBitmapCamera=!0));let XM=new d_.exports.UAParser,r8=(XM.getOS().name||"unknown").toLowerCase(),s8=(XM.getEngine().name||"unknown").toLowerCase();s8==="webkit"&&r8!=="ios"&&(Et.deviceMotionMutliplier=1,typeof window<"u"&&window.orientation!==void 0&&o8("15.0"));if(s8==="webkit"&&r8==="ios"){Et.deviceMotionMutliplier=1;const t=XM.getOS().version||"15.0";o8(t)}function o8(t){let e=t.split(".");if(e.length>=2){const n=parseInt(e[0]),i=parseInt(e[1]);(n<11||n===11&&i<3)&&(Et.blacklisted=!0),(n<12||n===12&&i<2)&&(Et.videoElementInDOM=!0),(n===12&&i>=2||n>=13)&&(Et.showGyroPermissionsWarningIfNecessary=!0),n>=13&&(Et.showSafariPermissionsResetIfNecessary=!0),(n>=12&&i>1||n>=13)&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(Et.requestHighFrameRate=!0,n<14&&(Et.videoHeight=360,Et.dataHeight=180))}}const y4=new Map;class JM{constructor(e){this._gl=e,this._viewports=[],this._underlyingViewport=this._gl.viewport,this._viewports.push(this._gl.getParameter(this._gl.VIEWPORT)),this._gl.viewport=(n,i,r,s)=>{this._viewports[this._viewports.length-1]=[n,i,r,s],this._underlyingViewport.call(this._gl,n,i,r,s)}}static get(e){let n=y4.get(e);return n||(n=new JM(e),y4.set(e,n)),n}push(){this._viewports.push(this._viewports[this._viewports.length-1])}pop(){const e=this._viewports.pop(),n=this._viewports[this._viewports.length-1];(!e||e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3])&&this._underlyingViewport.call(this._gl,n[0],n[1],n[2],n[3])}}class tZ{constructor(e){this._gl=e,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._computedTransformRotation=-1,this._computedFrontCameraRotation=!1,this._cameraUvTransform=ln(),this._framebufferWidth=0,this._framebufferHeight=0,this._framebufferId=null,this._renderTexture=null,this._isWebGL2=!1,this._isWebGL2=e.getParameter(e.VERSION).indexOf("WebGL 2")>=0,this._isWebGL2||(this._instancedArraysExtension=this._gl.getExtension("ANGLE_instanced_arrays"))}resetGLContext(){this._framebufferId=null,this._renderTexture=null,this._vertexBuffer=void 0,this._indexBuffer=void 0,this._greyscaleShader=void 0}destroy(){this.resetGLContext()}uploadFrame(e,n,i,r){let s=this._gl;const o=JM.get(s);o.push();const a=s.isEnabled(s.SCISSOR_TEST),l=s.isEnabled(s.DEPTH_TEST),c=s.isEnabled(s.BLEND),u=s.isEnabled(s.CULL_FACE),f=s.isEnabled(s.STENCIL_TEST),h=s.getParameter(s.ACTIVE_TEXTURE),d=s.getParameter(s.UNPACK_FLIP_Y_WEBGL),p=s.getParameter(s.CURRENT_PROGRAM);s.activeTexture(s.TEXTURE0);const m=s.getParameter(s.TEXTURE_BINDING_2D),A=s.getParameter(s.FRAMEBUFFER_BINDING),v=s.getParameter(s.ARRAY_BUFFER_BINDING),y=s.getParameter(s.ELEMENT_ARRAY_BUFFER_BINDING);s.disable(s.SCISSOR_TEST),s.disable(s.DEPTH_TEST),s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.STENCIL_TEST),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),s.bindTexture(s.TEXTURE_2D,e);const x=0,w=s.RGBA,E=s.RGBA,S=s.UNSIGNED_BYTE;s.texImage2D(s.TEXTURE_2D,x,w,E,S,n),typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?(n.videoWidth,n.videoHeight):(n.width,n.height),this._updateTransforms(i,r);let M=this._getFramebuffer(s,Et.dataWidth/4,Et.dataHeight),b=this._getVertexBuffer(s),B=this._getIndexBuffer(s),T=this._getGreyscaleShader(s);const k=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_SIZE),D=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_TYPE),N=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_NORMALIZED),O=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_STRIDE),Y=s.getVertexAttribOffset(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_POINTER),q=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_ENABLED),K=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),z=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_SIZE),U=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_TYPE),Q=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_NORMALIZED),H=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_STRIDE),V=s.getVertexAttribOffset(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_POINTER),J=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING),j=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_ENABLED);let re=0,ee=0;this._isWebGL2?(re=s.getVertexAttrib(T.aVertexPositionLoc,s.VERTEX_ATTRIB_ARRAY_DIVISOR),ee=s.getVertexAttrib(T.aTextureCoordLoc,s.VERTEX_ATTRIB_ARRAY_DIVISOR),s.vertexAttribDivisor(T.aVertexPositionLoc,0),s.vertexAttribDivisor(T.aTextureCoordLoc,0)):this._instancedArraysExtension&&(re=s.getVertexAttrib(T.aVertexPositionLoc,this._instancedArraysExtension.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),ee=s.getVertexAttrib(T.aTextureCoordLoc,this._instancedArraysExtension.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),this._instancedArraysExtension.vertexAttribDivisorANGLE(T.aVertexPositionLoc,0),this._instancedArraysExtension.vertexAttribDivisorANGLE(T.aTextureCoordLoc,0)),s.bindFramebuffer(s.FRAMEBUFFER,M),s.viewport(0,0,this._framebufferWidth,this._framebufferHeight),s.clear(s.COLOR_BUFFER_BIT),s.bindBuffer(s.ARRAY_BUFFER,b),s.vertexAttribPointer(T.aVertexPositionLoc,2,s.FLOAT,!1,4*4,0),s.enableVertexAttribArray(T.aVertexPositionLoc),s.vertexAttribPointer(T.aTextureCoordLoc,2,s.FLOAT,!1,4*4,2*4),s.enableVertexAttribArray(T.aTextureCoordLoc),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,B),s.useProgram(T.program),s.uniform1f(T.uTexWidthLoc,Et.dataWidth),s.uniformMatrix4fv(T.uUvTransformLoc,!1,this._cameraUvTransform),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e),s.uniform1i(T.uSamplerLoc,0),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0),s.bindBuffer(s.ARRAY_BUFFER,K),s.vertexAttribPointer(T.aVertexPositionLoc,k,D,N,O,Y),s.bindBuffer(s.ARRAY_BUFFER,J),s.vertexAttribPointer(T.aTextureCoordLoc,z,U,Q,H,V),s.bindBuffer(s.ARRAY_BUFFER,v),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,y),q||s.disableVertexAttribArray(T.aVertexPositionLoc),j||s.disableVertexAttribArray(T.aTextureCoordLoc),this._isWebGL2?(s.vertexAttribDivisor(T.aVertexPositionLoc,re),s.vertexAttribDivisor(T.aTextureCoordLoc,ee)):this._instancedArraysExtension&&(this._instancedArraysExtension.vertexAttribDivisorANGLE(T.aVertexPositionLoc,re),this._instancedArraysExtension.vertexAttribDivisorANGLE(T.aTextureCoordLoc,ee)),s.bindFramebuffer(s.FRAMEBUFFER,A),s.useProgram(p),s.bindTexture(s.TEXTURE_2D,m),s.activeTexture(h),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,d),o.pop(),c&&s.enable(s.BLEND),u&&s.enable(s.CULL_FACE),l&&s.enable(s.DEPTH_TEST),a&&s.enable(s.SCISSOR_TEST),f&&s.enable(s.STENCIL_TEST)}readFrame(e,n){let i=this._gl,r=new Uint8Array(n);const s=i.getParameter(i.FRAMEBUFFER_BINDING);let o=this._getFramebuffer(i,Et.dataWidth/4,Et.dataHeight);return i.bindFramebuffer(i.FRAMEBUFFER,o),i.readPixels(0,0,this._framebufferWidth,this._framebufferHeight,i.RGBA,i.UNSIGNED_BYTE,r),i.bindFramebuffer(i.FRAMEBUFFER,s),{uvTransform:this._cameraUvTransform,data:n,texture:e,dataWidth:Et.dataWidth,dataHeight:Et.dataHeight,userFacing:this._computedFrontCameraRotation}}_updateTransforms(e,n){e==this._computedTransformRotation&&n==this._computedFrontCameraRotation||(this._computedTransformRotation=e,this._computedFrontCameraRotation=n,this._cameraUvTransform=this._getCameraUvTransform())}_getCameraUvTransform(){switch(this._computedTransformRotation){case 270:return new Float32Array([0,1,0,0,-1,0,0,0,0,0,1,0,1,0,0,1]);case 180:return new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,1,1,0,1]);case 90:return new Float32Array([0,-1,0,0,1,0,0,0,0,0,1,0,0,1,0,1])}return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}_getFramebuffer(e,n,i){if(this._framebufferWidth===n&&this._framebufferHeight===i&&this._framebufferId)return this._framebufferId;if(this._framebufferId&&(e.deleteFramebuffer(this._framebufferId),this._framebufferId=null),this._renderTexture&&(e.deleteTexture(this._renderTexture),this._renderTexture=null),this._framebufferId=e.createFramebuffer(),!this._framebufferId)throw new Error("Unable to create framebuffer");if(e.bindFramebuffer(e.FRAMEBUFFER,this._framebufferId),this._renderTexture=e.createTexture(),!this._renderTexture)throw new Error("Unable to create render texture");e.activeTexture(e.TEXTURE0);const r=e.getParameter(e.TEXTURE_BINDING_2D);e.bindTexture(e.TEXTURE_2D,this._renderTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._renderTexture,0);let s=e.checkFramebufferStatus(e.FRAMEBUFFER);if(s!==e.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer not complete: "+s.toString());return this._framebufferWidth=n,this._framebufferHeight=i,e.bindTexture(e.TEXTURE_2D,r),e.bindFramebuffer(e.FRAMEBUFFER,null),this._framebufferId}_getVertexBuffer(e){if(this._vertexBuffer)return this._vertexBuffer;if(this._vertexBuffer=e.createBuffer(),!this._vertexBuffer)throw new Error("Unable to create vertex buffer");e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);let n=new Float32Array([-1,-1,0,0,-1,1,0,1,1,1,1,1,1,-1,1,0]);return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),this._vertexBuffer}_getIndexBuffer(e){if(this._indexBuffer)return this._indexBuffer;if(this._indexBuffer=e.createBuffer(),!this._indexBuffer)throw new Error("Unable to create index buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer);let n=new Uint16Array([0,1,2,0,2,3]);return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),this._indexBuffer}_getGreyscaleShader(e){if(this._greyscaleShader)return this._greyscaleShader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=uo(e,e.VERTEX_SHADER,nZ),r=uo(e,e.FRAGMENT_SHADER,iZ);e.attachShader(n,i),e.attachShader(n,r),Gd(e,n);let s=e.getUniformLocation(n,"uTexWidth");if(!s)throw new Error("Unable to get uniform location uTexWidth");let o=e.getUniformLocation(n,"uUvTransform");if(!o)throw new Error("Unable to get uniform location uUvTransform");let a=e.getUniformLocation(n,"uSampler");if(!a)throw new Error("Unable to get uniform location uSampler");return this._greyscaleShader={program:n,aVertexPositionLoc:e.getAttribLocation(n,"aVertexPosition"),aTextureCoordLoc:e.getAttribLocation(n,"aTextureCoord"),uTexWidthLoc:s,uUvTransformLoc:o,uSamplerLoc:a},this._greyscaleShader}}let nZ=`
    attribute vec4 aVertexPosition;
    attribute vec2 aTextureCoord;

    varying highp vec2 vTextureCoord1;
    varying highp vec2 vTextureCoord2;
    varying highp vec2 vTextureCoord3;
    varying highp vec2 vTextureCoord4;

    uniform float uTexWidth;
	uniform mat4 uUvTransform;

    void main(void) {
      highp vec2 offset1 = vec2(1.5 / uTexWidth, 0);
      highp vec2 offset2 = vec2(0.5 / uTexWidth, 0);

      gl_Position = aVertexPosition;
      vTextureCoord1 = (uUvTransform * vec4(aTextureCoord - offset1, 0, 1)).xy;
      vTextureCoord2 = (uUvTransform * vec4(aTextureCoord - offset2, 0, 1)).xy;
      vTextureCoord3 = (uUvTransform * vec4(aTextureCoord + offset2, 0, 1)).xy;
      vTextureCoord4 = (uUvTransform * vec4(aTextureCoord + offset1, 0, 1)).xy;
    }
`,iZ=`
  varying highp vec2 vTextureCoord1;
  varying highp vec2 vTextureCoord2;
  varying highp vec2 vTextureCoord3;
  varying highp vec2 vTextureCoord4;

  uniform sampler2D uSampler;

  const lowp vec3 colorWeights = vec3(77.0 / 256.0, 150.0 / 256.0, 29.0 / 256.0);

  void main(void) {
    lowp vec4 outpx;

    outpx.r = dot(colorWeights, texture2D(uSampler, vTextureCoord1).xyz);
    outpx.g = dot(colorWeights, texture2D(uSampler, vTextureCoord2).xyz);
    outpx.b = dot(colorWeights, texture2D(uSampler, vTextureCoord3).xyz);
    outpx.a = dot(colorWeights, texture2D(uSampler, vTextureCoord4).xyz);

    gl_FragColor = outpx;
  }
`,rZ=1,x4=new Map;class yu extends fy{constructor(e,n){super(),this._video=e,this._pipeline=n,this._isPaused=!0,this._hadFrames=!1,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._isUploadFrame=!0,this._cameraToDeviceTransform=ln(),this._cameraToDeviceTransformUserFacing=ln(),this._cameraModel=new Float32Array([300,300,160,120,0,0]),Zi(this._cameraToDeviceTransformUserFacing,[-1,1,-1]);let i=this._video;this._video instanceof HTMLVideoElement?i.addEventListener("loadedmetadata",()=>{this._hadFrames=!0}):this._hadFrames=!0,this._resetGLContext=this._resetGLContext.bind(this);let r=yt.get(this._pipeline);r&&r.onGLContextReset.bind(this._resetGLContext)}static createVideoElementSource(e,n){let i=rZ++;return x4.set(i,new yu(n,e)),Go("html_element_source_t initialized"),i}static getVideoElementSource(e){return x4.get(e)}_resetGLContext(){var e,n;this._currentVideoTexture=void 0,(n=(e=this._imageProcessor)===null||e===void 0?void 0:e.resetGLContext)===null||n===void 0||n.call(e)}destroy(){let e=yt.get(this._pipeline);e&&e.onGLContextReset.unbind(this._resetGLContext),this.pause(),this._resetGLContext()}pause(){this._isPaused=!0;let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0)}start(){var e;this._isPaused&&(this._isUploadFrame=!0,this._video instanceof HTMLVideoElement&&(this._hadFrames=!1)),this._isPaused=!1;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this)}getFrame(e){let n=yt.get(this._pipeline);if(!n)return;let i=n.glContext;if(!!i&&!this._isPaused&&!!this._hadFrames)try{let r=this._processFrame(i,this._cameraToScreenRotation,e);if(r){let s=n.registerToken(r);n.sendDataToWorker(r.data||new ArrayBuffer(0),s,r.dataWidth,r.dataHeight,r.userFacing,r.cameraToDevice,r.cameraModel)}}catch{console.log("Unable to process frame")}}_processFrame(e,n,i){let r=yt.get(this._pipeline);if(!r)return;if(this._imageProcessor||(this._imageProcessor=new tZ(e)),this._isUploadFrame){if(this._currentVideoTexture||(this._currentVideoTexture=r.getVideoTexture()),!this._currentVideoTexture)return;this._imageProcessor.uploadFrame(this._currentVideoTexture,this._video,n,this._isUserFacing),this._isUploadFrame=!this._isUploadFrame;return}if(i||!this._currentVideoTexture)return;this._isUploadFrame=!this._isUploadFrame;let s=Et.dataWidth*Et.dataHeight,o=r.cameraPixelArrays.pop();for(;o&&o.byteLength!==s;)o=r.cameraPixelArrays.pop();o||(o=new ArrayBuffer(s));let a=this._currentVideoTexture;this._currentVideoTexture=void 0;let l=300*Et.dataWidth/320;return this._cameraModel[0]=l,this._cameraModel[1]=l,this._cameraModel[2]=Et.dataWidth*.5,this._cameraModel[3]=Et.dataHeight*.5,Object.assign(Object.assign({},this._imageProcessor.readFrame(a,o)),{cameraModel:this._cameraModel,cameraSource:this,cameraToDevice:this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform})}uploadGL(){}}var lw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let od=document.createElement("video");od.setAttribute("playsinline","");od.setAttribute("webkit-playsinline","");Et.videoElementInDOM&&(od.style.width="0px",od.style.height="0px",document.body.appendChild(od));class Ro extends yu{constructor(e,n,i){super(od,n),this._impl=e,this._deviceId=i,this._currentStream=null,this._activeDeviceId=null,this._hasStartedOrientation=!1,this._deviceMotionListener=r=>{let s=yt.get(this._pipeline);if(!s)return;let o=r.timeStamp!==void 0&&r.timeStamp!==null?r.timeStamp:performance.now();r.accelerationIncludingGravity!==null&&r.accelerationIncludingGravity.x!==null&&r.accelerationIncludingGravity.y!==null&&r.accelerationIncludingGravity.z!==null&&s.motionAccelerometerSubmit(o,r.accelerationIncludingGravity.x*Et.deviceMotionMutliplier,r.accelerationIncludingGravity.y*Et.deviceMotionMutliplier,r.accelerationIncludingGravity.z*Et.deviceMotionMutliplier),r.rotationRate!==null&&r.rotationRate.alpha!==null&&r.rotationRate.beta!==null&&r.rotationRate.gamma!==null&&!this._hasStartedOrientation?(r.timeStamp,s.motionRotationRateSubmit(o,r.rotationRate.alpha*Math.PI/-180,r.rotationRate.beta*Math.PI/-180,r.rotationRate.gamma*Math.PI/-180)):this._hasStartedOrientation||this._startDeviceOrientation()}}destroy(){$M(this._impl),super.destroy()}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(n=>n.stop()),this._currentStream=null}pause(){super.pause(),this._stopDeviceMotion(),this._syncCamera()}start(){super.start(),this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return lw(this,void 0,void 0,function*(){let e,n;this._deviceId!==Ro.DEFAULT_DEVICE_ID&&this._deviceId!==Ro.USER_DEFAULT_DEVICE_ID?e=this._deviceId:n=this._deviceId===Ro.DEFAULT_DEVICE_ID?"environment":"user";let i={audio:!1,video:{facingMode:n,width:Et.videoWidth,height:Et.videoHeight,frameRate:Et.requestHighFrameRate?60:void 0,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return i;let r=yield navigator.mediaDevices.enumerateDevices(),s=!1;return r=r.filter(o=>{if(o.kind!=="videoinput")return!1;if(o.getCapabilities){s=!0;let a=o.getCapabilities();if(a&&a.facingMode&&a.facingMode.indexOf(n==="user"?"user":"environment")<0)return!1}return!0}),!s||r.length===0||typeof i.video=="object"&&(Go("choosing device ID",r[r.length-1].deviceId),i.video.deviceId=r[r.length-1].deviceId),i})}getFrame(e){this._cameraToScreenRotation=Zu(!1),super.getFrame(e)}_getUserMedia(){return lw(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((n,i)=>{navigator.getUserMedia(e,n,i)})})}_syncCamera(){return lw(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused){this._stop();return}if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused){yield this._syncCamera();return}if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();e.length>0&&(this._isUserFacing=e[0].getSettings().facingMode==="user")}if(!(this._video instanceof HTMLVideoElement))return;this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,this._deviceOrientationListener=e=>{let n=yt.get(this._pipeline);if(!n)return;let i=e.timeStamp!==void 0&&e.timeStamp!==null?e.timeStamp:performance.now();e.alpha===null||e.beta===null||e.gamma===null||n.motionAttitudeSubmit(i,e.alpha,e.beta,e.gamma)},window.addEventListener("deviceorientation",this._deviceOrientationListener))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener),this._deviceOrientationListener&&window.removeEventListener("deviceorientation",this._deviceOrientationListener)}}Ro.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";Ro.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";var cw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class Pu extends fy{constructor(e,n,i){super(),this._impl=e,this._pipeline=n,this._deviceId=i,this._currentStream=null,this._activeDeviceId=null,this._isPaused=!0,this._isUserFacing=!1,this._hadFrames=!1,this._canvas=new OffscreenCanvas(640,480),this._context=this._canvas.getContext("2d"),this._lastFrameTime=-1,this._video=document.createElement("video"),this._cameraToDeviceTransform=ln(),this._cameraToDeviceTransformUserFacing=ln(),this._cameraModel=new Float32Array([300,300,160,120,0,0]),this._hasStartedOrientation=!1,this._deviceMotionListener=r=>{let s=yt.get(this._pipeline);if(!s)return;let o=r.timeStamp!==void 0&&r.timeStamp!==null?r.timeStamp:performance.now();r.accelerationIncludingGravity!==null&&r.accelerationIncludingGravity.x!==null&&r.accelerationIncludingGravity.y!==null&&r.accelerationIncludingGravity.z!==null&&s.motionAccelerometerSubmit(o,r.accelerationIncludingGravity.x*Et.deviceMotionMutliplier,r.accelerationIncludingGravity.y*Et.deviceMotionMutliplier,r.accelerationIncludingGravity.z*Et.deviceMotionMutliplier),r.rotationRate!==null&&r.rotationRate.alpha!==null&&r.rotationRate.beta!==null&&r.rotationRate.gamma!==null&&!this._hasStartedOrientation?(r.timeStamp,s.motionRotationRateSubmit(o,r.rotationRate.alpha*Math.PI/-180,r.rotationRate.beta*Math.PI/-180,r.rotationRate.gamma*Math.PI/-180)):this._hasStartedOrientation||this._startDeviceOrientation()},Go("Using ImageBitmap camera source"),Zi(this._cameraToDeviceTransformUserFacing,[-1,1,-1]),this._video.muted=!0,this._video.setAttribute("playsinline",""),this._video.setAttribute("webkit-playsinline",""),Et.videoElementInDOM&&(this._video.style.width="0px",this._video.style.height="0px",document.body.appendChild(this._video)),this._video.addEventListener("loadedmetadata",()=>{this._hadFrames=!0})}destroy(){this.pause(),$M(this._impl)}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(n=>n.stop()),this._currentStream=null}pause(){this._isPaused=!0;let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0),this._stopDeviceMotion(),this._syncCamera()}start(){var e;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this),this._isPaused=!1,this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return cw(this,void 0,void 0,function*(){let e,n;this._deviceId!==Pu.DEFAULT_DEVICE_ID&&this._deviceId!==Pu.USER_DEFAULT_DEVICE_ID?e=this._deviceId:n=this._deviceId===Pu.DEFAULT_DEVICE_ID?"environment":"user";let i={audio:!1,video:{facingMode:n,width:Et.videoWidth,height:Et.videoHeight,frameRate:Et.requestHighFrameRate?60:void 0,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return i;let r=yield navigator.mediaDevices.enumerateDevices(),s=!1;return r=r.filter(o=>{if(o.kind!=="videoinput")return!1;if(o.getCapabilities){s=!0;let a=o.getCapabilities();if(a&&a.facingMode&&a.facingMode.indexOf(n==="user"?"user":"environment")<0)return!1}return!0}),!s||r.length===0||typeof i.video=="object"&&(Go("choosing device ID",r[r.length-1].deviceId),i.video.deviceId=r[r.length-1].deviceId),i})}getFrame(e){var n,i;if(!this._context||!this._hadFrames||e)return;let r=performance.now();if(r<this._lastFrameTime+25)return;this._lastFrameTime=r,this._canvas.width!==this._video.videoWidth&&(this._canvas.width=this._video.videoWidth),this._canvas.height!==this._video.videoHeight&&(this._canvas.height=this._video.videoHeight),this._context.drawImage(this._video,0,0);const s=this._canvas.transferToImageBitmap();let o=Zu(!1),a=yt.get(this._pipeline);if(!a)return;let l=300*Et.dataWidth/320;this._cameraModel[0]=l,this._cameraModel[1]=l,this._cameraModel[2]=Et.dataWidth*.5,this._cameraModel[3]=Et.dataHeight*.5;let c=a.registerToken({dataWidth:this._canvas.width,dataHeight:this._canvas.height,texture:void 0,userFacing:this._isUserFacing,cameraSource:this,cameraModel:this._cameraModel.slice(),cameraToDevice:this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform});(i=(n=yt.get(this._pipeline))===null||n===void 0?void 0:n.sendImageBitmapToWorker)===null||i===void 0||i.call(n,s,o,this._isUserFacing,c,this._cameraModel,this._isUserFacing?this._cameraToDeviceTransformUserFacing:this._cameraToDeviceTransform)}_getUserMedia(){return cw(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((n,i)=>{navigator.getUserMedia(e,n,i)})})}_syncCamera(){return cw(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused){this._stop();return}if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused){yield this._syncCamera();return}if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();e.length>0&&(this._isUserFacing=e[0].getSettings().facingMode==="user")}this._video.src="",this._video.loop=!1,this._video.muted=!0,this._video.srcObject=this._currentStream,this._video.play()}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",e=>{let n=yt.get(this._pipeline);if(!n)return;let i=e.timeStamp!==void 0&&e.timeStamp!==null?e.timeStamp:performance.now();e.alpha===null||e.beta===null||e.gamma===null||n.motionAttitudeSubmit(i,e.alpha,e.beta,e.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}uploadGL(e){const n=yt.get(this._pipeline),i=n==null?void 0:n.glContext;if(!e||e.texture||!e.frame||!n||!i)return;let r=n.getVideoTexture();!r||(i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e.frame),i.bindTexture(i.TEXTURE_2D,null),e.texture=r,e.frame.close(),delete e.frame)}}Pu.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";Pu.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";var uw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};class Du extends fy{constructor(e,n,i){super(),this._impl=e,this._pipeline=n,this._deviceId=i,this._currentStream=null,this._activeDeviceId=null,this._isPaused=!0,this._isUserFacing=!1,this._cameraToScreenRotation=0,this._hasStartedOrientation=!1,this._deviceMotionListener=r=>{let s=yt.get(this._pipeline);if(!s)return;let o=r.timeStamp!==void 0&&r.timeStamp!==null?r.timeStamp:performance.now();r.accelerationIncludingGravity!==null&&r.accelerationIncludingGravity.x!==null&&r.accelerationIncludingGravity.y!==null&&r.accelerationIncludingGravity.z!==null&&s.motionAccelerometerSubmit(o,r.accelerationIncludingGravity.x*Et.deviceMotionMutliplier,r.accelerationIncludingGravity.y*Et.deviceMotionMutliplier,r.accelerationIncludingGravity.z*Et.deviceMotionMutliplier),r.rotationRate!==null&&r.rotationRate.alpha!==null&&r.rotationRate.beta!==null&&r.rotationRate.gamma!==null&&!this._hasStartedOrientation?(r.timeStamp,s.motionRotationRateSubmit(o,r.rotationRate.alpha*Math.PI/-180,r.rotationRate.beta*Math.PI/-180,r.rotationRate.gamma*Math.PI/-180)):this._hasStartedOrientation||this._startDeviceOrientation()},Go("Using MSTP camera source")}destroy(){this.pause(),$M(this._impl)}_stop(){if(!this._currentStream)return;this._currentStream.getTracks().forEach(n=>n.stop()),this._currentStream=null}pause(){this._isPaused=!0;let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0),this._stopDeviceMotion(),this._syncCamera()}start(){var e;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this),this._isPaused=!1,this._startDeviceMotion(),this._syncCamera()}_getConstraints(){return uw(this,void 0,void 0,function*(){let e,n;this._deviceId!==Du.DEFAULT_DEVICE_ID&&this._deviceId!==Du.USER_DEFAULT_DEVICE_ID?e=this._deviceId:n=this._deviceId===Du.DEFAULT_DEVICE_ID?"environment":"user";let i={audio:!1,video:{facingMode:n,width:Et.videoWidth,height:Et.videoHeight,frameRate:Et.requestHighFrameRate?60:30,deviceId:e}};if(e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return i;let r=yield navigator.mediaDevices.enumerateDevices(),s=!1;return r=r.filter(o=>{if(o.kind!=="videoinput")return!1;if(o.getCapabilities){s=!0;let a=o.getCapabilities();if(a&&a.facingMode&&a.facingMode.indexOf(n==="user"?"user":"environment")<0)return!1}return!0}),!s||r.length===0||typeof i.video=="object"&&(Go("choosing device ID",r[r.length-1].deviceId),i.video.deviceId=r[r.length-1].deviceId),i})}getFrame(e){var n,i;let r=Zu(!1);r!=this._cameraToScreenRotation&&((i=(n=yt.get(this._pipeline))===null||n===void 0?void 0:n.sendCameraToScreenRotationToWorker)===null||i===void 0||i.call(n,r),this._cameraToScreenRotation=r)}_getUserMedia(){return uw(this,void 0,void 0,function*(){let e=yield this._getConstraints();return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?yield navigator.mediaDevices.getUserMedia(e):yield new Promise((n,i)=>{navigator.getUserMedia(e,n,i)})})}_syncCamera(){return uw(this,void 0,void 0,function*(){if(this._currentStream&&this._isPaused){this._stop();return}if(this._currentStream&&this._activeDeviceId!==this._deviceId&&this._stop(),!this._isPaused){if(this._activeDeviceId=this._deviceId,this._currentStream=yield this._getUserMedia(),this._isPaused){yield this._syncCamera();return}if(this._isUserFacing=!1,this._currentStream){let e=this._currentStream.getVideoTracks();if(e.length>0){this._isUserFacing=e[0].getSettings().facingMode==="user";let n=new MediaStreamTrackProcessor({track:e[0]}),i=yt.get(this._pipeline);i&&i.sendCameraStreamToWorker(this._impl,n.readable,this._isUserFacing)}}}})}_startDeviceOrientation(){this._hasStartedOrientation||(this._hasStartedOrientation=!0,window.addEventListener("deviceorientation",e=>{let n=yt.get(this._pipeline);if(!n)return;let i=e.timeStamp!==void 0&&e.timeStamp!==null?e.timeStamp:performance.now();e.alpha===null||e.beta===null||e.gamma===null||n.motionAttitudeSubmit(i,e.alpha,e.beta,e.gamma)}))}_startDeviceMotion(){window.addEventListener("devicemotion",this._deviceMotionListener,!1)}_stopDeviceMotion(){window.removeEventListener("devicemotion",this._deviceMotionListener)}uploadGL(e){const n=yt.get(this._pipeline),i=n==null?void 0:n.glContext;if(!e||e.texture||!e.frame||!n||!i)return;let r=n.getVideoTexture();!r||(i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e.frame),i.bindTexture(i.TEXTURE_2D,null),e.texture=r,e.frame.close(),delete e.frame)}}Du.USER_DEFAULT_DEVICE_ID="Simulated User Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";Du.DEFAULT_DEVICE_ID="Simulated Default Device ID: a908df7f-5661-4d20-b227-a1c15d2fdb4b";let sZ=1,KM=new Map;function oZ(){return sZ++}function fw(t,e){KM.set(t,e)}function Sv(t){return KM.get(t)}function $M(t){KM.delete(t)}function aZ(t,e){let n=oZ();return Et.preferMediaStreamTrackProcessorCamera&&"MediaStreamTrackProcessor"in window&&"MediaStreamTrackGenerator"in window?fw(n,new Du(n,t,e)):Et.preferImageBitmapCamera&&typeof OffscreenCanvas<"u"?fw(n,new Pu(n,t,e)):fw(n,new Ro(n,t,e)),Go("camera_source_t initialized"),n}class lZ{constructor(e){this._gl=e}dispose(){this._vbo&&this._gl.deleteBuffer(this._vbo),this._uvbo&&this._gl.deleteBuffer(this._uvbo),this._ibo&&this._gl.deleteBuffer(this._ibo),this._shader&&this._gl.deleteProgram(this._shader.prog),this._vbo=void 0,this._uvbo=void 0,this._ibo=void 0,this._shader=void 0}_generateIBO(e,n){if(this._ibo&&this._lastIndices===e)return this._ibo;if(this._lastIndices=e,this._ibo||(this._ibo=n.createBuffer()),!this._ibo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._ibo),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),this._ibo}_generateVBO(e,n){if(this._vbo||(this._vbo=n.createBuffer()),!this._vbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._vbo),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._vbo}_generateUVBO(e,n){if(this._uvbo||(this._uvbo=n.createBuffer()),!this._uvbo)throw new Error("Unable to create buffer object");return n.bindBuffer(n.ARRAY_BUFFER,this._uvbo),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),this._uvbo}draw(e,n,i){var r;const s=n.getPreviewMesh(i),o=(r=n.getTargetInfo(i).preview)===null||r===void 0?void 0:r.image;if(!s||!o||!o.complete)return;let a=this._gl,l=this._getShader(a),c=this._generateVBO(s.vertices,a),u=this._generateUVBO(s.uvs,a),f=this._generateIBO(s.indices,a);a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.useProgram(l.prog),a.uniformMatrix4fv(l.unif_matrix,!1,e),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,cZ(a,o)),a.uniform1i(l.unif_skinSampler,0),a.bindBuffer(a.ARRAY_BUFFER,c),a.vertexAttribPointer(l.attr_position,3,a.FLOAT,!1,0,0),a.enableVertexAttribArray(l.attr_position),a.bindBuffer(a.ARRAY_BUFFER,u),a.vertexAttribPointer(l.attr_textureCoord,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(l.attr_textureCoord),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f),a.drawElements(a.TRIANGLES,s.indices.length,a.UNSIGNED_SHORT,0),a.disableVertexAttribArray(l.attr_position),a.disableVertexAttribArray(l.attr_textureCoord),a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}_getShader(e){if(this._shader)return this._shader;let n=e.createProgram();if(!n)throw new Error("Unable to create program");let i=uo(e,e.VERTEX_SHADER,uZ),r=uo(e,e.FRAGMENT_SHADER,fZ);e.attachShader(n,i),e.attachShader(n,r),Gd(e,n);let s=e.getUniformLocation(n,"matrix");if(!s)throw new Error("Unable to get uniform location mattrix");let o=e.getUniformLocation(n,"skinSampler");if(!o)throw new Error("Unable to get uniform location skinSampler");return this._shader={prog:n,unif_matrix:s,unif_skinSampler:o,attr_position:e.getAttribLocation(n,"position"),attr_textureCoord:e.getAttribLocation(n,"textureCoord")},this._shader}}const w4=new Map;function cZ(t,e){let n=w4.get(e);if(n)return n;if(n=t.createTexture()||void 0,!n)throw new Error("Unable to create texture");w4.set(e,n),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const i=0,r=t.RGBA,s=t.RGBA,o=t.UNSIGNED_BYTE;return t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,i,r,s,o,e),e.addEventListener("load",()=>{if(!n)return;t.bindTexture(t.TEXTURE_2D,n);const a=0,l=t.RGBA,c=t.RGBA,u=t.UNSIGNED_BYTE;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,a,l,c,u,e)}),n}let uZ=`
#ifndef GL_ES
#define highp
#define mediump
#define lowp
#endif

uniform mat4 matrix;
attribute vec4 position;
attribute vec2 textureCoord;

varying highp vec2 vTextureCoord;

void main()
{
    gl_Position = matrix * position;
    vTextureCoord = textureCoord;
}`,fZ=`
#define highp mediump
#ifdef GL_ES
    // define default precision for float, vec, mat.
    precision highp float;
#else
#define highp
#define mediump
#define lowp
#endif

varying highp vec2 vTextureCoord;
uniform sampler2D skinSampler;

void main()
{
    gl_FragColor = texture2D(skinSampler, vTextureCoord);
}`,hw=new Map,hZ=ln();class yt{constructor(e,n,i){this._client=e,this._impl=n,this._mgr=i,this.pendingMessages=[],this.cameraTokens=new Map,this.nextCameraToken=1,this.tokensInFlight=0,this.videoTextures=[],this.cameraPixelArrays=[],this._sequenceRecordDeviceAttitudeMatrices=!0,this._sequenceRecorderFirstCameraToken=0,this.onGLContextReset=new K6}static create(e,n){let i=e.pipeline_create();return hw.set(i,new yt(e,i,n)),i}static get(e){return hw.get(e)}frameUpdate(e){for(let n of this.pendingMessages)e.processMessages(n),this._mgr.postOutgoingMessage({t:"buf",p:this._impl,d:n},[n]);this.pendingMessages=[],this.cleanOldFrames()}cleanOldFrames(){var e,n;let i=this._client.pipeline_camera_frame_user_data(this._impl);if(!!i)for(let r of this.cameraTokens)r[0]<i&&(r[1].texture&&this.videoTextures.push(r[1].texture),(n=(e=r[1].frame)===null||e===void 0?void 0:e.close)===null||n===void 0||n.call(e),this.cameraTokens.delete(r[0]))}cameraTokenReturn(e){if(this._sequenceRecorder&&this._sequenceRecordDeviceAttitudeMatrices&&e.token>=this._sequenceRecorderFirstCameraToken){let n=this.cameraTokens.get(e.token);n&&(e.att&&this._sequenceRecorder.appendAttitudeMatrix(e.att),n.data=e.d,this._sequenceRecorder.appendCameraFrame(n))}this.cameraPixelArrays.push(e.d),this.tokensInFlight--}sequenceRecordStart(e){this._sequenceRecorder||(this._sequenceRecorder=new wt(e)),this._sequenceRecorder.start(),this._sequenceRecorderFirstCameraToken=this.nextCameraToken}sequenceRecordStop(){var e;(e=this._sequenceRecorder)===null||e===void 0||e.stop()}sequenceRecordData(){var e;return((e=this._sequenceRecorder)===null||e===void 0?void 0:e.data())||new Uint8Array(0)}sequenceRecordClear(){delete this._sequenceRecorder}sequenceRecordDeviceAttitudeMatrices(e){this._sequenceRecordDeviceAttitudeMatrices=e}getVideoTexture(){return this.videoTextures.pop()}destroy(){this._client.pipeline_destroy(this._impl),hw.delete(this._impl)}getCurrentCameraInfo(){let e=this._client.pipeline_camera_frame_user_data(this._impl);if(!!e)return this.cameraTokens.get(e)}cameraFrameDrawGL(e,n,i){if(!this.glContext)return;let r=this.getCurrentCameraInfo();!r||(this._cameraDraw||(this._cameraDraw=new V$(this.glContext)),this._cameraDraw.drawCameraFrame(e,n,r,i===!0))}glContextLost(){this._cameraDraw&&this._cameraDraw.dispose(),this._faceDraw&&this._faceDraw.dispose(),this._imageTargetPreviewDraw&&this._imageTargetPreviewDraw.dispose(),this._faceProjectDraw&&this._faceProjectDraw.dispose(),delete this._cameraDraw,delete this._faceDraw,delete this._imageTargetPreviewDraw,delete this._faceProjectDraw,dq(),this.onGLContextReset.emit();for(let e of this.videoTextures)this.glContext&&this.glContext.deleteTexture(e);this.videoTextures=[];for(let e of this.cameraTokens)this.glContext&&e[1].texture&&this.glContext.deleteTexture(e[1].texture),e[1].texture=void 0;this.glContext=void 0}glContextSet(e,n){this.glContextLost(),this.glContext=e,n=n||[];for(let i=0;i<4;i++){let r=n[i]||e.createTexture();r&&(e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.videoTextures.push(r))}e.bindTexture(e.TEXTURE_2D,null)}drawFace(e,n,i,r){if(!this.glContext)return;this._faceDraw||(this._faceDraw=new Y$(this.glContext));let s=ln();en(s,e,n),en(s,s,i),this._faceDraw.drawFace(s,r)}drawImageTargetPreview(e,n,i,r,s){if(!this.glContext)return;this._imageTargetPreviewDraw||(this._imageTargetPreviewDraw=new lZ(this.glContext));let o=ln();en(o,e,n),en(o,o,i),this._imageTargetPreviewDraw.draw(o,s,r)}drawFaceProject(e,n,i,r,s,o){!this.glContext||(this._faceProjectDraw||(this._faceProjectDraw=new K$(this.glContext)),this._faceProjectDraw.drawFace(e,n,i,r,s,o))}cameraFrameTexture(){var e;return(e=this.getCurrentCameraInfo())===null||e===void 0?void 0:e.texture}cameraFrameTextureMatrix(e,n,i){let r=this.getCurrentCameraInfo();return r?i8(r.dataWidth,r.dataHeight,e,n,r.uvTransform||hZ,i):ln()}cameraFrameUserFacing(){var e;return((e=this.getCurrentCameraInfo())===null||e===void 0?void 0:e.userFacing)||!1}cameraPoseWithAttitude(e){let n=uu(this.getCurrentCameraInfo(),this._client.pipeline_camera_frame_camera_attitude(this._impl));if(e){let i=ln();Zi(i,[-1,1,1]),en(n,i,n),en(n,n,i)}return OM(n,n),n}videoFrameFromWorker(e){let n=this.nextCameraToken++;const i=Sv(e.source);!i||(this.cameraTokens.set(n,{dataWidth:e.w,dataHeight:e.h,texture:void 0,frame:e.d,userFacing:e.userFacing,uvTransform:e.uvTransform,cameraModel:e.cameraModel,cameraToDevice:e.cameraToDevice,cameraSource:i}),this.cleanOldFrames())}imageBitmapFromWorker(e){let n=this.cameraTokens.get(e.tokenId);!n||(n.dataWidth=e.dataWidth,n.dataHeight=e.dataHeight,n.frame=e.frame,n.userFacing=e.userFacing,n.uvTransform=e.uvTransform,this.tokensInFlight--,this.cleanOldFrames())}uploadGL(){var e,n;let i=this.getCurrentCameraInfo();(n=(e=i==null?void 0:i.cameraSource)===null||e===void 0?void 0:e.uploadGL)===null||n===void 0||n.call(e,i)}registerToken(e){let n=this.nextCameraToken++;return this.cameraTokens.set(n,e),this.tokensInFlight++,n}processGL(){if(!this.glContext){m_("no GL context for camera frames - please call pipeline_gl_context_set");return}if(!!this.currentCameraSource){if(this.tokensInFlight>0){this.currentCameraSource.getFrame(!0);return}this.currentCameraSource.getFrame(!1)}}motionAccelerometerSubmit(e,n,i,r){var s;this._sequenceRecordDeviceAttitudeMatrices||(s=this._sequenceRecorder)===null||s===void 0||s.appendAccelerometer(e,n,i,r),this._client.pipeline_motion_accelerometer_submit(this._impl,e,n,i,r)}motionRotationRateSubmit(e,n,i,r){var s;this._sequenceRecordDeviceAttitudeMatrices||(s=this._sequenceRecorder)===null||s===void 0||s.appendRotationRate(e,n,i,r),this._client.pipeline_motion_rotation_rate_submit(this._impl,e,n,i,r)}motionAttitudeSubmit(e,n,i,r){var s;this._sequenceRecordDeviceAttitudeMatrices||(s=this._sequenceRecorder)===null||s===void 0||s.appendAttitude(e,n,i,r),this._client.pipeline_motion_attitude_submit(this._impl,e,n,i,r)}motionAttitudeMatrix(e){this._client.pipeline_motion_attitude_matrix_submit(this._impl,e)}sendCameraStreamToWorker(e,n,i){let r={t:"streamC2S",p:this._impl,s:n,userFacing:i,source:e};this._mgr.postOutgoingMessage(r,[r.s])}sendCameraToScreenRotationToWorker(e){let n={p:this._impl,t:"cameraToScreenC2S",r:e};this._mgr.postOutgoingMessage(n,[])}sendImageBitmapToWorker(e,n,i,r,s,o){let a={p:this._impl,t:"imageBitmapC2S",i:e,r:n,tokenId:r,userFacing:i,cameraModel:s,cameraToDevice:o};this._mgr.postOutgoingMessage(a,[e])}sendDataToWorker(e,n,i,r,s,o,a){let l={d:e,p:this._impl,width:i,height:r,token:n,userFacing:s,c2d:o,cm:a,t:"cameraFrameC2S"};this._mgr.postOutgoingMessage(l,[e])}}function uu(t,e){let n=!1;n=t?t.userFacing:!1;let i=ln();return wd(i,Zu(n)*Math.PI/180,[0,0,1]),en(i,i,e),i}const dZ={0:[{mean:[.235,.2344,.7305],identity:[.008,.0087,.0024,-.0026,6e-4,-.0022,5e-4,.0033,.0026,.0017,-.0055,-8e-4,.0011,.0059,0,2e-4,.001,-.001,-.0044,-.0011,-1e-4,.0024,.0019,-9e-4,4e-4,-.0015,0,.0038,.0013,3e-4,.002,-.0021,.0018,.0023,.0011,.0012,-.0011,-.0017,9e-4,-.0012,-8e-4,7e-4,-.0017,.0029,-.0029,8e-4,-.0027,8e-4,-.0017,4e-4,9e-4,-.001,-3e-4,8e-4,-.0016,-3e-4,-7e-4,.0016,-9e-4,.0021,-5e-4,.0011,-.0024,-1e-4,6e-4,1e-4,-.0026,-4e-4,-3e-4,-9e-4,5e-4,3e-4,-8e-4,-.001,-4e-4,-8e-4,.0022,-.0014,-1e-4,-.0023,0,-.0018,7e-4,-.0036,.0017,.0017,-.0018,-2e-4,-4e-4,-9e-4,-8e-4,3e-4,.0012,9e-4,-4e-4,-.0016,5e-4,-.0013,.0011,.0023,.0029,.0024,.0017,-.0027,-4e-4,-.001,-.0018,-.0015,-.001,.001,-.0013,-1e-4,-2e-4,7e-4,3e-4,3e-4,-.0016,9e-4,-.0021,4e-4,.0014,.002,-7e-4,-4e-4,2e-4,-4e-4,-6e-4,-9e-4,.0015,4e-4,-4e-4,5e-4,-.0015,9e-4,3e-4,3e-4,-2e-4,-8e-4,-9e-4,.0023,4e-4,1e-4,-4e-4,-1e-4,7e-4,2e-4,.001,1e-4,-.0029,-5e-4],expression:[0,3e-4,.0052,-7e-4,-.0051,-.0103,0,.0019,.0027,-.0054,.0135,.035,-5e-4,-6e-4,.0025,-.0045,-.0557,-.003,-.0191,-.1199,.0548,-.0036,-.0682,-.0167,2e-4,-.0085,-.0085,.0044,.0041,-.0568,.0044,.179,.0065,-.0017,-.1006,.0036,-.0267,-.3279,.0301,-.0011,-.0173,-.001,.0046,.2808,.0207,.0162,.238,-.0225,.0017,.1041,.0203,5e-4,.0161,.0031,-.0436,.6504,.0873,-.0099,.1039,.0048,-.0254,.2534,-.0042,.003,-.0106,-.0153,-.0118,.0252,9e-4,-.0071,.0099,.007,-.0724,.0461,-.0235,.0833,.004,.0141,-.0219,.0132,-.0042,-.0179,.0045,-.0215,.3638,.0054,-.0445]},{mean:[.2358,.1466,.7183],identity:[.0077,.0093,1e-4,-.0022,0,-.0041,5e-4,.0022,.0028,.0018,-.0038,-.0013,.001,.0044,-2e-4,0,.0017,-.0016,-.0043,-2e-4,-1e-4,.0023,9e-4,5e-4,-7e-4,-4e-4,-.0017,.003,7e-4,6e-4,.0011,-.0018,5e-4,.0018,-8e-4,4e-4,-.0023,-6e-4,-3e-4,-.0015,-.0014,-1e-4,-.0018,.0027,-.0026,3e-4,-.0031,.0011,-.0026,-.0011,.0012,-.0013,-2e-4,7e-4,-.0021,.0021,4e-4,.0012,-.001,.002,-3e-4,2e-4,-.0026,-3e-4,.001,1e-4,-.0018,-.001,9e-4,-.0011,.001,4e-4,-8e-4,-7e-4,-.001,-3e-4,7e-4,-5e-4,-6e-4,-.0019,-5e-4,-.002,7e-4,-.0027,.0014,.0013,6e-4,-5e-4,-3e-4,-3e-4,-.001,0,.0019,1e-4,6e-4,-.0012,4e-4,-9e-4,4e-4,.0025,3e-4,.0024,.0017,-9e-4,-.0015,-.0015,-.001,-.0023,-.001,-5e-4,-4e-4,8e-4,9e-4,7e-4,2e-4,7e-4,-9e-4,9e-4,-.0013,1e-4,9e-4,2e-4,6e-4,-6e-4,-8e-4,-4e-4,-7e-4,8e-4,.0019,3e-4,.0015,2e-4,-.0015,-3e-4,0,6e-4,3e-4,6e-4,-6e-4,2e-4,5e-4,-4e-4,.0012,-4e-4,2e-4,-8e-4,6e-4,-4e-4,2e-4,-.0021],expression:[-.0034,.0054,.0069,.004,6e-4,-.0104,-3e-4,.0036,.0025,.0065,.0296,.0208,-9e-4,.0154,.0029,-.0167,.0124,.004,-.0102,.0351,.028,-.019,.0146,-.0035,-.0023,-.0069,-.0051,-.01,.0262,-.028,.0112,.082,.023,-.0019,-.066,-.0104,-.0408,.0164,.0075,-.0074,.0367,.0041,.0517,-.0207,.0045,.0291,-.0672,-.0129,.0345,-.1558,-.0106,.0037,-.0437,-.0021,.0854,-.1121,.0187,.0041,.0072,.0011,.0193,-.0143,-.0119,.005,-.02,-.0122,-.008,.0527,.0036,-.006,.0222,.007,-.0429,.046,-.0046,.0226,-.0059,.0202,-.0173,.0087,0,-.0067,-.0095,-.0153,.1506,-.0017,.0021]}],1:[{mean:[-.2271,.2323,.7319],identity:[-.0084,.0097,.0018,.0041,2e-4,-.002,-.0012,.0036,.0019,-9e-4,-.0063,-.001,-3e-4,.0053,6e-4,1e-4,5e-4,-.0015,.0044,-.0025,-.0015,-.002,.0016,-6e-4,2e-4,-.0013,0,-.0022,2e-4,2e-4,-.0025,-.0014,.0015,8e-4,2e-4,.0012,6e-4,-6e-4,.0017,0,3e-4,-1e-4,.0024,.0025,-.0029,-.0015,-.0015,1e-4,.0031,-.0016,7e-4,.0019,6e-4,.002,9e-4,.001,-.0014,-.002,-.0015,.0029,1e-4,5e-4,-.0023,8e-4,-.0011,.0019,.0017,-3e-4,-.0011,-3e-4,.0011,-8e-4,.0019,-.0022,1e-4,.0015,.0017,-8e-4,-.0011,-.0022,3e-4,.0022,6e-4,-.003,-2e-4,0,-.0017,-2e-4,0,1e-4,4e-4,.0012,.0019,-.0014,4e-4,-.0017,-.0012,-.0011,.0021,-.0029,.0026,.0018,-.0023,-.0029,1e-4,.0014,-.0019,-4e-4,-4e-4,.0023,-.0016,0,-9e-4,.0014,-.0015,.0015,-.0016,-.0011,-.0022,1e-4,-.0018,.0027,-.0013,4e-4,-1e-4,-5e-4,.0011,-2e-4,.0015,5e-4,-9e-4,-1e-4,.0029,6e-4,0,-3e-4,7e-4,-8e-4,-5e-4,.0025,3e-4,2e-4,-8e-4,-1e-4,3e-4,0,.0014,2e-4,-.0024,1e-4],expression:[-.0025,-9e-4,.006,.004,-.0027,-.0113,-8e-4,.001,.0031,-.0016,.0144,.0382,-3e-4,-5e-4,.0035,-.0044,-.0511,-.0014,-7e-4,-.1007,.0582,-6e-4,-.0606,-.0165,5e-4,-.0087,-.0093,.0036,.0057,-.0576,-.0039,.1488,.0127,.0016,-.0666,-9e-4,-.0153,.3162,-.0445,-.0021,.0023,.0043,-.0033,.2382,.0063,-.0217,.167,-.039,.0097,-.1144,-.0189,-.0145,.6831,.0632,-.0012,-.1959,-.0133,4e-4,.1108,-3e-4,.0062,.2593,-.0161,-.0018,-.0051,-.012,.0162,.016,-.0022,-.0052,-.0201,.0101,.0115,.0365,-.024,-.0059,.0188,-.0336,.0352,.0224,-.0229,.0146,.0086,-.0273,-.0032,.0103,-.0112]},{mean:[-.2288,.1541,.7202],identity:[-.0082,.0101,2e-4,.0036,-7e-4,-.0037,-8e-4,.0024,.0022,-.0013,-.0045,-.0013,-6e-4,.0045,-4e-4,4e-4,.0012,-.0014,.0042,-.001,-7e-4,-.0019,3e-4,-2e-4,.0012,-4e-4,-.0012,-.0018,-4e-4,-1e-4,-.0014,-.0012,1e-4,1e-4,-.0017,.001,.0015,-1e-4,6e-4,1e-4,0,-6e-4,.0028,.0021,-.0025,-.002,-.0015,7e-4,.0028,-.0023,9e-4,.0013,1e-4,.0016,.0012,.0032,-6e-4,-.0013,-.0011,.0021,3e-4,-5e-4,-.0024,4e-4,-4e-4,.0014,.0015,-8e-4,-3e-4,3e-4,.0017,-6e-4,.002,-.0018,-3e-4,9e-4,1e-4,2e-4,-6e-4,-.0015,-4e-4,.0022,7e-4,-.0023,0,-2e-4,-2e-4,-3e-4,-1e-4,6e-4,-2e-4,6e-4,.0022,-3e-4,.0013,-.0014,-5e-4,-3e-4,.0013,-.0027,6e-4,.0025,-.0023,-8e-4,-.0013,.0017,-9e-4,-.0019,1e-4,8e-4,-7e-4,-4e-4,0,.001,-.001,.0019,-8e-4,-.0015,-6e-4,-2e-4,-.0011,8e-4,1e-4,9e-4,-8e-4,-4e-4,6e-4,7e-4,.0021,-4e-4,7e-4,-5e-4,.0021,-7e-4,-4e-4,-9e-4,8e-4,3e-4,1e-4,3e-4,1e-4,9e-4,.001,-5e-4,5e-4,-.001,.001,4e-4,-5e-4,-.0012],expression:[8e-4,.0037,.0078,-4e-4,5e-4,-.012,-2e-4,-.0046,.0033,-.0089,.0295,.0221,-.0024,-.0084,.0013,.0057,.0125,.0049,-.0036,.0373,.0285,.0115,.0135,-.0035,.0048,.0108,-.0033,.0106,.0281,-.0301,-.0082,.0803,.0244,-7e-4,-.0725,-.0105,-.0247,-.0036,-.0143,-.0045,-.029,2e-4,-.0303,.0093,-.0021,-.0196,-.0754,-.0211,.0326,.1246,.006,-.0804,-.1499,.0109,.0182,-.0029,-.0014,-.0035,.0072,-8e-4,-.0152,-.0108,-.0166,-.0073,-.0144,-.0095,.0101,.047,-.0018,-.004,-.0189,.0027,.0104,.0298,-.0042,-.0096,.0191,-.0217,.0228,.0226,-.0105,.0047,-.0048,-.0172,.0061,-.0043,-.0016]}],2:{mean:[.5396,.2028,.2496],identity:[.0204,.0146,-.0182,-.0052,.0158,-.0038,-.0025,-.0108,-.006,.0085,-.0044,.0029,.0042,.001,.0095,.0015,-.0034,-.0064,-.0057,7e-4,.0026,7e-4,.0037,-6e-4,.0037,.0026,.0024,5e-4,-.0019,-.0013,.003,-.0028,.0018,-9e-4,.002,-.0047,.004,-.003,.0031,-.0027,-.0026,-.0017,.0016,.0014,-4e-4,.0021,-.002,0,.0017,7e-4,-4e-4,-7e-4,-.0018,-9e-4,2e-4,-.0012,1e-4,-5e-4,-.0011,4e-4,2e-4,.0011,1e-4,8e-4,.0017,-.0013,.0025,.0017,.001,2e-4,3e-4,5e-4,-4e-4,-1e-4,-5e-4,7e-4,-.0022,-.0029,6e-4,-8e-4,-6e-4,6e-4,-5e-4,5e-4,.0013,3e-4,-5e-4,-.003,7e-4,2e-4,.0016,-4e-4,0,0,4e-4,1e-4,.0014,.0012,1e-4,4e-4,-1e-4,8e-4,9e-4,4e-4,-4e-4,9e-4,-2e-4,.001,9e-4,4e-4,1e-4,7e-4,7e-4,.001,-.0017,-8e-4,2e-4,.0017,-3e-4,-1e-4,4e-4,5e-4,7e-4,5e-4,-1e-4,-6e-4,-1e-4,1e-4,-3e-4,-7e-4,-2e-4,-5e-4,0,-3e-4,3e-4,8e-4,-2e-4,-3e-4,5e-4,1e-4,-7e-4,-.001,-2e-4,3e-4,4e-4,-1e-4,7e-4,0,4e-4,4e-4],expression:[1e-4,-4e-4,1e-4,0,5e-4,2e-4,0,0,3e-4,-2e-4,3e-4,5e-4,-1e-4,2e-4,8e-4,1e-4,-2e-4,-5e-4,-3e-4,6e-4,5e-4,0,1e-4,2e-4,1e-4,-1e-4,-6e-4,-2e-4,5e-4,0,-4e-4,4e-4,.0016,4e-4,-4e-4,-.0015,0,1e-4,1e-4,-3e-4,3e-4,.0019,-2e-4,7e-4,4e-4,4e-4,-8e-4,-.0015,.0013,-.0016,-.0069,4e-4,-6e-4,-.0019,0,-1e-4,5e-4,-3e-4,2e-4,.0014,-3e-4,6e-4,.0011,4e-4,-3e-4,-.0032,-6e-4,8e-4,.0025,-3e-4,3e-4,.0015,-1e-4,1e-4,3e-4,-1e-4,0,0,-3e-4,4e-4,.0019,1e-4,0,-8e-4,-1e-4,1e-4,5e-4]},3:{mean:[-.5464,.2141,.26],identity:[-.0207,.0172,-.0176,.0068,.0148,-.0051,.0042,-.0101,-.0058,-.0087,-.0059,.0045,-.0056,.0017,.0097,-.0048,-.004,-.0044,.0019,2e-4,.0041,-.0052,.0041,2e-4,-.0027,6e-4,.002,-.0027,-.0033,-6e-4,-.004,9e-4,-.0012,-1e-4,-.0026,.0021,-.003,-.0025,.0052,.0025,.0022,-1e-4,-8e-4,.0013,.001,4e-4,.0018,.0014,6e-4,-5e-4,-.0015,-.0039,.0014,-1e-4,8e-4,-2e-4,6e-4,-5e-4,-.0038,-.0012,-.0018,-3e-4,.001,9e-4,.0012,.0024,-.0024,-7e-4,-.0016,-.0016,3e-4,-.001,-.0014,-.0014,.001,-3e-4,-7e-4,-.0012,3e-4,6e-4,3e-4,-5e-4,3e-4,.0012,6e-4,-8e-4,4e-4,4e-4,8e-4,-2e-4,-.0014,3e-4,0,.0023,-3e-4,-.0012,-.0013,.0011,-2e-4,-.0014,-1e-4,.0014,0,3e-4,3e-4,-8e-4,-5e-4,-7e-4,-7e-4,-2e-4,3e-4,5e-4,2e-4,-1e-4,.0011,-.0014,1e-4,-.0015,-1e-4,-3e-4,0,-.001,-1e-4,-8e-4,8e-4,-8e-4,-2e-4,-.0011,-3e-4,-4e-4,1e-4,-2e-4,3e-4,-7e-4,0,3e-4,1e-4,-8e-4,5e-4,1e-4,4e-4,.0014,-6e-4,-.001,-3e-4,-2e-4,1e-4,-1e-4,-1e-4,7e-4],expression:[-3e-4,-1e-4,6e-4,4e-4,0,-7e-4,0,-3e-4,-2e-4,-4e-4,.0012,8e-4,1e-4,-5e-4,-7e-4,-4e-4,0,1e-4,-4e-4,.0017,7e-4,0,1e-4,3e-4,0,4e-4,4e-4,5e-4,1e-4,-.001,-7e-4,.0022,.0026,5e-4,-.0024,-.0023,0,1e-4,3e-4,0,-.0013,-.0015,6e-4,.0014,8e-4,-2e-4,-.0025,-.0023,-3e-4,.0049,.006,-2e-4,-7e-4,-2e-4,0,-.0019,-.0018,-2e-4,.0017,.0017,3e-4,.0015,7e-4,1e-4,-.0023,-.0036,2e-4,.0023,.0017,0,-5e-4,-3e-4,-3e-4,4e-4,2e-4,-1e-4,-3e-4,-5e-4,1e-4,.0018,.0025,1e-4,-6e-4,-.0011,0,1e-4,1e-4]},4:{mean:[.0018,.1864,.853],identity:[-.0011,.0134,.0085,9e-4,-.0025,-7e-4,-3e-4,.0033,4e-4,-5e-4,-.0047,-.002,7e-4,.0026,-.0069,-1e-4,.0036,.0072,5e-4,-8e-4,-.0047,4e-4,-8e-4,-.001,0,2e-4,-.0036,-2e-4,-.001,-.0048,-1e-4,.0018,.0044,-7e-4,-2e-4,.0043,3e-4,.002,-.0031,0,-7e-4,.0013,0,.0037,.0033,-.0016,-.0012,.002,-1e-4,-.0027,.0051,5e-4,8e-4,7e-4,-.0017,.0054,.0023,-3e-4,.0032,1e-4,0,7e-4,-5e-4,-.0011,2e-4,8e-4,0,-.0033,-8e-4,-7e-4,7e-4,.0033,5e-4,-3e-4,.0029,-1e-4,-.0024,-.0011,-.002,-.0015,-.0019,2e-4,7e-4,.0031,6e-4,.0012,0,0,-.0021,0,-9e-4,-.0011,-.0011,-2e-4,.0015,.001,.0013,8e-4,.001,-3e-4,9e-4,.0027,-2e-4,-.0011,-.0011,6e-4,7e-4,2e-4,1e-4,-5e-4,-.0022,.0011,-.0014,9e-4,3e-4,2e-4,0,-6e-4,-4e-4,-.0011,-7e-4,.001,-.0012,6e-4,-.0012,-.0015,3e-4,-9e-4,-.0013,-.0013,7e-4,.001,-.0011,-.0013,.0015,4e-4,1e-4,4e-4,-1e-4,-.0016,-.0016,9e-4,-7e-4,-.0024,5e-4,-1e-4,-.0017,-2e-4,3e-4,-9e-4],expression:[-.0017,.0019,.0097,.003,-.0103,-.0093,9e-4,6e-4,.0023,-.0017,-.0204,.0376,.0033,-.0034,.0033,-.0026,-.0322,.0396,-.0032,-.0947,.0942,-7e-4,-.0175,.0266,-.001,-6e-4,.0016,.0025,.0157,-.0142,-.0022,.037,.015,.0021,-.0102,-.0107,.0036,.0055,-.0051,.0021,3e-4,-3e-4,4e-4,-.0177,.0074,-6e-4,-.0357,.0149,-.0066,9e-4,.0013,-.0031,.0016,.0095,.002,.0052,.0035,-3e-4,.0053,-.0082,.002,.0022,-.0071,-.0011,5e-4,.0055,.0011,3e-4,-.0126,-4e-4,3e-4,-.0023,-.0015,.0059,.0063,-.0042,-.0023,.0055,.0019,.0017,-.0075,6e-4,-8e-4,.0018,.0012,.0012,-5e-4]},5:{mean:[-.002,-.0469,1.0039],identity:[-.0017,.0018,.0156,6e-4,-.0038,5e-4,4e-4,.0013,.002,-4e-4,-.0015,-.0051,5e-4,-7e-4,-.0055,-1e-4,-9e-4,.008,-2e-4,.0036,-.0053,4e-4,-.0026,-.0016,7e-4,9e-4,-.009,-3e-4,7e-4,-.0084,.0015,.0021,.0032,-.0015,.0018,.0046,-3e-4,-4e-4,-1e-4,8e-4,-.0044,-7e-4,-8e-4,7e-4,.0048,-.0024,-3e-4,.0024,2e-4,-.0051,.0058,-6e-4,.0028,.0018,-.0021,.0035,.0057,.0011,.0065,0,-2e-4,.0011,.003,-.0027,8e-4,7e-4,3e-4,-.0039,-.002,-2e-4,-.0015,.0034,.0012,-.0025,.0024,-2e-4,4e-4,-.0042,-.0024,-.001,-.0023,.0016,-7e-4,.0039,1e-4,-5e-4,.0018,3e-4,-2e-4,-9e-4,-.0015,3e-4,-7e-4,-1e-4,-2e-4,.0023,.0032,.002,-.0013,.0013,-.0038,.0045,1e-4,-.0031,1e-4,.0019,-1e-4,.0016,.0013,0,-.002,.0023,2e-4,.0011,.0018,-.0024,6e-4,-.0017,.002,-8e-4,-.0021,7e-4,.0011,8e-4,4e-4,-.001,.0012,2e-4,-6e-4,-.0027,-5e-4,.001,-9e-4,1e-4,-1e-4,8e-4,-.0011,.0022,-.001,-5e-4,-.0011,.0016,-.0015,8e-4,-3e-4,9e-4,.0013,-7e-4,-7e-4,-2e-4],expression:[-.0018,-.0168,.0088,.0389,.1026,.0414,.2201,-.0262,-.0016,-.0017,.0612,-.0298,-.0323,.0093,.0013,-.005,.2207,.1315,-4e-4,.0858,-.0303,-.0133,.015,-.008,.1454,.0114,.0177,-.0077,.1022,.0356,-.0023,.1088,.0232,.003,-.0706,.0347,-1e-4,.004,-.0011,.0397,-.0096,-.0033,.0029,-.01,-.0083,-6e-4,-.0135,.0016,-.0087,-.0019,.0022,-.004,-.0087,.0105,8e-4,-.005,.0069,.0028,.0409,-.0391,.003,.0103,.0051,.0026,.0776,-.0083,-.0062,-.0567,.0268,.0175,.0017,.0156,-.0043,.0299,-.0395,-.0015,.0051,-.0148,.0125,.0035,.0603,.0109,-.0645,-.0257,.002,6e-4,-8e-4]},6:{mean:[-6e-4,-.1542,.8789],identity:[-7e-4,-.0032,.01,0,-.0027,.0031,6e-4,5e-4,-6e-4,-3e-4,.0013,-.0049,-2e-4,-.002,-.0046,8e-4,-.0011,.0054,2e-4,.0043,-.0027,3e-4,-.0022,-.0019,8e-4,.0032,-.0069,0,4e-4,-.0071,.0016,.0027,.0039,-.0017,9e-4,.0031,-1e-4,-5e-4,-4e-4,7e-4,-.0026,-.0012,-5e-4,6e-4,2e-4,-.0014,-.0013,.0019,-2e-4,-.0053,.0031,-6e-4,.0016,.0023,-.0013,.0021,.0029,8e-4,.0052,0,4e-4,0,.0037,-.0026,3e-4,.002,-2e-4,-.0024,4e-4,-4e-4,-.0012,8e-4,7e-4,-.0023,5e-4,0,.0014,-.0022,-.0016,0,-.0012,8e-4,-7e-4,.0014,-6e-4,-.0012,-3e-4,2e-4,.0012,-3e-4,-.002,-1e-4,1e-4,-2e-4,-.0016,9e-4,.002,.0019,0,6e-4,-.0022,.0016,1e-4,-.0017,-.0013,.001,9e-4,-1e-4,.0011,3e-4,-7e-4,.0014,8e-4,.0013,.0011,-.002,0,-.0015,.0014,.001,-.0015,7e-4,3e-4,.001,-1e-4,.0012,7e-4,6e-4,-4e-4,-.0013,-.0012,-9e-4,-.0011,2e-4,-5e-4,5e-4,4e-4,2e-4,1e-4,0,5e-4,5e-4,-.0014,.0015,-9e-4,5e-4,.0014,-8e-4,-8e-4,.0012],expression:[8e-4,.0481,.1653,.0784,.1008,-.3992,.5088,-.02,.0542,.001,.3723,-.0151,-.0986,.0283,-.0033,-.0121,.2634,.1202,.0036,-.0529,-.0245,-.0297,-.1085,.0495,.3264,.0083,4e-4,-.0314,.1459,-.1142,-.003,1e-4,.1154,-.0035,-.0285,-.0184,-1e-4,.0012,.0035,.079,-.0103,.0043,.011,-.004,-.0774,-.0047,-.023,.0284,-.0048,-.001,.0149,-.0039,.0046,.0528,-6e-4,.0063,.0376,.0096,.0558,-.0295,0,-.0311,-.0634,.0062,.0176,-.0154,-.0109,-.1149,.0192,.0326,.0121,.0237,.0034,.0262,-.0778,.0014,-.0045,-.0203,.0077,.0588,.0575,.008,-.0557,-.0095,.0032,.0054,-.0042]},7:{mean:[.0038,-.2927,.833],identity:[6e-4,-.0109,.0073,-6e-4,-.0044,.0017,-1e-4,-.0022,-6e-4,-3e-4,.0065,-.0014,-6e-4,-.0051,-.0046,3e-4,-.0029,.003,2e-4,.0038,-6e-4,0,-.0012,6e-4,-4e-4,.0053,-.0075,-2e-4,-7e-4,-.0063,.0014,.0026,.0019,-.0022,.0018,.0028,-1e-4,-.0012,.0011,9e-4,.0019,-.0019,-1e-4,.0012,-.0022,-3e-4,-.0012,4e-4,-8e-4,3e-4,-3e-4,0,.0017,.0021,-4e-4,.0012,.0022,-3e-4,.0026,-3e-4,4e-4,-.0026,.0032,-.0019,3e-4,.0015,1e-4,-.0015,.0013,-1e-4,1e-4,-.0029,0,-2e-4,-.0028,-7e-4,.0019,-3e-4,-2e-4,.0012,9e-4,4e-4,-.001,-.002,-.0016,.0011,-1e-4,3e-4,.0021,2e-4,-.0014,-9e-4,-1e-4,0,-2e-4,-.001,.0015,.0018,1e-4,7e-4,8e-4,.0017,.001,-9e-4,1e-4,4e-4,.0023,-1e-4,.0012,1e-4,-8e-4,2e-4,.0018,6e-4,3e-4,1e-4,.0012,-3e-4,.002,-6e-4,0,-1e-4,-.0022,4e-4,5e-4,.0011,2e-4,-.0013,-.0023,6e-4,6e-4,-5e-4,-5e-4,9e-4,2e-4,2e-4,.0011,-3e-4,.0011,.0015,.0011,3e-4,2e-4,8e-4,-4e-4,-8e-4,3e-4,0,.0012,-1e-4],expression:[.026,.1107,.3257,.1917,.3206,-1.1348,1.0791,-.035,.1549,-.0103,.6953,1e-4,-.3262,.068,.0219,-.0044,.3643,.2178,.0168,-.2478,-.1321,-.0414,-.3782,-.0617,.5088,-.0031,-.0311,-.0497,.0948,-.385,.0148,-.2224,-.1415,-.0074,.0863,-.203,3e-4,-.0081,.0057,.1164,-.0039,.0015,-.0024,.0505,.1532,.0039,-.0148,-.0753,.0163,.0058,-.0339,.0036,.0252,-.0569,-.0041,.0163,-.0361,.0035,-.018,.1266,0,-.0163,-.0046,.0133,-.1656,.2134,.0191,.0057,.0734,.0681,.0039,-.0144,.029,-.074,-.046,.0122,.0072,-.0162,-.0349,-.1234,.0212,-.0355,.0535,.1218,.0043,-.024,.0016]},8:{mean:[-.0018,-.3037,.8491],identity:[2e-4,-.0112,.0077,-4e-4,-.0044,.0024,1e-4,-.0021,-4e-4,-4e-4,.0066,-.002,-4e-4,-.0052,-.0044,3e-4,-.0032,.0039,4e-4,.0042,-3e-4,2e-4,-.0012,-2e-4,-2e-4,.0052,-.0083,-1e-4,-8e-4,-.0056,.0017,.0024,.0019,-.0023,.002,.0027,-2e-4,-.0013,.002,9e-4,.0017,-.0028,-2e-4,.0012,-.0026,0,-.0016,2e-4,-5e-4,3e-4,-.001,-1e-4,.0016,.0016,-3e-4,.0012,.0012,-3e-4,.0027,-3e-4,3e-4,-.0026,.0037,-.0017,1e-4,.0016,1e-4,-.0015,.0024,1e-4,2e-4,-.0039,0,-3e-4,-.0033,-6e-4,.0017,-4e-4,-4e-4,.0012,.0018,2e-4,-.0012,-.002,-.0017,.0013,-.001,3e-4,.0021,4e-4,-.0012,-6e-4,-2e-4,0,-4e-4,-9e-4,.0016,.0017,4e-4,7e-4,7e-4,.001,9e-4,-8e-4,5e-4,5e-4,.0023,.001,.0013,2e-4,-4e-4,2e-4,.0017,8e-4,3e-4,-1e-4,9e-4,-4e-4,.0019,-5e-4,3e-4,0,-.0025,3e-4,3e-4,.0011,1e-4,-.0015,-.001,7e-4,7e-4,-7e-4,-7e-4,8e-4,0,1e-4,.0013,-4e-4,.0012,.0014,.0017,4e-4,2e-4,3e-4,-3e-4,-9e-4,1e-4,0,.001,-4e-4],expression:[-.0092,2.8809,1.416,.2018,1.1982,-.9351,1.4492,-.1902,.1749,.0305,-.167,-.1572,-.7354,-.0492,.0115,.0608,.2971,.1179,.0046,-.0997,-.0041,-.0104,.3379,-.1854,.009,.0366,-.0583,.0269,-.0029,-.4175,-8e-4,.1794,.0752,-.0135,.1158,.1234,5e-4,.003,-.0032,.1034,-.0504,-.0055,-.0076,-.0772,.224,.0047,.0229,-.1044,.0162,-.0161,-.0241,-.0083,-.1388,-.0434,-.0125,-.0997,-.0327,-.0111,.1576,-.3911,.0199,.2522,.142,.0059,-.0721,-.0045,.031,-.1136,-.1685,.0641,.0142,.0312,.0426,-.1366,.1011,.0101,-.0157,.0018,-.0103,-.0344,.0907,.0016,.1168,-.0806,.0104,-.0057,.0111]},9:[{mean:[.0038,-.2927,.833],identity:[6e-4,-.0109,.0073,-6e-4,-.0044,.0017,-1e-4,-.0022,-6e-4,-3e-4,.0065,-.0014,-6e-4,-.0051,-.0046,3e-4,-.0029,.003,2e-4,.0038,-6e-4,0,-.0012,6e-4,-4e-4,.0053,-.0075,-2e-4,-7e-4,-.0063,.0014,.0026,.0019,-.0022,.0018,.0028,-1e-4,-.0012,.0011,9e-4,.0019,-.0019,-1e-4,.0012,-.0022,-3e-4,-.0012,4e-4,-8e-4,3e-4,-3e-4,0,.0017,.0021,-4e-4,.0012,.0022,-3e-4,.0026,-3e-4,4e-4,-.0026,.0032,-.0019,3e-4,.0015,1e-4,-.0015,.0013,-1e-4,1e-4,-.0029,0,-2e-4,-.0028,-7e-4,.0019,-3e-4,-2e-4,.0012,9e-4,4e-4,-.001,-.002,-.0016,.0011,-1e-4,3e-4,.0021,2e-4,-.0014,-9e-4,-1e-4,0,-2e-4,-.001,.0015,.0018,1e-4,7e-4,8e-4,.0017,.001,-9e-4,1e-4,4e-4,.0023,-1e-4,.0012,1e-4,-8e-4,2e-4,.0018,6e-4,3e-4,1e-4,.0012,-3e-4,.002,-6e-4,0,-1e-4,-.0022,4e-4,5e-4,.0011,2e-4,-.0013,-.0023,6e-4,6e-4,-5e-4,-5e-4,9e-4,2e-4,2e-4,.0011,-3e-4,.0011,.0015,.0011,3e-4,2e-4,8e-4,-4e-4,-8e-4,3e-4,0,.0012,-1e-4],expression:[.026,.1107,.3257,.1917,.3206,-1.1348,1.0791,-.035,.1549,-.0103,.6953,1e-4,-.3262,.068,.0219,-.0044,.3643,.2178,.0168,-.2478,-.1321,-.0414,-.3782,-.0617,.5088,-.0031,-.0311,-.0497,.0948,-.385,.0148,-.2224,-.1415,-.0074,.0863,-.203,3e-4,-.0081,.0057,.1164,-.0039,.0015,-.0024,.0505,.1532,.0039,-.0148,-.0753,.0163,.0058,-.0339,.0036,.0252,-.0569,-.0041,.0163,-.0361,.0035,-.018,.1266,0,-.0163,-.0046,.0133,-.1656,.2134,.0191,.0057,.0734,.0681,.0039,-.0144,.029,-.074,-.046,.0122,.0072,-.0162,-.0349,-.1234,.0212,-.0355,.0535,.1218,.0043,-.024,.0016]},{mean:[-.0018,-.3037,.8491],identity:[2e-4,-.0112,.0077,-4e-4,-.0044,.0024,1e-4,-.0021,-4e-4,-4e-4,.0066,-.002,-4e-4,-.0052,-.0044,3e-4,-.0032,.0039,4e-4,.0042,-3e-4,2e-4,-.0012,-2e-4,-2e-4,.0052,-.0083,-1e-4,-8e-4,-.0056,.0017,.0024,.0019,-.0023,.002,.0027,-2e-4,-.0013,.002,9e-4,.0017,-.0028,-2e-4,.0012,-.0026,0,-.0016,2e-4,-5e-4,3e-4,-.001,-1e-4,.0016,.0016,-3e-4,.0012,.0012,-3e-4,.0027,-3e-4,3e-4,-.0026,.0037,-.0017,1e-4,.0016,1e-4,-.0015,.0024,1e-4,2e-4,-.0039,0,-3e-4,-.0033,-6e-4,.0017,-4e-4,-4e-4,.0012,.0018,2e-4,-.0012,-.002,-.0017,.0013,-.001,3e-4,.0021,4e-4,-.0012,-6e-4,-2e-4,0,-4e-4,-9e-4,.0016,.0017,4e-4,7e-4,7e-4,.001,9e-4,-8e-4,5e-4,5e-4,.0023,.001,.0013,2e-4,-4e-4,2e-4,.0017,8e-4,3e-4,-1e-4,9e-4,-4e-4,.0019,-5e-4,3e-4,0,-.0025,3e-4,3e-4,.0011,1e-4,-.0015,-.001,7e-4,7e-4,-7e-4,-7e-4,8e-4,0,1e-4,.0013,-4e-4,.0012,.0014,.0017,4e-4,2e-4,3e-4,-3e-4,-9e-4,1e-4,0,.001,-4e-4],expression:[-.0092,2.8809,1.416,.2018,1.1982,-.9351,1.4492,-.1902,.1749,.0305,-.167,-.1572,-.7354,-.0492,.0115,.0608,.2971,.1179,.0046,-.0997,-.0041,-.0104,.3379,-.1854,.009,.0366,-.0583,.0269,-.0029,-.4175,-8e-4,.1794,.0752,-.0135,.1158,.1234,5e-4,.003,-.0032,.1034,-.0504,-.0055,-.0076,-.0772,.224,.0047,.0229,-.1044,.0162,-.0161,-.0241,-.0083,-.1388,-.0434,-.0125,-.0997,-.0327,-.0111,.1576,-.3911,.0199,.2522,.142,.0059,-.0721,-.0045,.031,-.1136,-.1685,.0641,.0142,.0312,.0426,-.1366,.1011,.0101,-.0157,.0018,-.0103,-.0344,.0907,.0016,.1168,-.0806,.0104,-.0057,.0111]}],10:{mean:[-.007,-.6338,.7695],identity:[1e-4,-.0296,.0089,-6e-4,-.0073,-.0065,-1e-4,-.0029,-.0031,-2e-4,.0128,.0065,0,-.0116,-.014,-1e-4,-.0037,-.0052,-5e-4,.0028,.003,-4e-4,.0041,.0015,6e-4,.0088,-.0076,-.0011,-.0015,-.0073,7e-4,-.0011,.0019,-.0011,-5e-4,.0031,-1e-4,-.0018,9e-4,.0018,.0038,.0068,-4e-4,-1e-4,.0061,.0024,.0024,-.0066,-6e-4,.0051,.0014,.002,.005,-.0035,1e-4,-.0034,-.004,-7e-4,.001,-8e-4,1e-4,-5e-4,-.0021,2e-4,.0045,-.0043,-.0012,-.0024,-.0014,6e-4,.0034,.0027,-8e-4,-.0053,.0014,1e-4,.0013,-.0018,6e-4,-.0015,.0029,-2e-4,-.0035,1e-4,-.002,.0012,.0048,.0011,1e-4,-2e-4,-3e-4,-.0012,.0033,6e-4,.002,-.0033,4e-4,.0028,2e-4,8e-4,-1e-4,-.0018,8e-4,.0017,1e-4,9e-4,8e-4,3e-4,.0019,-.001,.001,-7e-4,-.0013,0,1e-4,.0032,-1e-4,1e-4,.0011,-4e-4,5e-4,-7e-4,.0018,-3e-4,2e-4,7e-4,8e-4,-.0014,7e-4,.0015,-6e-4,-1e-4,-4e-4,.0019,-9e-4,-6e-4,-6e-4,-.0012,2e-4,-.0012,-8e-4,4e-4,6e-4,-.0011,3e-4,9e-4,-4e-4,6e-4,-7e-4,-4e-4],expression:[-.0603,2.0527,1.9014,.1025,.6143,.3804,.7881,-.1023,-.0764,.0454,-.2487,-.5073,-.6704,-.031,-.0181,.0466,.0651,-.0726,-.0033,-.0022,.2944,.0101,.1669,-.5225,-.4685,.0236,.0079,.011,.2173,.4529,.0121,-.2104,-.0673,.0225,-.4023,.0317,-9e-4,.0076,-.0032,.0333,.0523,.0129,-.001,-.0319,-.0139,.0015,-.0044,.0247,-5e-4,.0161,.0061,.0074,.0776,-.0176,.007,.055,-.017,.0052,-.1819,.0294,-.0161,-.0337,.0226,-.008,-.0297,.1967,-.0095,.0383,.2039,.0434,.0271,-.0064,-.0037,-.0294,-.024,.0024,-.0137,-.0209,-.0031,.0628,.1003,-.0126,-.056,-.0097,-.0012,-.0041,.0162]},11:{mean:[.2505,.3833,.7793],identity:[.0098,.012,.0077,-6e-4,-3e-4,0,1e-4,.0082,-7e-4,.0019,-.0036,-.0012,2e-4,.0119,-.0039,.001,1e-4,.0031,-.0036,-.0059,-7e-4,.0026,.0028,-.0011,9e-4,-.0032,8e-4,.0029,.0043,3e-4,.0025,-9e-4,.0047,.0016,.0022,.0018,-.001,.0025,-.003,-.001,.0033,.0034,4e-4,-.0052,.0024,-2e-4,.001,-.0014,-6e-4,.0038,-.0015,-6e-4,-.001,-.0011,-4e-4,-.001,4e-4,-7e-4,.0036,-8e-4,-2e-4,-.0019,5e-4,3e-4,-6e-4,-.0024,-.0017,-.0014,6e-4,-4e-4,-.0031,-.0013,-6e-4,.0042,2e-4,-2e-4,-.002,-3e-4,8e-4,.0018,-5e-4,-6e-4,-2e-4,-6e-4,.0025,.0019,.001,8e-4,-.0015,-.0012,-1e-4,-6e-4,-4e-4,.0023,-.001,6e-4,-2e-4,-.001,0,-9e-4,-.002,-.0011,1e-4,0,-1e-4,5e-4,6e-4,9e-4,-6e-4,5e-4,8e-4,-1e-4,-2e-4,-.0017,-6e-4,-4e-4,4e-4,-6e-4,.0012,4e-4,3e-4,-7e-4,3e-4,-2e-4,6e-4,1e-4,5e-4,-.0019,-6e-4,4e-4,7e-4,-1e-4,1e-4,5e-4,.001,-6e-4,-.002,-7e-4,-5e-4,5e-4,3e-4,7e-4,.0014,0,5e-4,-5e-4,-2e-4,3e-4,-6e-4,-1e-4],expression:[-9e-4,-3e-4,.0032,-.003,-.0034,-.0031,.0014,0,4e-4,-.0139,-.0764,.0275,-.002,-.0089,.0031,-.0503,-.0771,.038,-.1323,-.3523,.1368,-.0474,-.0564,.0296,-.0045,.007,-.0013,.0153,.1259,-.0464,.0866,.2175,-.0786,-.0413,-.1248,.0448,-.1777,-.4607,.1782,-5e-4,-.005,.0016,.0629,.1506,-.0624,.0545,.2576,-.0864,-.0231,-.0552,.0244,-.0136,-.0359,.0169,-.1158,-.2996,.1214,-.0235,-.0354,.0165,-.0745,-.1079,.0475,-.0116,-.0039,.0012,.0013,-.0108,-8e-4,.0044,-.0027,-1e-4,-.0694,.0363,.0071,.1462,-.136,.0047,.009,-.0177,.0038,-.0271,.0118,.0011,-.0399,-.0111,.0123]},12:{mean:[-.2981,.3828,.7563],identity:[-.0116,.014,.0054,.0018,5e-4,0,-4e-4,.0068,-.0013,-.0019,-.0048,-5e-4,5e-4,.0108,-.0036,-.0029,-.0018,.0029,.0043,-.0077,6e-4,-.0017,.002,-.0011,-.0014,-.0035,.0015,-.0024,.0011,4e-4,-.0048,2e-4,.0029,-1e-4,-1e-4,.003,.0019,.0035,-.0016,-4e-4,.0039,.0019,1e-4,-.0064,.004,3e-4,.002,-.0021,.0017,.0011,-.001,.0026,.0025,-5e-4,2e-4,-3e-4,-5e-4,-7e-4,9e-4,-4e-4,-.001,-.0022,.001,9e-4,-.0014,7e-4,.0011,-.001,-5e-4,-8e-4,-.0017,-.0021,9e-4,.0036,5e-4,4e-4,-.0031,6e-4,-.0015,.0027,2e-4,1e-4,-.0011,2e-4,-.0011,-.0018,4e-4,-.0013,-2e-4,7e-4,9e-4,-3e-4,.001,-.0021,8e-4,6e-4,-9e-4,4e-4,-7e-4,8e-4,-.002,-.0013,0,7e-4,-.0012,-1e-4,.0014,.0014,-1e-4,.0013,6e-4,6e-4,-.0014,-.0015,-9e-4,1e-4,1e-4,9e-4,7e-4,0,1e-4,-.001,-4e-4,0,-5e-4,1e-4,-3e-4,4e-4,-5e-4,-1e-4,-.0011,2e-4,0,1e-4,8e-4,8e-4,0,-7e-4,-8e-4,0,2e-4,-1e-4,.001,3e-4,4e-4,-2e-4,0,5e-4,.0018,-1e-4],expression:[0,-4e-4,.0028,.0036,-8e-4,-.0026,-.0015,-8e-4,3e-4,.0075,-.0608,.025,.0019,-.0076,.0033,.0379,-.0437,.0335,.0964,-.2452,.1233,.0368,-.0251,.0253,.0033,.0097,-.0021,-.0095,.1171,-.0475,-.064,.1548,-.0718,.0228,-.0831,.0343,-.1924,.6206,-.2771,.0021,-.0143,.0056,-.0705,.2522,-.1116,-.0692,.4229,-.1592,-.0093,.05,-.0185,.0948,-.3196,.1437,-.0184,.0194,-.0131,.0205,-.0353,.0201,.0676,-.135,.0672,.0137,-.0311,.0118,3e-4,-.0077,-2e-4,-.0151,4e-4,-.0058,.029,-.0139,.0163,.1324,.1819,-.0039,.0406,.0501,.0017,.0331,.0161,.0062,-.0235,-.0446,.0047]}};let pZ=1,ZM=new Map;function mZ(t){let e=pZ++;return ZM.set(e,new AZ(t)),Go("face_landmark_t initialized"),e}function gZ(t){ZM.delete(t)}function E4(t){return ZM.get(t)}class AZ{constructor(e){this._name=e,this.anchor_pose=ln()}_getVertex(e,n,i){let r=i.mean.slice();for(let s=0;s<50;s++)r[0]+=e[s]*i.identity[s*3+0],r[1]+=e[s]*i.identity[s*3+1],r[2]+=e[s]*i.identity[s*3+2];for(let s=0;s<29;s++)r[0]+=n[s]*i.expression[s*3+0],r[1]+=n[s]*i.expression[s*3+1],r[2]+=n[s]*i.expression[s*3+2];return r}update(e,n,i){let r,s=dZ[this._name.toString()];if(!!s){if(Array.isArray(s)){r=this._getVertex(e,n,s[0]);let o=this._getVertex(e,n,s[1]);r[0]=.5*(r[0]+o[0]),r[1]=.5*(r[1]+o[1]),r[2]=.5*(r[2]+o[2])}else r=this._getVertex(e,n,s);i&&(r[0]*=-1),c_(this.anchor_pose,r)}}}function vZ(){let t=document.createElement("div"),e="a recent web browser";navigator.userAgent.match(/Android/i)?(e="Chrome for Android",window.location.href="googlechrome://navigate?url="+encodeURI(window.location.href),setTimeout(()=>{window.location.href="samsunginternet://open?url="+encodeURI(window.location.href)},2e3)):navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(e="Safari",t.classList.add("zee-launcher-browser-safari")),t.classList.add("zee-launcher-unsupported"),t.innerHTML=`
            <style>.zee-launcher-unsupported {
               display: flex;
               flex-direction: column;
               height: 100%;
               justify-content: center;
               position: absolute;
               width: 100%;
               height: 100%;
               top: 0;
               left: 0;
               align-items: center;
               }
               .zee-launcher-browser-logo {
               background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 210 211' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-82 -146)' fill-rule='nonzero' stroke='%23ffffff' stroke-width='2'%3E%3Cg transform='translate(83 146.5)'%3E%3Cpath d='m55.146 88.785l-32.039-49.472c19.962-24.947 49.904-38.684 80.517-38.81 17.739-0.12642 35.855 4.4246 52.336 13.99 18.2 10.619 32.039 25.874 40.846 43.404l-86.095-4.5511c-24.365-1.4327-47.556 12.347-55.565 35.439zm13.797 16.224c0 19.468 15.684 35.229 35.059 35.229 19.374 0 35.059-15.76 35.059-35.229 0-19.468-15.684-35.229-35.059-35.229-19.374 0-35.059 15.718-35.059 35.229zm132.06-37.588l-58.585 3.034c15.894 18.668 16.145 45.595 2.7678 66.243l-47.01 72.648c19.5 1.0535 39.588-3.2447 57.788-13.864 45.039-26.126 63.282-80.908 45.039-128.06zm-144.93 57.647l-39.126-77.326c-10.694 16.434-16.942 36.156-16.942 57.267 0 52.253 38.078 95.53 87.856 103.2l26.713-52.59c-24.155 4.5511-47.472-8.765-58.501-30.551z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");
               width: 211px;
               height: 211px;
               margin-bottom: 25%;
               margin-top: -60px;
               background-repeat: no-repeat;
               }
               .zee-launcher-browser-safari .zee-launcher-browser-logo {
               background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg version='1.1' viewBox='0 0 211 211' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg transform='translate(-82 -146)' fill-rule='nonzero' stroke='%23ffffff' stroke-width='2'%3E%3Cpath d='m180 251.86c0-4.0385 2.9377-7.855 7.2552-7.855 3.9614 0 7.7448 2.8402 7.7448 7.145 0 4.0385-2.8487 7.855-7.1662 7.855-4.0059 0-7.8338-2.9734-7.8338-7.145zm112-0.35503c0 57.728-46.772 104.5-104.5 104.5s-104.5-46.772-104.5-104.5 46.772-104.5 104.5-104.5 104.5 46.772 104.5 104.5zm-12-1c0-51.649-41.851-93.5-93.5-93.5s-93.5 41.851-93.5 93.5 41.851 93.5 93.5 93.5 93.5-41.851 93.5-93.5zm-30.624 40.983c0 1.5095 5.4495 4.2768 6.8328 5.1154-11.486 17.401-29.26 29.938-49.423 34.928l-1.8444-7.757c-0.12576-1.0482-0.79646-1.174-1.7606-1.174-0.79646 0-1.2576 1.174-1.1737 1.7611l1.8444 7.8828c-5.5753 1.174-11.234 1.7611-16.935 1.7611-15.217 0-30.182-4.2768-43.177-12.202 0.71263-1.174 5.1141-7.5474 5.1141-8.4698 0-0.79666-0.71263-1.5095-1.5091-1.5095-1.6348 0-5.1141 6.9603-6.1621 8.344-17.522-11.615-30.182-29.602-35.044-50.148l8.0066-1.761c0.92222-0.25158 1.1737-0.92246 1.1737-1.7611 0-0.79667-1.1737-1.2579-1.8444-1.174l-7.8389 1.803c-1.048-5.3251-1.6348-10.692-1.6348-16.143 0-15.556 4.4015-30.86 12.66-43.984 1.1737 0.71281 6.749 4.5284 7.6712 4.5284 0.79646 0 1.5091-0.58702 1.5091-1.3837 0-1.6353-6.1621-4.7381-7.5455-5.7024 11.821-17.275 29.805-29.728 50.219-34.34l1.7606 7.757c0.25152 0.92246 0.92222 1.174 1.7606 1.174 0.83838 0 1.2576-1.174 1.1737-1.8449l-1.7606-7.6732c5.1141-0.92246 10.312-1.5095 15.552-1.5095 15.552 0 30.727 4.4026 43.973 12.663-0.79646 1.174-4.5273 6.6249-4.5273 7.5474 0 0.79667 0.58687 1.5095 1.3833 1.5095 1.6348 0 4.7369-6.0379 5.5753-7.4216 17.187 11.615 29.469 29.351 34.248 49.561l-6.4975 1.3837c-1.048 0.25158-1.1737 0.92246-1.1737 1.8449 0 0.79667 1.1737 1.2579 1.7606 1.174l6.6232-1.5095c1.048 5.3251 1.6348 10.776 1.6348 16.227 0 15.221-4.1919 30.189-12.073 43.062-1.1737-0.58702-6.0364-4.0672-6.9586-4.0672-0.8803 0-1.5929 0.71281-1.5929 1.5095zm-14.876-98.483c-5.2178 4.88-53.863 49.48-55.228 51.8l-38.772 64.2c5.0974-4.76 53.863-49.6 55.108-51.72l38.892-64.28z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
               }
               .zee-launcher-unsupported-message {
               text-align: center;
               width: 250px;
               font-family: sans-serif;
               color: #ffffff;
               }
               .zee-launcher-unsupported-message-copy {
               border: 1px solid #ffffff;
               border-radius: 5px;
               margin-top: 10px;
               }
               #zee-launcher-unsupported-message-input {
               border: none;
               padding: 10px;
               border-radius: 0px;
               border-right: 1px solid #344B60;
               height: 40px;
               color: #ffffff;
               background-color: black;
               box-sizing: border-box;
               width: calc(100% - 65px);
               margin-left: 5px;
               }
               #zee-launcher-unsupported-message-button {
               background: none;
               border: none;
               outline: none;
               text-transform: uppercase;
               color: #ffffff;
               height: 40px;
               display: inline-block;
               width: 59px;
               }
               .zee-launcher-unsupported-message-before-copy {
               height: 100px;
               display: flex;
               flex-direction: column;
               justify-content: center;
               margin-top: 20px;
               }
               .zee-launcher-unsupported-message-copied .zee-launcher-unsupported-message-before-copy {
               display: none;
               }
               .zee-launcher-unsupported-message-after-copy {
               display: none;
               }
               .zee-launcher-unsupported-message-copied .zee-launcher-unsupported-message-after-copy {
               height: 100px;
               display: flex;
               flex-direction: column;
               justify-content: center;
               margin-top: 20px;
               }
            </style>
            <div class="zee-launcher-browser-logo"></div>
            <div class="zee-launcher-unsupported-message">Open with ${e} to access this content.</div>
            <div class="zee-launcher-unsupported-message-before-copy">
               <div class="zee-launcher-unsupported-message ">Tap below to copy the address for easy pasting into ${e}.</div>
               <div class="zee-launcher-unsupported-message-copy"><input id="zee-launcher-unsupported-message-input" type="text/"><button id="zee-launcher-unsupported-message-button">Copy</button></div>
            </div>
            <div class="zee-launcher-unsupported-message zee-launcher-unsupported-message-after-copy">COPIED! Now paste into ${e}'s address bar to experience the content.</div>
    `;let n=t.querySelector("#zee-launcher-unsupported-message-input")||document.createElement("input");n.value=window.location.href;let i=t.querySelector("#zee-launcher-unsupported-message-button")||document.createElement("button"),r=()=>{if(navigator.userAgent.match(/iPhone|iPod|iPad/i)){let s=document.createRange();s.selectNodeContents(n);let o=window.getSelection();if(!o)return;o.removeAllRanges(),o.addRange(s),n.setSelectionRange(0,999999999)}else n.select();document.execCommand("copy"),n.blur(),t.classList.toggle("zee-launcher-unsupported-message-copied",!0)};return i.addEventListener("click",r),n.addEventListener("click",r),t}const _Z=()=>{const t=document.createElement("div");t.append(vZ()),Object.assign(t.style,{position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:1001,backgroundColor:"rgba(0, 0, 0, 0.9)",fontFamily:"sans-serif",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),t.classList.add("zee_launcher_compatibility"),document.body.append(t)};function yZ(){return!(typeof Promise!="function"||typeof WebAssembly!="object"||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices||!navigator.mediaDevices.getUserMedia)}const b4={incompatible:()=>!yZ(),incompatible_ui:_Z};let xZ=1,dw=new Map;class Va extends fy{constructor(e,n){super(),this._impl=e,this._pipeline=n,this._packetNumber=0,this._motionUpdatesQueued=0,this._motionUpdatesSent=0,this._minFrameGapMs=0,this._lastUpdateTime=0}static create(e){let n=xZ++;return dw.set(n,new Va(n,e)),Go("sequence_source_source_t initialized"),n}static get(e){return dw.get(e)}loadFromMemory(e){try{this._decoder=new eZ(e),this._packetNumber=0,this._lastUpdateTime=0}catch(n){m_("Unable to decode sequence:",n)}}maxPlaybackFpsSet(e){if(e<=0){this._minFrameGapMs=0;return}this._minFrameGapMs=1e3/e}setTime(e){e<0?delete this._time:this._time=e}getFrame(e){var n;let i=yt.get(this._pipeline);if(!i||!this._decoder||(this._submitMotionUpdates(i),this._motionUpdatesQueued>this._motionUpdatesSent)||e)return;let r=(n=this._time)!==null&&n!==void 0?n:performance.now();if(r<this._lastUpdateTime+this._minFrameGapMs||this._packetNumber>=this._decoder.numberPackets)return;let s=this._decoder.dataByPacket.get(this._packetNumber);if(s.type!=Nn.CAMERA_FRAME)return;this._packetNumber++;let o=i.cameraPixelArrays.pop();for(;o&&o.byteLength!==s.greyscale.byteLength;)o=i.cameraPixelArrays.pop();o||(o=new ArrayBuffer(s.greyscale.byteLength)),new Uint8Array(o).set(s.greyscale),this._lastUpdateTime=r;let a={data:o,cameraSourceData:s.greyscale,cameraModel:s.cameraModel,cameraToDevice:s.cameraToDevice,dataWidth:s.width,dataHeight:s.height,texture:void 0,userFacing:s.userFacing,uvTransform:ln(),cameraSource:this};this._submitMotionUpdates(i);const l=i.registerToken(a);i.sendDataToWorker(a.data||new ArrayBuffer(0),l,a.dataWidth,a.dataHeight,a.userFacing,a.cameraToDevice,a.cameraModel)}destroy(){dw.delete(this._impl),this.pause()}start(){var e;let n=yt.get(this._pipeline);n&&n.currentCameraSource!==this&&((e=n.currentCameraSource)===null||e===void 0||e.pause(),n.currentCameraSource=this)}pause(){let e=yt.get(this._pipeline);e&&e.currentCameraSource===this&&(e.currentCameraSource=void 0)}uploadGL(e){let n=yt.get(this._pipeline);if(!n)return;let i=n==null?void 0:n.glContext;!i||(e.texture||(e.texture=n.getVideoTexture()),e.texture&&(!e.cameraSourceData||(i.bindTexture(i.TEXTURE_2D,e.texture),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,e.dataWidth,e.dataHeight,0,i.LUMINANCE,i.UNSIGNED_BYTE,new Uint8Array(e.cameraSourceData)),i.bindTexture(i.TEXTURE_2D,null))))}_submitMotionUpdates(e){let n=!1;for(;this._packetNumber<this._decoder.numberPackets;){let i=this._decoder.dataByPacket.get(this._packetNumber);if(i.type==Nn.CAMERA_FRAME)break;switch(i.type){case Nn.ACCELEROMETER:e.motionAccelerometerSubmit(i.t,i.x,i.y,i.z),n=!0;break;case Nn.ROTATION_RATE:e.motionRotationRateSubmit(i.t,i.x,i.y,i.z),n=!0;break;case Nn.ATTITUDE:e.motionAttitudeSubmit(i.t,i.x,i.y,i.z),n=!0;break;case Nn.ATTITUDE_MATRIX:e.motionAttitudeMatrix(i.attitude),n=!0;break}this._packetNumber++}n&&(this._motionUpdatesQueued++,setTimeout(()=>{this._motionUpdatesSent++},0))}}const wZ='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="250" height="80.408" viewBox="0 0 250 80.408"><defs><filter id="a" x="0" y="1.182" width="250" height="79.226" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="b"/><feFlood flood-opacity="0.161"/><feComposite operator="in" in2="b"/><feComposite in="SourceGraphic"/></filter><filter id="c" x="6.929" y="0" width="111.975" height="40.988" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha"/><feGaussianBlur stdDeviation="3" result="d"/><feFlood flood-opacity="0.161"/><feComposite operator="in" in2="d"/><feComposite in="SourceGraphic"/></filter></defs><g transform="translate(-26.873 -414.029)"><g transform="translate(44 423.332)"><g transform="translate(0 0.635)" style="isolation:isolate"><g transform="translate(0 0)"><g transform="matrix(1, 0, 0, 1, -17.13, -9.94)" filter="url(#a)"><path d="M55.766,44.97V11.8h8.272v2.6h.089a8.258,8.258,0,0,1,7.046-3.357,11.4,11.4,0,0,1,8.5,3.686,12.667,12.667,0,0,1,3.278,8.622,12.509,12.509,0,0,1-3.25,8.57,11.353,11.353,0,0,1-8.429,3.6,9.533,9.533,0,0,1-7.229-2.95V43.378l-8.269,1.594h0Zm8-21.671a4.958,4.958,0,0,0,5.319,5.15A4.957,4.957,0,0,0,74.4,23.3a5.321,5.321,0,0,0-10.638,0ZM16.105,18.412H2.752V11.038H30.9L14.887,37.16H38.22L0,44.534ZM131.469,38.45a.761.761,0,0,1-.484-.166.582.582,0,0,1-.228-.419l-.553-3.586a12.243,12.243,0,0,1-1.782-.721l-2.789,2.084a.718.718,0,0,1-.5.176.688.688,0,0,1-.495-.214,25.864,25.864,0,0,1-3.264-3.274.754.754,0,0,1,.018-.9c.2-.277.543-.713,1.01-1.3.483-.6.832-1.05,1.068-1.374a9.614,9.614,0,0,1-.811-1.929l-3.62-.527a.631.631,0,0,1-.416-.243.728.728,0,0,1-.159-.458V21.283a.743.743,0,0,1,.159-.448.6.6,0,0,1,.376-.253l3.68-.546a9.511,9.511,0,0,1,.772-1.792c-.523-.733-1.235-1.638-2.117-2.69a.731.731,0,0,1-.2-.467.82.82,0,0,1,.178-.449,19.577,19.577,0,0,1,1.949-2.095c.953-.924,1.582-1.393,1.87-1.393a.861.861,0,0,1,.515.195l2.729,2.084a11.551,11.551,0,0,1,1.8-.741,31.446,31.446,0,0,1,.573-3.623.666.666,0,0,1,.712-.546h4.392a.757.757,0,0,1,.485.166.58.58,0,0,1,.228.419l.553,3.584a12.576,12.576,0,0,1,1.782.722l2.809-2.085a.641.641,0,0,1,.475-.176.776.776,0,0,1,.5.195,27.035,27.035,0,0,1,3.264,3.313.625.625,0,0,1,.139.429.742.742,0,0,1-.159.447c-.2.271-.525.7-1.008,1.3-.467.581-.827,1.043-1.069,1.373a11.8,11.8,0,0,1,.812,1.91l3.62.545a.626.626,0,0,1,.416.244.736.736,0,0,1,.158.457v4.325a.755.755,0,0,1-.158.449.6.6,0,0,1-.4.253l-3.66.545a12.692,12.692,0,0,1-.772,1.774c.465.653,1.177,1.559,2.117,2.688a.751.751,0,0,1,.2.488.648.648,0,0,1-.178.448,19.638,19.638,0,0,1-1.958,2.1c-.947.918-1.573,1.384-1.861,1.384a.976.976,0,0,1-.515-.176l-2.731-2.1a11.361,11.361,0,0,1-1.8.741,31.849,31.849,0,0,1-.573,3.625.668.668,0,0,1-.713.546Zm-1.385-18.491a4.935,4.935,0,0,0,0,7.053,5.12,5.12,0,0,0,7.163,0,4.931,4.931,0,0,0,0-7.053,5.117,5.117,0,0,0-7.163,0Zm69.969,14.868a18.523,18.523,0,0,1-4.932-2.073l1.705-6.1A13.441,13.441,0,0,0,200.779,29a12.14,12.14,0,0,0,4.344.818,4.644,4.644,0,0,0,2.351-.482,1.538,1.538,0,0,0,.806-1.4q0-1.5-3.25-2.242-1.061-.246-1.705-.425a12.335,12.335,0,0,1-5.358-2.589,5.5,5.5,0,0,1-1.671-4.157,6.323,6.323,0,0,1,2.547-5.267,10.993,10.993,0,0,1,6.9-1.972,21.351,21.351,0,0,1,4.552.5,25.439,25.439,0,0,1,4.736,1.557l-1.705,5.491a14.244,14.244,0,0,0-3.319-1.636,10.6,10.6,0,0,0-3.364-.561,4.227,4.227,0,0,0-2.121.426,1.357,1.357,0,0,0-.714,1.232q0,1.211,3.227,2.04.737.2,1.106.291,4.264,1.187,5.935,2.79a5.728,5.728,0,0,1,1.67,4.337A6.781,6.781,0,0,1,213,33.37a11.48,11.48,0,0,1-7.259,2.14A22.577,22.577,0,0,1,200.053,34.827ZM30.568,31.834a12.566,12.566,0,0,1-3.292-8.59,12.567,12.567,0,0,1,3.247-8.568,11.3,11.3,0,0,1,8.423-3.638,9.519,9.519,0,0,1,7.217,3V11.8h8.264V34.735H46.163V32.186h-.09c-1.32,2.071-3.951,3.308-7.038,3.308A11.412,11.412,0,0,1,30.568,31.834Zm5.245-8.545a4.95,4.95,0,0,0,5.312,5.141,4.95,4.95,0,0,0,5.312-5.141A5.023,5.023,0,0,0,41.125,18.1,5.023,5.023,0,0,0,35.813,23.289Zm69.2,11.554-3.527-10.452q-.282-.892-.505-1.8t-.412-1.8a30.821,30.821,0,0,1-.917,3.454l-.047.16L96.1,34.842H90.176l-9.925-23.1h8.632l3.552,10.223q.4,1.12.634,1.955t.377,1.635a23.558,23.558,0,0,1,.917-3.179q.093-.274.141-.411l3.528-10.223h5.056l3.5,10.2.07.183a20.724,20.724,0,0,1,.988,3.43q.141-.732.364-1.532t.647-2.058l3.574-10.223h8.678l-9.971,23.1Zm80.154-.092-8.587-9.841v9.841h-7.888V1.5L176.583,0V22.28l8.272-9.665h9.96L184.584,23.266l11.156,11.485Zm-35.09,0V11.782h8.272v3.761h.091a8.131,8.131,0,0,1,7.546-4.074h1.593V19.3a6.8,6.8,0,0,0-3.5-.761c-4.593,0-5.728,3-5.728,6.941v9.268Z" transform="translate(17.13 15.31)"/></g><g transform="matrix(1, 0, 0, 1, -17.13, -9.94)" filter="url(#c)"><path d="M3.576-12.852v-4.3H6.628a2.867,2.867,0,0,1,1.945.55A2.034,2.034,0,0,1,9.188-15a2.06,2.06,0,0,1-.615,1.608,2.784,2.784,0,0,1-1.945.542ZM2.017-18.464V-6.748H3.576v-4.792H7.153a3.569,3.569,0,0,0,2.683-.9A3.478,3.478,0,0,0,10.747-15a3.45,3.45,0,0,0-.911-2.552,3.638,3.638,0,0,0-2.683-.911Zm11.421,7.483a4.221,4.221,0,0,1,.205-1.37,2.957,2.957,0,0,1,.566-1.009,2.411,2.411,0,0,1,.845-.624A2.515,2.515,0,0,1,16.08-14.2a2.515,2.515,0,0,1,1.026.213,2.411,2.411,0,0,1,.845.624,2.957,2.957,0,0,1,.566,1.009,4.221,4.221,0,0,1,.205,1.37,4.221,4.221,0,0,1-.205,1.37,2.867,2.867,0,0,1-.566,1,2.457,2.457,0,0,1-.845.615,2.515,2.515,0,0,1-1.026.213,2.515,2.515,0,0,1-1.026-.213,2.457,2.457,0,0,1-.845-.615,2.867,2.867,0,0,1-.566-1A4.221,4.221,0,0,1,13.438-10.981Zm-1.477,0a5.573,5.573,0,0,0,.263,1.739,3.97,3.97,0,0,0,.788,1.4,3.623,3.623,0,0,0,1.3.935,4.4,4.4,0,0,0,1.772.336A4.381,4.381,0,0,0,17.86-6.9a3.641,3.641,0,0,0,1.288-.935,3.97,3.97,0,0,0,.788-1.4,5.573,5.573,0,0,0,.263-1.739,5.65,5.65,0,0,0-.263-1.748,3.96,3.96,0,0,0-.788-1.411,3.729,3.729,0,0,0-1.288-.944,4.29,4.29,0,0,0-1.78-.345,4.3,4.3,0,0,0-1.772.345,3.71,3.71,0,0,0-1.3.944,3.96,3.96,0,0,0-.788,1.411A5.65,5.65,0,0,0,11.961-10.981Zm18.28,4.234,2.708-8.484H31.5L29.6-8.29h-.033L27.8-15.231H26.27L24.564-8.29h-.033l-1.92-6.941H21.068l2.724,8.484H25.3l1.707-6.744h.033l1.723,6.744ZM40.169-11.8H35.3a2.905,2.905,0,0,1,.213-.927A2.473,2.473,0,0,1,36-13.492a2.255,2.255,0,0,1,.747-.517,2.429,2.429,0,0,1,.976-.189,2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,40.169-11.8Zm1.346,2.363H40.136a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.105,5.105,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,41.515-9.439Zm1.526-5.793v8.484h1.395v-3.774a5.8,5.8,0,0,1,.164-1.452,2.784,2.784,0,0,1,.525-1.075,2.251,2.251,0,0,1,.952-.673,3.945,3.945,0,0,1,1.428-.23v-1.477a3.135,3.135,0,0,0-1.871.459,3.779,3.779,0,0,0-1.247,1.526h-.033v-1.789ZM54.15-11.8H49.276a2.905,2.905,0,0,1,.213-.927,2.473,2.473,0,0,1,.492-.763,2.255,2.255,0,0,1,.747-.517A2.429,2.429,0,0,1,51.7-14.2a2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,54.15-11.8ZM55.5-9.439H54.117a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.1,5.1,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,55.5-9.439Zm2.593-1.477a5.581,5.581,0,0,1,.131-1.214,3.212,3.212,0,0,1,.427-1.05,2.221,2.221,0,0,1,.788-.738,2.4,2.4,0,0,1,1.2-.279,2.589,2.589,0,0,1,1.231.271,2.389,2.389,0,0,1,.829.714,2.985,2.985,0,0,1,.468,1.026,4.889,4.889,0,0,1,.148,1.206,4.919,4.919,0,0,1-.139,1.165,3.053,3.053,0,0,1-.451,1.026,2.4,2.4,0,0,1-.8.73,2.4,2.4,0,0,1-1.2.279,2.491,2.491,0,0,1-1.173-.263,2.332,2.332,0,0,1-.82-.706,3.122,3.122,0,0,1-.476-1.009A4.338,4.338,0,0,1,58.088-10.916Zm6.564,4.168V-18.464H63.257V-14.1h-.033a2.247,2.247,0,0,0-.566-.632,3.216,3.216,0,0,0-.714-.41,3.583,3.583,0,0,0-.755-.222,4.132,4.132,0,0,0-.706-.066,3.861,3.861,0,0,0-1.7.353,3.487,3.487,0,0,0-1.214.952,4.018,4.018,0,0,0-.722,1.4,5.985,5.985,0,0,0-.238,1.707,5.8,5.8,0,0,0,.246,1.707,4.218,4.218,0,0,0,.73,1.411,3.529,3.529,0,0,0,1.214.968,3.827,3.827,0,0,0,1.715.361,4.135,4.135,0,0,0,1.625-.312A2.053,2.053,0,0,0,63.224-7.9h.033v1.149Zm6.761-11.716V-6.748h1.395V-7.88h.033a2.247,2.247,0,0,0,.566.632,2.982,2.982,0,0,0,.714.4,3.874,3.874,0,0,0,.763.213,4.193,4.193,0,0,0,.7.066,3.94,3.94,0,0,0,1.7-.345,3.4,3.4,0,0,0,1.214-.944,4.018,4.018,0,0,0,.722-1.4,5.985,5.985,0,0,0,.238-1.707,5.8,5.8,0,0,0-.246-1.707,4.312,4.312,0,0,0-.73-1.419,3.488,3.488,0,0,0-1.214-.976,3.827,3.827,0,0,0-1.715-.361,4.043,4.043,0,0,0-1.625.32,2.088,2.088,0,0,0-1.083,1.026h-.033v-4.381Zm6.564,7.4a5.581,5.581,0,0,1-.131,1.214,3.212,3.212,0,0,1-.427,1.05,2.243,2.243,0,0,1-.779.738,2.385,2.385,0,0,1-1.206.279A2.589,2.589,0,0,1,74.2-8.052a2.389,2.389,0,0,1-.829-.714,2.985,2.985,0,0,1-.468-1.026A4.889,4.889,0,0,1,72.758-11a4.919,4.919,0,0,1,.139-1.165,3.053,3.053,0,0,1,.451-1.026,2.4,2.4,0,0,1,.8-.73,2.4,2.4,0,0,1,1.2-.279,2.491,2.491,0,0,1,1.173.263,2.332,2.332,0,0,1,.82.706,3.122,3.122,0,0,1,.476,1.009A4.338,4.338,0,0,1,77.976-11.063Zm6.449,5.448a8.871,8.871,0,0,1-.484,1.05,2.871,2.871,0,0,1-.525.7,1.782,1.782,0,0,1-.64.394,2.462,2.462,0,0,1-.812.123,3.721,3.721,0,0,1-.492-.033A2.324,2.324,0,0,1,81-3.5v-1.28a2.342,2.342,0,0,0,.418.139,1.765,1.765,0,0,0,.4.057,1.2,1.2,0,0,0,.714-.205,1.255,1.255,0,0,0,.435-.583L83.539-6.8l-3.364-8.434h1.575L84.228-8.29h.033l2.379-6.941h1.477Z" transform="translate(17.85 28.4)"/></g></g></g><g transform="translate(0 0)"><g transform="translate(0 5.371)"><path d="M11.76,24.456A11.41,11.41,0,0,1,3.292,20.8,12.564,12.564,0,0,1,0,12.206,12.569,12.569,0,0,1,3.246,3.638,11.307,11.307,0,0,1,11.67,0a9.519,9.519,0,0,1,7.217,3V.759h8.264V23.7H18.887V21.148H18.8C17.478,23.219,14.846,24.456,11.76,24.456ZM13.849,7.064A5.023,5.023,0,0,0,8.537,12.25a4.95,4.95,0,0,0,5.312,5.141A4.95,4.95,0,0,0,19.16,12.25,5.023,5.023,0,0,0,13.849,7.064Z" transform="translate(27.277 11.038)" fill="#fff"/><path d="M0,33.931V.758H8.271v2.6H8.36A8.258,8.258,0,0,1,15.406,0,11.4,11.4,0,0,1,23.9,3.686a12.665,12.665,0,0,1,3.278,8.622,12.508,12.508,0,0,1-3.25,8.57,11.351,11.351,0,0,1-8.429,3.6,9.535,9.535,0,0,1-7.229-2.95V32.337L0,33.931ZM13.317,7.07A5.028,5.028,0,0,0,8,12.259a4.957,4.957,0,0,0,5.319,5.15,4.957,4.957,0,0,0,5.319-5.15A5.028,5.028,0,0,0,13.317,7.07Z" transform="translate(55.766 11.041)" fill="#fff"/><path d="M22.836,0l3.5,10.2.07.183a20.748,20.748,0,0,1,.988,3.43q.141-.731.364-1.532t.647-2.058L31.985,0h8.678L30.691,23.1H24.764L21.237,12.647q-.282-.891-.505-1.8t-.412-1.8A30.927,30.927,0,0,1,19.4,12.51l-.047.16L15.851,23.1H9.925L0,0H8.631l3.552,10.223q.4,1.121.635,1.955t.377,1.635a23.522,23.522,0,0,1,.917-3.179q.093-.274.141-.411L17.78,0h5.056" transform="translate(80.251 11.743)" fill="#fff"/><path d="M0,34.75V1.5L7.888,0V22.28l8.272-9.665H26.12L15.889,23.266,27.045,34.75H16.475L7.888,24.91v9.84H0" transform="translate(168.695 0)" fill="#fff"/><path d="M0,21.47l1.705-6.1a13.453,13.453,0,0,0,3.952,2.342A12.145,12.145,0,0,0,10,18.534a4.643,4.643,0,0,0,2.351-.482,1.539,1.539,0,0,0,.807-1.4q0-1.5-3.25-2.241-1.06-.246-1.705-.426A12.325,12.325,0,0,1,2.846,11.4,5.5,5.5,0,0,1,1.176,7.239,6.324,6.324,0,0,1,3.722,1.972,11,11,0,0,1,10.624,0a21.365,21.365,0,0,1,4.551.5,25.45,25.45,0,0,1,4.736,1.558l-1.706,5.49a14.24,14.24,0,0,0-3.319-1.636,10.6,10.6,0,0,0-3.364-.56A4.22,4.22,0,0,0,9.4,5.782a1.356,1.356,0,0,0-.714,1.233q0,1.211,3.227,2.04.737.2,1.106.291,4.264,1.188,5.935,2.79a5.728,5.728,0,0,1,1.671,4.337,6.782,6.782,0,0,1-2.743,5.614,11.478,11.478,0,0,1-7.259,2.14,22.565,22.565,0,0,1-5.693-.683A18.517,18.517,0,0,1,0,21.47" transform="translate(195.121 11.284)" fill="#fff"/><path d="M8.273,4.075h.091A8.13,8.13,0,0,1,15.909,0H17.5V7.834A6.8,6.8,0,0,0,14,7.074c-4.593,0-5.728,3-5.728,6.941v9.268H0V.313H8.273V4.075" transform="translate(150.08 11.469)" fill="#fff"/><path d="M17.392,29.929H13a.76.76,0,0,1-.485-.166.579.579,0,0,1-.227-.419l-.553-3.586a12.3,12.3,0,0,1-1.781-.721L7.163,27.123a.719.719,0,0,1-.495.176.687.687,0,0,1-.495-.214A25.873,25.873,0,0,1,2.91,23.81a.753.753,0,0,1,.019-.9c.2-.277.542-.713,1.009-1.3.483-.6.832-1.05,1.068-1.374a9.591,9.591,0,0,1-.811-1.929l-3.62-.526a.63.63,0,0,1-.416-.243A.729.729,0,0,1,0,17.089V12.762a.746.746,0,0,1,.159-.448.6.6,0,0,1,.376-.253l3.68-.546a9.5,9.5,0,0,1,.772-1.792C4.464,8.991,3.752,8.085,2.87,7.034a.732.732,0,0,1-.2-.468.82.82,0,0,1,.179-.449A19.622,19.622,0,0,1,4.8,4.023C5.751,3.1,6.38,2.631,6.668,2.631a.859.859,0,0,1,.515.194L9.913,4.91a11.536,11.536,0,0,1,1.8-.741A31.372,31.372,0,0,1,12.287.546.665.665,0,0,1,13,0h4.392a.755.755,0,0,1,.485.166.581.581,0,0,1,.229.419l.553,3.584a12.543,12.543,0,0,1,1.781.722L23.25,2.807a.641.641,0,0,1,.475-.176.775.775,0,0,1,.495.194,27.092,27.092,0,0,1,3.264,3.313.625.625,0,0,1,.139.429.745.745,0,0,1-.159.448c-.2.271-.525.695-1.008,1.3-.467.581-.827,1.043-1.069,1.373a11.784,11.784,0,0,1,.812,1.91l3.62.545a.625.625,0,0,1,.416.244.736.736,0,0,1,.157.458v4.325a.754.754,0,0,1-.157.449.606.606,0,0,1-.4.253l-3.66.545a12.628,12.628,0,0,1-.772,1.774c.465.654,1.177,1.559,2.117,2.688a.752.752,0,0,1,.2.488.648.648,0,0,1-.177.448,19.641,19.641,0,0,1-1.959,2.1c-.947.918-1.573,1.384-1.86,1.384a.978.978,0,0,1-.515-.176l-2.731-2.1a11.429,11.429,0,0,1-1.8.741,32.016,32.016,0,0,1-.573,3.624A.668.668,0,0,1,17.392,29.929ZM15.2,9.976a4.938,4.938,0,0,0-3.582,1.463,4.935,4.935,0,0,0,0,7.053,5.12,5.12,0,0,0,7.163,0,4.932,4.932,0,0,0,0-7.053A4.938,4.938,0,0,0,15.2,9.976Z" transform="translate(118.47 8.521)" fill="#fff"/><path d="M0,33.5,16.106,7.374H2.752V0H30.9L14.887,26.122H38.22L0,33.5" transform="translate(0 11.038)" fill="#fff"/></g><path d="M3.576-12.852v-4.3H6.628a2.867,2.867,0,0,1,1.945.55A2.034,2.034,0,0,1,9.188-15a2.06,2.06,0,0,1-.615,1.608,2.784,2.784,0,0,1-1.945.542ZM2.017-18.464V-6.748H3.576v-4.792H7.153a3.569,3.569,0,0,0,2.683-.9A3.478,3.478,0,0,0,10.747-15a3.45,3.45,0,0,0-.911-2.552,3.638,3.638,0,0,0-2.683-.911Zm11.421,7.483a4.221,4.221,0,0,1,.205-1.37,2.957,2.957,0,0,1,.566-1.009,2.411,2.411,0,0,1,.845-.624A2.515,2.515,0,0,1,16.08-14.2a2.515,2.515,0,0,1,1.026.213,2.411,2.411,0,0,1,.845.624,2.957,2.957,0,0,1,.566,1.009,4.221,4.221,0,0,1,.205,1.37,4.221,4.221,0,0,1-.205,1.37,2.867,2.867,0,0,1-.566,1,2.457,2.457,0,0,1-.845.615,2.515,2.515,0,0,1-1.026.213,2.515,2.515,0,0,1-1.026-.213,2.457,2.457,0,0,1-.845-.615,2.867,2.867,0,0,1-.566-1A4.221,4.221,0,0,1,13.438-10.981Zm-1.477,0a5.573,5.573,0,0,0,.263,1.739,3.97,3.97,0,0,0,.788,1.4,3.623,3.623,0,0,0,1.3.935,4.4,4.4,0,0,0,1.772.336A4.381,4.381,0,0,0,17.86-6.9a3.641,3.641,0,0,0,1.288-.935,3.97,3.97,0,0,0,.788-1.4,5.573,5.573,0,0,0,.263-1.739,5.65,5.65,0,0,0-.263-1.748,3.96,3.96,0,0,0-.788-1.411,3.729,3.729,0,0,0-1.288-.944,4.29,4.29,0,0,0-1.78-.345,4.3,4.3,0,0,0-1.772.345,3.71,3.71,0,0,0-1.3.944,3.96,3.96,0,0,0-.788,1.411A5.65,5.65,0,0,0,11.961-10.981Zm18.28,4.234,2.708-8.484H31.5L29.6-8.29h-.033L27.8-15.231H26.27L24.564-8.29h-.033l-1.92-6.941H21.068l2.724,8.484H25.3l1.707-6.744h.033l1.723,6.744ZM40.169-11.8H35.3a2.905,2.905,0,0,1,.213-.927A2.473,2.473,0,0,1,36-13.492a2.255,2.255,0,0,1,.747-.517,2.429,2.429,0,0,1,.976-.189,2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,40.169-11.8Zm1.346,2.363H40.136a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.105,5.105,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,41.515-9.439Zm1.526-5.793v8.484h1.395v-3.774a5.8,5.8,0,0,1,.164-1.452,2.784,2.784,0,0,1,.525-1.075,2.251,2.251,0,0,1,.952-.673,3.945,3.945,0,0,1,1.428-.23v-1.477a3.135,3.135,0,0,0-1.871.459,3.779,3.779,0,0,0-1.247,1.526h-.033v-1.789ZM54.15-11.8H49.276a2.905,2.905,0,0,1,.213-.927,2.473,2.473,0,0,1,.492-.763,2.255,2.255,0,0,1,.747-.517A2.429,2.429,0,0,1,51.7-14.2a2.386,2.386,0,0,1,.96.189,2.415,2.415,0,0,1,.755.509,2.391,2.391,0,0,1,.509.763A2.854,2.854,0,0,1,54.15-11.8ZM55.5-9.439H54.117a1.983,1.983,0,0,1-.747,1.247,2.414,2.414,0,0,1-1.452.41,2.889,2.889,0,0,1-1.2-.23,2.348,2.348,0,0,1-.837-.615,2.4,2.4,0,0,1-.476-.886,3.367,3.367,0,0,1-.131-1.058h6.35a6.754,6.754,0,0,0-.139-1.625,4.7,4.7,0,0,0-.624-1.575,3.716,3.716,0,0,0-1.2-1.19,3.48,3.48,0,0,0-1.879-.468,3.858,3.858,0,0,0-1.6.328,3.76,3.76,0,0,0-1.264.919,4.236,4.236,0,0,0-.829,1.395,5.1,5.1,0,0,0-.3,1.772,6.8,6.8,0,0,0,.287,1.789,3.9,3.9,0,0,0,.763,1.411,3.478,3.478,0,0,0,1.255.919,4.358,4.358,0,0,0,1.764.328,3.851,3.851,0,0,0,2.4-.722A3.39,3.39,0,0,0,55.5-9.439Zm2.593-1.477a5.581,5.581,0,0,1,.131-1.214,3.212,3.212,0,0,1,.427-1.05,2.221,2.221,0,0,1,.788-.738,2.4,2.4,0,0,1,1.2-.279,2.589,2.589,0,0,1,1.231.271,2.389,2.389,0,0,1,.829.714,2.985,2.985,0,0,1,.468,1.026,4.889,4.889,0,0,1,.148,1.206,4.919,4.919,0,0,1-.139,1.165,3.053,3.053,0,0,1-.451,1.026,2.4,2.4,0,0,1-.8.73,2.4,2.4,0,0,1-1.2.279,2.491,2.491,0,0,1-1.173-.263,2.332,2.332,0,0,1-.82-.706,3.122,3.122,0,0,1-.476-1.009A4.338,4.338,0,0,1,58.088-10.916Zm6.564,4.168V-18.464H63.257V-14.1h-.033a2.247,2.247,0,0,0-.566-.632,3.216,3.216,0,0,0-.714-.41,3.583,3.583,0,0,0-.755-.222,4.132,4.132,0,0,0-.706-.066,3.861,3.861,0,0,0-1.7.353,3.487,3.487,0,0,0-1.214.952,4.018,4.018,0,0,0-.722,1.4,5.985,5.985,0,0,0-.238,1.707,5.8,5.8,0,0,0,.246,1.707,4.218,4.218,0,0,0,.73,1.411,3.529,3.529,0,0,0,1.214.968,3.827,3.827,0,0,0,1.715.361,4.135,4.135,0,0,0,1.625-.312A2.053,2.053,0,0,0,63.224-7.9h.033v1.149Zm6.761-11.716V-6.748h1.395V-7.88h.033a2.247,2.247,0,0,0,.566.632,2.982,2.982,0,0,0,.714.4,3.874,3.874,0,0,0,.763.213,4.193,4.193,0,0,0,.7.066,3.94,3.94,0,0,0,1.7-.345,3.4,3.4,0,0,0,1.214-.944,4.018,4.018,0,0,0,.722-1.4,5.985,5.985,0,0,0,.238-1.707,5.8,5.8,0,0,0-.246-1.707,4.312,4.312,0,0,0-.73-1.419,3.488,3.488,0,0,0-1.214-.976,3.827,3.827,0,0,0-1.715-.361,4.043,4.043,0,0,0-1.625.32,2.088,2.088,0,0,0-1.083,1.026h-.033v-4.381Zm6.564,7.4a5.581,5.581,0,0,1-.131,1.214,3.212,3.212,0,0,1-.427,1.05,2.243,2.243,0,0,1-.779.738,2.385,2.385,0,0,1-1.206.279A2.589,2.589,0,0,1,74.2-8.052a2.389,2.389,0,0,1-.829-.714,2.985,2.985,0,0,1-.468-1.026A4.889,4.889,0,0,1,72.758-11a4.919,4.919,0,0,1,.139-1.165,3.053,3.053,0,0,1,.451-1.026,2.4,2.4,0,0,1,.8-.73,2.4,2.4,0,0,1,1.2-.279,2.491,2.491,0,0,1,1.173.263,2.332,2.332,0,0,1,.82.706,3.122,3.122,0,0,1,.476,1.009A4.338,4.338,0,0,1,77.976-11.063Zm6.449,5.448a8.871,8.871,0,0,1-.484,1.05,2.871,2.871,0,0,1-.525.7,1.782,1.782,0,0,1-.64.394,2.462,2.462,0,0,1-.812.123,3.721,3.721,0,0,1-.492-.033A2.324,2.324,0,0,1,81-3.5v-1.28a2.342,2.342,0,0,0,.418.139,1.765,1.765,0,0,0,.4.057,1.2,1.2,0,0,0,.714-.205,1.255,1.255,0,0,0,.435-.583L83.539-6.8l-3.364-8.434h1.575L84.228-8.29h.033l2.379-6.941h1.477Z" transform="translate(0.722 18.464)" fill="#fff"/></g></g></g></svg>';function EZ(t){switch(t.type){case il.IMAGE_TRACKER_TYPE_PLANAR:return bZ(t);case il.IMAGE_TRACKER_TYPE_CYLINDRICAL:return SZ(t);case il.IMAGE_TRACKER_TYPE_CONICAL:return CZ(t)}return a8()}function bZ(t){const e=t.trainedWidth/t.trainedHeight;if(isNaN(e))return a8();const n=t.physicalScaleFactor>0?t.physicalScaleFactor:1,i=new Float32Array([-1*e*n,-1*n,0,-1*e*n,n,0,e*n,n,0,e*n,-1*n,0]),r=new Uint16Array([0,2,1,0,3,2]),s=new Float32Array([0,0,0,1,1,1,1,0]),o=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]);return{vertices:i,indices:r,uvs:s,normals:o}}function a8(){return{indices:new Uint16Array(0),vertices:new Float32Array(0),normals:new Float32Array(0),uvs:new Float32Array(0)}}function SZ(t){const e=2*t.trainedWidth/(t.trainedHeight*t.topRadius);return l8(t,2,!1,0,0,0,To(),t.trainedWidth/t.trainedHeight,e,t.physicalScaleFactor)}function CZ(t){const e=t.topRadius-t.bottomRadius,n=Math.sqrt(t.sideLength*t.sideLength-e*e),i=t.bottomRadius>t.topRadius;let r=t.trainedWidth/t.trainedHeight;isNaN(r)&&(r=1);const s=!(t.bottomRadius>0)||!(t.topRadius>0),o=t.sideLength<2*Math.abs(t.topRadius-t.bottomRadius),a=To(),l=To(),c=To();if(s)if(o)if(i){c[1]=r-1;const v=Math.acos((2-r)/r);a[0]=r*Math.sin(v),a[1]=r-1+r*Math.cos(v),_u(l,c)}else{c[1]=1-r;const v=Math.PI+Math.acos((2-r)/r);a[0]=r*Math.sin(v),a[1]=1-r+r*Math.cos(v),_u(l,c)}else i?(c[1]=1,_u(l,c),a[0]=r,a[1]=1-Math.sqrt(4-Math.pow(r,2))):(c[1]=-1,_u(l,c),a[0]=-r,a[1]=Math.sqrt(4-Math.pow(r,2))-1);else if(o)if(i){c[1]=r-1;const v=Math.acos((2-r)/r);a[0]=r*Math.sin(v),a[1]=r-1+r*Math.cos(v),l[0]=(r-t.sideLength)*Math.sin(v),l[1]=r-1+(r-t.sideLength)*Math.cos(v)}else{c[1]=1-r;const v=Math.PI+Math.acos((2-r)/r);a[0]=r*Math.sin(v),a[1]=1-r+r*Math.cos(v),l[0]=(r-t.sideLength)*Math.sin(v),l[1]=1-r+(r-t.sideLength)*Math.cos(v)}else{const v=i?t.topRadius/t.bottomRadius:t.bottomRadius/t.topRadius;i?(l[0]=v*r,l[1]=1,a[0]=r,a[1]=1-Math.sqrt(t.sideLength*t.sideLength-(l[0]-a[0])*(l[0]-a[0])),c[1]=a[1]+a[0]/(a[0]-l[0])*(l[1]-a[1])):(l[0]=-v*r,l[1]=-1,a[0]=-r,a[1]=Math.sqrt(t.sideLength*t.sideLength-(l[0]-a[0])*(l[0]-a[0]))-1,c[1]=a[1]- -a[0]/(l[0]-a[0])*(a[1]-l[1]))}const u=To();f_(u,a,c);const f=To();f_(f,l,c);const h=h_(u),d=h_(f);let p=2*Math.abs(Math.atan(u[0]/u[1]));o&&(p=2*Math.PI-p);let m=h*p/t.topRadius,A=Math.abs(Math.atan(u[0]/u[1]));return o&&(A=Math.PI-A),l8(t,n,i,A,d,h,c,r,m,t.physicalScaleFactor)}function l8(t,e,n,i,r,s,o,a,l,c){isNaN(a)&&(a=1);const u=[],f=[],h=c>0?c:1,d=h*2/e,p=64;for(let A=0;A<=p;++A){const v=A*l/p+(2*Math.PI-l)/2,y=t.bottomRadius*Math.sin(v)*d,x=t.bottomRadius*Math.cos(v)*d,w=t.topRadius*Math.sin(v)*d,E=t.topRadius*Math.cos(v)*d,S=-1*h,M=h;n?(u.push(y,S,x),u.push(w,M,E)):(u.push(w,M,-E),u.push(y,S,-x))}for(let A=0;A<=p;++A)if(t.type==il.IMAGE_TRACKER_TYPE_CYLINDRICAL){const v=1-A/p;f.push(v,1),f.push(v,0)}else{let v=-(A/p-.5)*2*i;n&&(v=-v+i,v>i&&(v=-i+(v-i)));const y=To();y[0]=Math.sin(v),y[1]=Math.cos(v),n&&(y[1]*=-1);const x=To();_u(x,y),fS(x,x,r),uS(x,o,x);const w=To();_u(w,y),fS(w,w,s),uS(w,o,w),f.push((w[0]+a)/(2*a),1-(-w[1]+1)/2),f.push((x[0]+a)/(2*a),1-(-x[1]+1)/2)}const m=[];for(let A=0;A<p;++A){const v=A*2;m.push(v+1,v+2,v+3),m.push(v+0,v+2,v+1)}return{vertices:new Float32Array(u),indices:new Uint16Array(m),normals:new Float32Array(0),uvs:new Float32Array(f)}}const pw=new TextDecoder;class MZ{constructor(e,n=!1){this._data=e,this._paddingBytes=n,this.truncatedChunks=!1,this._view=new DataView(this._data),this.root=this._parse()}_parse(){if(pw.decode(this._data.slice(0,4))!=="RIFF")throw new Error("Not a valid ZPT file");return this._parseChunk(0)}_parseChunk(e){const n=pw.decode(this._data.slice(e,e+4)),i=this._view.getUint32(e+4,!0),r=new Uint8Array(this._data,e+8,i);r.byteLength!==i&&(this.truncatedChunks=!0);let s,o;if(n==="RIFF"||n==="LIST"){o=pw.decode(this._data.slice(e+8,e+12)),s=[];let a=4;for(;a<r.byteLength-1;){const l=this._parseChunk(e+8+a);s.push(l),a+=l.data.byteLength+8,this._paddingBytes&&l.data.byteLength&1&&a++}}return{ident:n,data:r,subident:o,subchunks:s}}find(e,n=this.root){if(n.ident===e)return n;if(!!n.subchunks)for(let i of n.subchunks){const r=this.find(e,i);if(r)return r}}has(e){return this.find(e)!==void 0}}let mw=new Map;const S4=new TextDecoder;class Dn{constructor(e,n){this._client=e,this._impl=n,this._targets=[]}static create(e,n){let i=n.image_tracker_create(e);return mw.set(i,new Dn(n,i)),i}static get(e){return mw.get(e)}destroy(){this._client.image_tracker_destroy(this._impl),mw.delete(this._impl)}loadFromMemory(e){this._targets.push({data:e}),this._client.image_tracker_target_load_from_memory(this._impl,e)}targetCount(){return this._targets.length}getTargetInfo(e){let n=this._targets[e];if(n&&n.info)return n.info;n.info={topRadius:-1,bottomRadius:-1,sideLength:-1,physicalScaleFactor:-1,trainedWidth:0,trainedHeight:0,type:il.IMAGE_TRACKER_TYPE_PLANAR};try{const i=new MZ(n.data,!1),r=i.find("IMG ");if(r){let o="image/png";const a=i.find("IMGM");a&&(o=S4.decode(a.data)),n.info.preview={mimeType:o,compressed:r.data}}const s=i.find("ODLE");if(s){const o=S4.decode(s.data);this._parseOdle(o,n.info)}}catch{}return n.info}_parseOdle(e,n){let i=0,r="0";if([r,i]=Bl(i,e),r==="1")return this._parseOdleV1(e,i,n);if(r==="3")return this._parseOdleV3(e,i,n)}_parseOdleV1(e,n,i){let r="0";if([r,n]=Bl(n,e),r!=="0"&&r!=="1")return;let s="";if([s,n]=Bl(n,e),s.length!==0)return;let o="";[o,n]=Bl(n,e);const a=o.split(" ");a.length<5||(i.trainedWidth=parseInt(a[3].replace("[","")),i.trainedHeight=parseInt(a[4].replace("]","")))}_parseOdleV3(e,n,i){let r="0";if([r,n]=Bl(n,e),r!=="0"&&r!=="1")return;let s="0";[s,n]=Bl(n,e);const o=parseInt(s);if(isNaN(o)||o<1)return;let a="";if([a,n]=Bl(n,e),a.length!==0)return;let l="";[l,n]=Bl(n,e);const c=l.split(" ");if(c.length<6)return;const u=parseInt(c[0]);(u===0||u===1||u===2)&&(i.type=u),i.trainedWidth=parseInt(c[4].replace("[","")),i.trainedHeight=parseInt(c[5].replace("]","")),c.length>=7&&(i.physicalScaleFactor=parseFloat(c[6]),isNaN(i.physicalScaleFactor)&&(i.physicalScaleFactor=-1)),c.length>=8&&(i.topRadius=parseFloat(c[7]),isNaN(i.topRadius)&&(i.topRadius=-1),i.bottomRadius=i.topRadius),c.length>=9&&(i.bottomRadius=parseFloat(c[8]),isNaN(i.bottomRadius)&&(i.bottomRadius=-1)),c.length>=10&&(i.sideLength=parseFloat(c[9]),isNaN(i.sideLength)&&(i.sideLength=-1))}getDecodedPreview(e){const n=this.getTargetInfo(e);if(!!n.preview){if(!n.preview.image){const i=new Blob([n.preview.compressed],{type:n.preview.mimeType});n.preview.image=new Image,n.preview.image.src=URL.createObjectURL(i)}return n.preview.image}}getPreviewMesh(e){const n=this.getTargetInfo(e);return n.previewMesh||(n.previewMesh=EZ(n)),n.previewMesh}}function Bl(t,e){let n=e.indexOf(`
`,t);return[e.substring(t,n>=0?n:void 0).replace("\r",""),n+1]}var wp=globalThis&&globalThis.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};let xu;function IZ(t){if(xu)return xu;let e=!1;M$(t==null?void 0:t.worker).then(()=>{Go("Fully loaded"),e=!0});let n=new hq(i=>{sd.postOutgoingMessage({t:"zappar",d:i},[i])});if(window.location.hostname.toLowerCase().indexOf(".zappar.io")>0||window.location.hostname.toLowerCase().indexOf(".webar.run")>0){let i=window.location.pathname.split("/");i.length>1&&i[1].length>0&&n.impl.analytics_project_id_set(".wiz"+i[1])}return sd.onIncomingMessage.bind(i=>{var r,s,o,a,l,c,u;switch(i.t){case"zappar":(r=yt.get(i.p))===null||r===void 0||r.pendingMessages.push(i.d);break;case"buf":n.serializer.bufferReturn(i.d);break;case"cameraFrameRecycleS2C":{let f=i;(o=(s=yt.get(f.p))===null||s===void 0?void 0:s.cameraTokenReturn)===null||o===void 0||o.call(s,i);break}case"videoFrameS2C":{let f=i;(l=(a=yt.get(f.p))===null||a===void 0?void 0:a.videoFrameFromWorker)===null||l===void 0||l.call(a,f);break}case"imageBitmapS2C":{let f=i;(u=(c=yt.get(f.p))===null||c===void 0?void 0:c.imageBitmapFromWorker)===null||u===void 0||u.call(c,f);break}case"licerr":{let f=document.createElement("div");f.innerHTML="Visit <a href='https://docs.zap.works/universal-ar/licensing/' style='color: white;'>our licensing page</a> to find out about hosting on your own domain.",f.style.position="absolute",f.style.bottom="20px",f.style.width="80%",f.style.backgroundColor="black",f.style.color="white",f.style.borderRadius="10px",f.style.padding="10px",f.style.fontFamily="sans-serif",f.style.textAlign="center",f.style.left="10%",f.style.zIndex=Number.MAX_SAFE_INTEGER.toString();let h=document.createElement("span");h.innerText=" (30)",f.append(h);let d=30;setInterval(function(){d--,d>=0&&(h.innerText=" ("+d.toString()+")")},1e3),document.body.append(f)}case"gfx":{let f=document.createElement("div");f.innerHTML=wZ,f.style.position="absolute",f.style.bottom="20px",f.style.width="250px",f.style.left="50%",f.style.marginLeft="-125px",f.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),f.style.opacity="0",f.style.transition="opacity 0.5s",document.body.append(f),setTimeout(function(){f.style.opacity="1"},500),setTimeout(function(){f.style.opacity="0"},3e3),setTimeout(function(){f.remove()},4e3)}}}),xu=Object.assign(Object.assign({},n.impl),{loaded:()=>e,camera_default_device_id:i=>i?Ro.USER_DEFAULT_DEVICE_ID:Ro.DEFAULT_DEVICE_ID,camera_source_create:(i,r)=>aZ(i,r),camera_source_destroy:i=>{var r;return(r=Sv(i))===null||r===void 0?void 0:r.destroy()},camera_source_pause:i=>{var r;return(r=Sv(i))===null||r===void 0?void 0:r.pause()},camera_source_start:i=>{var r;return(r=Sv(i))===null||r===void 0?void 0:r.start()},camera_count:()=>2,camera_id:i=>i===0?Ro.DEFAULT_DEVICE_ID:Ro.USER_DEFAULT_DEVICE_ID,camera_name:i=>i===0?"Rear-facing Camera":"User-facing Camera",camera_user_facing:i=>i!==0,pipeline_create:()=>yt.create(n.impl,sd),pipeline_frame_update:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.frameUpdate(n)},pipeline_camera_frame_draw_gl:(i,r,s,o)=>{var a;(a=yt.get(i))===null||a===void 0||a.cameraFrameDrawGL(r,s,o)},draw_plane:(i,r,s,o,a)=>{gq(i,r,s,o,a)},pipeline_draw_face:(i,r,s,o,a)=>{var l;let c=Lr(a);if(!c)return Kt("attempting to call draw_face on a destroyed zappar_face_mesh_t"),new Uint16Array;(l=yt.get(i))===null||l===void 0||l.drawFace(r,s,o,c)},pipeline_draw_face_project:(i,r,s,o,a,l,c)=>{var u;(u=yt.get(i))===null||u===void 0||u.drawFaceProject(r,s,o,a,l,c)},pipeline_draw_image_target_preview:(i,r,s,o,a,l)=>{var c;let u=Dn.get(a);if(!u){Kt("image tracker not found");return}(c=yt.get(i))===null||c===void 0||c.drawImageTargetPreview(r,s,o,l,u)},projection_matrix_from_camera_model:A4,projection_matrix_from_camera_model_ext:A4,pipeline_process_gl:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.processGL()},pipeline_gl_context_set:(i,r,s)=>{var o;return(o=yt.get(i))===null||o===void 0?void 0:o.glContextSet(r,s)},pipeline_gl_context_lost:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.glContextLost()},pipeline_camera_frame_upload_gl:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.uploadGL()},pipeline_camera_frame_texture_gl:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.cameraFrameTexture()},pipeline_camera_frame_texture_matrix:(i,r,s,o)=>{var a;return((a=yt.get(i))===null||a===void 0?void 0:a.cameraFrameTextureMatrix(r,s,o))||ln()},pipeline_camera_frame_user_facing:i=>{var r;return((r=yt.get(i))===null||r===void 0?void 0:r.cameraFrameUserFacing())||!1},pipeline_camera_pose_default:()=>ln(),pipeline_camera_pose_with_attitude:(i,r)=>{var s;return((s=yt.get(i))===null||s===void 0?void 0:s.cameraPoseWithAttitude(r))||ln()},pipeline_camera_pose_with_origin:(i,r)=>{let s=ln();return OM(s,r),s},pipeline_sequence_record_clear:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordClear()},pipeline_sequence_record_start:(i,r)=>{var s;return(s=yt.get(i))===null||s===void 0?void 0:s.sequenceRecordStart(r)},pipeline_sequence_record_stop:i=>{var r;return(r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordStop()},pipeline_sequence_record_device_attitude_matrices_set:(i,r)=>{var s;return(s=yt.get(i))===null||s===void 0?void 0:s.sequenceRecordDeviceAttitudeMatrices(r)},pipeline_sequence_record_data:i=>{var r;return((r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordData())||new Uint8Array(0)},pipeline_sequence_record_data_size:i=>{var r;return((r=yt.get(i))===null||r===void 0?void 0:r.sequenceRecordData().byteLength)||0},instant_world_tracker_anchor_pose_camera_relative:(i,r)=>{let s=uu(void 0,n.impl.instant_world_tracker_anchor_pose_raw(i));if(r){let o=ln();Zi(o,[-1,1,1]),en(s,o,s),en(s,s,o)}return s},instant_world_tracker_anchor_pose:(i,r,s)=>{let o=uu(void 0,n.impl.instant_world_tracker_anchor_pose_raw(i));if(s){let a=ln();Zi(a,[-1,1,1]),en(o,a,o),en(o,o,a)}return en(o,r,o),o},instant_world_tracker_anchor_pose_set_from_camera_offset:(i,r,s,o,a)=>{let c=Zu(!1)*Math.PI/180,u=ln();wd(u,-c,[0,0,1]);let f=Qd();ly(f,[r,s,o],u),n.impl.instant_world_tracker_anchor_pose_set_from_camera_offset_raw(i,f[0],f[1],f[2],a)},image_tracker_create:i=>Dn.create(i,n.impl),image_tracker_destroy:i=>{var r;return(r=Dn.get(i))===null||r===void 0?void 0:r.destroy()},image_tracker_target_type:(i,r)=>{let s=Dn.get(i);return s?s.getTargetInfo(r).type:(Kt("attempting to call image_tracker_target_type on a destroyed zappar_image_tracker_t"),il.IMAGE_TRACKER_TYPE_PLANAR)},image_tracker_target_count:i=>{let r=Dn.get(i);return r?r.targetCount():(Kt("attempting to call image_tracker_target_count on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_load_from_memory:(i,r)=>{let s=Dn.get(i);if(!s)return Kt("attempting to call image_tracker_target_load_from_memory on a destroyed zappar_image_tracker_t"),0;s.loadFromMemory(r)},image_tracker_target_preview_compressed:(i,r)=>{var s;let o=Dn.get(i);return o?((s=o.getTargetInfo(r).preview)===null||s===void 0?void 0:s.compressed)||new Uint8Array(0):(Kt("attempting to call image_tracker_target_preview_compressed on a destroyed zappar_image_tracker_t"),new Uint8Array(0))},image_tracker_target_preview_compressed_mimetype:(i,r)=>{var s;let o=Dn.get(i);return o?((s=o.getTargetInfo(r).preview)===null||s===void 0?void 0:s.mimeType)||"":(Kt("attempting to call image_tracker_target_preview_compressed_mimetype on a destroyed zappar_image_tracker_t"),"")},image_tracker_target_preview_compressed_size:(i,r)=>{var s,o;let a=Dn.get(i);return a?((o=(s=a.getTargetInfo(r).preview)===null||s===void 0?void 0:s.compressed)===null||o===void 0?void 0:o.byteLength)||0:(Kt("attempting to call image_tracker_target_preview_compressed_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_physical_scale_factor:(i,r)=>{let s=Dn.get(i);return s?s.getTargetInfo(r).physicalScaleFactor:(Kt("attempting to call image_tracker_target_physical_scale_factor on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_radius_top:(i,r)=>{let s=Dn.get(i);return s?s.getTargetInfo(r).topRadius:(Kt("attempting to call image_tracker_target_radius_top on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_radius_bottom:(i,r)=>{let s=Dn.get(i);return s?s.getTargetInfo(r).bottomRadius:(Kt("attempting to call image_tracker_target_radius_bottom on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_side_length:(i,r)=>{let s=Dn.get(i);return s?s.getTargetInfo(r).sideLength:(Kt("attempting to call image_tracker_target_side_length on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_image:(i,r)=>{let s=Dn.get(i);return s?s.getDecodedPreview(r):(Kt("attempting to call image_tracker_target_image on a destroyed zappar_image_tracker_t"),new Image)},image_tracker_anchor_pose_camera_relative:(i,r,s)=>{let o=uu(void 0,n.impl.image_tracker_anchor_pose_raw(i,r));if(s){let a=ln();Zi(a,[-1,1,1]),en(o,a,o),en(o,o,a)}return o},image_tracker_anchor_pose:(i,r,s,o)=>{let a=uu(void 0,n.impl.image_tracker_anchor_pose_raw(i,r));if(o){let l=ln();Zi(l,[-1,1,1]),en(a,l,a),en(a,a,l)}return en(a,s,a),a},image_tracker_target_preview_mesh_indices:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).indices:(Kt("attempting to call image_tracker_target_preview_mesh_indices on a destroyed zappar_image_tracker_t"),new Uint16Array)},image_tracker_target_preview_mesh_vertices:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).vertices:(Kt("attempting to call image_tracker_target_preview_mesh_vertices on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_uvs:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).uvs:(Kt("attempting to call image_tracker_target_preview_mesh_uvs on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_normals:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).normals:(Kt("attempting to call image_tracker_target_preview_mesh_normals on a destroyed zappar_image_tracker_t"),new Float32Array)},image_tracker_target_preview_mesh_indices_size:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).indices.length:(Kt("attempting to call image_tracker_target_preview_mesh_indices_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_vertices_size:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).vertices.length:(Kt("attempting to call image_tracker_target_preview_mesh_vertices_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_uvs_size:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).uvs.length:(Kt("attempting to call image_tracker_target_preview_mesh_uvs_size on a destroyed zappar_image_tracker_t"),0)},image_tracker_target_preview_mesh_normals_size:(i,r)=>{let s=Dn.get(i);return s?s.getPreviewMesh(r).normals.length:(Kt("attempting to call image_tracker_target_preview_mesh_normals_size on a destroyed zappar_image_tracker_t"),0)},face_tracker_anchor_pose_camera_relative:(i,r,s)=>{let o=uu(void 0,n.impl.face_tracker_anchor_pose_raw(i,r));if(s){let a=ln();Zi(a,[-1,1,1]),en(o,a,o),en(o,o,a)}return o},face_tracker_anchor_pose:(i,r,s,o)=>{let a=uu(void 0,n.impl.face_tracker_anchor_pose_raw(i,r));if(o){let l=ln();Zi(l,[-1,1,1]),en(a,l,a),en(a,a,l)}return en(a,s,a),a},face_tracker_model_load_default:i=>wp(this,void 0,void 0,function*(){yield TZ(i)}),face_mesh_create:()=>z$(),face_mesh_destroy:i=>{G$(i)},face_mesh_indices:i=>{let r=Lr(i);return r?r.getIndices():(Kt("attempting to call face_mesh_indices on a destroyed zappar_face_mesh_t"),new Uint16Array)},face_mesh_indices_size:i=>{let r=Lr(i);return r?r.getIndices().length:(Kt("attempting to call face_mesh_indices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_uvs:i=>{let r=Lr(i);return r?r.getUVs():(Kt("attempting to call face_mesh_uvs on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_uvs_size:i=>{let r=Lr(i);return r?r.getUVs().length:(Kt("attempting to call face_mesh_uvs_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_vertices:i=>{let r=Lr(i);return r?r.getVertices():(Kt("attempting to call face_mesh_vertices on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_vertices_size:i=>{let r=Lr(i);return r?r.getVertices().length:(Kt("attempting to call face_mesh_vertices_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_normals:i=>{let r=Lr(i);return r?r.getNormals():(Kt("attempting to call face_mesh_normals on a destroyed zappar_face_mesh_t"),new Float32Array)},face_mesh_normals_size:i=>{let r=Lr(i);return r?r.getNormals().length:(Kt("attempting to call face_mesh_normals_size on a destroyed zappar_face_mesh_t"),0)},face_mesh_load_from_memory:(i,r,s,o,a,l)=>{let c=Lr(i);if(!c){Kt("attempting to call face_mesh_load_from_memory on a destroyed zappar_face_mesh_t");return}c.loadFromMemory(r,s,o,a,l)},face_mesh_update:(i,r,s,o)=>{let a=Lr(i);if(!a){Kt("attempting to call face_mesh_update on a destroyed zappar_face_mesh_t");return}a.update(r,s,o)},face_mesh_load_default:i=>wp(this,void 0,void 0,function*(){let r=Lr(i);if(!r){Kt("attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t");return}let s=new URL(""+new URL("face_mesh_face_model.03bc63d9.zbin",import.meta.url).href,self.location),o=yield fetch(s.toString());r.loadFromMemory(yield o.arrayBuffer(),!1,!1,!1,!1)}),face_mesh_load_default_face:(i,r,s,o)=>wp(this,void 0,void 0,function*(){let a=Lr(i);if(!a){Kt("attempting to call face_mesh_load_default_face on a destroyed zappar_face_mesh_t");return}let l=new URL(""+new URL("face_mesh_face_model.03bc63d9.zbin",import.meta.url).href,self.location),c=yield fetch(l.toString());a.loadFromMemory(yield c.arrayBuffer(),r,s,o,!1)}),face_mesh_load_default_full_head_simplified:(i,r,s,o,a)=>wp(this,void 0,void 0,function*(){let l=Lr(i);if(!l){Kt("attempting to call face_mesh_load_default_full_head_simplified on a destroyed zappar_face_mesh_t");return}let c=new URL(""+new URL("face_mesh_full_head_simplified_model.e52374bf.zbin",import.meta.url).href,self.location),u=yield fetch(c.toString());l.loadFromMemory(yield u.arrayBuffer(),r,s,o,a)}),face_mesh_loaded_version:i=>{let r=Lr(i);return r?r.getModelVersion():(Kt("attempting to call face_mesh_load_default on a destroyed zappar_face_mesh_t"),-1)},face_landmark_create:i=>mZ(i),face_landmark_destroy:i=>{gZ(i)},face_landmark_update:(i,r,s,o)=>{let a=E4(i);if(!a){Kt("attempting to call face_landmark_update on a destroyed zappar_face_landmark_t");return}a.update(r,s,o)},face_landmark_anchor_pose:i=>{let r=E4(i);return r?r.anchor_pose:(Kt("attempting to call face_landmark_anchor_pose on a destroyed zappar_face_landmark_t"),ln())},html_element_source_create:(i,r)=>yu.createVideoElementSource(i,r),html_element_source_start:i=>{var r;return(r=yu.getVideoElementSource(i))===null||r===void 0?void 0:r.start()},html_element_source_pause:i=>{var r;return(r=yu.getVideoElementSource(i))===null||r===void 0?void 0:r.pause()},html_element_source_destroy:i=>{var r;return(r=yu.getVideoElementSource(i))===null||r===void 0?void 0:r.destroy()},sequence_source_create:i=>Va.create(i),sequence_source_load_from_memory:(i,r)=>{var s;return(s=Va.get(i))===null||s===void 0?void 0:s.loadFromMemory(r)},sequence_source_pause:i=>{var r;return(r=Va.get(i))===null||r===void 0?void 0:r.pause()},sequence_source_start:i=>{var r;return(r=Va.get(i))===null||r===void 0?void 0:r.start()},sequence_source_max_playback_fps_set:(i,r)=>{var s;return(s=Va.get(i))===null||s===void 0?void 0:s.maxPlaybackFpsSet(r)},sequence_source_time_set:(i,r)=>{var s;return(s=Va.get(i))===null||s===void 0?void 0:s.setTime(r)},sequence_source_destroy:i=>{var r;return(r=Va.get(i))===null||r===void 0?void 0:r.destroy()},permission_granted_all:hS,permission_granted_camera:B$,permission_granted_motion:R$,permission_denied_any:Z6,permission_denied_camera:P$,permission_denied_motion:D$,permission_request_motion:n8,permission_request_camera:t8,permission_request_all:e8,permission_request_ui:v4,permission_request_ui_promise:v4,permission_denied_ui:F$,browser_incompatible:b4.incompatible,browser_incompatible_ui:b4.incompatible_ui,log_level_set:i=>{U$(i),n.impl.log_level_set(i)}}),xu}function TZ(t){return wp(this,void 0,void 0,function*(){let e=new URL(""+new URL("face_tracking_model.565855d3.zbin",import.meta.url).href,self.location),i=yield(yield fetch(e.toString())).arrayBuffer();xu==null||xu.face_tracker_model_load_from_memory(t,i)})}const BZ="2.0.0";function RZ(t){return console.log(`Zappar CV v${BZ}`),IZ(t)}const PZ=Object.freeze(Object.defineProperty({__proto__:null,initialize:RZ,get barcode_format_t(){return oS},get face_landmark_name_t(){return aS},get instant_world_tracker_transform_orientation_t(){return lS},get log_level_t(){return $u},get image_target_type_t(){return il}},Symbol.toStringTag,{value:"Module"})),Jm=df(PZ),e3=df(E$);var hy={};Object.defineProperty(hy,"__esModule",{value:!0});hy.VERSION=void 0;hy.VERSION="2.0.0";var DZ=He&&He.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(rn,"__esModule",{value:!0});rn.loadedPromise=rn.loaded=rn.browserIncompatibleUI=rn.browserIncompatible=rn.drawPlane=rn.projectionMatrixFromCameraModel=rn.invert=rn.cameraDefaultDeviceID=rn.z=rn.setOptions=void 0;const LZ=Jm,C4=e3,FZ=hy;let Cv,c8;function kZ(t){Cv&&console.warn("setOptions called after Zappar JS initialization"),c8=t}rn.setOptions=kZ;function vf(){return Cv||(console.log(`Zappar JS v${FZ.VERSION}`),Cv=LZ.initialize(c8)),Cv}rn.z=vf;function OZ(t){return vf().camera_default_device_id(t||!1)}rn.cameraDefaultDeviceID=OZ;function UZ(t){const e=C4.mat4.create();return C4.mat4.invert(e,t),e}rn.invert=UZ;function NZ(t,e,n,i=.1,r=100){return vf().projection_matrix_from_camera_model_ext(t,e,n,i,r)}rn.projectionMatrixFromCameraModel=NZ;function zZ(t,e,n,i,r){vf().draw_plane(t,e,n,i,r)}rn.drawPlane=zZ;function GZ(){return vf().browser_incompatible()}rn.browserIncompatible=GZ;function QZ(){vf().browser_incompatible_ui()}rn.browserIncompatibleUI=QZ;function u8(){return vf().loaded()}rn.loaded=u8;function HZ(){return DZ(this,void 0,void 0,function*(){for(;;){if(u8())return;yield VZ(50)}})}rn.loadedPromise=HZ;function VZ(t){return new Promise(e=>setTimeout(e,t))}var WZ=He&&He.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(dc,"__esModule",{value:!0});dc.ImageTargetPreview=dc.ImageTarget=dc.ImageTracker=void 0;const z0=zo,jZ=rn;class qZ{constructor(e,n){this._pipeline=e,this.onVisible=new z0.Event1,this.onNotVisible=new z0.Event1,this.onNewAnchor=new z0.Event1,this.visible=new Set,this.anchors=new Map,this._visibleLastFrame=new Set,this._frameUpdate=()=>{const i=new Set,r=this.visible;this.visible=this._visibleLastFrame,this._visibleLastFrame=r,this.visible.clear();const s=this._z.image_tracker_anchor_count(this._impl);for(let o=0;o<s;o++){const a=this._z.image_tracker_anchor_id(this._impl,o);let l=this.anchors.get(a);l||(l={onVisible:new z0.Event,onNotVisible:new z0.Event,id:a,poseCameraRelative:c=>this._z.image_tracker_anchor_pose_camera_relative(this._impl,o,c===!0),pose:(c,u)=>this._z.image_tracker_anchor_pose(this._impl,o,c,u===!0),visible:!0},this.anchors.set(a,l),i.add(l)),l.visible=!0,this.visible.add(l)}for(const o of i)this.onNewAnchor.emit(o);for(const o of this.visible)this._visibleLastFrame.has(o)?this._visibleLastFrame.delete(o):(this.onVisible.emit(o),o.onVisible.emit());for(const o of this._visibleLastFrame)this.onNotVisible.emit(o),o.onNotVisible.emit()},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=jZ.z(),this._impl=this._z.image_tracker_create(this._pipeline._getImpl()),n&&this.loadTarget(n)}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this.anchors.clear(),this.visible.clear(),this._z.image_tracker_destroy(this._impl)}loadTarget(e){return WZ(this,void 0,void 0,function*(){typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer()),this._targets=void 0,this._z.image_tracker_target_load_from_memory(this._impl,e)})}get enabled(){return this._z.image_tracker_enabled(this._impl)}set enabled(e){this._z.image_tracker_enabled_set(this._impl,e)}get targets(){if(!this._targets){this._targets=[];const e=this._z.image_tracker_target_count(this._impl);for(let n=0;n<e;n++)this._targets.push(new f8(this._z,this._impl,n))}return this._targets}}dc.ImageTracker=qZ;class f8{constructor(e,n,i){this._z=e,this._impl=n,this._indx=i,this.physicalScaleFactor=this._z.image_tracker_target_physical_scale_factor(this._impl,this._indx),this.physicalScaleFactor<0&&(this.physicalScaleFactor=void 0),this.topRadius=this._z.image_tracker_target_radius_top(this._impl,this._indx),this.topRadius<0&&(this.topRadius=void 0),this.bottomRadius=this._z.image_tracker_target_radius_bottom(this._impl,this._indx),this.bottomRadius<0&&(this.bottomRadius=void 0),this.sideLength=this._z.image_tracker_target_side_length(this._impl,this._indx),this.sideLength<0&&(this.sideLength=void 0)}get image(){return this._image===void 0&&(this._image=this._z.image_tracker_target_image(this._impl,this._indx)||null),this._image||void 0}get preview(){return this._preview===void 0&&(this._preview=new h8(this._z,this._impl,this._indx)),this._preview}}dc.ImageTarget=f8;class h8{constructor(e,n,i){this._z=e,this._impl=n,this._indx=i,this.vertices=this._z.image_tracker_target_preview_mesh_vertices(this._impl,this._indx),this.indices=this._z.image_tracker_target_preview_mesh_indices(this._impl,this._indx),this.uvs=this._z.image_tracker_target_preview_mesh_uvs(this._impl,this._indx)}}dc.ImageTargetPreview=h8;var dy={};Object.defineProperty(dy,"__esModule",{value:!0});dy.InstantWorldTracker=void 0;const YZ=Jm,XZ=rn;class JZ{constructor(e){this._pipeline=e,this.anchor={poseCameraRelative:n=>this._anchorPoseCameraRelative(n),pose:(n,i)=>this._anchorPose(n,i)},this._z=XZ.z(),this._impl=this._z.instant_world_tracker_create(this._pipeline._getImpl())}destroy(){this._z.instant_world_tracker_destroy(this._impl)}_anchorPoseCameraRelative(e){return this._z.instant_world_tracker_anchor_pose_camera_relative(this._impl,e===!0)}_anchorPose(e,n){return this._z.instant_world_tracker_anchor_pose(this._impl,e,n===!0)}get enabled(){return this._z.instant_world_tracker_enabled(this._impl)}set enabled(e){this._z.instant_world_tracker_enabled_set(this._impl,e)}setAnchorPoseFromCameraOffset(e,n,i,r){this._z.instant_world_tracker_anchor_pose_set_from_camera_offset(this._impl,e,n,i,r||YZ.instant_world_tracker_transform_orientation_t.MINUS_Z_AWAY_FROM_USER)}}dy.InstantWorldTracker=JZ;var py={};Object.defineProperty(py,"__esModule",{value:!0});py.BarcodeFinder=void 0;const KZ=zo,qi=Jm,$Z=rn;class ZZ{constructor(e){this._pipeline=e,this.onDetection=new KZ.Event1,this._lastDetected=[],this._found=[],this._formats=[],this._frameUpdate=()=>{this._found=[];const n=this._z.barcode_finder_found_number(this._impl);for(let i=0;i<n;i++)this._found.push({text:this._z.barcode_finder_found_text(this._impl,i),format:this._z.barcode_finder_found_format(this._impl,i)});if(this._found.length===0)return;e:for(const i of this._found){for(const r of this._lastDetected)if(r.text===i.text)continue e;this.onDetection.emit(i)}this._lastDetected=this._found},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=$Z.z(),this._impl=this._z.barcode_finder_create(this._pipeline._getImpl()),this._formats.push.apply(this._formats,[qi.barcode_format_t.AZTEC,qi.barcode_format_t.CODABAR,qi.barcode_format_t.CODE_39,qi.barcode_format_t.CODE_93,qi.barcode_format_t.CODE_128,qi.barcode_format_t.DATA_MATRIX,qi.barcode_format_t.EAN_8,qi.barcode_format_t.EAN_13,qi.barcode_format_t.ITF,qi.barcode_format_t.MAXICODE,qi.barcode_format_t.PDF_417,qi.barcode_format_t.QR_CODE,qi.barcode_format_t.RSS_14,qi.barcode_format_t.RSS_EXPANDED,qi.barcode_format_t.UPC_A,qi.barcode_format_t.UPC_E,qi.barcode_format_t.UPC_EAN_EXTENSION])}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this._found=[],this._lastDetected=[],this._z.barcode_finder_destroy(this._impl)}get found(){return this._found}get enabled(){return this._z.barcode_finder_enabled(this._impl)}set enabled(e){this._z.barcode_finder_enabled_set(this._impl,e)}get formats(){return this._formats}set formats(e){this._formats=e.slice();let n=0;for(const i of this._formats)n|=i;this._z.barcode_finder_formats_set(this._impl,n)}}py.BarcodeFinder=ZZ;var my={},M4=He&&He.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(my,"__esModule",{value:!0});my.FaceTracker=void 0;const G0=zo,eee=rn;class tee{constructor(e){this._pipeline=e,this.onVisible=new G0.Event1,this.onNotVisible=new G0.Event1,this.onNewAnchor=new G0.Event1,this.visible=new Set,this.anchors=new Map,this._visibleLastFrame=new Set,this._frameUpdate=()=>{const n=new Set,i=this.visible;this.visible=this._visibleLastFrame,this._visibleLastFrame=i,this.visible.clear();const r=this._z.face_tracker_anchor_count(this._impl);for(let s=0;s<r;s++){const o=this._z.face_tracker_anchor_id(this._impl,s);let a=this.anchors.get(o);a||(a={onVisible:new G0.Event,onNotVisible:new G0.Event,indx:0,id:o,poseCameraRelative:l=>this._z.face_tracker_anchor_pose_camera_relative(this._impl,a.indx,l===!0),pose:(l,c)=>this._z.face_tracker_anchor_pose(this._impl,a.indx,l,c===!0),identity:new Float32Array(50),expression:new Float32Array(29),visible:!0},this.anchors.set(o,a),n.add(a)),a.indx=s,a.visible=!0,a.identity=this._z.face_tracker_anchor_identity_coefficients(this._impl,s),a.expression=this._z.face_tracker_anchor_expression_coefficients(this._impl,s),this.visible.add(a)}for(const s of n)this.onNewAnchor.emit(s);for(const s of this.visible)this._visibleLastFrame.has(s)?this._visibleLastFrame.delete(s):(this.onVisible.emit(s),s.onVisible.emit());for(const s of this._visibleLastFrame)this.onNotVisible.emit(s),s.onNotVisible.emit()},this._pipeline._onFrameUpdateInternal.bind(this._frameUpdate),this._z=eee.z(),this._impl=this._z.face_tracker_create(this._pipeline._getImpl())}destroy(){this._pipeline._onFrameUpdateInternal.unbind(this._frameUpdate),this.anchors.clear(),this.visible.clear(),this._z.face_tracker_destroy(this._impl)}loadModel(e){return M4(this,void 0,void 0,function*(){typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer()),this._z.face_tracker_model_load_from_memory(this._impl,e)})}loadDefaultModel(){return M4(this,void 0,void 0,function*(){yield this._z.face_tracker_model_load_default(this._impl)})}get enabled(){return this._z.face_tracker_enabled(this._impl)}set enabled(e){this._z.face_tracker_enabled_set(this._impl,e)}get maxFaces(){return this._z.face_tracker_max_faces(this._impl)}set maxFaces(e){this._z.face_tracker_max_faces_set(this._impl,e)}}my.FaceTracker=tee;var gy={},O1=He&&He.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(gy,"__esModule",{value:!0});gy.FaceMesh=void 0;const nee=rn;class iee{constructor(){this._z=nee.z(),this._impl=this._z.face_mesh_create()}destroy(){this._z.face_mesh_destroy(this._impl)}load(e,n,i,r,s){return O1(this,void 0,void 0,function*(){if(e)typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer());else{this.loadDefault();return}this._z.face_mesh_load_from_memory(this._impl,e,n||!1,i||!1,r||!1,s||!1)})}loadDefault(){return O1(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default(this._impl)})}loadDefaultFace(e,n,i){return O1(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default_face(this._impl,e||!1,n||!1,i||!1)})}loadDefaultFullHeadSimplified(e,n,i,r){return O1(this,void 0,void 0,function*(){yield this._z.face_mesh_load_default_full_head_simplified(this._impl,e||!1,n||!1,i||!1,r||!1)})}updateFromFaceAnchor(e,n){this._z.face_mesh_update(this._impl,e.identity,e.expression,n||!1)}updateFromIdentityExpression(e,n,i){this._z.face_mesh_update(this._impl,e,n,i||!1)}get vertices(){return this._z.face_mesh_vertices(this._impl)}get indices(){return this._z.face_mesh_indices(this._impl)}get uvs(){return this._z.face_mesh_uvs(this._impl)}get normals(){return this._z.face_mesh_normals(this._impl)}_getImpl(){return this._impl}}gy.FaceMesh=iee;var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.CameraSource=void 0;const ree=rn;class see{constructor(e,n){this._z=ree.z(),this._impl=this._z.camera_source_create(e._getImpl(),n)}destroy(){this._z.camera_source_destroy(this._impl)}start(){this._z.camera_source_start(this._impl)}pause(){this._z.camera_source_pause(this._impl)}}Ay.CameraSource=see;var vy={};Object.defineProperty(vy,"__esModule",{value:!0});vy.HTMLElementSource=void 0;const oee=rn;class aee{constructor(e,n){this._z=oee.z(),this._impl=this._z.html_element_source_create(e._getImpl(),n)}destroy(){this._z.html_element_source_destroy(this._impl)}start(){this._z.html_element_source_start(this._impl)}pause(){this._z.html_element_source_pause(this._impl)}}vy.HTMLElementSource=aee;var _y={},lee=He&&He.__awaiter||function(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(_y,"__esModule",{value:!0});_y.SequenceSource=void 0;const cee=rn;class uee{constructor(e){this._z=cee.z(),this._impl=this._z.sequence_source_create(e._getImpl())}destroy(){this._z.sequence_source_destroy(this._impl)}start(){this._z.sequence_source_start(this._impl)}pause(){this._z.sequence_source_pause(this._impl)}load(e){return lee(this,void 0,void 0,function*(){typeof e=="string"&&(e=yield(yield fetch(e)).arrayBuffer()),this._z.sequence_source_load_from_memory(this._impl,e)})}setTime(e){this._z.sequence_source_time_set(this._impl,e!=null?e:-1)}}_y.SequenceSource=uee;var yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.Pipeline=void 0;const fee=rn,I4=zo;class hee{constructor(){this.onFrameUpdate=new I4.Event,this._onFrameUpdateInternal=new I4.Event,this._lastFrameNumber=-1,this._z=fee.z(),this._impl=this._z.pipeline_create()}destroy(){this._z.pipeline_destroy(this._impl)}frameUpdate(){this._z.pipeline_frame_update(this._impl);const e=this._z.pipeline_frame_number(this._impl);e!==this._lastFrameNumber&&(this._lastFrameNumber=e,this._onFrameUpdateInternal.emit(),this.onFrameUpdate.emit())}_getImpl(){return this._impl}glContextSet(e){this._z.pipeline_gl_context_set(this._impl,e)}glContextLost(){this._z.pipeline_gl_context_lost(this._impl)}cameraFrameTextureGL(){return this._z.pipeline_camera_frame_texture_gl(this._impl)}cameraFrameTextureMatrix(e,n,i){return this._z.pipeline_camera_frame_texture_matrix(this._impl,e,n,i===!0)}cameraFrameDrawGL(e,n,i){this._z.pipeline_camera_frame_draw_gl(this._impl,e,n,i)}cameraFrameUploadGL(){this._z.pipeline_camera_frame_upload_gl(this._impl)}processGL(){this._z.pipeline_process_gl(this._impl)}cameraModel(){return this._z.pipeline_camera_model(this._impl)}cameraPoseDefault(){return this._z.pipeline_camera_pose_default(this._impl)}cameraPoseWithAttitude(e){return this._z.pipeline_camera_pose_with_attitude(this._impl,e||!1)}cameraPoseWithOrigin(e){return this._z.pipeline_camera_pose_with_origin(this._impl,e)}cameraFrameUserFacing(){return this._z.pipeline_camera_frame_user_facing(this._impl)}drawFace(e,n,i,r){this._z.pipeline_draw_face(this._impl,e,n,i,r._getImpl())}frameNumber(){return this._z.pipeline_frame_number(this._impl)}sequenceRecordStart(e){e===void 0&&(e=30*5),this._z.pipeline_sequence_record_start(this._impl,e)}sequenceRecordStop(){this._z.pipeline_sequence_record_stop(this._impl)}sequenceRecordClear(){this._z.pipeline_sequence_record_clear(this._impl)}sequenceRecordData(){return this._z.pipeline_sequence_record_data(this._impl)}}yy.Pipeline=hee;var d8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FaceLandmark=t.FaceLandmarkName=void 0;const e=rn,n=e3;var i=Jm;Object.defineProperty(t,"FaceLandmarkName",{enumerable:!0,get:function(){return i.face_landmark_name_t}});class r{constructor(o){this._name=o,this.pose=n.mat4.create(),this._z=e.z(),this._impl=this._z.face_landmark_create(this._name)}destroy(){this._z.face_landmark_destroy(this._impl)}updateFromFaceAnchor(o,a){this._z.face_landmark_update(this._impl,o.identity,o.expression,a||!1),this.pose=this._z.face_landmark_anchor_pose(this._impl)}updateFromIdentityExpression(o,a,l){this._z.face_landmark_update(this._impl,o,a,l||!1),this.pose=this._z.face_landmark_anchor_pose(this._impl)}_getImpl(){return this._impl}}t.FaceLandmark=r})(d8);var p8={};(function(t){var e=He&&He.__awaiter||function(u,f,h,d){function p(m){return m instanceof h?m:new h(function(A){A(m)})}return new(h||(h=Promise))(function(m,A){function v(w){try{x(d.next(w))}catch(E){A(E)}}function y(w){try{x(d.throw(w))}catch(E){A(E)}}function x(w){w.done?m(w.value):p(w.value).then(v,y)}x((d=d.apply(u,f||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.permissionDeniedUI=t.permissionRequestUI=t.permissionRequest=t.permissionDenied=t.permissionGranted=t.Permission=void 0;const n=rn;var i;(function(u){u[u.CAMERA=0]="CAMERA",u[u.MOTION=1]="MOTION"})(i=t.Permission||(t.Permission={}));function r(u){switch(u){case i.CAMERA:return n.z().permission_granted_camera();case i.MOTION:return n.z().permission_granted_motion();default:return n.z().permission_granted_all()}}t.permissionGranted=r;function s(u){switch(u){case i.CAMERA:return n.z().permission_denied_camera();case i.MOTION:return n.z().permission_denied_motion();default:return n.z().permission_denied_any()}}t.permissionDenied=s;function o(u){switch(u){case i.CAMERA:n.z().permission_request_camera();break;case i.MOTION:n.z().permission_request_motion();break;default:n.z().permission_request_all();break}return new Promise(f=>e(this,void 0,void 0,function*(){for(;;)switch(yield c(),u){case i.CAMERA:if(n.z().permission_granted_camera()){f(!0);return}if(n.z().permission_denied_camera()){f(!1);return}break;case i.MOTION:if(n.z().permission_granted_motion()){f(!0);return}if(n.z().permission_denied_motion()){f(!1);return}break;default:if(n.z().permission_granted_camera()&&n.z().permission_granted_motion()){f(!0);return}if(n.z().permission_denied_camera()||n.z().permission_denied_motion()){f(!1);return}break}}))}t.permissionRequest=o;function a(){return e(this,void 0,void 0,function*(){return yield n.z().permission_request_ui_promise()})}t.permissionRequestUI=a;function l(){return n.z().permission_denied_ui()}t.permissionDeniedUI=l;function c(){return new Promise(u=>requestAnimationFrame(()=>u()))}})(p8);var m8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.logLevel=t.LogLevel=void 0;const e=rn;var n=Jm;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return n.log_level_t}});function i(){return e.z().log_level()}t.logLevel=i;function r(s){e.z().log_level_set(s)}t.setLogLevel=r})(m8);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadedPromise=t.loaded=t.browserIncompatibleUI=t.browserIncompatible=t.projectionMatrixFromCameraModel=t.drawPlane=t.invert=t.cameraDefaultDeviceID=t.Event1=t.Event=t.logLevel=t.setLogLevel=t.LogLevel=t.Permission=t.permissionRequestUI=t.permissionRequest=t.permissionDenied=t.permissionGranted=t.permissionDeniedUI=t.FaceLandmark=t.FaceLandmarkName=t.Pipeline=t.SequenceSource=t.HTMLElementSource=t.CameraSource=t.FaceMesh=t.FaceTracker=t.BarcodeFinder=t.InstantWorldTracker=t.ImageTracker=void 0;var e=dc;Object.defineProperty(t,"ImageTracker",{enumerable:!0,get:function(){return e.ImageTracker}});var n=dy;Object.defineProperty(t,"InstantWorldTracker",{enumerable:!0,get:function(){return n.InstantWorldTracker}});var i=py;Object.defineProperty(t,"BarcodeFinder",{enumerable:!0,get:function(){return i.BarcodeFinder}});var r=my;Object.defineProperty(t,"FaceTracker",{enumerable:!0,get:function(){return r.FaceTracker}});var s=gy;Object.defineProperty(t,"FaceMesh",{enumerable:!0,get:function(){return s.FaceMesh}});var o=Ay;Object.defineProperty(t,"CameraSource",{enumerable:!0,get:function(){return o.CameraSource}});var a=vy;Object.defineProperty(t,"HTMLElementSource",{enumerable:!0,get:function(){return a.HTMLElementSource}});var l=_y;Object.defineProperty(t,"SequenceSource",{enumerable:!0,get:function(){return l.SequenceSource}});var c=yy;Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return c.Pipeline}});var u=d8;Object.defineProperty(t,"FaceLandmarkName",{enumerable:!0,get:function(){return u.FaceLandmarkName}}),Object.defineProperty(t,"FaceLandmark",{enumerable:!0,get:function(){return u.FaceLandmark}});var f=p8;Object.defineProperty(t,"permissionDeniedUI",{enumerable:!0,get:function(){return f.permissionDeniedUI}}),Object.defineProperty(t,"permissionGranted",{enumerable:!0,get:function(){return f.permissionGranted}}),Object.defineProperty(t,"permissionDenied",{enumerable:!0,get:function(){return f.permissionDenied}}),Object.defineProperty(t,"permissionRequest",{enumerable:!0,get:function(){return f.permissionRequest}}),Object.defineProperty(t,"permissionRequestUI",{enumerable:!0,get:function(){return f.permissionRequestUI}}),Object.defineProperty(t,"Permission",{enumerable:!0,get:function(){return f.Permission}});var h=m8;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return h.LogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return h.setLogLevel}}),Object.defineProperty(t,"logLevel",{enumerable:!0,get:function(){return h.logLevel}});var d=zo;Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return d.Event}}),Object.defineProperty(t,"Event1",{enumerable:!0,get:function(){return d.Event1}});var p=rn;Object.defineProperty(t,"cameraDefaultDeviceID",{enumerable:!0,get:function(){return p.cameraDefaultDeviceID}}),Object.defineProperty(t,"invert",{enumerable:!0,get:function(){return p.invert}}),Object.defineProperty(t,"drawPlane",{enumerable:!0,get:function(){return p.drawPlane}}),Object.defineProperty(t,"projectionMatrixFromCameraModel",{enumerable:!0,get:function(){return p.projectionMatrixFromCameraModel}}),Object.defineProperty(t,"browserIncompatible",{enumerable:!0,get:function(){return p.browserIncompatible}}),Object.defineProperty(t,"browserIncompatibleUI",{enumerable:!0,get:function(){return p.browserIncompatibleUI}}),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return p.loaded}}),Object.defineProperty(t,"loadedPromise",{enumerable:!0,get:function(){return p.loadedPromise}})})(Af);var gi={};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const xy="145",eo={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},g8=0,dS=1,A8=2,dee=3,pee=0,t3=1,n3=2,jh=3,Qo=0,Er=1,bi=2,Aa=0,Lu=1,g_=2,pS=3,mS=4,v8=5,du=100,_8=101,y8=102,gS=103,AS=104,x8=200,w8=201,E8=202,b8=203,i3=204,r3=205,S8=206,C8=207,M8=208,I8=209,T8=210,B8=0,R8=1,P8=2,A_=3,D8=4,L8=5,F8=6,k8=7,Km=0,O8=1,U8=2,Fo=0,N8=1,z8=2,G8=3,s3=4,Q8=5,wy=300,ll=301,yc=302,ef=303,_m=304,Hd=306,Rs=1e3,Fi=1001,bd=1002,vn=1003,ym=1004,mee=1004,xm=1005,gee=1005,Wt=1006,Ey=1007,Aee=1007,wa=1008,vee=1008,er=1009,v_=1010,o3=1011,_f=1012,Np=1013,Es=1014,Qn=1015,pi=1016,H8=1017,V8=1018,Fu=1020,W8=1021,j8=1022,Fn=1023,q8=1024,Y8=1025,ko=1026,tf=1027,wu=1028,a3=1029,Eu=1030,by=1031,wm=1033,zp=33776,Mv=33777,Iv=33778,Gp=33779,__=35840,vS=35841,y_=35842,_S=35843,l3=36196,x_=37492,w_=37496,E_=37808,yS=37809,xS=37810,wS=37811,ES=37812,bS=37813,SS=37814,CS=37815,MS=37816,IS=37817,TS=37818,BS=37819,RS=37820,PS=37821,b_=36492,X8=2200,J8=2201,K8=2202,Sd=2300,nf=2301,Tv=2302,bu=2400,Su=2401,Em=2402,Sy=2500,c3=2501,_ee=0,$8=1,u3=2,Ps=3e3,Nt=3001,Z8=3200,f3=3201,pl=0,eU=1,yee="",aa="srgb",ec="srgb-linear",xee=0,ku=7680,Bv=7681,wee=7682,Eee=7683,bee=34055,See=34056,Cee=5386,Mee=512,Iee=513,tU=514,Tee=515,Bee=516,nU=517,Ree=518,h3=519,bm=35044,bs=35048,Pee=35040,Dee=35045,Lee=35049,Fee=35041,kee=35046,Oee=35050,Uee=35042,Nee="100",DS="300 es",S_=1035;class Cr{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const dr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let T4=1234567;const Ou=Math.PI/180,Sm=180/Math.PI;function Ms(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(dr[t&255]+dr[t>>8&255]+dr[t>>16&255]+dr[t>>24&255]+"-"+dr[e&255]+dr[e>>8&255]+"-"+dr[e>>16&15|64]+dr[e>>24&255]+"-"+dr[n&63|128]+dr[n>>8&255]+"-"+dr[n>>16&255]+dr[n>>24&255]+dr[i&255]+dr[i>>8&255]+dr[i>>16&255]+dr[i>>24&255]).toLowerCase()}function oi(t,e,n){return Math.max(e,Math.min(n,t))}function d3(t,e){return(t%e+e)%e}function zee(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function Gee(t,e,n){return t!==e?(n-t)/(e-t):0}function Qp(t,e,n){return(1-n)*t+n*e}function Qee(t,e,n,i){return Qp(t,e,1-Math.exp(-n*i))}function Hee(t,e=1){return e-Math.abs(d3(t,e*2)-e)}function Vee(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Wee(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function jee(t,e){return t+Math.floor(Math.random()*(e-t+1))}function qee(t,e){return t+Math.random()*(e-t)}function Yee(t){return t*(.5-Math.random())}function Xee(t){t!==void 0&&(T4=t);let e=T4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Jee(t){return t*Ou}function Kee(t){return t*Sm}function LS(t){return(t&t-1)===0&&t!==0}function iU(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function C_(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function $ee(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),h=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*u,l*f,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*d,a*c);break;case"YXY":t.set(l*d,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Za(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function wn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var ut=Object.freeze({__proto__:null,DEG2RAD:Ou,RAD2DEG:Sm,generateUUID:Ms,clamp:oi,euclideanModulo:d3,mapLinear:zee,inverseLerp:Gee,lerp:Qp,damp:Qee,pingpong:Hee,smoothstep:Vee,smootherstep:Wee,randInt:jee,randFloat:qee,randFloatSpread:Yee,seededRandom:Xee,degToRad:Jee,radToDeg:Kee,isPowerOfTwo:LS,ceilPowerOfTwo:iU,floorPowerOfTwo:C_,setQuaternionFromProperEuler:$ee,normalize:wn,denormalize:Za});class Ae{constructor(e=0,n=0){Ae.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yr{constructor(){yr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],p=i[8],m=r[0],A=r[3],v=r[6],y=r[1],x=r[4],w=r[7],E=r[2],S=r[5],M=r[8];return s[0]=o*m+a*y+l*E,s[3]=o*A+a*x+l*S,s[6]=o*v+a*w+l*M,s[1]=c*m+u*y+f*E,s[4]=c*A+u*x+f*S,s[7]=c*v+u*w+f*M,s[2]=h*m+d*y+p*E,s[5]=h*A+d*x+p*S,s[8]=h*v+d*w+p*M,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=a*l-u*s,d=c*s-o*l,p=n*f+i*h+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=f*m,e[1]=(r*c-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*n-r*l)*m,e[5]=(r*s-a*n)*m,e[6]=d*m,e[7]=(i*l-c*n)*m,e[8]=(o*n-i*s)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=n*s+i*l,r[3]=n*o+i*c,r[6]=n*a+i*u,r[1]=-i*s+n*l,r[4]=-i*o+n*c,r[7]=-i*a+n*u,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function rU(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Zee={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qh(t,e){return new Zee[t](e)}function Cm(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Uu(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Rv(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const gw={[aa]:{[ec]:Uu},[ec]:{[aa]:Rv}},Xs={legacyMode:!0,get workingColorSpace(){return ec},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(gw[e]&&gw[e][n]!==void 0){const i=gw[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},sU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yi={r:0,g:0,b:0},_o={h:0,s:0,l:0},U1={h:0,s:0,l:0};function Aw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function N1(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class ze{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=aa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xs.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=ec){return this.r=e,this.g=n,this.b=i,Xs.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=ec){if(e=d3(e,1),n=oi(n,0,1),i=oi(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=Aw(o,s,e+1/3),this.g=Aw(o,s,e),this.b=Aw(o,s,e-1/3)}return Xs.toWorkingColorSpace(this,r),this}setStyle(e,n=aa){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Xs.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Xs.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,u,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Xs.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Xs.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=aa){const i=sU[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Uu(e.r),this.g=Uu(e.g),this.b=Uu(e.b),this}copyLinearToSRGB(e){return this.r=Rv(e.r),this.g=Rv(e.g),this.b=Rv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=aa){return Xs.fromWorkingColorSpace(N1(this,yi),e),oi(yi.r*255,0,255)<<16^oi(yi.g*255,0,255)<<8^oi(yi.b*255,0,255)<<0}getHexString(e=aa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ec){Xs.fromWorkingColorSpace(N1(this,yi),n);const i=yi.r,r=yi.g,s=yi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=ec){return Xs.fromWorkingColorSpace(N1(this,yi),n),e.r=yi.r,e.g=yi.g,e.b=yi.b,e}getStyle(e=aa){return Xs.fromWorkingColorSpace(N1(this,yi),e),e!==aa?`color(${e} ${yi.r} ${yi.g} ${yi.b})`:`rgb(${yi.r*255|0},${yi.g*255|0},${yi.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(_o),_o.h+=e,_o.s+=n,_o.l+=i,this.setHSL(_o.h,_o.s,_o.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(_o),e.getHSL(U1);const i=Qp(_o.h,U1.h,n),r=Qp(_o.s,U1.s,n),s=Qp(_o.l,U1.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}ze.NAMES=sU;let Jf;class p3{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Jf===void 0&&(Jf=Cm("canvas")),Jf.width=e.width,Jf.height=e.height;const i=Jf.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Jf}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Cm("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Uu(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Uu(n[i]/255)*255):n[i]=Uu(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Cu{constructor(e=null){this.isSource=!0,this.uuid=Ms(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(vw(r[o].image)):s.push(vw(r[o]))}else s=vw(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function vw(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?p3.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ete=0;class bn extends Cr{constructor(e=bn.DEFAULT_IMAGE,n=bn.DEFAULT_MAPPING,i=Fi,r=Fi,s=Wt,o=wa,a=Fn,l=er,c=1,u=Ps){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ete++}),this.uuid=Ms(),this.name="",this.source=new Cu(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==wy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rs:e.x=e.x-Math.floor(e.x);break;case Fi:e.x=e.x<0?0:1;break;case bd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Rs:e.y=e.y-Math.floor(e.y);break;case Fi:e.y=e.y<0?0:1;break;case bd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}bn.DEFAULT_IMAGE=null;bn.DEFAULT_MAPPING=wy;class Pt{constructor(e=0,n=0,i=0,r=1){Pt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],p=l[9],m=l[2],A=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-m)<.01&&Math.abs(p-A)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+m)<.1&&Math.abs(p+A)<.1&&Math.abs(c+d+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,w=(d+1)/2,E=(v+1)/2,S=(u+h)/4,M=(f+m)/4,b=(p+A)/4;return x>w&&x>E?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=S/i,s=M/i):w>E?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=S/r,s=b/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=M/s,r=b/s),this.set(i,r,s,n),this}let y=Math.sqrt((A-p)*(A-p)+(f-m)*(f-m)+(h-u)*(h-u));return Math.abs(y)<.001&&(y=1),this.x=(A-p)/y,this.y=(f-m)/y,this.z=(h-u)/y,this.w=Math.acos((c+d+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kn extends Cr{constructor(e,n,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Pt(0,0,e,n),this.scissorTest=!1,this.viewport=new Pt(0,0,e,n);const r={width:e,height:n,depth:1};this.texture=new bn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Wt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Cu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $m extends bn{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=vn,this.minFilter=vn,this.wrapR=Fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tte extends kn{constructor(e,n,i){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new $m(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Zm extends bn{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=vn,this.minFilter=vn,this.wrapR=Fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nte extends kn{constructor(e,n,i){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Zm(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class ite extends kn{constructor(e,n,i,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class St{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const h=s[o+0],d=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(a===1){e[n+0]=h,e[n+1]=d,e[n+2]=p,e[n+3]=m;return}if(f!==m||l!==h||c!==d||u!==p){let A=1-a;const v=l*h+c*d+u*p+f*m,y=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const E=Math.sqrt(x),S=Math.atan2(E,v*y);A=Math.sin(A*S)/E,a=Math.sin(a*S)/E}const w=a*y;if(l=l*A+h*w,c=c*A+d*w,u=u*A+p*w,f=f*A+m*w,A===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=E,c*=E,u*=E,f*=E}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],h=s[o+1],d=s[o+2],p=s[o+3];return e[n]=a*p+u*f+l*d-c*h,e[n+1]=l*p+u*h+c*f-a*d,e[n+2]=c*p+u*d+a*h-l*f,e[n+3]=u*p-a*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),h=l(i/2),d=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"YZX":this._x=h*u*f+c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f-h*d*p;break;case"XZY":this._x=h*u*f-c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(u-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(oi(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*i+n*this._x,this._y=d*r+n*this._y,this._z=d*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,n=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(B4.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(B4.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,u=l*i+a*n-s*r,f=l*r+s*i-o*n,h=-s*n-o*i-a*r;return this.x=c*l+h*-s+u*-a-f*-o,this.y=u*l+h*-o+f*-s-c*-a,this.z=f*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return _w.copy(this).projectOnVector(e),this.sub(_w)}reflect(e){return this.sub(_w.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _w=new F,B4=new St;class Sn{constructor(e=new F(1/0,1/0,1/0),n=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],f=e[l+1],h=e[l+2];u<n&&(n=u),f<i&&(i=f),h<r&&(r=h),u>s&&(s=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),f=e.getY(l),h=e.getZ(l);u<n&&(n=u),f<i&&(i=f),h<r&&(r=h),u>s&&(s=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=jc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)jc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(jc)}else i.boundingBox===null&&i.computeBoundingBox(),yw.copy(i.boundingBox),yw.applyMatrix4(e.matrixWorld),this.union(yw);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,jc),jc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Q0),z1.subVectors(this.max,Q0),Kf.subVectors(e.a,Q0),$f.subVectors(e.b,Q0),Zf.subVectors(e.c,Q0),Rl.subVectors($f,Kf),Pl.subVectors(Zf,$f),qc.subVectors(Kf,Zf);let n=[0,-Rl.z,Rl.y,0,-Pl.z,Pl.y,0,-qc.z,qc.y,Rl.z,0,-Rl.x,Pl.z,0,-Pl.x,qc.z,0,-qc.x,-Rl.y,Rl.x,0,-Pl.y,Pl.x,0,-qc.y,qc.x,0];return!xw(n,Kf,$f,Zf,z1)||(n=[1,0,0,0,1,0,0,0,1],!xw(n,Kf,$f,Zf,z1))?!1:(G1.crossVectors(Rl,Pl),n=[G1.x,G1.y,G1.z],xw(n,Kf,$f,Zf,z1))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return jc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(jc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(La[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),La[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),La[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),La[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),La[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),La[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),La[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),La[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(La),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const La=[new F,new F,new F,new F,new F,new F,new F,new F],jc=new F,yw=new Sn,Kf=new F,$f=new F,Zf=new F,Rl=new F,Pl=new F,qc=new F,Q0=new F,z1=new F,G1=new F,Yc=new F;function xw(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Yc.fromArray(t,s);const a=r.x*Math.abs(Yc.x)+r.y*Math.abs(Yc.y)+r.z*Math.abs(Yc.z),l=e.dot(Yc),c=n.dot(Yc),u=i.dot(Yc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const rte=new Sn,R4=new F,Q1=new F,ww=new F;class zi{constructor(e=new F,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):rte.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ww.subVectors(e,this.center);const n=ww.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.add(ww.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?Q1.set(0,0,1).multiplyScalar(e.radius):Q1.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(R4.copy(e.center).add(Q1)),this.expandByPoint(R4.copy(e.center).sub(Q1)),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fa=new F,Ew=new F,H1=new F,Dl=new F,bw=new F,V1=new F,Sw=new F;class Ho{constructor(e=new F,n=new F(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Fa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Fa.copy(this.direction).multiplyScalar(n).add(this.origin),Fa.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){Ew.copy(e).add(n).multiplyScalar(.5),H1.copy(n).sub(e).normalize(),Dl.copy(this.origin).sub(Ew);const s=e.distanceTo(n)*.5,o=-this.direction.dot(H1),a=Dl.dot(this.direction),l=-Dl.dot(H1),c=Dl.lengthSq(),u=Math.abs(1-o*o);let f,h,d,p;if(u>0)if(f=o*l-a,h=o*a-l,p=s*u,f>=0)if(h>=-p)if(h<=p){const m=1/u;f*=m,h*=m,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h<=-p?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c):h<=p?(f=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+c):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(H1).multiplyScalar(h).add(Ew),d}intersectSphere(e,n){Fa.subVectors(e.center,this.origin);const i=Fa.dot(this.direction),r=Fa.dot(Fa)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Fa)!==null}intersectTriangle(e,n,i,r,s){bw.subVectors(n,e),V1.subVectors(i,e),Sw.crossVectors(bw,V1);let o=this.direction.dot(Sw),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Dl.subVectors(this.origin,e);const l=a*this.direction.dot(V1.crossVectors(Dl,V1));if(l<0)return null;const c=a*this.direction.dot(bw.cross(Dl));if(c<0||l+c>o)return null;const u=-a*Dl.dot(Sw);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ne{constructor(){Ne.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,c,u,f,h,d,p,m,A){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=f,v[14]=h,v[3]=d,v[7]=p,v[11]=m,v[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ne().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/eh.setFromMatrixColumn(e,0).length(),s=1/eh.setFromMatrixColumn(e,1).length(),o=1/eh.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*u,d=o*f,p=a*u,m=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+p*c,n[5]=h-m*c,n[9]=-a*l,n[2]=m-h*c,n[6]=p+d*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,p=c*u,m=c*f;n[0]=h+m*a,n[4]=p*a-d,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=d*a-p,n[6]=m+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,p=c*u,m=c*f;n[0]=h-m*a,n[4]=-o*f,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*u,n[9]=m-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,d=o*f,p=a*u,m=a*f;n[0]=l*u,n[4]=p*c-d,n[8]=h*c+m,n[1]=l*f,n[5]=m*c+h,n[9]=d*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=m-h*f,n[8]=p*f+d,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=d*f+p,n[10]=h-m*f}else if(e.order==="XZY"){const h=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+m,n[5]=o*u,n[9]=d*f-p,n[2]=p*f-d,n[6]=a*u,n[10]=m*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ste,e,ote)}lookAt(e,n,i){const r=this.elements;return gs.subVectors(e,n),gs.lengthSq()===0&&(gs.z=1),gs.normalize(),Ll.crossVectors(i,gs),Ll.lengthSq()===0&&(Math.abs(i.z)===1?gs.x+=1e-4:gs.z+=1e-4,gs.normalize(),Ll.crossVectors(i,gs)),Ll.normalize(),W1.crossVectors(gs,Ll),r[0]=Ll.x,r[4]=W1.x,r[8]=gs.x,r[1]=Ll.y,r[5]=W1.y,r[9]=gs.y,r[2]=Ll.z,r[6]=W1.z,r[10]=gs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],p=i[2],m=i[6],A=i[10],v=i[14],y=i[3],x=i[7],w=i[11],E=i[15],S=r[0],M=r[4],b=r[8],B=r[12],T=r[1],k=r[5],D=r[9],N=r[13],O=r[2],Y=r[6],q=r[10],K=r[14],z=r[3],U=r[7],Q=r[11],H=r[15];return s[0]=o*S+a*T+l*O+c*z,s[4]=o*M+a*k+l*Y+c*U,s[8]=o*b+a*D+l*q+c*Q,s[12]=o*B+a*N+l*K+c*H,s[1]=u*S+f*T+h*O+d*z,s[5]=u*M+f*k+h*Y+d*U,s[9]=u*b+f*D+h*q+d*Q,s[13]=u*B+f*N+h*K+d*H,s[2]=p*S+m*T+A*O+v*z,s[6]=p*M+m*k+A*Y+v*U,s[10]=p*b+m*D+A*q+v*Q,s[14]=p*B+m*N+A*K+v*H,s[3]=y*S+x*T+w*O+E*z,s[7]=y*M+x*k+w*Y+E*U,s[11]=y*b+x*D+w*q+E*Q,s[15]=y*B+x*N+w*K+E*H,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],p=e[3],m=e[7],A=e[11],v=e[15];return p*(+s*l*f-r*c*f-s*a*h+i*c*h+r*a*d-i*l*d)+m*(+n*l*d-n*c*h+s*o*h-r*o*d+r*c*u-s*l*u)+A*(+n*c*f-n*a*d-s*o*f+i*o*d+s*a*u-i*c*u)+v*(-r*a*u-n*l*f+n*a*h+r*o*f-i*o*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],A=e[14],v=e[15],y=f*A*c-m*h*c+m*l*d-a*A*d-f*l*v+a*h*v,x=p*h*c-u*A*c-p*l*d+o*A*d+u*l*v-o*h*v,w=u*m*c-p*f*c+p*a*d-o*m*d-u*a*v+o*f*v,E=p*f*l-u*m*l-p*a*h+o*m*h+u*a*A-o*f*A,S=n*y+i*x+r*w+s*E;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/S;return e[0]=y*M,e[1]=(m*h*s-f*A*s-m*r*d+i*A*d+f*r*v-i*h*v)*M,e[2]=(a*A*s-m*l*s+m*r*c-i*A*c-a*r*v+i*l*v)*M,e[3]=(f*l*s-a*h*s-f*r*c+i*h*c+a*r*d-i*l*d)*M,e[4]=x*M,e[5]=(u*A*s-p*h*s+p*r*d-n*A*d-u*r*v+n*h*v)*M,e[6]=(p*l*s-o*A*s-p*r*c+n*A*c+o*r*v-n*l*v)*M,e[7]=(o*h*s-u*l*s+u*r*c-n*h*c-o*r*d+n*l*d)*M,e[8]=w*M,e[9]=(p*f*s-u*m*s-p*i*d+n*m*d+u*i*v-n*f*v)*M,e[10]=(o*m*s-p*a*s+p*i*c-n*m*c-o*i*v+n*a*v)*M,e[11]=(u*a*s-o*f*s-u*i*c+n*f*c+o*i*d-n*a*d)*M,e[12]=E*M,e[13]=(u*m*r-p*f*r+p*i*h-n*m*h-u*i*A+n*f*A)*M,e[14]=(p*a*r-o*m*r-p*i*l+n*m*l+o*i*A-n*a*A)*M,e[15]=(o*f*r-u*a*r+u*i*l-n*f*l-o*i*h+n*a*h)*M,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,f=a+a,h=s*c,d=s*u,p=s*f,m=o*u,A=o*f,v=a*f,y=l*c,x=l*u,w=l*f,E=i.x,S=i.y,M=i.z;return r[0]=(1-(m+v))*E,r[1]=(d+w)*E,r[2]=(p-x)*E,r[3]=0,r[4]=(d-w)*S,r[5]=(1-(h+v))*S,r[6]=(A+y)*S,r[7]=0,r[8]=(p+x)*M,r[9]=(A-y)*M,r[10]=(1-(h+m))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=eh.set(r[0],r[1],r[2]).length();const o=eh.set(r[4],r[5],r[6]).length(),a=eh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],yo.copy(this);const c=1/s,u=1/o,f=1/a;return yo.elements[0]*=c,yo.elements[1]*=c,yo.elements[2]*=c,yo.elements[4]*=u,yo.elements[5]*=u,yo.elements[6]*=u,yo.elements[8]*=f,yo.elements[9]*=f,yo.elements[10]*=f,n.setFromRotationMatrix(yo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(i-r),u=(n+e)/(n-e),f=(i+r)/(i-r),h=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),c=1/(i-r),u=1/(o-s),f=(n+e)*l,h=(i+r)*c,d=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const eh=new F,yo=new Ne,ste=new F(0,0,0),ote=new F(1,1,1),Ll=new F,W1=new F,gs=new F,P4=new Ne,D4=new St;class xr{constructor(e=0,n=0,i=0,r=xr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],d=r[10];switch(n){case"XYZ":this._y=Math.asin(oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-oi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(oi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-oi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(oi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return P4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(P4,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return D4.setFromEuler(this),this.setFromQuaternion(D4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}xr.DefaultOrder="XYZ";xr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Nu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ate=0;const L4=new F,th=new St,ka=new Ne,j1=new F,H0=new F,lte=new F,cte=new St,F4=new F(1,0,0),k4=new F(0,1,0),O4=new F(0,0,1),ute={type:"added"},U4={type:"removed"};class It extends Cr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ate++}),this.uuid=Ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=It.DefaultUp.clone();const e=new F,n=new xr,i=new St,r=new F(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ne},normalMatrix:{value:new yr}}),this.matrix=new Ne,this.matrixWorld=new Ne,this.matrixAutoUpdate=It.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=It.DefaultMatrixWorldAutoUpdate,this.layers=new Nu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return th.setFromAxisAngle(e,n),this.quaternion.multiply(th),this}rotateOnWorldAxis(e,n){return th.setFromAxisAngle(e,n),this.quaternion.premultiply(th),this}rotateX(e){return this.rotateOnAxis(F4,e)}rotateY(e){return this.rotateOnAxis(k4,e)}rotateZ(e){return this.rotateOnAxis(O4,e)}translateOnAxis(e,n){return L4.copy(e).applyQuaternion(this.quaternion),this.position.add(L4.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(F4,e)}translateY(e){return this.translateOnAxis(k4,e)}translateZ(e){return this.translateOnAxis(O4,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ka.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?j1.copy(e):j1.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),H0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ka.lookAt(H0,j1,this.up):ka.lookAt(j1,H0,this.up),this.quaternion.setFromRotationMatrix(ka),r&&(ka.extractRotation(r.matrixWorld),th.setFromRotationMatrix(ka),this.quaternion.premultiply(th.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ute)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(U4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(U4)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ka.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ka.multiply(e.parent.matrixWorld)),e.applyMatrix4(ka),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(H0,e,lte),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(H0,cte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),h=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),d.length>0&&(i.animations=d),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}It.DefaultUp=new F(0,1,0);It.DefaultMatrixAutoUpdate=!0;It.DefaultMatrixWorldAutoUpdate=!0;const xo=new F,Oa=new F,Cw=new F,Ua=new F,nh=new F,ih=new F,N4=new F,Mw=new F,Iw=new F,Tw=new F;class _r{constructor(e=new F,n=new F,i=new F){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),xo.subVectors(e,n),r.cross(xo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){xo.subVectors(r,n),Oa.subVectors(i,n),Cw.subVectors(e,n);const o=xo.dot(xo),a=xo.dot(Oa),l=xo.dot(Cw),c=Oa.dot(Oa),u=Oa.dot(Cw),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,d=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-d-p,p,d)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Ua),Ua.x>=0&&Ua.y>=0&&Ua.x+Ua.y<=1}static getUV(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,Ua),l.set(0,0),l.addScaledVector(s,Ua.x),l.addScaledVector(o,Ua.y),l.addScaledVector(a,Ua.z),l}static isFrontFacing(e,n,i,r){return xo.subVectors(i,n),Oa.subVectors(e,n),xo.cross(Oa).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xo.subVectors(this.c,this.b),Oa.subVectors(this.a,this.b),xo.cross(Oa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return _r.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return _r.getUV(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return _r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;nh.subVectors(r,i),ih.subVectors(s,i),Mw.subVectors(e,i);const l=nh.dot(Mw),c=ih.dot(Mw);if(l<=0&&c<=0)return n.copy(i);Iw.subVectors(e,r);const u=nh.dot(Iw),f=ih.dot(Iw);if(u>=0&&f<=u)return n.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector(nh,o);Tw.subVectors(e,s);const d=nh.dot(Tw),p=ih.dot(Tw);if(p>=0&&d<=p)return n.copy(s);const m=d*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(ih,a);const A=u*p-d*f;if(A<=0&&f-u>=0&&d-p>=0)return N4.subVectors(s,r),a=(f-u)/(f-u+(d-p)),n.copy(r).addScaledVector(N4,a);const v=1/(A+m+h);return o=m*v,a=h*v,n.copy(i).addScaledVector(nh,o).addScaledVector(ih,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let fte=0;class mi extends Cr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:fte++}),this.uuid=Ms(),this.name="",this.type="Material",this.blending=Lu,this.side=Qo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=i3,this.blendDst=r3,this.blendEquation=du,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=A_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=h3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ku,this.stencilZFail=ku,this.stencilZPass=ku,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const r=this[n];if(r===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Lu&&(i.blending=this.blending),this.side!==Qo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class wr extends mi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Km,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const fi=new F,q1=new Ae;class bt{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=bm,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)q1.fromBufferAttribute(this,n),q1.applyMatrix3(e),this.setXY(n,q1.x,q1.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix3(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix4(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.applyNormalMatrix(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)fi.fromBufferAttribute(this,n),fi.transformDirection(e),this.setXYZ(n,fi.x,fi.y,fi.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Za(n,this.array)),n}setX(e,n){return this.normalized&&(n=wn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Za(n,this.array)),n}setY(e,n){return this.normalized&&(n=wn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Za(n,this.array)),n}setZ(e,n){return this.normalized&&(n=wn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Za(n,this.array)),n}setW(e,n){return this.normalized&&(n=wn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=wn(n,this.array),i=wn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=wn(n,this.array),i=wn(i,this.array),r=wn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=wn(n,this.array),i=wn(i,this.array),r=wn(r,this.array),s=wn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bm&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class hte extends bt{constructor(e,n,i){super(new Int8Array(e),n,i)}}class dte extends bt{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class pte extends bt{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class mte extends bt{constructor(e,n,i){super(new Int16Array(e),n,i)}}class Cy extends bt{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class gte extends bt{constructor(e,n,i){super(new Int32Array(e),n,i)}}class m3 extends bt{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class Ate extends bt{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}}class et extends bt{constructor(e,n,i){super(new Float32Array(e),n,i)}}class vte extends bt{constructor(e,n,i){super(new Float64Array(e),n,i)}}let _te=0;const qs=new Ne,Bw=new It,rh=new F,As=new Sn,V0=new Sn,Pi=new F;class ht extends Cr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_te++}),this.uuid=Ms(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rU(e)?m3:Cy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new yr().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qs.makeRotationFromQuaternion(e),this.applyMatrix4(qs),this}rotateX(e){return qs.makeRotationX(e),this.applyMatrix4(qs),this}rotateY(e){return qs.makeRotationY(e),this.applyMatrix4(qs),this}rotateZ(e){return qs.makeRotationZ(e),this.applyMatrix4(qs),this}translate(e,n,i){return qs.makeTranslation(e,n,i),this.applyMatrix4(qs),this}scale(e,n,i){return qs.makeScale(e,n,i),this.applyMatrix4(qs),this}lookAt(e){return Bw.lookAt(e),Bw.updateMatrix(),this.applyMatrix4(Bw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rh).negate(),this.translate(rh.x,rh.y,rh.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new et(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sn);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];As.setFromBufferAttribute(s),this.morphTargetsRelative?(Pi.addVectors(this.boundingBox.min,As.min),this.boundingBox.expandByPoint(Pi),Pi.addVectors(this.boundingBox.max,As.max),this.boundingBox.expandByPoint(Pi)):(this.boundingBox.expandByPoint(As.min),this.boundingBox.expandByPoint(As.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(As.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];V0.setFromBufferAttribute(a),this.morphTargetsRelative?(Pi.addVectors(As.min,V0.min),As.expandByPoint(Pi),Pi.addVectors(As.max,V0.max),As.expandByPoint(Pi)):(As.expandByPoint(V0.min),As.expandByPoint(V0.max))}As.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Pi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Pi));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Pi.fromBufferAttribute(a,c),l&&(rh.fromBufferAttribute(e,c),Pi.add(rh)),r=Math.max(r,i.distanceToSquared(Pi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new bt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let T=0;T<a;T++)c[T]=new F,u[T]=new F;const f=new F,h=new F,d=new F,p=new Ae,m=new Ae,A=new Ae,v=new F,y=new F;function x(T,k,D){f.fromArray(r,T*3),h.fromArray(r,k*3),d.fromArray(r,D*3),p.fromArray(o,T*2),m.fromArray(o,k*2),A.fromArray(o,D*2),h.sub(f),d.sub(f),m.sub(p),A.sub(p);const N=1/(m.x*A.y-A.x*m.y);!isFinite(N)||(v.copy(h).multiplyScalar(A.y).addScaledVector(d,-m.y).multiplyScalar(N),y.copy(d).multiplyScalar(m.x).addScaledVector(h,-A.x).multiplyScalar(N),c[T].add(v),c[k].add(v),c[D].add(v),u[T].add(y),u[k].add(y),u[D].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let T=0,k=w.length;T<k;++T){const D=w[T],N=D.start,O=D.count;for(let Y=N,q=N+O;Y<q;Y+=3)x(i[Y+0],i[Y+1],i[Y+2])}const E=new F,S=new F,M=new F,b=new F;function B(T){M.fromArray(s,T*3),b.copy(M);const k=c[T];E.copy(k),E.sub(M.multiplyScalar(M.dot(k))).normalize(),S.crossVectors(b,k);const N=S.dot(u[T])<0?-1:1;l[T*4]=E.x,l[T*4+1]=E.y,l[T*4+2]=E.z,l[T*4+3]=N}for(let T=0,k=w.length;T<k;++T){const D=w[T],N=D.start,O=D.count;for(let Y=N,q=N+O;Y<q;Y+=3)B(i[Y+0]),B(i[Y+1]),B(i[Y+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new bt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,u=new F,f=new F;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),m=e.getX(h+1),A=e.getX(h+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),o.fromBufferAttribute(n,A),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,A),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(A,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)r.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Pi.fromBufferAttribute(e,n),Pi.normalize(),e.setXYZ(n,Pi.x,Pi.y,Pi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,h=new c.constructor(l.length*u);let d=0,p=0;for(let m=0,A=l.length;m<A;m++){a.isInterleavedBufferAttribute?d=l[m]*a.data.stride+a.offset:d=l[m]*u;for(let v=0;v<u;v++)h[p++]=c[d++]}return new bt(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ht,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,i);l.push(d)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const z4=new Ne,sh=new Ho,Rw=new zi,Fl=new F,kl=new F,Ol=new F,Pw=new F,Dw=new F,Lw=new F,Y1=new F,X1=new F,J1=new F,K1=new Ae,$1=new Ae,Z1=new Ae,Fw=new F,eA=new F;class $e extends It{constructor(e=new ht,n=new wr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Rw.copy(i.boundingSphere),Rw.applyMatrix4(s),e.ray.intersectsSphere(Rw)===!1)||(z4.copy(s).invert(),sh.copy(e.ray).applyMatrix4(z4),i.boundingBox!==null&&sh.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,h=i.attributes.uv2,d=i.groups,p=i.drawRange;if(a!==null)if(Array.isArray(r))for(let m=0,A=d.length;m<A;m++){const v=d[m],y=r[v.materialIndex],x=Math.max(v.start,p.start),w=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));for(let E=x,S=w;E<S;E+=3){const M=a.getX(E),b=a.getX(E+1),B=a.getX(E+2);o=tA(this,y,e,sh,l,c,u,f,h,M,b,B),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const m=Math.max(0,p.start),A=Math.min(a.count,p.start+p.count);for(let v=m,y=A;v<y;v+=3){const x=a.getX(v),w=a.getX(v+1),E=a.getX(v+2);o=tA(this,r,e,sh,l,c,u,f,h,x,w,E),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,A=d.length;m<A;m++){const v=d[m],y=r[v.materialIndex],x=Math.max(v.start,p.start),w=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let E=x,S=w;E<S;E+=3){const M=E,b=E+1,B=E+2;o=tA(this,y,e,sh,l,c,u,f,h,M,b,B),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=v.materialIndex,n.push(o))}}else{const m=Math.max(0,p.start),A=Math.min(l.count,p.start+p.count);for(let v=m,y=A;v<y;v+=3){const x=v,w=v+1,E=v+2;o=tA(this,r,e,sh,l,c,u,f,h,x,w,E),o&&(o.faceIndex=Math.floor(v/3),n.push(o))}}}}function yte(t,e,n,i,r,s,o,a){let l;if(e.side===Er?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side!==bi,a),l===null)return null;eA.copy(a),eA.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(eA);return c<n.near||c>n.far?null:{distance:c,point:eA.clone(),object:t}}function tA(t,e,n,i,r,s,o,a,l,c,u,f){Fl.fromBufferAttribute(r,c),kl.fromBufferAttribute(r,u),Ol.fromBufferAttribute(r,f);const h=t.morphTargetInfluences;if(s&&h){Y1.set(0,0,0),X1.set(0,0,0),J1.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const A=h[p],v=s[p];A!==0&&(Pw.fromBufferAttribute(v,c),Dw.fromBufferAttribute(v,u),Lw.fromBufferAttribute(v,f),o?(Y1.addScaledVector(Pw,A),X1.addScaledVector(Dw,A),J1.addScaledVector(Lw,A)):(Y1.addScaledVector(Pw.sub(Fl),A),X1.addScaledVector(Dw.sub(kl),A),J1.addScaledVector(Lw.sub(Ol),A)))}Fl.add(Y1),kl.add(X1),Ol.add(J1)}t.isSkinnedMesh&&(t.boneTransform(c,Fl),t.boneTransform(u,kl),t.boneTransform(f,Ol));const d=yte(t,e,n,i,Fl,kl,Ol,Fw);if(d){a&&(K1.fromBufferAttribute(a,c),$1.fromBufferAttribute(a,u),Z1.fromBufferAttribute(a,f),d.uv=_r.getUV(Fw,Fl,kl,Ol,K1,$1,Z1,new Ae)),l&&(K1.fromBufferAttribute(l,c),$1.fromBufferAttribute(l,u),Z1.fromBufferAttribute(l,f),d.uv2=_r.getUV(Fw,Fl,kl,Ol,K1,$1,Z1,new Ae));const p={a:c,b:u,c:f,normal:new F,materialIndex:0};_r.getNormal(Fl,kl,Ol,p.normal),d.face=p}return d}class Ar extends ht{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,i,n,e,o,s,0),p("z","y","x",1,-1,i,n,-e,o,s,1),p("x","z","y",1,1,e,i,n,r,o,2),p("x","z","y",1,-1,e,i,-n,r,o,3),p("x","y","z",1,-1,e,n,i,r,s,4),p("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new et(c,3)),this.setAttribute("normal",new et(u,3)),this.setAttribute("uv",new et(f,2));function p(m,A,v,y,x,w,E,S,M,b,B){const T=w/M,k=E/b,D=w/2,N=E/2,O=S/2,Y=M+1,q=b+1;let K=0,z=0;const U=new F;for(let Q=0;Q<q;Q++){const H=Q*k-N;for(let V=0;V<Y;V++){const J=V*T-D;U[m]=J*y,U[A]=H*x,U[v]=O,c.push(U.x,U.y,U.z),U[m]=0,U[A]=0,U[v]=S>0?1:-1,u.push(U.x,U.y,U.z),f.push(V/M),f.push(1-Q/b),K+=1}}for(let Q=0;Q<b;Q++)for(let H=0;H<M;H++){const V=h+H+Y*Q,J=h+H+Y*(Q+1),j=h+(H+1)+Y*(Q+1),re=h+(H+1)+Y*Q;l.push(V,J,re),l.push(J,j,re),z+=6}a.addGroup(d,z,B),d+=z,h+=K}}static fromJSON(e){return new Ar(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Cd(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function pr(t){const e={};for(let n=0;n<t.length;n++){const i=Cd(t[n]);for(const r in i)e[r]=i[r]}return e}function xte(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}const Mc={clone:Cd,merge:pr};var wte=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ete=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class $n extends mi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=wte,this.fragmentShader=Ete,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cd(e.uniforms),this.uniformsGroups=xte(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class yf extends It{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ne,this.projectionMatrix=new Ne,this.projectionMatrixInverse=new Ne}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class dn extends yf{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Sm*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ou*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sm*2*Math.atan(Math.tan(Ou*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Ou*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const oh=90,ah=1;class g3 extends It{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new dn(oh,ah,e,n);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new F(1,0,0)),this.add(r);const s=new dn(oh,ah,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new F(-1,0,0)),this.add(s);const o=new dn(oh,ah,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new F(0,1,0)),this.add(o);const a=new dn(oh,ah,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new F(0,-1,0)),this.add(a);const l=new dn(oh,ah,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new F(0,0,1)),this.add(l);const c=new dn(oh,ah,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new F(0,0,-1)),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),f=e.toneMapping,h=e.xr.enabled;e.toneMapping=Fo,e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class eg extends bn{constructor(e,n,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:ll,super(e,n,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tg extends kn{constructor(e,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new eg(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Wt}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ar(5,5,5),s=new $n({name:"CubemapFromEquirect",uniforms:Cd(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Er,blending:Aa});s.uniforms.tEquirect.value=n;const o=new $e(r,s),a=n.minFilter;return n.minFilter===wa&&(n.minFilter=Wt),new g3(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const kw=new F,bte=new F,Ste=new yr;class Zr{constructor(e=new F(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=kw.subVectors(i,n).cross(bte.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(kw),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Ste.getNormalMatrix(e),r=this.coplanarPoint(kw).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lh=new zi,nA=new F;class ng{constructor(e=new Zr,n=new Zr,i=new Zr,r=new Zr,s=new Zr,o=new Zr){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],f=i[7],h=i[8],d=i[9],p=i[10],m=i[11],A=i[12],v=i[13],y=i[14],x=i[15];return n[0].setComponents(a-r,f-l,m-h,x-A).normalize(),n[1].setComponents(a+r,f+l,m+h,x+A).normalize(),n[2].setComponents(a+s,f+c,m+d,x+v).normalize(),n[3].setComponents(a-s,f-c,m-d,x-v).normalize(),n[4].setComponents(a-o,f-u,m-p,x-y).normalize(),n[5].setComponents(a+o,f+u,m+p,x+y).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),lh.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(lh)}intersectsSprite(e){return lh.center.set(0,0,0),lh.radius=.7071067811865476,lh.applyMatrix4(e.matrixWorld),this.intersectsSphere(lh)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(nA.x=r.normal.x>0?e.max.x:e.min.x,nA.y=r.normal.y>0?e.max.y:e.min.y,nA.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(nA)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function oU(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Cte(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,h=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,f,h),c.onUploadCallback();let p;if(f instanceof Float32Array)p=5126;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(f instanceof Int16Array)p=5122;else if(f instanceof Uint32Array)p=5125;else if(f instanceof Int32Array)p=5124;else if(f instanceof Int8Array)p=5120;else if(f instanceof Uint8Array)p=5121;else if(f instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:d,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,f){const h=u.array,d=u.updateRange;t.bindBuffer(f,c),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(t.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f===void 0?i.set(c,r(c,u)):f.version<c.version&&(s(f.buffer,c,u),f.version=c.version)}return{get:o,remove:a,update:l}}class Nr extends ht{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,h=n/l,d=[],p=[],m=[],A=[];for(let v=0;v<u;v++){const y=v*h-o;for(let x=0;x<c;x++){const w=x*f-s;p.push(w,-y,0),m.push(0,0,1),A.push(x/a),A.push(1-v/l)}}for(let v=0;v<l;v++)for(let y=0;y<a;y++){const x=y+c*v,w=y+c*(v+1),E=y+1+c*(v+1),S=y+1+c*v;d.push(x,w,S),d.push(w,E,S)}this.setIndex(d),this.setAttribute("position",new et(p,3)),this.setAttribute("normal",new et(m,3)),this.setAttribute("uv",new et(A,2))}static fromJSON(e){return new Nr(e.width,e.height,e.widthSegments,e.heightSegments)}}var Mte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Ite=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tte=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Bte=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rte=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Pte=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Dte="vec3 transformed = vec3( position );",Lte=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fte=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kte=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Ote=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ute=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Nte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Gte=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qte=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Hte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Vte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Wte=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,jte=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,qte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Yte=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Xte=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Jte=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Kte=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$te=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Zte="gl_FragColor = linearToOutputTexel( gl_FragColor );",ene=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,tne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ine=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,one=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ane=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,une=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fne=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,dne=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,mne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gne=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Ane=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,_ne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,xne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,wne=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ene=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Sne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Cne=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Mne=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ine=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Tne=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Bne=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Rne=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Pne=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Dne=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Lne=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fne=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kne=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,One=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Une=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Nne=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,zne=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Gne=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Qne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vne=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Wne=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,jne=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,qne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Yne=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Xne=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Jne=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Kne=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,$ne=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Zne=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rie=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,sie=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oie=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,aie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,uie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,die=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gie=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Aie=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,vie=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,_ie=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,yie=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,xie=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,wie=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Eie=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,bie=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Sie=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cie=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Mie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Iie=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Tie=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Bie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Rie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Pie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Die=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Lie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Fie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Oie=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Uie=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nie=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Qie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Vie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Wie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Yie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Jie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$ie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zie=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ere=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vt={alphamap_fragment:Mte,alphamap_pars_fragment:Ite,alphatest_fragment:Tte,alphatest_pars_fragment:Bte,aomap_fragment:Rte,aomap_pars_fragment:Pte,begin_vertex:Dte,beginnormal_vertex:Lte,bsdfs:Fte,iridescence_fragment:kte,bumpmap_pars_fragment:Ote,clipping_planes_fragment:Ute,clipping_planes_pars_fragment:Nte,clipping_planes_pars_vertex:zte,clipping_planes_vertex:Gte,color_fragment:Qte,color_pars_fragment:Hte,color_pars_vertex:Vte,color_vertex:Wte,common:jte,cube_uv_reflection_fragment:qte,defaultnormal_vertex:Yte,displacementmap_pars_vertex:Xte,displacementmap_vertex:Jte,emissivemap_fragment:Kte,emissivemap_pars_fragment:$te,encodings_fragment:Zte,encodings_pars_fragment:ene,envmap_fragment:tne,envmap_common_pars_fragment:nne,envmap_pars_fragment:ine,envmap_pars_vertex:rne,envmap_physical_pars_fragment:gne,envmap_vertex:sne,fog_vertex:one,fog_pars_vertex:ane,fog_fragment:lne,fog_pars_fragment:cne,gradientmap_pars_fragment:une,lightmap_fragment:fne,lightmap_pars_fragment:hne,lights_lambert_fragment:dne,lights_lambert_pars_fragment:pne,lights_pars_begin:mne,lights_toon_fragment:Ane,lights_toon_pars_fragment:vne,lights_phong_fragment:_ne,lights_phong_pars_fragment:yne,lights_physical_fragment:xne,lights_physical_pars_fragment:wne,lights_fragment_begin:Ene,lights_fragment_maps:bne,lights_fragment_end:Sne,logdepthbuf_fragment:Cne,logdepthbuf_pars_fragment:Mne,logdepthbuf_pars_vertex:Ine,logdepthbuf_vertex:Tne,map_fragment:Bne,map_pars_fragment:Rne,map_particle_fragment:Pne,map_particle_pars_fragment:Dne,metalnessmap_fragment:Lne,metalnessmap_pars_fragment:Fne,morphcolor_vertex:kne,morphnormal_vertex:One,morphtarget_pars_vertex:Une,morphtarget_vertex:Nne,normal_fragment_begin:zne,normal_fragment_maps:Gne,normal_pars_fragment:Qne,normal_pars_vertex:Hne,normal_vertex:Vne,normalmap_pars_fragment:Wne,clearcoat_normal_fragment_begin:jne,clearcoat_normal_fragment_maps:qne,clearcoat_pars_fragment:Yne,iridescence_pars_fragment:Xne,output_fragment:Jne,packing:Kne,premultiplied_alpha_fragment:$ne,project_vertex:Zne,dithering_fragment:eie,dithering_pars_fragment:tie,roughnessmap_fragment:nie,roughnessmap_pars_fragment:iie,shadowmap_pars_fragment:rie,shadowmap_pars_vertex:sie,shadowmap_vertex:oie,shadowmask_pars_fragment:aie,skinbase_vertex:lie,skinning_pars_vertex:cie,skinning_vertex:uie,skinnormal_vertex:fie,specularmap_fragment:hie,specularmap_pars_fragment:die,tonemapping_fragment:pie,tonemapping_pars_fragment:mie,transmission_fragment:gie,transmission_pars_fragment:Aie,uv_pars_fragment:vie,uv_pars_vertex:_ie,uv_vertex:yie,uv2_pars_fragment:xie,uv2_pars_vertex:wie,uv2_vertex:Eie,worldpos_vertex:bie,background_vert:Sie,background_frag:Cie,cube_vert:Mie,cube_frag:Iie,depth_vert:Tie,depth_frag:Bie,distanceRGBA_vert:Rie,distanceRGBA_frag:Pie,equirect_vert:Die,equirect_frag:Lie,linedashed_vert:Fie,linedashed_frag:kie,meshbasic_vert:Oie,meshbasic_frag:Uie,meshlambert_vert:Nie,meshlambert_frag:zie,meshmatcap_vert:Gie,meshmatcap_frag:Qie,meshnormal_vert:Hie,meshnormal_frag:Vie,meshphong_vert:Wie,meshphong_frag:jie,meshphysical_vert:qie,meshphysical_frag:Yie,meshtoon_vert:Xie,meshtoon_frag:Jie,points_vert:Kie,points_frag:$ie,shadow_vert:Zie,shadow_frag:ere,sprite_vert:tre,sprite_frag:nre},Ke={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new yr},uv2Transform:{value:new yr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yr}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yr}}},zr={basic:{uniforms:pr([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:vt.meshbasic_vert,fragmentShader:vt.meshbasic_frag},lambert:{uniforms:pr([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new ze(0)}}]),vertexShader:vt.meshlambert_vert,fragmentShader:vt.meshlambert_frag},phong:{uniforms:pr([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:vt.meshphong_vert,fragmentShader:vt.meshphong_frag},standard:{uniforms:pr([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vt.meshphysical_vert,fragmentShader:vt.meshphysical_frag},toon:{uniforms:pr([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new ze(0)}}]),vertexShader:vt.meshtoon_vert,fragmentShader:vt.meshtoon_frag},matcap:{uniforms:pr([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:vt.meshmatcap_vert,fragmentShader:vt.meshmatcap_frag},points:{uniforms:pr([Ke.points,Ke.fog]),vertexShader:vt.points_vert,fragmentShader:vt.points_frag},dashed:{uniforms:pr([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vt.linedashed_vert,fragmentShader:vt.linedashed_frag},depth:{uniforms:pr([Ke.common,Ke.displacementmap]),vertexShader:vt.depth_vert,fragmentShader:vt.depth_frag},normal:{uniforms:pr([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:vt.meshnormal_vert,fragmentShader:vt.meshnormal_frag},sprite:{uniforms:pr([Ke.sprite,Ke.fog]),vertexShader:vt.sprite_vert,fragmentShader:vt.sprite_frag},background:{uniforms:{uvTransform:{value:new yr},t2D:{value:null}},vertexShader:vt.background_vert,fragmentShader:vt.background_frag},cube:{uniforms:pr([Ke.envmap,{opacity:{value:1}}]),vertexShader:vt.cube_vert,fragmentShader:vt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vt.equirect_vert,fragmentShader:vt.equirect_frag},distanceRGBA:{uniforms:pr([Ke.common,Ke.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vt.distanceRGBA_vert,fragmentShader:vt.distanceRGBA_frag},shadow:{uniforms:pr([Ke.lights,Ke.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:vt.shadow_vert,fragmentShader:vt.shadow_frag}};zr.physical={uniforms:pr([zr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null}}]),vertexShader:vt.meshphysical_vert,fragmentShader:vt.meshphysical_frag};function ire(t,e,n,i,r,s){const o=new ze(0);let a=r===!0?0:1,l,c,u=null,f=0,h=null;function d(m,A){let v=!1,y=A.isScene===!0?A.background:null;y&&y.isTexture&&(y=e.get(y));const x=t.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(y=null),y===null?p(o,a):y&&y.isColor&&(p(y,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Hd)?(c===void 0&&(c=new $e(new Ar(1,1,1),new $n({name:"BackgroundCubeMaterial",uniforms:Cd(zr.cube.uniforms),vertexShader:zr.cube.vertexShader,fragmentShader:zr.cube.fragmentShader,side:Er,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,S,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(u!==y||f!==y.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,u=y,f=y.version,h=t.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new $e(new Nr(2,2),new $n({name:"BackgroundMaterial",uniforms:Cd(zr.background.uniforms),vertexShader:zr.background.vertexShader,fragmentShader:zr.background.fragmentShader,side:Qo,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||f!==y.version||h!==t.toneMapping)&&(l.material.needsUpdate=!0,u=y,f=y.version,h=t.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,A){n.buffers.color.setClear(m.r,m.g,m.b,A,s)}return{getClearColor:function(){return o},setClearColor:function(m,A=1){o.set(m),a=A,p(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,p(o,a)},render:d}}function rre(t,e,n,i){const r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=A(null);let c=l,u=!1;function f(O,Y,q,K,z){let U=!1;if(o){const Q=m(K,q,Y);c!==Q&&(c=Q,d(c.object)),U=v(O,K,q,z),U&&y(O,K,q,z)}else{const Q=Y.wireframe===!0;(c.geometry!==K.id||c.program!==q.id||c.wireframe!==Q)&&(c.geometry=K.id,c.program=q.id,c.wireframe=Q,U=!0)}z!==null&&n.update(z,34963),(U||u)&&(u=!1,b(O,Y,q,K),z!==null&&t.bindBuffer(34963,n.get(z).buffer))}function h(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function d(O){return i.isWebGL2?t.bindVertexArray(O):s.bindVertexArrayOES(O)}function p(O){return i.isWebGL2?t.deleteVertexArray(O):s.deleteVertexArrayOES(O)}function m(O,Y,q){const K=q.wireframe===!0;let z=a[O.id];z===void 0&&(z={},a[O.id]=z);let U=z[Y.id];U===void 0&&(U={},z[Y.id]=U);let Q=U[K];return Q===void 0&&(Q=A(h()),U[K]=Q),Q}function A(O){const Y=[],q=[],K=[];for(let z=0;z<r;z++)Y[z]=0,q[z]=0,K[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:q,attributeDivisors:K,object:O,attributes:{},index:null}}function v(O,Y,q,K){const z=c.attributes,U=Y.attributes;let Q=0;const H=q.getAttributes();for(const V in H)if(H[V].location>=0){const j=z[V];let re=U[V];if(re===void 0&&(V==="instanceMatrix"&&O.instanceMatrix&&(re=O.instanceMatrix),V==="instanceColor"&&O.instanceColor&&(re=O.instanceColor)),j===void 0||j.attribute!==re||re&&j.data!==re.data)return!0;Q++}return c.attributesNum!==Q||c.index!==K}function y(O,Y,q,K){const z={},U=Y.attributes;let Q=0;const H=q.getAttributes();for(const V in H)if(H[V].location>=0){let j=U[V];j===void 0&&(V==="instanceMatrix"&&O.instanceMatrix&&(j=O.instanceMatrix),V==="instanceColor"&&O.instanceColor&&(j=O.instanceColor));const re={};re.attribute=j,j&&j.data&&(re.data=j.data),z[V]=re,Q++}c.attributes=z,c.attributesNum=Q,c.index=K}function x(){const O=c.newAttributes;for(let Y=0,q=O.length;Y<q;Y++)O[Y]=0}function w(O){E(O,0)}function E(O,Y){const q=c.newAttributes,K=c.enabledAttributes,z=c.attributeDivisors;q[O]=1,K[O]===0&&(t.enableVertexAttribArray(O),K[O]=1),z[O]!==Y&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,Y),z[O]=Y)}function S(){const O=c.newAttributes,Y=c.enabledAttributes;for(let q=0,K=Y.length;q<K;q++)Y[q]!==O[q]&&(t.disableVertexAttribArray(q),Y[q]=0)}function M(O,Y,q,K,z,U){i.isWebGL2===!0&&(q===5124||q===5125)?t.vertexAttribIPointer(O,Y,q,z,U):t.vertexAttribPointer(O,Y,q,K,z,U)}function b(O,Y,q,K){if(i.isWebGL2===!1&&(O.isInstancedMesh||K.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const z=K.attributes,U=q.getAttributes(),Q=Y.defaultAttributeValues;for(const H in U){const V=U[H];if(V.location>=0){let J=z[H];if(J===void 0&&(H==="instanceMatrix"&&O.instanceMatrix&&(J=O.instanceMatrix),H==="instanceColor"&&O.instanceColor&&(J=O.instanceColor)),J!==void 0){const j=J.normalized,re=J.itemSize,ee=n.get(J);if(ee===void 0)continue;const ae=ee.buffer,ce=ee.type,ge=ee.bytesPerElement;if(J.isInterleavedBufferAttribute){const xe=J.data,Se=xe.stride,oe=J.offset;if(xe.isInstancedInterleavedBuffer){for(let he=0;he<V.locationSize;he++)E(V.location+he,xe.meshPerAttribute);O.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let he=0;he<V.locationSize;he++)w(V.location+he);t.bindBuffer(34962,ae);for(let he=0;he<V.locationSize;he++)M(V.location+he,re/V.locationSize,ce,j,Se*ge,(oe+re/V.locationSize*he)*ge)}else{if(J.isInstancedBufferAttribute){for(let xe=0;xe<V.locationSize;xe++)E(V.location+xe,J.meshPerAttribute);O.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let xe=0;xe<V.locationSize;xe++)w(V.location+xe);t.bindBuffer(34962,ae);for(let xe=0;xe<V.locationSize;xe++)M(V.location+xe,re/V.locationSize,ce,j,re*ge,re/V.locationSize*xe*ge)}}else if(Q!==void 0){const j=Q[H];if(j!==void 0)switch(j.length){case 2:t.vertexAttrib2fv(V.location,j);break;case 3:t.vertexAttrib3fv(V.location,j);break;case 4:t.vertexAttrib4fv(V.location,j);break;default:t.vertexAttrib1fv(V.location,j)}}}}S()}function B(){D();for(const O in a){const Y=a[O];for(const q in Y){const K=Y[q];for(const z in K)p(K[z].object),delete K[z];delete Y[q]}delete a[O]}}function T(O){if(a[O.id]===void 0)return;const Y=a[O.id];for(const q in Y){const K=Y[q];for(const z in K)p(K[z].object),delete K[z];delete Y[q]}delete a[O.id]}function k(O){for(const Y in a){const q=a[Y];if(q[O.id]===void 0)continue;const K=q[O.id];for(const z in K)p(K[z].object),delete K[z];delete q[O.id]}}function D(){N(),u=!0,c!==l&&(c=l,d(c.object))}function N(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:D,resetDefaultState:N,dispose:B,releaseStatesOfGeometry:T,releaseStatesOfProgram:k,initAttributes:x,enableAttribute:w,disableUnusedAttributes:S}}function sre(t,e,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){t.drawArrays(s,c,u),n.update(u,s,1)}function l(c,u,f){if(f===0)return;let h,d;if(r)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](s,c,u,f),n.update(u,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function ore(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(M){if(M==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";M="mediump"}return M==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),m=t.getParameter(34921),A=t.getParameter(36347),v=t.getParameter(36348),y=t.getParameter(36349),x=h>0,w=o||e.has("OES_texture_float"),E=x&&w,S=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:A,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:w,floatVertexTextures:E,maxSamples:S}}function are(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new Zr,a=new yr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const p=f.length!==0||h||i!==0||r;return r=h,n=u(f,d,0),i=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(f,h,d){const p=f.clippingPlanes,m=f.clipIntersection,A=f.clipShadows,v=t.get(f);if(!r||p===null||p.length===0||s&&!A)s?u(null):c();else{const y=s?0:i,x=y*4;let w=v.clippingState||null;l.value=w,w=u(p,h,x,d);for(let E=0;E!==x;++E)w[E]=n[E];v.clippingState=w,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,p){const m=f!==null?f.length:0;let A=null;if(m!==0){if(A=l.value,p!==!0||A===null){const v=d+m*4,y=h.matrixWorldInverse;a.getNormalMatrix(y),(A===null||A.length<v)&&(A=new Float32Array(v));for(let x=0,w=d;x!==m;++x,w+=4)o.copy(f[x]).applyMatrix4(y,a),o.normal.toArray(A,w),A[w+3]=o.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,A}}function lre(t){let e=new WeakMap;function n(o,a){return a===ef?o.mapping=ll:a===_m&&(o.mapping=yc),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===ef||a===_m)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new tg(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Is extends yf{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Yh=4,G4=[.125,.215,.35,.446,.526,.582],pu=20,Ow=new Is,Q4=new ze;let Uw=null;const fu=(1+Math.sqrt(5))/2,ch=1/fu,H4=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,fu,ch),new F(0,fu,-ch),new F(ch,0,fu),new F(-ch,0,fu),new F(fu,ch,0),new F(-fu,ch,0)];class FS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){Uw=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=j4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=W4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Uw),e.scissorTest=!1,iA(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ll||e.mapping===yc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Uw=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Wt,minFilter:Wt,generateMipmaps:!1,type:pi,format:Fn,encoding:Ps,depthBuffer:!1},r=V4(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=V4(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cre(s)),this._blurMaterial=ure(s,e,n)}return r}_compileMaterial(e){const n=new $e(this._lodPlanes[0],e);this._renderer.compile(n,Ow)}_sceneToCubeUV(e,n,i,r){const a=new dn(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(Q4),u.toneMapping=Fo,u.autoClear=!1;const d=new wr({name:"PMREM.Background",side:Er,depthWrite:!1,depthTest:!1}),p=new $e(new Ar,d);let m=!1;const A=e.background;A?A.isColor&&(d.color.copy(A),e.background=null,m=!0):(d.color.copy(Q4),m=!0);for(let v=0;v<6;v++){const y=v%3;y===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):y===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const x=this._cubeSize;iA(r,y*x,v>2?x:0,x,x),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=A}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===ll||e.mapping===yc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=j4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=W4());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new $e(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;iA(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,Ow)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=H4[(r-1)%H4.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new $e(this._lodPlanes[r],c),h=c.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*pu-1),m=s/p,A=isFinite(s)?1+Math.floor(u*m):pu;A>pu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${pu}`);const v=[];let y=0;for(let M=0;M<pu;++M){const b=M/m,B=Math.exp(-b*b/2);v.push(B),M===0?y+=B:M<A&&(y+=2*B)}for(let M=0;M<v.length;M++)v[M]=v[M]/y;h.envMap.value=e.texture,h.samples.value=A,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:x}=this;h.dTheta.value=p,h.mipInt.value=x-i;const w=this._sizeLods[r],E=3*w*(r>x-Yh?r-x+Yh:0),S=4*(this._cubeSize-w);iA(n,E,S,3*w,2*w),l.setRenderTarget(n),l.render(f,Ow)}}function cre(t){const e=[],n=[],i=[];let r=t;const s=t-Yh+1+G4.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Yh?l=G4[o-t+Yh-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,p=6,m=3,A=2,v=1,y=new Float32Array(m*p*d),x=new Float32Array(A*p*d),w=new Float32Array(v*p*d);for(let S=0;S<d;S++){const M=S%3*2/3-1,b=S>2?0:-1,B=[M,b,0,M+2/3,b,0,M+2/3,b+1,0,M,b,0,M+2/3,b+1,0,M,b+1,0];y.set(B,m*p*S),x.set(h,A*p*S);const T=[S,S,S,S,S,S];w.set(T,v*p*S)}const E=new ht;E.setAttribute("position",new bt(y,m)),E.setAttribute("uv",new bt(x,A)),E.setAttribute("faceIndex",new bt(w,v)),e.push(E),r>Yh&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function V4(t,e,n){const i=new kn(t,e,n);return i.texture.mapping=Hd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function iA(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function ure(t,e,n){const i=new Float32Array(pu),r=new F(0,1,0);return new $n({name:"SphericalGaussianBlur",defines:{n:pu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:A3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Aa,depthTest:!1,depthWrite:!1})}function W4(){return new $n({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:A3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Aa,depthTest:!1,depthWrite:!1})}function j4(){return new $n({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:A3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Aa,depthTest:!1,depthWrite:!1})}function A3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fre(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===ef||l===_m,u=l===ll||l===yc;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return n===null&&(n=new FS(t)),f=c?n.fromEquirectangular(a,f):n.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&r(f)){n===null&&(n=new FS(t));const h=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function hre(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function dre(t,e,n,i){const r={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],34962);const d=f.morphAttributes;for(const p in d){const m=d[p];for(let A=0,v=m.length;A<v;A++)e.update(m[A],34962)}}function c(f){const h=[],d=f.index,p=f.attributes.position;let m=0;if(d!==null){const y=d.array;m=d.version;for(let x=0,w=y.length;x<w;x+=3){const E=y[x+0],S=y[x+1],M=y[x+2];h.push(E,S,S,M,M,E)}}else{const y=p.array;m=p.version;for(let x=0,w=y.length/3-1;x<w;x+=3){const E=x+0,S=x+1,M=x+2;h.push(E,S,S,M,M,E)}}const A=new(rU(h)?m3:Cy)(h,1);A.version=m;const v=s.get(f);v&&e.remove(v),s.set(f,A)}function u(f){const h=s.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function pre(t,e,n,i){const r=i.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,d){t.drawElements(s,d,a,h*l),n.update(d,s,1)}function f(h,d,p){if(p===0)return;let m,A;if(r)m=t,A="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[A](s,d,a,h*l,p),n.update(d,s,p)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f}function mre(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function gre(t,e){return t[0]-e[0]}function Are(t,e){return Math.abs(e[1])-Math.abs(t[1])}function vre(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Pt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=p!==void 0?p.length:0;let A=s.get(u);if(A===void 0||A.count!==m){let Y=function(){N.dispose(),s.delete(u),u.removeEventListener("dispose",Y)};A!==void 0&&A.texture.dispose();const x=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],b=u.morphAttributes.color||[];let B=0;x===!0&&(B=1),w===!0&&(B=2),E===!0&&(B=3);let T=u.attributes.position.count*B,k=1;T>e.maxTextureSize&&(k=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const D=new Float32Array(T*k*4*m),N=new $m(D,T,k,m);N.type=Qn,N.needsUpdate=!0;const O=B*4;for(let q=0;q<m;q++){const K=S[q],z=M[q],U=b[q],Q=T*k*4*q;for(let H=0;H<K.count;H++){const V=H*O;x===!0&&(o.fromBufferAttribute(K,H),D[Q+V+0]=o.x,D[Q+V+1]=o.y,D[Q+V+2]=o.z,D[Q+V+3]=0),w===!0&&(o.fromBufferAttribute(z,H),D[Q+V+4]=o.x,D[Q+V+5]=o.y,D[Q+V+6]=o.z,D[Q+V+7]=0),E===!0&&(o.fromBufferAttribute(U,H),D[Q+V+8]=o.x,D[Q+V+9]=o.y,D[Q+V+10]=o.z,D[Q+V+11]=U.itemSize===4?o.w:1)}}A={count:m,texture:N,size:new Ae(T,k)},s.set(u,A),u.addEventListener("dispose",Y)}let v=0;for(let x=0;x<d.length;x++)v+=d[x];const y=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(t,"morphTargetBaseInfluence",y),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",A.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",A.size)}else{const p=d===void 0?0:d.length;let m=i[u.id];if(m===void 0||m.length!==p){m=[];for(let w=0;w<p;w++)m[w]=[w,0];i[u.id]=m}for(let w=0;w<p;w++){const E=m[w];E[0]=w,E[1]=d[w]}m.sort(Are);for(let w=0;w<8;w++)w<p&&m[w][1]?(a[w][0]=m[w][0],a[w][1]=m[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(gre);const A=u.morphAttributes.position,v=u.morphAttributes.normal;let y=0;for(let w=0;w<8;w++){const E=a[w],S=E[0],M=E[1];S!==Number.MAX_SAFE_INTEGER&&M?(A&&u.getAttribute("morphTarget"+w)!==A[S]&&u.setAttribute("morphTarget"+w,A[S]),v&&u.getAttribute("morphNormal"+w)!==v[S]&&u.setAttribute("morphNormal"+w,v[S]),r[w]=M,y+=M):(A&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),v&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const x=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(t,"morphTargetBaseInfluence",x),h.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function _re(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);return r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const aU=new bn,lU=new $m,cU=new Zm,uU=new eg,q4=[],Y4=[],X4=new Float32Array(16),J4=new Float32Array(9),K4=new Float32Array(4);function Vd(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=q4[r];if(s===void 0&&(s=new Float32Array(r),q4[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Si(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ci(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function My(t,e){let n=Y4[e];n===void 0&&(n=new Int32Array(e),Y4[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function yre(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function xre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Si(n,e))return;t.uniform2fv(this.addr,e),Ci(n,e)}}function wre(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Si(n,e))return;t.uniform3fv(this.addr,e),Ci(n,e)}}function Ere(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Si(n,e))return;t.uniform4fv(this.addr,e),Ci(n,e)}}function bre(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Si(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ci(n,e)}else{if(Si(n,i))return;K4.set(i),t.uniformMatrix2fv(this.addr,!1,K4),Ci(n,i)}}function Sre(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Si(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ci(n,e)}else{if(Si(n,i))return;J4.set(i),t.uniformMatrix3fv(this.addr,!1,J4),Ci(n,i)}}function Cre(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Si(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ci(n,e)}else{if(Si(n,i))return;X4.set(i),t.uniformMatrix4fv(this.addr,!1,X4),Ci(n,i)}}function Mre(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ire(t,e){const n=this.cache;Si(n,e)||(t.uniform2iv(this.addr,e),Ci(n,e))}function Tre(t,e){const n=this.cache;Si(n,e)||(t.uniform3iv(this.addr,e),Ci(n,e))}function Bre(t,e){const n=this.cache;Si(n,e)||(t.uniform4iv(this.addr,e),Ci(n,e))}function Rre(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Pre(t,e){const n=this.cache;Si(n,e)||(t.uniform2uiv(this.addr,e),Ci(n,e))}function Dre(t,e){const n=this.cache;Si(n,e)||(t.uniform3uiv(this.addr,e),Ci(n,e))}function Lre(t,e){const n=this.cache;Si(n,e)||(t.uniform4uiv(this.addr,e),Ci(n,e))}function Fre(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||aU,r)}function kre(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||cU,r)}function Ore(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||uU,r)}function Ure(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||lU,r)}function Nre(t){switch(t){case 5126:return yre;case 35664:return xre;case 35665:return wre;case 35666:return Ere;case 35674:return bre;case 35675:return Sre;case 35676:return Cre;case 5124:case 35670:return Mre;case 35667:case 35671:return Ire;case 35668:case 35672:return Tre;case 35669:case 35673:return Bre;case 5125:return Rre;case 36294:return Pre;case 36295:return Dre;case 36296:return Lre;case 35678:case 36198:case 36298:case 36306:case 35682:return Fre;case 35679:case 36299:case 36307:return kre;case 35680:case 36300:case 36308:case 36293:return Ore;case 36289:case 36303:case 36311:case 36292:return Ure}}function zre(t,e){t.uniform1fv(this.addr,e)}function Gre(t,e){const n=Vd(e,this.size,2);t.uniform2fv(this.addr,n)}function Qre(t,e){const n=Vd(e,this.size,3);t.uniform3fv(this.addr,n)}function Hre(t,e){const n=Vd(e,this.size,4);t.uniform4fv(this.addr,n)}function Vre(t,e){const n=Vd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Wre(t,e){const n=Vd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function jre(t,e){const n=Vd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function qre(t,e){t.uniform1iv(this.addr,e)}function Yre(t,e){t.uniform2iv(this.addr,e)}function Xre(t,e){t.uniform3iv(this.addr,e)}function Jre(t,e){t.uniform4iv(this.addr,e)}function Kre(t,e){t.uniform1uiv(this.addr,e)}function $re(t,e){t.uniform2uiv(this.addr,e)}function Zre(t,e){t.uniform3uiv(this.addr,e)}function ese(t,e){t.uniform4uiv(this.addr,e)}function tse(t,e,n){const i=this.cache,r=e.length,s=My(n,r);Si(i,s)||(t.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||aU,s[o])}function nse(t,e,n){const i=this.cache,r=e.length,s=My(n,r);Si(i,s)||(t.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||cU,s[o])}function ise(t,e,n){const i=this.cache,r=e.length,s=My(n,r);Si(i,s)||(t.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||uU,s[o])}function rse(t,e,n){const i=this.cache,r=e.length,s=My(n,r);Si(i,s)||(t.uniform1iv(this.addr,s),Ci(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||lU,s[o])}function sse(t){switch(t){case 5126:return zre;case 35664:return Gre;case 35665:return Qre;case 35666:return Hre;case 35674:return Vre;case 35675:return Wre;case 35676:return jre;case 5124:case 35670:return qre;case 35667:case 35671:return Yre;case 35668:case 35672:return Xre;case 35669:case 35673:return Jre;case 5125:return Kre;case 36294:return $re;case 36295:return Zre;case 36296:return ese;case 35678:case 36198:case 36298:case 36306:case 35682:return tse;case 35679:case 36299:case 36307:return nse;case 35680:case 36300:case 36308:case 36293:return ise;case 36289:case 36303:case 36311:case 36292:return rse}}class ose{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Nre(n.type)}}class ase{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=sse(n.type)}}class lse{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const Nw=/(\w+)(\])?(\[|\.)?/g;function $4(t,e){t.seq.push(e),t.map[e.id]=e}function cse(t,e,n){const i=t.name,r=i.length;for(Nw.lastIndex=0;;){const s=Nw.exec(i),o=Nw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){$4(n,c===void 0?new ose(a,t,e):new ase(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new lse(a),$4(n,f)),n=f}}}class Pv{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);cse(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function Z4(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let use=0;function fse(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function hse(t){switch(t){case Ps:return["Linear","( value )"];case Nt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function eP(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+fse(t.getShaderSource(e),o)}else return r}function dse(t,e){const n=hse(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function pse(t,e){let n;switch(e){case N8:n="Linear";break;case z8:n="Reinhard";break;case G8:n="OptimizedCineon";break;case s3:n="ACESFilmic";break;case Q8:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function mse(t){return[t.extensionDerivatives||!!t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ep).join(`
`)}function gse(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function Ase(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Ep(t){return t!==""}function tP(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function nP(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const vse=/^[ \t]*#include +<([\w\d./]+)>/gm;function kS(t){return t.replace(vse,_se)}function _se(t,e){const n=vt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return kS(n)}const yse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iP(t){return t.replace(yse,xse)}function xse(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function rP(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wse(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===t3?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===n3?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===jh&&(e="SHADOWMAP_TYPE_VSM"),e}function Ese(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ll:case yc:e="ENVMAP_TYPE_CUBE";break;case Hd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bse(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case yc:e="ENVMAP_MODE_REFRACTION";break}return e}function Sse(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Km:e="ENVMAP_BLENDING_MULTIPLY";break;case O8:e="ENVMAP_BLENDING_MIX";break;case U8:e="ENVMAP_BLENDING_ADD";break}return e}function Cse(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Mse(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=wse(n),c=Ese(n),u=bse(n),f=Sse(n),h=Cse(n),d=n.isWebGL2?"":mse(n),p=gse(s),m=r.createProgram();let A,v,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(A=[p].filter(Ep).join(`
`),A.length>0&&(A+=`
`),v=[d,p].filter(Ep).join(`
`),v.length>0&&(v+=`
`)):(A=[rP(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ep).join(`
`),v=[d,rP(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Fo?"#define TONE_MAPPING":"",n.toneMapping!==Fo?vt.tonemapping_pars_fragment:"",n.toneMapping!==Fo?pse("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",vt.encodings_pars_fragment,dse("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ep).join(`
`)),o=kS(o),o=tP(o,n),o=nP(o,n),a=kS(a),a=tP(a,n),a=nP(a,n),o=iP(o),a=iP(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,v=["#define varying in",n.glslVersion===DS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===DS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const x=y+A+o,w=y+v+a,E=Z4(r,35633,x),S=Z4(r,35632,w);if(r.attachShader(m,E),r.attachShader(m,S),n.index0AttributeName!==void 0?r.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const B=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(E).trim(),k=r.getShaderInfoLog(S).trim();let D=!0,N=!0;if(r.getProgramParameter(m,35714)===!1){D=!1;const O=eP(r,E,"vertex"),Y=eP(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+B+`
`+O+`
`+Y)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(T===""||k==="")&&(N=!1);N&&(this.diagnostics={runnable:D,programLog:B,vertexShader:{log:T,prefix:A},fragmentShader:{log:k,prefix:v}})}r.deleteShader(E),r.deleteShader(S);let M;this.getUniforms=function(){return M===void 0&&(M=new Pv(r,m)),M};let b;return this.getAttributes=function(){return b===void 0&&(b=Ase(r,m)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=use++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=S,this}let Ise=0;class Tse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Bse(e),n.set(e,i)),i}}class Bse{constructor(e){this.id=Ise++,this.code=e,this.usedTimes=0}}function Rse(t,e,n,i,r,s,o){const a=new Nu,l=new Tse,c=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(b,B,T,k,D){const N=k.fog,O=D.geometry,Y=b.isMeshStandardMaterial?k.environment:null,q=(b.isMeshStandardMaterial?n:e).get(b.envMap||Y),K=!!q&&q.mapping===Hd?q.image.height:null,z=p[b.type];b.precision!==null&&(d=r.getMaxPrecision(b.precision),d!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",d,"instead."));const U=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,Q=U!==void 0?U.length:0;let H=0;O.morphAttributes.position!==void 0&&(H=1),O.morphAttributes.normal!==void 0&&(H=2),O.morphAttributes.color!==void 0&&(H=3);let V,J,j,re;if(z){const Se=zr[z];V=Se.vertexShader,J=Se.fragmentShader}else V=b.vertexShader,J=b.fragmentShader,l.update(b),j=l.getVertexShaderID(b),re=l.getFragmentShaderID(b);const ee=t.getRenderTarget(),ae=b.alphaTest>0,ce=b.clearcoat>0,ge=b.iridescence>0;return{isWebGL2:u,shaderID:z,shaderName:b.type,vertexShader:V,fragmentShader:J,defines:b.defines,customVertexShaderID:j,customFragmentShaderID:re,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:d,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:h,outputEncoding:ee===null?t.outputEncoding:ee.isXRRenderTarget===!0?ee.texture.encoding:Ps,map:!!b.map,matcap:!!b.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:K,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===eU,tangentSpaceNormalMap:b.normalMapType===pl,decodeVideoTexture:!!b.map&&b.map.isVideoTexture===!0&&b.map.encoding===Nt,clearcoat:ce,clearcoatMap:ce&&!!b.clearcoatMap,clearcoatRoughnessMap:ce&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:ce&&!!b.clearcoatNormalMap,iridescence:ge,iridescenceMap:ge&&!!b.iridescenceMap,iridescenceThicknessMap:ge&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:b.transparent===!1&&b.blending===Lu,alphaMap:!!b.alphaMap,alphaTest:ae,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!O.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.iridescenceMap||!!b.iridescenceThicknessMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||!!b.sheenRoughnessMap,uvsVertexOnly:!(!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatNormalMap||!!b.iridescenceMap||!!b.iridescenceThicknessMap||b.transmission>0||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||b.sheen>0||!!b.sheenColorMap||!!b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!N,useFog:b.fog===!0,fogExp2:N&&N.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:f,skinning:D.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:H,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:b.toneMapped?t.toneMapping:Fo,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===bi,flipSided:b.side===Er,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function A(b){const B=[];if(b.shaderID?B.push(b.shaderID):(B.push(b.customVertexShaderID),B.push(b.customFragmentShaderID)),b.defines!==void 0)for(const T in b.defines)B.push(T),B.push(b.defines[T]);return b.isRawShaderMaterial===!1&&(v(B,b),y(B,b),B.push(t.outputEncoding)),B.push(b.customProgramCacheKey),B.join()}function v(b,B){b.push(B.precision),b.push(B.outputEncoding),b.push(B.envMapMode),b.push(B.envMapCubeUVHeight),b.push(B.combine),b.push(B.vertexUvs),b.push(B.fogExp2),b.push(B.sizeAttenuation),b.push(B.morphTargetsCount),b.push(B.morphAttributeCount),b.push(B.numDirLights),b.push(B.numPointLights),b.push(B.numSpotLights),b.push(B.numSpotLightMaps),b.push(B.numHemiLights),b.push(B.numRectAreaLights),b.push(B.numDirLightShadows),b.push(B.numPointLightShadows),b.push(B.numSpotLightShadows),b.push(B.numSpotLightShadowsWithMaps),b.push(B.shadowMapType),b.push(B.toneMapping),b.push(B.numClippingPlanes),b.push(B.numClipIntersection),b.push(B.depthPacking)}function y(b,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.map&&a.enable(4),B.matcap&&a.enable(5),B.envMap&&a.enable(6),B.lightMap&&a.enable(7),B.aoMap&&a.enable(8),B.emissiveMap&&a.enable(9),B.bumpMap&&a.enable(10),B.normalMap&&a.enable(11),B.objectSpaceNormalMap&&a.enable(12),B.tangentSpaceNormalMap&&a.enable(13),B.clearcoat&&a.enable(14),B.clearcoatMap&&a.enable(15),B.clearcoatRoughnessMap&&a.enable(16),B.clearcoatNormalMap&&a.enable(17),B.iridescence&&a.enable(18),B.iridescenceMap&&a.enable(19),B.iridescenceThicknessMap&&a.enable(20),B.displacementMap&&a.enable(21),B.specularMap&&a.enable(22),B.roughnessMap&&a.enable(23),B.metalnessMap&&a.enable(24),B.gradientMap&&a.enable(25),B.alphaMap&&a.enable(26),B.alphaTest&&a.enable(27),B.vertexColors&&a.enable(28),B.vertexAlphas&&a.enable(29),B.vertexUvs&&a.enable(30),B.vertexTangents&&a.enable(31),B.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.physicallyCorrectLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.specularIntensityMap&&a.enable(15),B.specularColorMap&&a.enable(16),B.transmission&&a.enable(17),B.transmissionMap&&a.enable(18),B.thicknessMap&&a.enable(19),B.sheen&&a.enable(20),B.sheenColorMap&&a.enable(21),B.sheenRoughnessMap&&a.enable(22),B.decodeVideoTexture&&a.enable(23),B.opaque&&a.enable(24),b.push(a.mask)}function x(b){const B=p[b.type];let T;if(B){const k=zr[B];T=Mc.clone(k.uniforms)}else T=b.uniforms;return T}function w(b,B){let T;for(let k=0,D=c.length;k<D;k++){const N=c[k];if(N.cacheKey===B){T=N,++T.usedTimes;break}}return T===void 0&&(T=new Mse(t,B,b,s),c.push(T)),T}function E(b){if(--b.usedTimes===0){const B=c.indexOf(b);c[B]=c[c.length-1],c.pop(),b.destroy()}}function S(b){l.remove(b)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:A,getUniforms:x,acquireProgram:w,releaseProgram:E,releaseShaderCache:S,programs:c,dispose:M}}function Pse(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Dse(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function sP(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function oP(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(f,h,d,p,m,A){let v=t[e];return v===void 0?(v={id:f.id,object:f,geometry:h,material:d,groupOrder:p,renderOrder:f.renderOrder,z:m,group:A},t[e]=v):(v.id=f.id,v.object=f,v.geometry=h,v.material=d,v.groupOrder=p,v.renderOrder=f.renderOrder,v.z=m,v.group=A),e++,v}function a(f,h,d,p,m,A){const v=o(f,h,d,p,m,A);d.transmission>0?i.push(v):d.transparent===!0?r.push(v):n.push(v)}function l(f,h,d,p,m,A){const v=o(f,h,d,p,m,A);d.transmission>0?i.unshift(v):d.transparent===!0?r.unshift(v):n.unshift(v)}function c(f,h){n.length>1&&n.sort(f||Dse),i.length>1&&i.sort(h||sP),r.length>1&&r.sort(h||sP)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Lse(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new oP,t.set(i,[o])):r>=s.length?(o=new oP,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Fse(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new F,color:new ze};break;case"SpotLight":n={position:new F,direction:new F,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new F,color:new ze,distance:0,decay:0};break;case"HemisphereLight":n={direction:new F,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":n={color:new ze,position:new F,halfWidth:new F,halfHeight:new F};break}return t[e.id]=n,n}}}function kse(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Ose=0;function Use(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Nse(t,e){const n=new Fse,i=kse(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new F);const s=new F,o=new Ne,a=new Ne;function l(u,f){let h=0,d=0,p=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let m=0,A=0,v=0,y=0,x=0,w=0,E=0,S=0,M=0,b=0;u.sort(Use);const B=f!==!0?Math.PI:1;for(let k=0,D=u.length;k<D;k++){const N=u[k],O=N.color,Y=N.intensity,q=N.distance,K=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)h+=O.r*Y*B,d+=O.g*Y*B,p+=O.b*Y*B;else if(N.isLightProbe)for(let z=0;z<9;z++)r.probe[z].addScaledVector(N.sh.coefficients[z],Y);else if(N.isDirectionalLight){const z=n.get(N);if(z.color.copy(N.color).multiplyScalar(N.intensity*B),N.castShadow){const U=N.shadow,Q=i.get(N);Q.shadowBias=U.bias,Q.shadowNormalBias=U.normalBias,Q.shadowRadius=U.radius,Q.shadowMapSize=U.mapSize,r.directionalShadow[m]=Q,r.directionalShadowMap[m]=K,r.directionalShadowMatrix[m]=N.shadow.matrix,w++}r.directional[m]=z,m++}else if(N.isSpotLight){const z=n.get(N);z.position.setFromMatrixPosition(N.matrixWorld),z.color.copy(O).multiplyScalar(Y*B),z.distance=q,z.coneCos=Math.cos(N.angle),z.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),z.decay=N.decay,r.spot[v]=z;const U=N.shadow;if(N.map&&(r.spotLightMap[M]=N.map,M++,U.updateMatrices(N),N.castShadow&&b++),r.spotLightMatrix[v]=U.matrix,N.castShadow){const Q=i.get(N);Q.shadowBias=U.bias,Q.shadowNormalBias=U.normalBias,Q.shadowRadius=U.radius,Q.shadowMapSize=U.mapSize,r.spotShadow[v]=Q,r.spotShadowMap[v]=K,S++}v++}else if(N.isRectAreaLight){const z=n.get(N);z.color.copy(O).multiplyScalar(Y),z.halfWidth.set(N.width*.5,0,0),z.halfHeight.set(0,N.height*.5,0),r.rectArea[y]=z,y++}else if(N.isPointLight){const z=n.get(N);if(z.color.copy(N.color).multiplyScalar(N.intensity*B),z.distance=N.distance,z.decay=N.decay,N.castShadow){const U=N.shadow,Q=i.get(N);Q.shadowBias=U.bias,Q.shadowNormalBias=U.normalBias,Q.shadowRadius=U.radius,Q.shadowMapSize=U.mapSize,Q.shadowCameraNear=U.camera.near,Q.shadowCameraFar=U.camera.far,r.pointShadow[A]=Q,r.pointShadowMap[A]=K,r.pointShadowMatrix[A]=N.shadow.matrix,E++}r.point[A]=z,A++}else if(N.isHemisphereLight){const z=n.get(N);z.skyColor.copy(N.color).multiplyScalar(Y*B),z.groundColor.copy(N.groundColor).multiplyScalar(Y*B),r.hemi[x]=z,x++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ke.LTC_FLOAT_1,r.rectAreaLTC2=Ke.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ke.LTC_HALF_1,r.rectAreaLTC2=Ke.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=p;const T=r.hash;(T.directionalLength!==m||T.pointLength!==A||T.spotLength!==v||T.rectAreaLength!==y||T.hemiLength!==x||T.numDirectionalShadows!==w||T.numPointShadows!==E||T.numSpotShadows!==S||T.numSpotMaps!==M)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=y,r.point.length=A,r.hemi.length=x,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=S+M-b,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=b,T.directionalLength=m,T.pointLength=A,T.spotLength=v,T.rectAreaLength=y,T.hemiLength=x,T.numDirectionalShadows=w,T.numPointShadows=E,T.numSpotShadows=S,T.numSpotMaps=M,r.version=Ose++)}function c(u,f){let h=0,d=0,p=0,m=0,A=0;const v=f.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const w=u[y];if(w.isDirectionalLight){const E=r.directional[h];E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(v),h++}else if(w.isSpotLight){const E=r.spot[p];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(v),E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(v),p++}else if(w.isRectAreaLight){const E=r.rectArea[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(v),a.identity(),o.copy(w.matrixWorld),o.premultiply(v),a.extractRotation(o),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),m++}else if(w.isPointLight){const E=r.point[d];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(v),d++}else if(w.isHemisphereLight){const E=r.hemi[A];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(v),A++}}}return{setup:l,setupView:c,state:r}}function aP(t,e){const n=new Nse(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){n.setup(i,f)}function c(f){n.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function zse(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new aP(t,e),n.set(s,[l])):o>=a.length?(l=new aP(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class ig extends mi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Z8,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Iy extends mi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new F,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Gse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Qse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Hse(t,e,n){let i=new ng;const r=new Ae,s=new Ae,o=new Pt,a=new ig({depthPacking:f3}),l=new Iy,c={},u=n.maxTextureSize,f={0:Er,1:Qo,2:bi},h=new $n({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:Gse,fragmentShader:Qse}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new ht;p.setAttribute("position",new bt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new $e(p,h),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=t3,this.render=function(w,E,S){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||w.length===0)return;const M=t.getRenderTarget(),b=t.getActiveCubeFace(),B=t.getActiveMipmapLevel(),T=t.state;T.setBlending(Aa),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let k=0,D=w.length;k<D;k++){const N=w[k],O=N.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;r.copy(O.mapSize);const Y=O.getFrameExtents();if(r.multiply(Y),s.copy(O.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Y.x),r.x=s.x*Y.x,O.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Y.y),r.y=s.y*Y.y,O.mapSize.y=s.y)),O.map===null){const K=this.type!==jh?{minFilter:vn,magFilter:vn}:{};O.map=new kn(r.x,r.y,K),O.map.texture.name=N.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const q=O.getViewportCount();for(let K=0;K<q;K++){const z=O.getViewport(K);o.set(s.x*z.x,s.y*z.y,s.x*z.z,s.y*z.w),T.viewport(o),O.updateMatrices(N,K),i=O.getFrustum(),x(E,S,O.camera,N,this.type)}O.isPointLightShadow!==!0&&this.type===jh&&v(O,S),O.needsUpdate=!1}A.needsUpdate=!1,t.setRenderTarget(M,b,B)};function v(w,E){const S=e.update(m);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new kn(r.x,r.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(E,null,S,h,m,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(E,null,S,d,m,null)}function y(w,E,S,M,b,B){let T=null;const k=S.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(k!==void 0?T=k:T=S.isPointLight===!0?l:a,t.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0){const D=T.uuid,N=E.uuid;let O=c[D];O===void 0&&(O={},c[D]=O);let Y=O[N];Y===void 0&&(Y=T.clone(),O[N]=Y),T=Y}return T.visible=E.visible,T.wireframe=E.wireframe,B===jh?T.side=E.shadowSide!==null?E.shadowSide:E.side:T.side=E.shadowSide!==null?E.shadowSide:f[E.side],T.alphaMap=E.alphaMap,T.alphaTest=E.alphaTest,T.clipShadows=E.clipShadows,T.clippingPlanes=E.clippingPlanes,T.clipIntersection=E.clipIntersection,T.displacementMap=E.displacementMap,T.displacementScale=E.displacementScale,T.displacementBias=E.displacementBias,T.wireframeLinewidth=E.wireframeLinewidth,T.linewidth=E.linewidth,S.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(S.matrixWorld),T.nearDistance=M,T.farDistance=b),T}function x(w,E,S,M,b){if(w.visible===!1)return;if(w.layers.test(E.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&b===jh)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,w.matrixWorld);const k=e.update(w),D=w.material;if(Array.isArray(D)){const N=k.groups;for(let O=0,Y=N.length;O<Y;O++){const q=N[O],K=D[q.materialIndex];if(K&&K.visible){const z=y(w,K,M,S.near,S.far,b);t.renderBufferDirect(S,null,k,z,w,q)}}}else if(D.visible){const N=y(w,D,M,S.near,S.far,b);t.renderBufferDirect(S,null,k,N,w,null)}}const T=w.children;for(let k=0,D=T.length;k<D;k++)x(T[k],E,S,M,b)}}function Vse(t,e,n){const i=n.isWebGL2;function r(){let se=!1;const Je=new Pt;let Qe=null;const Ee=new Pt(0,0,0,0);return{setMask:function(We){Qe!==We&&!se&&(t.colorMask(We,We,We,We),Qe=We)},setLocked:function(We){se=We},setClear:function(We,ft,Tt,cn,Yt){Yt===!0&&(We*=cn,ft*=cn,Tt*=cn),Je.set(We,ft,Tt,cn),Ee.equals(Je)===!1&&(t.clearColor(We,ft,Tt,cn),Ee.copy(Je))},reset:function(){se=!1,Qe=null,Ee.set(-1,0,0,0)}}}function s(){let se=!1,Je=null,Qe=null,Ee=null;return{setTest:function(We){We?ae(2929):ce(2929)},setMask:function(We){Je!==We&&!se&&(t.depthMask(We),Je=We)},setFunc:function(We){if(Qe!==We){switch(We){case B8:t.depthFunc(512);break;case R8:t.depthFunc(519);break;case P8:t.depthFunc(513);break;case A_:t.depthFunc(515);break;case D8:t.depthFunc(514);break;case L8:t.depthFunc(518);break;case F8:t.depthFunc(516);break;case k8:t.depthFunc(517);break;default:t.depthFunc(515)}Qe=We}},setLocked:function(We){se=We},setClear:function(We){Ee!==We&&(t.clearDepth(We),Ee=We)},reset:function(){se=!1,Je=null,Qe=null,Ee=null}}}function o(){let se=!1,Je=null,Qe=null,Ee=null,We=null,ft=null,Tt=null,cn=null,Yt=null;return{setTest:function(gt){se||(gt?ae(2960):ce(2960))},setMask:function(gt){Je!==gt&&!se&&(t.stencilMask(gt),Je=gt)},setFunc:function(gt,un,pn){(Qe!==gt||Ee!==un||We!==pn)&&(t.stencilFunc(gt,un,pn),Qe=gt,Ee=un,We=pn)},setOp:function(gt,un,pn){(ft!==gt||Tt!==un||cn!==pn)&&(t.stencilOp(gt,un,pn),ft=gt,Tt=un,cn=pn)},setLocked:function(gt){se=gt},setClear:function(gt){Yt!==gt&&(t.clearStencil(gt),Yt=gt)},reset:function(){se=!1,Je=null,Qe=null,Ee=null,We=null,ft=null,Tt=null,cn=null,Yt=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let h={},d={},p=new WeakMap,m=[],A=null,v=!1,y=null,x=null,w=null,E=null,S=null,M=null,b=null,B=!1,T=null,k=null,D=null,N=null,O=null;const Y=t.getParameter(35661);let q=!1,K=0;const z=t.getParameter(7938);z.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(z)[1]),q=K>=1):z.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),q=K>=2);let U=null,Q={};const H=t.getParameter(3088),V=t.getParameter(2978),J=new Pt().fromArray(H),j=new Pt().fromArray(V);function re(se,Je,Qe){const Ee=new Uint8Array(4),We=t.createTexture();t.bindTexture(se,We),t.texParameteri(se,10241,9728),t.texParameteri(se,10240,9728);for(let ft=0;ft<Qe;ft++)t.texImage2D(Je+ft,0,6408,1,1,0,6408,5121,Ee);return We}const ee={};ee[3553]=re(3553,3553,1),ee[34067]=re(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(2929),l.setFunc(A_),Te(!1),qe(dS),ae(2884),Re(Aa);function ae(se){h[se]!==!0&&(t.enable(se),h[se]=!0)}function ce(se){h[se]!==!1&&(t.disable(se),h[se]=!1)}function ge(se,Je){return d[se]!==Je?(t.bindFramebuffer(se,Je),d[se]=Je,i&&(se===36009&&(d[36160]=Je),se===36160&&(d[36009]=Je)),!0):!1}function xe(se,Je){let Qe=m,Ee=!1;if(se)if(Qe=p.get(Je),Qe===void 0&&(Qe=[],p.set(Je,Qe)),se.isWebGLMultipleRenderTargets){const We=se.texture;if(Qe.length!==We.length||Qe[0]!==36064){for(let ft=0,Tt=We.length;ft<Tt;ft++)Qe[ft]=36064+ft;Qe.length=We.length,Ee=!0}}else Qe[0]!==36064&&(Qe[0]=36064,Ee=!0);else Qe[0]!==1029&&(Qe[0]=1029,Ee=!0);Ee&&(n.isWebGL2?t.drawBuffers(Qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Qe))}function Se(se){return A!==se?(t.useProgram(se),A=se,!0):!1}const oe={[du]:32774,[_8]:32778,[y8]:32779};if(i)oe[gS]=32775,oe[AS]=32776;else{const se=e.get("EXT_blend_minmax");se!==null&&(oe[gS]=se.MIN_EXT,oe[AS]=se.MAX_EXT)}const he={[x8]:0,[w8]:1,[E8]:768,[i3]:770,[T8]:776,[M8]:774,[S8]:772,[b8]:769,[r3]:771,[I8]:775,[C8]:773};function Re(se,Je,Qe,Ee,We,ft,Tt,cn){if(se===Aa){v===!0&&(ce(3042),v=!1);return}if(v===!1&&(ae(3042),v=!0),se!==v8){if(se!==y||cn!==B){if((x!==du||S!==du)&&(t.blendEquation(32774),x=du,S=du),cn)switch(se){case Lu:t.blendFuncSeparate(1,771,1,771);break;case g_:t.blendFunc(1,1);break;case pS:t.blendFuncSeparate(0,769,0,1);break;case mS:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}else switch(se){case Lu:t.blendFuncSeparate(770,771,1,771);break;case g_:t.blendFunc(770,1);break;case pS:t.blendFuncSeparate(0,769,0,1);break;case mS:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",se);break}w=null,E=null,M=null,b=null,y=se,B=cn}return}We=We||Je,ft=ft||Qe,Tt=Tt||Ee,(Je!==x||We!==S)&&(t.blendEquationSeparate(oe[Je],oe[We]),x=Je,S=We),(Qe!==w||Ee!==E||ft!==M||Tt!==b)&&(t.blendFuncSeparate(he[Qe],he[Ee],he[ft],he[Tt]),w=Qe,E=Ee,M=ft,b=Tt),y=se,B=null}function Ie(se,Je){se.side===bi?ce(2884):ae(2884);let Qe=se.side===Er;Je&&(Qe=!Qe),Te(Qe),se.blending===Lu&&se.transparent===!1?Re(Aa):Re(se.blending,se.blendEquation,se.blendSrc,se.blendDst,se.blendEquationAlpha,se.blendSrcAlpha,se.blendDstAlpha,se.premultipliedAlpha),l.setFunc(se.depthFunc),l.setTest(se.depthTest),l.setMask(se.depthWrite),a.setMask(se.colorWrite);const Ee=se.stencilWrite;c.setTest(Ee),Ee&&(c.setMask(se.stencilWriteMask),c.setFunc(se.stencilFunc,se.stencilRef,se.stencilFuncMask),c.setOp(se.stencilFail,se.stencilZFail,se.stencilZPass)),Oe(se.polygonOffset,se.polygonOffsetFactor,se.polygonOffsetUnits),se.alphaToCoverage===!0?ae(32926):ce(32926)}function Te(se){T!==se&&(se?t.frontFace(2304):t.frontFace(2305),T=se)}function qe(se){se!==g8?(ae(2884),se!==k&&(se===dS?t.cullFace(1029):se===A8?t.cullFace(1028):t.cullFace(1032))):ce(2884),k=se}function ye(se){se!==D&&(q&&t.lineWidth(se),D=se)}function Oe(se,Je,Qe){se?(ae(32823),(N!==Je||O!==Qe)&&(t.polygonOffset(Je,Qe),N=Je,O=Qe)):ce(32823)}function Ve(se){se?ae(3089):ce(3089)}function Pe(se){se===void 0&&(se=33984+Y-1),U!==se&&(t.activeTexture(se),U=se)}function X(se,Je,Qe){Qe===void 0&&(U===null?Qe=33984+Y-1:Qe=U);let Ee=Q[Qe];Ee===void 0&&(Ee={type:void 0,texture:void 0},Q[Qe]=Ee),(Ee.type!==se||Ee.texture!==Je)&&(U!==Qe&&(t.activeTexture(Qe),U=Qe),t.bindTexture(se,Je||ee[se]),Ee.type=se,Ee.texture=Je)}function W(){const se=Q[U];se!==void 0&&se.type!==void 0&&(t.bindTexture(se.type,null),se.type=void 0,se.texture=void 0)}function ne(){try{t.compressedTexImage2D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function ue(){try{t.texSubImage2D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function ve(){try{t.texSubImage3D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function Ge(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function be(){try{t.texStorage2D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function De(){try{t.texStorage3D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function me(){try{t.texImage2D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function je(){try{t.texImage3D.apply(t,arguments)}catch(se){console.error("THREE.WebGLState:",se)}}function ie(se){J.equals(se)===!1&&(t.scissor(se.x,se.y,se.z,se.w),J.copy(se))}function _e(se){j.equals(se)===!1&&(t.viewport(se.x,se.y,se.z,se.w),j.copy(se))}function Ce(se,Je){let Qe=f.get(Je);Qe===void 0&&(Qe=new WeakMap,f.set(Je,Qe));let Ee=Qe.get(se);Ee===void 0&&(Ee=t.getUniformBlockIndex(Je,se.name),Qe.set(se,Ee))}function ke(se,Je){const Ee=f.get(Je).get(se);u.get(se)!==Ee&&(t.uniformBlockBinding(Je,Ee,se.__bindingPointIndex),u.set(se,Ee))}function tt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},U=null,Q={},d={},p=new WeakMap,m=[],A=null,v=!1,y=null,x=null,w=null,E=null,S=null,M=null,b=null,B=!1,T=null,k=null,D=null,N=null,O=null,J.set(0,0,t.canvas.width,t.canvas.height),j.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:ce,bindFramebuffer:ge,drawBuffers:xe,useProgram:Se,setBlending:Re,setMaterial:Ie,setFlipSided:Te,setCullFace:qe,setLineWidth:ye,setPolygonOffset:Oe,setScissorTest:Ve,activeTexture:Pe,bindTexture:X,unbindTexture:W,compressedTexImage2D:ne,texImage2D:me,texImage3D:je,updateUBOMapping:Ce,uniformBlockBinding:ke,texStorage2D:be,texStorage3D:De,texSubImage2D:ue,texSubImage3D:ve,compressedTexSubImage2D:Ge,scissor:ie,viewport:_e,reset:tt}}function Wse(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const A=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(X,W){return v?new OffscreenCanvas(X,W):Cm("canvas")}function x(X,W,ne,ue){let ve=1;if((X.width>ue||X.height>ue)&&(ve=ue/Math.max(X.width,X.height)),ve<1||W===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Ge=W?C_:Math.floor,be=Ge(ve*X.width),De=Ge(ve*X.height);m===void 0&&(m=y(be,De));const me=ne?y(be,De):m;return me.width=be,me.height=De,me.getContext("2d").drawImage(X,0,0,be,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+be+"x"+De+")."),me}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function w(X){return LS(X.width)&&LS(X.height)}function E(X){return a?!1:X.wrapS!==Fi||X.wrapT!==Fi||X.minFilter!==vn&&X.minFilter!==Wt}function S(X,W){return X.generateMipmaps&&W&&X.minFilter!==vn&&X.minFilter!==Wt}function M(X){t.generateMipmap(X)}function b(X,W,ne,ue,ve=!1){if(a===!1)return W;if(X!==null){if(t[X]!==void 0)return t[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ge=W;return W===6403&&(ne===5126&&(Ge=33326),ne===5131&&(Ge=33325),ne===5121&&(Ge=33321)),W===33319&&(ne===5126&&(Ge=33328),ne===5131&&(Ge=33327),ne===5121&&(Ge=33323)),W===6408&&(ne===5126&&(Ge=34836),ne===5131&&(Ge=34842),ne===5121&&(Ge=ue===Nt&&ve===!1?35907:32856),ne===32819&&(Ge=32854),ne===32820&&(Ge=32855)),(Ge===33325||Ge===33326||Ge===33327||Ge===33328||Ge===34842||Ge===34836)&&e.get("EXT_color_buffer_float"),Ge}function B(X,W,ne){return S(X,ne)===!0||X.isFramebufferTexture&&X.minFilter!==vn&&X.minFilter!==Wt?Math.log2(Math.max(W.width,W.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?W.mipmaps.length:1}function T(X){return X===vn||X===ym||X===xm?9728:9729}function k(X){const W=X.target;W.removeEventListener("dispose",k),N(W),W.isVideoTexture&&p.delete(W)}function D(X){const W=X.target;W.removeEventListener("dispose",D),Y(W)}function N(X){const W=i.get(X);if(W.__webglInit===void 0)return;const ne=X.source,ue=A.get(ne);if(ue){const ve=ue[W.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&O(X),Object.keys(ue).length===0&&A.delete(ne)}i.remove(X)}function O(X){const W=i.get(X);t.deleteTexture(W.__webglTexture);const ne=X.source,ue=A.get(ne);delete ue[W.__cacheKey],o.memory.textures--}function Y(X){const W=X.texture,ne=i.get(X),ue=i.get(W);if(ue.__webglTexture!==void 0&&(t.deleteTexture(ue.__webglTexture),o.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)t.deleteFramebuffer(ne.__webglFramebuffer[ve]),ne.__webglDepthbuffer&&t.deleteRenderbuffer(ne.__webglDepthbuffer[ve]);else{if(t.deleteFramebuffer(ne.__webglFramebuffer),ne.__webglDepthbuffer&&t.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let ve=0;ve<ne.__webglColorRenderbuffer.length;ve++)ne.__webglColorRenderbuffer[ve]&&t.deleteRenderbuffer(ne.__webglColorRenderbuffer[ve]);ne.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(X.isWebGLMultipleRenderTargets)for(let ve=0,Ge=W.length;ve<Ge;ve++){const be=i.get(W[ve]);be.__webglTexture&&(t.deleteTexture(be.__webglTexture),o.memory.textures--),i.remove(W[ve])}i.remove(W),i.remove(X)}let q=0;function K(){q=0}function z(){const X=q;return X>=l&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+l),q+=1,X}function U(X){const W=[];return W.push(X.wrapS),W.push(X.wrapT),W.push(X.magFilter),W.push(X.minFilter),W.push(X.anisotropy),W.push(X.internalFormat),W.push(X.format),W.push(X.type),W.push(X.generateMipmaps),W.push(X.premultiplyAlpha),W.push(X.flipY),W.push(X.unpackAlignment),W.push(X.encoding),W.join()}function Q(X,W){const ne=i.get(X);if(X.isVideoTexture&&Ve(X),X.isRenderTargetTexture===!1&&X.version>0&&ne.__version!==X.version){const ue=X.image;if(ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(ne,X,W);return}}n.bindTexture(3553,ne.__webglTexture,33984+W)}function H(X,W){const ne=i.get(X);if(X.version>0&&ne.__version!==X.version){ce(ne,X,W);return}n.bindTexture(35866,ne.__webglTexture,33984+W)}function V(X,W){const ne=i.get(X);if(X.version>0&&ne.__version!==X.version){ce(ne,X,W);return}n.bindTexture(32879,ne.__webglTexture,33984+W)}function J(X,W){const ne=i.get(X);if(X.version>0&&ne.__version!==X.version){ge(ne,X,W);return}n.bindTexture(34067,ne.__webglTexture,33984+W)}const j={[Rs]:10497,[Fi]:33071,[bd]:33648},re={[vn]:9728,[ym]:9984,[xm]:9986,[Wt]:9729,[Ey]:9985,[wa]:9987};function ee(X,W,ne){if(ne?(t.texParameteri(X,10242,j[W.wrapS]),t.texParameteri(X,10243,j[W.wrapT]),(X===32879||X===35866)&&t.texParameteri(X,32882,j[W.wrapR]),t.texParameteri(X,10240,re[W.magFilter]),t.texParameteri(X,10241,re[W.minFilter])):(t.texParameteri(X,10242,33071),t.texParameteri(X,10243,33071),(X===32879||X===35866)&&t.texParameteri(X,32882,33071),(W.wrapS!==Fi||W.wrapT!==Fi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(X,10240,T(W.magFilter)),t.texParameteri(X,10241,T(W.minFilter)),W.minFilter!==vn&&W.minFilter!==Wt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ue=e.get("EXT_texture_filter_anisotropic");if(W.type===Qn&&e.has("OES_texture_float_linear")===!1||a===!1&&W.type===pi&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||i.get(W).__currentAnisotropy)&&(t.texParameterf(X,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy)}}function ae(X,W){let ne=!1;X.__webglInit===void 0&&(X.__webglInit=!0,W.addEventListener("dispose",k));const ue=W.source;let ve=A.get(ue);ve===void 0&&(ve={},A.set(ue,ve));const Ge=U(W);if(Ge!==X.__cacheKey){ve[Ge]===void 0&&(ve[Ge]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),ve[Ge].usedTimes++;const be=ve[X.__cacheKey];be!==void 0&&(ve[X.__cacheKey].usedTimes--,be.usedTimes===0&&O(W)),X.__cacheKey=Ge,X.__webglTexture=ve[Ge].texture}return ne}function ce(X,W,ne){let ue=3553;W.isDataArrayTexture&&(ue=35866),W.isData3DTexture&&(ue=32879);const ve=ae(X,W),Ge=W.source;n.bindTexture(ue,X.__webglTexture,33984+ne);const be=i.get(Ge);if(Ge.version!==be.__version||ve===!0){n.activeTexture(33984+ne),t.pixelStorei(37440,W.flipY),t.pixelStorei(37441,W.premultiplyAlpha),t.pixelStorei(3317,W.unpackAlignment),t.pixelStorei(37443,0);const De=E(W)&&w(W.image)===!1;let me=x(W.image,De,!1,u);me=Pe(W,me);const je=w(me)||a,ie=s.convert(W.format,W.encoding);let _e=s.convert(W.type),Ce=b(W.internalFormat,ie,_e,W.encoding,W.isVideoTexture);ee(ue,W,je);let ke;const tt=W.mipmaps,se=a&&W.isVideoTexture!==!0,Je=be.__version===void 0||ve===!0,Qe=B(W,me,je);if(W.isDepthTexture)Ce=6402,a?W.type===Qn?Ce=36012:W.type===Es?Ce=33190:W.type===Fu?Ce=35056:Ce=33189:W.type===Qn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===ko&&Ce===6402&&W.type!==_f&&W.type!==Es&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=Es,_e=s.convert(W.type)),W.format===tf&&Ce===6402&&(Ce=34041,W.type!==Fu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Fu,_e=s.convert(W.type))),Je&&(se?n.texStorage2D(3553,1,Ce,me.width,me.height):n.texImage2D(3553,0,Ce,me.width,me.height,0,ie,_e,null));else if(W.isDataTexture)if(tt.length>0&&je){se&&Je&&n.texStorage2D(3553,Qe,Ce,tt[0].width,tt[0].height);for(let Ee=0,We=tt.length;Ee<We;Ee++)ke=tt[Ee],se?n.texSubImage2D(3553,Ee,0,0,ke.width,ke.height,ie,_e,ke.data):n.texImage2D(3553,Ee,Ce,ke.width,ke.height,0,ie,_e,ke.data);W.generateMipmaps=!1}else se?(Je&&n.texStorage2D(3553,Qe,Ce,me.width,me.height),n.texSubImage2D(3553,0,0,0,me.width,me.height,ie,_e,me.data)):n.texImage2D(3553,0,Ce,me.width,me.height,0,ie,_e,me.data);else if(W.isCompressedTexture){se&&Je&&n.texStorage2D(3553,Qe,Ce,tt[0].width,tt[0].height);for(let Ee=0,We=tt.length;Ee<We;Ee++)ke=tt[Ee],W.format!==Fn?ie!==null?se?n.compressedTexSubImage2D(3553,Ee,0,0,ke.width,ke.height,ie,ke.data):n.compressedTexImage2D(3553,Ee,Ce,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):se?n.texSubImage2D(3553,Ee,0,0,ke.width,ke.height,ie,_e,ke.data):n.texImage2D(3553,Ee,Ce,ke.width,ke.height,0,ie,_e,ke.data)}else if(W.isDataArrayTexture)se?(Je&&n.texStorage3D(35866,Qe,Ce,me.width,me.height,me.depth),n.texSubImage3D(35866,0,0,0,0,me.width,me.height,me.depth,ie,_e,me.data)):n.texImage3D(35866,0,Ce,me.width,me.height,me.depth,0,ie,_e,me.data);else if(W.isData3DTexture)se?(Je&&n.texStorage3D(32879,Qe,Ce,me.width,me.height,me.depth),n.texSubImage3D(32879,0,0,0,0,me.width,me.height,me.depth,ie,_e,me.data)):n.texImage3D(32879,0,Ce,me.width,me.height,me.depth,0,ie,_e,me.data);else if(W.isFramebufferTexture){if(Je)if(se)n.texStorage2D(3553,Qe,Ce,me.width,me.height);else{let Ee=me.width,We=me.height;for(let ft=0;ft<Qe;ft++)n.texImage2D(3553,ft,Ce,Ee,We,0,ie,_e,null),Ee>>=1,We>>=1}}else if(tt.length>0&&je){se&&Je&&n.texStorage2D(3553,Qe,Ce,tt[0].width,tt[0].height);for(let Ee=0,We=tt.length;Ee<We;Ee++)ke=tt[Ee],se?n.texSubImage2D(3553,Ee,0,0,ie,_e,ke):n.texImage2D(3553,Ee,Ce,ie,_e,ke);W.generateMipmaps=!1}else se?(Je&&n.texStorage2D(3553,Qe,Ce,me.width,me.height),n.texSubImage2D(3553,0,0,0,ie,_e,me)):n.texImage2D(3553,0,Ce,ie,_e,me);S(W,je)&&M(ue),be.__version=Ge.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function ge(X,W,ne){if(W.image.length!==6)return;const ue=ae(X,W),ve=W.source;n.bindTexture(34067,X.__webglTexture,33984+ne);const Ge=i.get(ve);if(ve.version!==Ge.__version||ue===!0){n.activeTexture(33984+ne),t.pixelStorei(37440,W.flipY),t.pixelStorei(37441,W.premultiplyAlpha),t.pixelStorei(3317,W.unpackAlignment),t.pixelStorei(37443,0);const be=W.isCompressedTexture||W.image[0].isCompressedTexture,De=W.image[0]&&W.image[0].isDataTexture,me=[];for(let Ee=0;Ee<6;Ee++)!be&&!De?me[Ee]=x(W.image[Ee],!1,!0,c):me[Ee]=De?W.image[Ee].image:W.image[Ee],me[Ee]=Pe(W,me[Ee]);const je=me[0],ie=w(je)||a,_e=s.convert(W.format,W.encoding),Ce=s.convert(W.type),ke=b(W.internalFormat,_e,Ce,W.encoding),tt=a&&W.isVideoTexture!==!0,se=Ge.__version===void 0||ue===!0;let Je=B(W,je,ie);ee(34067,W,ie);let Qe;if(be){tt&&se&&n.texStorage2D(34067,Je,ke,je.width,je.height);for(let Ee=0;Ee<6;Ee++){Qe=me[Ee].mipmaps;for(let We=0;We<Qe.length;We++){const ft=Qe[We];W.format!==Fn?_e!==null?tt?n.compressedTexSubImage2D(34069+Ee,We,0,0,ft.width,ft.height,_e,ft.data):n.compressedTexImage2D(34069+Ee,We,ke,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tt?n.texSubImage2D(34069+Ee,We,0,0,ft.width,ft.height,_e,Ce,ft.data):n.texImage2D(34069+Ee,We,ke,ft.width,ft.height,0,_e,Ce,ft.data)}}}else{Qe=W.mipmaps,tt&&se&&(Qe.length>0&&Je++,n.texStorage2D(34067,Je,ke,me[0].width,me[0].height));for(let Ee=0;Ee<6;Ee++)if(De){tt?n.texSubImage2D(34069+Ee,0,0,0,me[Ee].width,me[Ee].height,_e,Ce,me[Ee].data):n.texImage2D(34069+Ee,0,ke,me[Ee].width,me[Ee].height,0,_e,Ce,me[Ee].data);for(let We=0;We<Qe.length;We++){const Tt=Qe[We].image[Ee].image;tt?n.texSubImage2D(34069+Ee,We+1,0,0,Tt.width,Tt.height,_e,Ce,Tt.data):n.texImage2D(34069+Ee,We+1,ke,Tt.width,Tt.height,0,_e,Ce,Tt.data)}}else{tt?n.texSubImage2D(34069+Ee,0,0,0,_e,Ce,me[Ee]):n.texImage2D(34069+Ee,0,ke,_e,Ce,me[Ee]);for(let We=0;We<Qe.length;We++){const ft=Qe[We];tt?n.texSubImage2D(34069+Ee,We+1,0,0,_e,Ce,ft.image[Ee]):n.texImage2D(34069+Ee,We+1,ke,_e,Ce,ft.image[Ee])}}}S(W,ie)&&M(34067),Ge.__version=ve.version,W.onUpdate&&W.onUpdate(W)}X.__version=W.version}function xe(X,W,ne,ue,ve){const Ge=s.convert(ne.format,ne.encoding),be=s.convert(ne.type),De=b(ne.internalFormat,Ge,be,ne.encoding);i.get(W).__hasExternalTextures||(ve===32879||ve===35866?n.texImage3D(ve,0,De,W.width,W.height,W.depth,0,Ge,be,null):n.texImage2D(ve,0,De,W.width,W.height,0,Ge,be,null)),n.bindFramebuffer(36160,X),Oe(W)?h.framebufferTexture2DMultisampleEXT(36160,ue,ve,i.get(ne).__webglTexture,0,ye(W)):t.framebufferTexture2D(36160,ue,ve,i.get(ne).__webglTexture,0),n.bindFramebuffer(36160,null)}function Se(X,W,ne){if(t.bindRenderbuffer(36161,X),W.depthBuffer&&!W.stencilBuffer){let ue=33189;if(ne||Oe(W)){const ve=W.depthTexture;ve&&ve.isDepthTexture&&(ve.type===Qn?ue=36012:ve.type===Es&&(ue=33190));const Ge=ye(W);Oe(W)?h.renderbufferStorageMultisampleEXT(36161,Ge,ue,W.width,W.height):t.renderbufferStorageMultisample(36161,Ge,ue,W.width,W.height)}else t.renderbufferStorage(36161,ue,W.width,W.height);t.framebufferRenderbuffer(36160,36096,36161,X)}else if(W.depthBuffer&&W.stencilBuffer){const ue=ye(W);ne&&Oe(W)===!1?t.renderbufferStorageMultisample(36161,ue,35056,W.width,W.height):Oe(W)?h.renderbufferStorageMultisampleEXT(36161,ue,35056,W.width,W.height):t.renderbufferStorage(36161,34041,W.width,W.height),t.framebufferRenderbuffer(36160,33306,36161,X)}else{const ue=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let ve=0;ve<ue.length;ve++){const Ge=ue[ve],be=s.convert(Ge.format,Ge.encoding),De=s.convert(Ge.type),me=b(Ge.internalFormat,be,De,Ge.encoding),je=ye(W);ne&&Oe(W)===!1?t.renderbufferStorageMultisample(36161,je,me,W.width,W.height):Oe(W)?h.renderbufferStorageMultisampleEXT(36161,je,me,W.width,W.height):t.renderbufferStorage(36161,me,W.width,W.height)}}t.bindRenderbuffer(36161,null)}function oe(X,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,X),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),Q(W.depthTexture,0);const ue=i.get(W.depthTexture).__webglTexture,ve=ye(W);if(W.depthTexture.format===ko)Oe(W)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,ue,0,ve):t.framebufferTexture2D(36160,36096,3553,ue,0);else if(W.depthTexture.format===tf)Oe(W)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,ue,0,ve):t.framebufferTexture2D(36160,33306,3553,ue,0);else throw new Error("Unknown depthTexture format")}function he(X){const W=i.get(X),ne=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!W.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");oe(W.__webglFramebuffer,X)}else if(ne){W.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)n.bindFramebuffer(36160,W.__webglFramebuffer[ue]),W.__webglDepthbuffer[ue]=t.createRenderbuffer(),Se(W.__webglDepthbuffer[ue],X,!1)}else n.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=t.createRenderbuffer(),Se(W.__webglDepthbuffer,X,!1);n.bindFramebuffer(36160,null)}function Re(X,W,ne){const ue=i.get(X);W!==void 0&&xe(ue.__webglFramebuffer,X,X.texture,36064,3553),ne!==void 0&&he(X)}function Ie(X){const W=X.texture,ne=i.get(X),ue=i.get(W);X.addEventListener("dispose",D),X.isWebGLMultipleRenderTargets!==!0&&(ue.__webglTexture===void 0&&(ue.__webglTexture=t.createTexture()),ue.__version=W.version,o.memory.textures++);const ve=X.isWebGLCubeRenderTarget===!0,Ge=X.isWebGLMultipleRenderTargets===!0,be=w(X)||a;if(ve){ne.__webglFramebuffer=[];for(let De=0;De<6;De++)ne.__webglFramebuffer[De]=t.createFramebuffer()}else{if(ne.__webglFramebuffer=t.createFramebuffer(),Ge)if(r.drawBuffers){const De=X.texture;for(let me=0,je=De.length;me<je;me++){const ie=i.get(De[me]);ie.__webglTexture===void 0&&(ie.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&X.samples>0&&Oe(X)===!1){const De=Ge?W:[W];ne.__webglMultisampledFramebuffer=t.createFramebuffer(),ne.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,ne.__webglMultisampledFramebuffer);for(let me=0;me<De.length;me++){const je=De[me];ne.__webglColorRenderbuffer[me]=t.createRenderbuffer(),t.bindRenderbuffer(36161,ne.__webglColorRenderbuffer[me]);const ie=s.convert(je.format,je.encoding),_e=s.convert(je.type),Ce=b(je.internalFormat,ie,_e,je.encoding,X.isXRRenderTarget===!0),ke=ye(X);t.renderbufferStorageMultisample(36161,ke,Ce,X.width,X.height),t.framebufferRenderbuffer(36160,36064+me,36161,ne.__webglColorRenderbuffer[me])}t.bindRenderbuffer(36161,null),X.depthBuffer&&(ne.__webglDepthRenderbuffer=t.createRenderbuffer(),Se(ne.__webglDepthRenderbuffer,X,!0)),n.bindFramebuffer(36160,null)}}if(ve){n.bindTexture(34067,ue.__webglTexture),ee(34067,W,be);for(let De=0;De<6;De++)xe(ne.__webglFramebuffer[De],X,W,36064,34069+De);S(W,be)&&M(34067),n.unbindTexture()}else if(Ge){const De=X.texture;for(let me=0,je=De.length;me<je;me++){const ie=De[me],_e=i.get(ie);n.bindTexture(3553,_e.__webglTexture),ee(3553,ie,be),xe(ne.__webglFramebuffer,X,ie,36064+me,3553),S(ie,be)&&M(3553)}n.unbindTexture()}else{let De=3553;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(a?De=X.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(De,ue.__webglTexture),ee(De,W,be),xe(ne.__webglFramebuffer,X,W,36064,De),S(W,be)&&M(De),n.unbindTexture()}X.depthBuffer&&he(X)}function Te(X){const W=w(X)||a,ne=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let ue=0,ve=ne.length;ue<ve;ue++){const Ge=ne[ue];if(S(Ge,W)){const be=X.isWebGLCubeRenderTarget?34067:3553,De=i.get(Ge).__webglTexture;n.bindTexture(be,De),M(be),n.unbindTexture()}}}function qe(X){if(a&&X.samples>0&&Oe(X)===!1){const W=X.isWebGLMultipleRenderTargets?X.texture:[X.texture],ne=X.width,ue=X.height;let ve=16384;const Ge=[],be=X.stencilBuffer?33306:36096,De=i.get(X),me=X.isWebGLMultipleRenderTargets===!0;if(me)for(let je=0;je<W.length;je++)n.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+je,36161,null),n.bindFramebuffer(36160,De.__webglFramebuffer),t.framebufferTexture2D(36009,36064+je,3553,null,0);n.bindFramebuffer(36008,De.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,De.__webglFramebuffer);for(let je=0;je<W.length;je++){Ge.push(36064+je),X.depthBuffer&&Ge.push(be);const ie=De.__ignoreDepthValues!==void 0?De.__ignoreDepthValues:!1;if(ie===!1&&(X.depthBuffer&&(ve|=256),X.stencilBuffer&&(ve|=1024)),me&&t.framebufferRenderbuffer(36008,36064,36161,De.__webglColorRenderbuffer[je]),ie===!0&&(t.invalidateFramebuffer(36008,[be]),t.invalidateFramebuffer(36009,[be])),me){const _e=i.get(W[je]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,_e,0)}t.blitFramebuffer(0,0,ne,ue,0,0,ne,ue,ve,9728),d&&t.invalidateFramebuffer(36008,Ge)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),me)for(let je=0;je<W.length;je++){n.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+je,36161,De.__webglColorRenderbuffer[je]);const ie=i.get(W[je]).__webglTexture;n.bindFramebuffer(36160,De.__webglFramebuffer),t.framebufferTexture2D(36009,36064+je,3553,ie,0)}n.bindFramebuffer(36009,De.__webglMultisampledFramebuffer)}}function ye(X){return Math.min(f,X.samples)}function Oe(X){const W=i.get(X);return a&&X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Ve(X){const W=o.render.frame;p.get(X)!==W&&(p.set(X,W),X.update())}function Pe(X,W){const ne=X.encoding,ue=X.format,ve=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||X.format===S_||ne!==Ps&&(ne===Nt?a===!1?e.has("EXT_sRGB")===!0&&ue===Fn?(X.format=S_,X.minFilter=Wt,X.generateMipmaps=!1):W=p3.sRGBToLinear(W):(ue!==Fn||ve!==er)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ne)),W}this.allocateTextureUnit=z,this.resetTextureUnits=K,this.setTexture2D=Q,this.setTexture2DArray=H,this.setTexture3D=V,this.setTextureCube=J,this.rebindTextures=Re,this.setupRenderTarget=Ie,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=qe,this.setupDepthRenderbuffer=he,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Oe}function fU(t,e,n){const i=n.isWebGL2;function r(s,o=null){let a;if(s===er)return 5121;if(s===H8)return 32819;if(s===V8)return 32820;if(s===v_)return 5120;if(s===o3)return 5122;if(s===_f)return 5123;if(s===Np)return 5124;if(s===Es)return 5125;if(s===Qn)return 5126;if(s===pi)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===W8)return 6406;if(s===Fn)return 6408;if(s===q8)return 6409;if(s===Y8)return 6410;if(s===ko)return 6402;if(s===tf)return 34041;if(s===wu)return 6403;if(s===j8)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===S_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===a3)return 36244;if(s===Eu)return 33319;if(s===by)return 33320;if(s===wm)return 36249;if(s===zp||s===Mv||s===Iv||s===Gp)if(o===Nt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===zp)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Mv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Iv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Gp)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===zp)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Mv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Iv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Gp)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===__||s===vS||s===y_||s===_S)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===__)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===vS)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===y_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===_S)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===l3)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===x_||s===w_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===x_)return o===Nt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===w_)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===E_||s===yS||s===xS||s===wS||s===ES||s===bS||s===SS||s===CS||s===MS||s===IS||s===TS||s===BS||s===RS||s===PS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===E_)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===yS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===xS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===wS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===ES)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===bS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===SS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===CS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===MS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===IS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===TS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===BS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===RS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===PS)return o===Nt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===b_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===b_)return o===Nt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Fu?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class hU extends dn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ts extends It{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jse={type:"move"};class zw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ts,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ts,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ts,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const A=n.getJointPose(m,i);if(c.joints[m.jointName]===void 0){const y=new ts;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[m.jointName]=y,c.add(y)}const v=c.joints[m.jointName];A!==null&&(v.matrix.fromArray(A.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=A.radius),v.visible=A!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,p=.005;c.inputState.pinching&&h>d+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(jse)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class rg extends bn{constructor(e,n,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:ko,u!==ko&&u!==tf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===ko&&(i=Es),i===void 0&&u===tf&&(i=Fu),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:vn,this.minFilter=l!==void 0?l:vn,this.flipY=!1,this.generateMipmaps=!1}}class qse extends Cr{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,f=null,h=null,d=null;const p=n.getContextAttributes();let m=null,A=null;const v=[],y=[],x=new dn;x.layers.enable(1),x.viewport=new Pt;const w=new dn;w.layers.enable(2),w.viewport=new Pt;const E=[x,w],S=new hU;S.layers.enable(1),S.layers.enable(2);let M=null,b=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let Q=v[U];return Q===void 0&&(Q=new zw,v[U]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(U){let Q=v[U];return Q===void 0&&(Q=new zw,v[U]=Q),Q.getGripSpace()},this.getHand=function(U){let Q=v[U];return Q===void 0&&(Q=new zw,v[U]=Q),Q.getHandSpace()};function B(U){const Q=y.indexOf(U.inputSource);if(Q===-1)return;const H=v[Q];H!==void 0&&H.dispatchEvent({type:U.type,data:U.inputSource})}function T(){r.removeEventListener("select",B),r.removeEventListener("selectstart",B),r.removeEventListener("selectend",B),r.removeEventListener("squeeze",B),r.removeEventListener("squeezestart",B),r.removeEventListener("squeezeend",B),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",k);for(let U=0;U<v.length;U++){const Q=y[U];Q!==null&&(y[U]=null,v[U].disconnect(Q))}M=null,b=null,e.setRenderTarget(m),h=null,f=null,u=null,r=null,A=null,z.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){s=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(U){l=U},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(U){if(r=U,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",T),r.addEventListener("inputsourceschange",k),p.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,n,Q),r.updateRenderState({baseLayer:h}),A=new kn(h.framebufferWidth,h.framebufferHeight,{format:Fn,type:er,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let Q=null,H=null,V=null;p.depth&&(V=p.stencil?35056:33190,Q=p.stencil?tf:ko,H=p.stencil?Fu:Es);const J={colorFormat:32856,depthFormat:V,scaleFactor:s};u=new XRWebGLBinding(r,n),f=u.createProjectionLayer(J),r.updateRenderState({layers:[f]}),A=new kn(f.textureWidth,f.textureHeight,{format:Fn,type:er,depthTexture:new rg(f.textureWidth,f.textureHeight,H,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const j=e.properties.get(A);j.__ignoreDepthValues=f.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await r.requestReferenceSpace(a),z.setContext(r),z.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function k(U){for(let Q=0;Q<U.removed.length;Q++){const H=U.removed[Q],V=y.indexOf(H);V>=0&&(y[V]=null,v[V].dispatchEvent({type:"disconnected",data:H}))}for(let Q=0;Q<U.added.length;Q++){const H=U.added[Q];let V=y.indexOf(H);if(V===-1){for(let j=0;j<v.length;j++)if(j>=y.length){y.push(H),V=j;break}else if(y[j]===null){y[j]=H,V=j;break}if(V===-1)break}const J=v[V];J&&J.dispatchEvent({type:"connected",data:H})}}const D=new F,N=new F;function O(U,Q,H){D.setFromMatrixPosition(Q.matrixWorld),N.setFromMatrixPosition(H.matrixWorld);const V=D.distanceTo(N),J=Q.projectionMatrix.elements,j=H.projectionMatrix.elements,re=J[14]/(J[10]-1),ee=J[14]/(J[10]+1),ae=(J[9]+1)/J[5],ce=(J[9]-1)/J[5],ge=(J[8]-1)/J[0],xe=(j[8]+1)/j[0],Se=re*ge,oe=re*xe,he=V/(-ge+xe),Re=he*-ge;Q.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(Re),U.translateZ(he),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert();const Ie=re+he,Te=ee+he,qe=Se-Re,ye=oe+(V-Re),Oe=ae*ee/Te*Ie,Ve=ce*ee/Te*Ie;U.projectionMatrix.makePerspective(qe,ye,Oe,Ve,Ie,Te)}function Y(U,Q){Q===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(Q.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(r===null)return;S.near=w.near=x.near=U.near,S.far=w.far=x.far=U.far,(M!==S.near||b!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),M=S.near,b=S.far);const Q=U.parent,H=S.cameras;Y(S,Q);for(let J=0;J<H.length;J++)Y(H[J],Q);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),U.matrix.copy(S.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale);const V=U.children;for(let J=0,j=V.length;J<j;J++)V[J].updateMatrixWorld(!0);H.length===2?O(S,x,w):S.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(U){f!==null&&(f.fixedFoveation=U),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=U)};let q=null;function K(U,Q){if(c=Q.getViewerPose(l||o),d=Q,c!==null){const H=c.views;h!==null&&(e.setRenderTargetFramebuffer(A,h.framebuffer),e.setRenderTarget(A));let V=!1;H.length!==S.cameras.length&&(S.cameras.length=0,V=!0);for(let J=0;J<H.length;J++){const j=H[J];let re=null;if(h!==null)re=h.getViewport(j);else{const ae=u.getViewSubImage(f,j);re=ae.viewport,J===0&&(e.setRenderTargetTextures(A,ae.colorTexture,f.ignoreDepthValues?void 0:ae.depthStencilTexture),e.setRenderTarget(A))}let ee=E[J];ee===void 0&&(ee=new dn,ee.layers.enable(J),ee.viewport=new Pt,E[J]=ee),ee.matrix.fromArray(j.transform.matrix),ee.projectionMatrix.fromArray(j.projectionMatrix),ee.viewport.set(re.x,re.y,re.width,re.height),J===0&&S.matrix.copy(ee.matrix),V===!0&&S.cameras.push(ee)}}for(let H=0;H<v.length;H++){const V=y[H],J=v[H];V!==null&&J!==void 0&&J.update(V,Q,l||o)}q&&q(U,Q),d=null}const z=new oU;z.setAnimationLoop(K),this.setAnimationLoop=function(U){q=U},this.dispose=function(){}}}function Yse(t,e){function n(m,A){m.fogColor.value.copy(A.color),A.isFog?(m.fogNear.value=A.near,m.fogFar.value=A.far):A.isFogExp2&&(m.fogDensity.value=A.density)}function i(m,A,v,y,x){A.isMeshBasicMaterial||A.isMeshLambertMaterial?r(m,A):A.isMeshToonMaterial?(r(m,A),u(m,A)):A.isMeshPhongMaterial?(r(m,A),c(m,A)):A.isMeshStandardMaterial?(r(m,A),f(m,A),A.isMeshPhysicalMaterial&&h(m,A,x)):A.isMeshMatcapMaterial?(r(m,A),d(m,A)):A.isMeshDepthMaterial?r(m,A):A.isMeshDistanceMaterial?(r(m,A),p(m,A)):A.isMeshNormalMaterial?r(m,A):A.isLineBasicMaterial?(s(m,A),A.isLineDashedMaterial&&o(m,A)):A.isPointsMaterial?a(m,A,v,y):A.isSpriteMaterial?l(m,A):A.isShadowMaterial?(m.color.value.copy(A.color),m.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function r(m,A){m.opacity.value=A.opacity,A.color&&m.diffuse.value.copy(A.color),A.emissive&&m.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(m.map.value=A.map),A.alphaMap&&(m.alphaMap.value=A.alphaMap),A.bumpMap&&(m.bumpMap.value=A.bumpMap,m.bumpScale.value=A.bumpScale,A.side===Er&&(m.bumpScale.value*=-1)),A.displacementMap&&(m.displacementMap.value=A.displacementMap,m.displacementScale.value=A.displacementScale,m.displacementBias.value=A.displacementBias),A.emissiveMap&&(m.emissiveMap.value=A.emissiveMap),A.normalMap&&(m.normalMap.value=A.normalMap,m.normalScale.value.copy(A.normalScale),A.side===Er&&m.normalScale.value.negate()),A.specularMap&&(m.specularMap.value=A.specularMap),A.alphaTest>0&&(m.alphaTest.value=A.alphaTest);const v=e.get(A).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=A.reflectivity,m.ior.value=A.ior,m.refractionRatio.value=A.refractionRatio),A.lightMap){m.lightMap.value=A.lightMap;const w=t.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=A.lightMapIntensity*w}A.aoMap&&(m.aoMap.value=A.aoMap,m.aoMapIntensity.value=A.aoMapIntensity);let y;A.map?y=A.map:A.specularMap?y=A.specularMap:A.displacementMap?y=A.displacementMap:A.normalMap?y=A.normalMap:A.bumpMap?y=A.bumpMap:A.roughnessMap?y=A.roughnessMap:A.metalnessMap?y=A.metalnessMap:A.alphaMap?y=A.alphaMap:A.emissiveMap?y=A.emissiveMap:A.clearcoatMap?y=A.clearcoatMap:A.clearcoatNormalMap?y=A.clearcoatNormalMap:A.clearcoatRoughnessMap?y=A.clearcoatRoughnessMap:A.iridescenceMap?y=A.iridescenceMap:A.iridescenceThicknessMap?y=A.iridescenceThicknessMap:A.specularIntensityMap?y=A.specularIntensityMap:A.specularColorMap?y=A.specularColorMap:A.transmissionMap?y=A.transmissionMap:A.thicknessMap?y=A.thicknessMap:A.sheenColorMap?y=A.sheenColorMap:A.sheenRoughnessMap&&(y=A.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;A.aoMap?x=A.aoMap:A.lightMap&&(x=A.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,A){m.diffuse.value.copy(A.color),m.opacity.value=A.opacity}function o(m,A){m.dashSize.value=A.dashSize,m.totalSize.value=A.dashSize+A.gapSize,m.scale.value=A.scale}function a(m,A,v,y){m.diffuse.value.copy(A.color),m.opacity.value=A.opacity,m.size.value=A.size*v,m.scale.value=y*.5,A.map&&(m.map.value=A.map),A.alphaMap&&(m.alphaMap.value=A.alphaMap),A.alphaTest>0&&(m.alphaTest.value=A.alphaTest);let x;A.map?x=A.map:A.alphaMap&&(x=A.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,A){m.diffuse.value.copy(A.color),m.opacity.value=A.opacity,m.rotation.value=A.rotation,A.map&&(m.map.value=A.map),A.alphaMap&&(m.alphaMap.value=A.alphaMap),A.alphaTest>0&&(m.alphaTest.value=A.alphaTest);let v;A.map?v=A.map:A.alphaMap&&(v=A.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function c(m,A){m.specular.value.copy(A.specular),m.shininess.value=Math.max(A.shininess,1e-4)}function u(m,A){A.gradientMap&&(m.gradientMap.value=A.gradientMap)}function f(m,A){m.roughness.value=A.roughness,m.metalness.value=A.metalness,A.roughnessMap&&(m.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(m.metalnessMap.value=A.metalnessMap),e.get(A).envMap&&(m.envMapIntensity.value=A.envMapIntensity)}function h(m,A,v){m.ior.value=A.ior,A.sheen>0&&(m.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),m.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(m.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(m.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(m.clearcoat.value=A.clearcoat,m.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(m.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),m.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===Er&&m.clearcoatNormalScale.value.negate())),A.iridescence>0&&(m.iridescence.value=A.iridescence,m.iridescenceIOR.value=A.iridescenceIOR,m.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(m.iridescenceMap.value=A.iridescenceMap),A.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=A.iridescenceThicknessMap)),A.transmission>0&&(m.transmission.value=A.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),A.transmissionMap&&(m.transmissionMap.value=A.transmissionMap),m.thickness.value=A.thickness,A.thicknessMap&&(m.thicknessMap.value=A.thicknessMap),m.attenuationDistance.value=A.attenuationDistance,m.attenuationColor.value.copy(A.attenuationColor)),m.specularIntensity.value=A.specularIntensity,m.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(m.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(m.specularColorMap.value=A.specularColorMap)}function d(m,A){A.matcap&&(m.matcap.value=A.matcap)}function p(m,A){m.referencePosition.value.copy(A.referencePosition),m.nearDistance.value=A.nearDistance,m.farDistance.value=A.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Xse(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(35375):0;function l(y,x){const w=x.program;i.uniformBlockBinding(y,w)}function c(y,x){let w=r[y.id];w===void 0&&(p(y),w=u(y),r[y.id]=w,y.addEventListener("dispose",A));const E=x.program;i.updateUBOMapping(y,E);const S=e.render.frame;s[y.id]!==S&&(h(y),s[y.id]=S)}function u(y){const x=f();y.__bindingPointIndex=x;const w=t.createBuffer(),E=y.__size,S=y.usage;return t.bindBuffer(35345,w),t.bufferData(35345,E,S),t.bindBuffer(35345,null),t.bindBufferBase(35345,x,w),w}function f(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(y){const x=r[y.id],w=y.uniforms,E=y.__cache;t.bindBuffer(35345,x);for(let S=0,M=w.length;S<M;S++){const b=w[S];if(d(b,S,E)===!0){const B=b.value,T=b.__offset;typeof B=="number"?(b.__data[0]=B,t.bufferSubData(35345,T,b.__data)):(b.value.isMatrix3?(b.__data[0]=b.value.elements[0],b.__data[1]=b.value.elements[1],b.__data[2]=b.value.elements[2],b.__data[3]=b.value.elements[0],b.__data[4]=b.value.elements[3],b.__data[5]=b.value.elements[4],b.__data[6]=b.value.elements[5],b.__data[7]=b.value.elements[0],b.__data[8]=b.value.elements[6],b.__data[9]=b.value.elements[7],b.__data[10]=b.value.elements[8],b.__data[11]=b.value.elements[0]):B.toArray(b.__data),t.bufferSubData(35345,T,b.__data))}}t.bindBuffer(35345,null)}function d(y,x,w){const E=y.value;if(w[x]===void 0)return typeof E=="number"?w[x]=E:w[x]=E.clone(),!0;if(typeof E=="number"){if(w[x]!==E)return w[x]=E,!0}else{const S=w[x];if(S.equals(E)===!1)return S.copy(E),!0}return!1}function p(y){const x=y.uniforms;let w=0;const E=16;let S=0;for(let M=0,b=x.length;M<b;M++){const B=x[M],T=m(B);if(B.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=w,M>0){S=w%E;const k=E-S;S!==0&&k-T.boundary<0&&(w+=E-S,B.__offset=w)}w+=T.storage}return S=w%E,S>0&&(w+=E-S),y.__size=w,y.__cache={},this}function m(y){const x=y.value,w={boundary:0,storage:0};return typeof x=="number"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function A(y){const x=y.target;x.removeEventListener("dispose",A);const w=o.indexOf(x.__bindingPointIndex);o.splice(w,1),t.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function v(){for(const y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}function Jse(){const t=Cm("canvas");return t.style.display="block",t}function v3(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:Jse(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let u;n!==null?u=n.getContextAttributes().alpha:u=t.alpha!==void 0?t.alpha:!1;let f=null,h=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ps,this.physicallyCorrectLights=!1,this.toneMapping=Fo,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let A=!1,v=0,y=0,x=null,w=-1,E=null;const S=new Pt,M=new Pt;let b=null,B=e.width,T=e.height,k=1,D=null,N=null;const O=new Pt(0,0,B,T),Y=new Pt(0,0,B,T);let q=!1;const K=new ng;let z=!1,U=!1,Q=null;const H=new Ne,V=new Ae,J=new F,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function re(){return x===null?k:1}let ee=n;function ae(Z,de){for(let Le=0;Le<Z.length;Le++){const pe=Z[Le],Ue=e.getContext(pe,de);if(Ue!==null)return Ue}return null}try{const Z={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${xy}`),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",ke,!1),e.addEventListener("webglcontextcreationerror",tt,!1),ee===null){const de=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&de.shift(),ee=ae(de,Z),ee===null)throw ae(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ee.getShaderPrecisionFormat===void 0&&(ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let ce,ge,xe,Se,oe,he,Re,Ie,Te,qe,ye,Oe,Ve,Pe,X,W,ne,ue,ve,Ge,be,De,me,je;function ie(){ce=new hre(ee),ge=new ore(ee,ce,t),ce.init(ge),De=new fU(ee,ce,ge),xe=new Vse(ee,ce,ge),Se=new mre,oe=new Pse,he=new Wse(ee,ce,xe,oe,ge,De,Se),Re=new lre(m),Ie=new fre(m),Te=new Cte(ee,ge),me=new rre(ee,ce,Te,ge),qe=new dre(ee,Te,Se,me),ye=new _re(ee,qe,Te,Se),ve=new vre(ee,ge,he),W=new are(oe),Oe=new Rse(m,Re,Ie,ce,ge,me,W),Ve=new Yse(m,oe),Pe=new Lse,X=new zse(ce,ge),ue=new ire(m,Re,xe,ye,u,o),ne=new Hse(m,ye,ge),je=new Xse(ee,Se,ge,xe),Ge=new sre(ee,ce,Se,ge),be=new pre(ee,ce,Se,ge),Se.programs=Oe.programs,m.capabilities=ge,m.extensions=ce,m.properties=oe,m.renderLists=Pe,m.shadowMap=ne,m.state=xe,m.info=Se}ie();const _e=new qse(m,ee);this.xr=_e,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const Z=ce.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=ce.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(Z){Z!==void 0&&(k=Z,this.setSize(B,T,!1))},this.getSize=function(Z){return Z.set(B,T)},this.setSize=function(Z,de,Le){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=Z,T=de,e.width=Math.floor(Z*k),e.height=Math.floor(de*k),Le!==!1&&(e.style.width=Z+"px",e.style.height=de+"px"),this.setViewport(0,0,Z,de)},this.getDrawingBufferSize=function(Z){return Z.set(B*k,T*k).floor()},this.setDrawingBufferSize=function(Z,de,Le){B=Z,T=de,k=Le,e.width=Math.floor(Z*Le),e.height=Math.floor(de*Le),this.setViewport(0,0,Z,de)},this.getCurrentViewport=function(Z){return Z.copy(S)},this.getViewport=function(Z){return Z.copy(O)},this.setViewport=function(Z,de,Le,pe){Z.isVector4?O.set(Z.x,Z.y,Z.z,Z.w):O.set(Z,de,Le,pe),xe.viewport(S.copy(O).multiplyScalar(k).floor())},this.getScissor=function(Z){return Z.copy(Y)},this.setScissor=function(Z,de,Le,pe){Z.isVector4?Y.set(Z.x,Z.y,Z.z,Z.w):Y.set(Z,de,Le,pe),xe.scissor(M.copy(Y).multiplyScalar(k).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(Z){xe.setScissorTest(q=Z)},this.setOpaqueSort=function(Z){D=Z},this.setTransparentSort=function(Z){N=Z},this.getClearColor=function(Z){return Z.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(Z=!0,de=!0,Le=!0){let pe=0;Z&&(pe|=16384),de&&(pe|=256),Le&&(pe|=1024),ee.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",ke,!1),e.removeEventListener("webglcontextcreationerror",tt,!1),Pe.dispose(),X.dispose(),oe.dispose(),Re.dispose(),Ie.dispose(),ye.dispose(),me.dispose(),je.dispose(),Oe.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",ft),_e.removeEventListener("sessionend",Tt),Q&&(Q.dispose(),Q=null),cn.stop()};function Ce(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const Z=Se.autoReset,de=ne.enabled,Le=ne.autoUpdate,pe=ne.needsUpdate,Ue=ne.type;ie(),Se.autoReset=Z,ne.enabled=de,ne.autoUpdate=Le,ne.needsUpdate=pe,ne.type=Ue}function tt(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function se(Z){const de=Z.target;de.removeEventListener("dispose",se),Je(de)}function Je(Z){Qe(Z),oe.remove(Z)}function Qe(Z){const de=oe.get(Z).programs;de!==void 0&&(de.forEach(function(Le){Oe.releaseProgram(Le)}),Z.isShaderMaterial&&Oe.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,de,Le,pe,Ue,mt){de===null&&(de=j);const xt=Ue.isMesh&&Ue.matrixWorld.determinant()<0,kt=Zn(Z,de,Le,pe,Ue);xe.setMaterial(pe,xt);let Mt=Le.index;const Xt=Le.attributes.position;if(Mt===null){if(Xt===void 0||Xt.count===0)return}else if(Mt.count===0)return;let Qt=1;pe.wireframe===!0&&(Mt=qe.getWireframeAttribute(Le),Qt=2),me.setup(Ue,pe,kt,Le,Mt);let Jt,_n=Ge;Mt!==null&&(Jt=Te.get(Mt),_n=be,_n.setIndex(Jt));const Wr=Mt!==null?Mt.count:Xt.count,ks=Le.drawRange.start*Qt,Os=Le.drawRange.count*Qt,st=mt!==null?mt.start*Qt:0,Ot=mt!==null?mt.count*Qt:1/0,Us=Math.max(ks,st),mn=Math.min(Wr,ks+Os,st+Ot)-1,Hi=Math.max(0,mn-Us+1);if(Hi!==0){if(Ue.isMesh)pe.wireframe===!0?(xe.setLineWidth(pe.wireframeLinewidth*re()),_n.setMode(1)):_n.setMode(4);else if(Ue.isLine){let rr=pe.linewidth;rr===void 0&&(rr=1),xe.setLineWidth(rr*re()),Ue.isLineSegments?_n.setMode(1):Ue.isLineLoop?_n.setMode(2):_n.setMode(3)}else Ue.isPoints?_n.setMode(0):Ue.isSprite&&_n.setMode(4);if(Ue.isInstancedMesh)_n.renderInstances(Us,Hi,Ue.count);else if(Le.isInstancedBufferGeometry){const rr=Math.min(Le.instanceCount,Le._maxInstanceCount);_n.renderInstances(Us,Hi,rr)}else _n.render(Us,Hi)}},this.compile=function(Z,de){function Le(pe,Ue,mt){pe.transparent===!0&&pe.side===bi?(pe.side=Er,pe.needsUpdate=!0,qn(pe,Ue,mt),pe.side=Qo,pe.needsUpdate=!0,qn(pe,Ue,mt),pe.side=bi):qn(pe,Ue,mt)}h=X.get(Z),h.init(),p.push(h),Z.traverseVisible(function(pe){pe.isLight&&pe.layers.test(de.layers)&&(h.pushLight(pe),pe.castShadow&&h.pushShadow(pe))}),h.setupLights(m.physicallyCorrectLights),Z.traverse(function(pe){const Ue=pe.material;if(Ue)if(Array.isArray(Ue))for(let mt=0;mt<Ue.length;mt++){const xt=Ue[mt];Le(xt,Z,pe)}else Le(Ue,Z,pe)}),p.pop(),h=null};let Ee=null;function We(Z){Ee&&Ee(Z)}function ft(){cn.stop()}function Tt(){cn.start()}const cn=new oU;cn.setAnimationLoop(We),typeof self<"u"&&cn.setContext(self),this.setAnimationLoop=function(Z){Ee=Z,_e.setAnimationLoop(Z),Z===null?cn.stop():cn.start()},_e.addEventListener("sessionstart",ft),_e.addEventListener("sessionend",Tt),this.render=function(Z,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(de),de=_e.getCamera()),Z.isScene===!0&&Z.onBeforeRender(m,Z,de,x),h=X.get(Z,p.length),h.init(),p.push(h),H.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),K.setFromProjectionMatrix(H),U=this.localClippingEnabled,z=W.init(this.clippingPlanes,U,de),f=Pe.get(Z,d.length),f.init(),d.push(f),Yt(Z,de,0,m.sortObjects),f.finish(),m.sortObjects===!0&&f.sort(D,N),z===!0&&W.beginShadows();const Le=h.state.shadowsArray;if(ne.render(Le,Z,de),z===!0&&W.endShadows(),this.info.autoReset===!0&&this.info.reset(),ue.render(f,Z),h.setupLights(m.physicallyCorrectLights),de.isArrayCamera){const pe=de.cameras;for(let Ue=0,mt=pe.length;Ue<mt;Ue++){const xt=pe[Ue];gt(f,Z,xt,xt.viewport)}}else gt(f,Z,de);x!==null&&(he.updateMultisampleRenderTarget(x),he.updateRenderTargetMipmap(x)),Z.isScene===!0&&Z.onAfterRender(m,Z,de),me.resetDefaultState(),w=-1,E=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,d.pop(),d.length>0?f=d[d.length-1]:f=null};function Yt(Z,de,Le,pe){if(Z.visible===!1)return;if(Z.layers.test(de.layers)){if(Z.isGroup)Le=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(de);else if(Z.isLight)h.pushLight(Z),Z.castShadow&&h.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||K.intersectsSprite(Z)){pe&&J.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(H);const xt=ye.update(Z),kt=Z.material;kt.visible&&f.push(Z,xt,kt,Le,J.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(Z.isSkinnedMesh&&Z.skeleton.frame!==Se.render.frame&&(Z.skeleton.update(),Z.skeleton.frame=Se.render.frame),!Z.frustumCulled||K.intersectsObject(Z))){pe&&J.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(H);const xt=ye.update(Z),kt=Z.material;if(Array.isArray(kt)){const Mt=xt.groups;for(let Xt=0,Qt=Mt.length;Xt<Qt;Xt++){const Jt=Mt[Xt],_n=kt[Jt.materialIndex];_n&&_n.visible&&f.push(Z,xt,_n,Le,J.z,Jt)}}else kt.visible&&f.push(Z,xt,kt,Le,J.z,null)}}const mt=Z.children;for(let xt=0,kt=mt.length;xt<kt;xt++)Yt(mt[xt],de,Le,pe)}function gt(Z,de,Le,pe){const Ue=Z.opaque,mt=Z.transmissive,xt=Z.transparent;h.setupLightsView(Le),mt.length>0&&un(Ue,de,Le),pe&&xe.viewport(S.copy(pe)),Ue.length>0&&pn(Ue,de,Le),mt.length>0&&pn(mt,de,Le),xt.length>0&&pn(xt,de,Le),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function un(Z,de,Le){const pe=ge.isWebGL2;Q===null&&(Q=new kn(1,1,{generateMipmaps:!0,type:ce.has("EXT_color_buffer_half_float")?pi:er,minFilter:wa,samples:pe&&s===!0?4:0})),m.getDrawingBufferSize(V),pe?Q.setSize(V.x,V.y):Q.setSize(C_(V.x),C_(V.y));const Ue=m.getRenderTarget();m.setRenderTarget(Q),m.clear();const mt=m.toneMapping;m.toneMapping=Fo,pn(Z,de,Le),m.toneMapping=mt,he.updateMultisampleRenderTarget(Q),he.updateRenderTargetMipmap(Q),m.setRenderTarget(Ue)}function pn(Z,de,Le){const pe=de.isScene===!0?de.overrideMaterial:null;for(let Ue=0,mt=Z.length;Ue<mt;Ue++){const xt=Z[Ue],kt=xt.object,Mt=xt.geometry,Xt=pe===null?xt.material:pe,Qt=xt.group;kt.layers.test(Le.layers)&&fn(kt,de,Le,Mt,Xt,Qt)}}function fn(Z,de,Le,pe,Ue,mt){Z.onBeforeRender(m,de,Le,pe,Ue,mt),Z.modelViewMatrix.multiplyMatrices(Le.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Ue.onBeforeRender(m,de,Le,pe,Z,mt),Ue.transparent===!0&&Ue.side===bi?(Ue.side=Er,Ue.needsUpdate=!0,m.renderBufferDirect(Le,de,pe,Ue,Z,mt),Ue.side=Qo,Ue.needsUpdate=!0,m.renderBufferDirect(Le,de,pe,Ue,Z,mt),Ue.side=bi):m.renderBufferDirect(Le,de,pe,Ue,Z,mt),Z.onAfterRender(m,de,Le,pe,Ue,mt)}function qn(Z,de,Le){de.isScene!==!0&&(de=j);const pe=oe.get(Z),Ue=h.state.lights,mt=h.state.shadowsArray,xt=Ue.state.version,kt=Oe.getParameters(Z,Ue.state,mt,de,Le),Mt=Oe.getProgramCacheKey(kt);let Xt=pe.programs;pe.environment=Z.isMeshStandardMaterial?de.environment:null,pe.fog=de.fog,pe.envMap=(Z.isMeshStandardMaterial?Ie:Re).get(Z.envMap||pe.environment),Xt===void 0&&(Z.addEventListener("dispose",se),Xt=new Map,pe.programs=Xt);let Qt=Xt.get(Mt);if(Qt!==void 0){if(pe.currentProgram===Qt&&pe.lightsStateVersion===xt)return Mr(Z,kt),Qt}else kt.uniforms=Oe.getUniforms(Z),Z.onBuild(Le,kt,m),Z.onBeforeCompile(kt,m),Qt=Oe.acquireProgram(kt,Mt),Xt.set(Mt,Qt),pe.uniforms=kt.uniforms;const Jt=pe.uniforms;(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(Jt.clippingPlanes=W.uniform),Mr(Z,kt),pe.needsLights=Ai(Z),pe.lightsStateVersion=xt,pe.needsLights&&(Jt.ambientLightColor.value=Ue.state.ambient,Jt.lightProbe.value=Ue.state.probe,Jt.directionalLights.value=Ue.state.directional,Jt.directionalLightShadows.value=Ue.state.directionalShadow,Jt.spotLights.value=Ue.state.spot,Jt.spotLightShadows.value=Ue.state.spotShadow,Jt.rectAreaLights.value=Ue.state.rectArea,Jt.ltc_1.value=Ue.state.rectAreaLTC1,Jt.ltc_2.value=Ue.state.rectAreaLTC2,Jt.pointLights.value=Ue.state.point,Jt.pointLightShadows.value=Ue.state.pointShadow,Jt.hemisphereLights.value=Ue.state.hemi,Jt.directionalShadowMap.value=Ue.state.directionalShadowMap,Jt.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,Jt.spotShadowMap.value=Ue.state.spotShadowMap,Jt.spotLightMatrix.value=Ue.state.spotLightMatrix,Jt.spotLightMap.value=Ue.state.spotLightMap,Jt.pointShadowMap.value=Ue.state.pointShadowMap,Jt.pointShadowMatrix.value=Ue.state.pointShadowMatrix);const _n=Qt.getUniforms(),Wr=Pv.seqWithValue(_n.seq,Jt);return pe.currentProgram=Qt,pe.uniformsList=Wr,Qt}function Mr(Z,de){const Le=oe.get(Z);Le.outputEncoding=de.outputEncoding,Le.instancing=de.instancing,Le.skinning=de.skinning,Le.morphTargets=de.morphTargets,Le.morphNormals=de.morphNormals,Le.morphColors=de.morphColors,Le.morphTargetsCount=de.morphTargetsCount,Le.numClippingPlanes=de.numClippingPlanes,Le.numIntersection=de.numClipIntersection,Le.vertexAlphas=de.vertexAlphas,Le.vertexTangents=de.vertexTangents,Le.toneMapping=de.toneMapping}function Zn(Z,de,Le,pe,Ue){de.isScene!==!0&&(de=j),he.resetTextureUnits();const mt=de.fog,xt=pe.isMeshStandardMaterial?de.environment:null,kt=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Ps,Mt=(pe.isMeshStandardMaterial?Ie:Re).get(pe.envMap||xt),Xt=pe.vertexColors===!0&&!!Le.attributes.color&&Le.attributes.color.itemSize===4,Qt=!!pe.normalMap&&!!Le.attributes.tangent,Jt=!!Le.morphAttributes.position,_n=!!Le.morphAttributes.normal,Wr=!!Le.morphAttributes.color,ks=pe.toneMapped?m.toneMapping:Fo,Os=Le.morphAttributes.position||Le.morphAttributes.normal||Le.morphAttributes.color,st=Os!==void 0?Os.length:0,Ot=oe.get(pe),Us=h.state.lights;if(z===!0&&(U===!0||Z!==E)){const nn=Z===E&&pe.id===w;W.setState(pe,Z,nn)}let mn=!1;pe.version===Ot.__version?(Ot.needsLights&&Ot.lightsStateVersion!==Us.state.version||Ot.outputEncoding!==kt||Ue.isInstancedMesh&&Ot.instancing===!1||!Ue.isInstancedMesh&&Ot.instancing===!0||Ue.isSkinnedMesh&&Ot.skinning===!1||!Ue.isSkinnedMesh&&Ot.skinning===!0||Ot.envMap!==Mt||pe.fog===!0&&Ot.fog!==mt||Ot.numClippingPlanes!==void 0&&(Ot.numClippingPlanes!==W.numPlanes||Ot.numIntersection!==W.numIntersection)||Ot.vertexAlphas!==Xt||Ot.vertexTangents!==Qt||Ot.morphTargets!==Jt||Ot.morphNormals!==_n||Ot.morphColors!==Wr||Ot.toneMapping!==ks||ge.isWebGL2===!0&&Ot.morphTargetsCount!==st)&&(mn=!0):(mn=!0,Ot.__version=pe.version);let Hi=Ot.currentProgram;mn===!0&&(Hi=qn(pe,de,Ue));let rr=!1,Vi=!1,Wi=!1;const Bt=Hi.getUniforms(),Ht=Ot.uniforms;if(xe.useProgram(Hi.program)&&(rr=!0,Vi=!0,Wi=!0),pe.id!==w&&(w=pe.id,Vi=!0),rr||E!==Z){if(Bt.setValue(ee,"projectionMatrix",Z.projectionMatrix),ge.logarithmicDepthBuffer&&Bt.setValue(ee,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),E!==Z&&(E=Z,Vi=!0,Wi=!0),pe.isShaderMaterial||pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshStandardMaterial||pe.envMap){const nn=Bt.map.cameraPosition;nn!==void 0&&nn.setValue(ee,J.setFromMatrixPosition(Z.matrixWorld))}(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Bt.setValue(ee,"isOrthographic",Z.isOrthographicCamera===!0),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial||pe.isShadowMaterial||Ue.isSkinnedMesh)&&Bt.setValue(ee,"viewMatrix",Z.matrixWorldInverse)}if(Ue.isSkinnedMesh){Bt.setOptional(ee,Ue,"bindMatrix"),Bt.setOptional(ee,Ue,"bindMatrixInverse");const nn=Ue.skeleton;nn&&(ge.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),Bt.setValue(ee,"boneTexture",nn.boneTexture,he),Bt.setValue(ee,"boneTextureSize",nn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ir=Le.morphAttributes;if((Ir.position!==void 0||Ir.normal!==void 0||Ir.color!==void 0&&ge.isWebGL2===!0)&&ve.update(Ue,Le,pe,Hi),(Vi||Ot.receiveShadow!==Ue.receiveShadow)&&(Ot.receiveShadow=Ue.receiveShadow,Bt.setValue(ee,"receiveShadow",Ue.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(Ht.envMap.value=Mt,Ht.flipEnvMap.value=Mt.isCubeTexture&&Mt.isRenderTargetTexture===!1?-1:1),Vi&&(Bt.setValue(ee,"toneMappingExposure",m.toneMappingExposure),Ot.needsLights&&On(Ht,Wi),mt&&pe.fog===!0&&Ve.refreshFogUniforms(Ht,mt),Ve.refreshMaterialUniforms(Ht,pe,k,T,Q),Pv.upload(ee,Ot.uniformsList,Ht,he)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Pv.upload(ee,Ot.uniformsList,Ht,he),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Bt.setValue(ee,"center",Ue.center),Bt.setValue(ee,"modelViewMatrix",Ue.modelViewMatrix),Bt.setValue(ee,"normalMatrix",Ue.normalMatrix),Bt.setValue(ee,"modelMatrix",Ue.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const nn=pe.uniformsGroups;for(let ei=0,Tr=nn.length;ei<Tr;ei++)if(ge.isWebGL2){const ls=nn[ei];je.update(ls,Hi),je.bind(ls,Hi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Hi}function On(Z,de){Z.ambientLightColor.needsUpdate=de,Z.lightProbe.needsUpdate=de,Z.directionalLights.needsUpdate=de,Z.directionalLightShadows.needsUpdate=de,Z.pointLights.needsUpdate=de,Z.pointLightShadows.needsUpdate=de,Z.spotLights.needsUpdate=de,Z.spotLightShadows.needsUpdate=de,Z.rectAreaLights.needsUpdate=de,Z.hemisphereLights.needsUpdate=de}function Ai(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(Z,de,Le){oe.get(Z.texture).__webglTexture=de,oe.get(Z.depthTexture).__webglTexture=Le;const pe=oe.get(Z);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=Le===void 0,pe.__autoAllocateDepthBuffer||ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Z,de){const Le=oe.get(Z);Le.__webglFramebuffer=de,Le.__useDefaultFramebuffer=de===void 0},this.setRenderTarget=function(Z,de=0,Le=0){x=Z,v=de,y=Le;let pe=!0;if(Z){const Mt=oe.get(Z);Mt.__useDefaultFramebuffer!==void 0?(xe.bindFramebuffer(36160,null),pe=!1):Mt.__webglFramebuffer===void 0?he.setupRenderTarget(Z):Mt.__hasExternalTextures&&he.rebindTextures(Z,oe.get(Z.texture).__webglTexture,oe.get(Z.depthTexture).__webglTexture)}let Ue=null,mt=!1,xt=!1;if(Z){const Mt=Z.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture)&&(xt=!0);const Xt=oe.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Ue=Xt[de],mt=!0):ge.isWebGL2&&Z.samples>0&&he.useMultisampledRTT(Z)===!1?Ue=oe.get(Z).__webglMultisampledFramebuffer:Ue=Xt,S.copy(Z.viewport),M.copy(Z.scissor),b=Z.scissorTest}else S.copy(O).multiplyScalar(k).floor(),M.copy(Y).multiplyScalar(k).floor(),b=q;if(xe.bindFramebuffer(36160,Ue)&&ge.drawBuffers&&pe&&xe.drawBuffers(Z,Ue),xe.viewport(S),xe.scissor(M),xe.setScissorTest(b),mt){const Mt=oe.get(Z.texture);ee.framebufferTexture2D(36160,36064,34069+de,Mt.__webglTexture,Le)}else if(xt){const Mt=oe.get(Z.texture),Xt=de||0;ee.framebufferTextureLayer(36160,36064,Mt.__webglTexture,Le||0,Xt)}w=-1},this.readRenderTargetPixels=function(Z,de,Le,pe,Ue,mt,xt){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kt=oe.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&xt!==void 0&&(kt=kt[xt]),kt){xe.bindFramebuffer(36160,kt);try{const Mt=Z.texture,Xt=Mt.format,Qt=Mt.type;if(Xt!==Fn&&De.convert(Xt)!==ee.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Jt=Qt===pi&&(ce.has("EXT_color_buffer_half_float")||ge.isWebGL2&&ce.has("EXT_color_buffer_float"));if(Qt!==er&&De.convert(Qt)!==ee.getParameter(35738)&&!(Qt===Qn&&(ge.isWebGL2||ce.has("OES_texture_float")||ce.has("WEBGL_color_buffer_float")))&&!Jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=Z.width-pe&&Le>=0&&Le<=Z.height-Ue&&ee.readPixels(de,Le,pe,Ue,De.convert(Xt),De.convert(Qt),mt)}finally{const Mt=x!==null?oe.get(x).__webglFramebuffer:null;xe.bindFramebuffer(36160,Mt)}}},this.copyFramebufferToTexture=function(Z,de,Le=0){const pe=Math.pow(2,-Le),Ue=Math.floor(de.image.width*pe),mt=Math.floor(de.image.height*pe);he.setTexture2D(de,0),ee.copyTexSubImage2D(3553,Le,0,0,Z.x,Z.y,Ue,mt),xe.unbindTexture()},this.copyTextureToTexture=function(Z,de,Le,pe=0){const Ue=de.image.width,mt=de.image.height,xt=De.convert(Le.format),kt=De.convert(Le.type);he.setTexture2D(Le,0),ee.pixelStorei(37440,Le.flipY),ee.pixelStorei(37441,Le.premultiplyAlpha),ee.pixelStorei(3317,Le.unpackAlignment),de.isDataTexture?ee.texSubImage2D(3553,pe,Z.x,Z.y,Ue,mt,xt,kt,de.image.data):de.isCompressedTexture?ee.compressedTexSubImage2D(3553,pe,Z.x,Z.y,de.mipmaps[0].width,de.mipmaps[0].height,xt,de.mipmaps[0].data):ee.texSubImage2D(3553,pe,Z.x,Z.y,xt,kt,de.image),pe===0&&Le.generateMipmaps&&ee.generateMipmap(3553),xe.unbindTexture()},this.copyTextureToTexture3D=function(Z,de,Le,pe,Ue=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const mt=Z.max.x-Z.min.x+1,xt=Z.max.y-Z.min.y+1,kt=Z.max.z-Z.min.z+1,Mt=De.convert(pe.format),Xt=De.convert(pe.type);let Qt;if(pe.isData3DTexture)he.setTexture3D(pe,0),Qt=32879;else if(pe.isDataArrayTexture)he.setTexture2DArray(pe,0),Qt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ee.pixelStorei(37440,pe.flipY),ee.pixelStorei(37441,pe.premultiplyAlpha),ee.pixelStorei(3317,pe.unpackAlignment);const Jt=ee.getParameter(3314),_n=ee.getParameter(32878),Wr=ee.getParameter(3316),ks=ee.getParameter(3315),Os=ee.getParameter(32877),st=Le.isCompressedTexture?Le.mipmaps[0]:Le.image;ee.pixelStorei(3314,st.width),ee.pixelStorei(32878,st.height),ee.pixelStorei(3316,Z.min.x),ee.pixelStorei(3315,Z.min.y),ee.pixelStorei(32877,Z.min.z),Le.isDataTexture||Le.isData3DTexture?ee.texSubImage3D(Qt,Ue,de.x,de.y,de.z,mt,xt,kt,Mt,Xt,st.data):Le.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ee.compressedTexSubImage3D(Qt,Ue,de.x,de.y,de.z,mt,xt,kt,Mt,st.data)):ee.texSubImage3D(Qt,Ue,de.x,de.y,de.z,mt,xt,kt,Mt,Xt,st),ee.pixelStorei(3314,Jt),ee.pixelStorei(32878,_n),ee.pixelStorei(3316,Wr),ee.pixelStorei(3315,ks),ee.pixelStorei(32877,Os),Ue===0&&pe.generateMipmaps&&ee.generateMipmap(Qt),xe.unbindTexture()},this.initTexture=function(Z){Z.isCubeTexture?he.setTextureCube(Z,0):Z.isData3DTexture?he.setTexture3D(Z,0):Z.isDataArrayTexture?he.setTexture2DArray(Z,0):he.setTexture2D(Z,0),xe.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,xe.reset(),me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class dU extends v3{}dU.prototype.isWebGL1Renderer=!0;class Ty{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=n}clone(){return new Ty(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class By{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=n,this.far=i}clone(){return new By(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ml extends It{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class sg{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=bm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fr=new F;class ns{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Fr.fromBufferAttribute(this,n),Fr.applyMatrix4(e),this.setXYZ(n,Fr.x,Fr.y,Fr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Fr.fromBufferAttribute(this,n),Fr.applyNormalMatrix(e),this.setXYZ(n,Fr.x,Fr.y,Fr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Fr.fromBufferAttribute(this,n),Fr.transformDirection(e),this.setXYZ(n,Fr.x,Fr.y,Fr.z);return this}setX(e,n){return this.normalized&&(n=wn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Za(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Za(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Za(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Za(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=wn(n,this.array),i=wn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=wn(n,this.array),i=wn(i,this.array),r=wn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=wn(n,this.array),i=wn(i,this.array),r=wn(r,this.array),s=wn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new bt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ns(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class _3 extends mi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let uh;const W0=new F,fh=new F,hh=new F,dh=new Ae,j0=new Ae,pU=new Ne,rA=new F,q0=new F,sA=new F,lP=new Ae,Gw=new Ae,cP=new Ae;class mU extends It{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",uh===void 0){uh=new ht;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new sg(n,5);uh.setIndex([0,1,2,0,2,3]),uh.setAttribute("position",new ns(i,3,0,!1)),uh.setAttribute("uv",new ns(i,2,3,!1))}this.geometry=uh,this.material=e!==void 0?e:new _3,this.center=new Ae(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fh.setFromMatrixScale(this.matrixWorld),pU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&fh.multiplyScalar(-hh.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;oA(rA.set(-.5,-.5,0),hh,o,fh,r,s),oA(q0.set(.5,-.5,0),hh,o,fh,r,s),oA(sA.set(.5,.5,0),hh,o,fh,r,s),lP.set(0,0),Gw.set(1,0),cP.set(1,1);let a=e.ray.intersectTriangle(rA,q0,sA,!1,W0);if(a===null&&(oA(q0.set(-.5,.5,0),hh,o,fh,r,s),Gw.set(0,1),a=e.ray.intersectTriangle(rA,sA,q0,!1,W0),a===null))return;const l=e.ray.origin.distanceTo(W0);l<e.near||l>e.far||n.push({distance:l,point:W0.clone(),uv:_r.getUV(W0,rA,q0,sA,lP,Gw,cP,new Ae),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function oA(t,e,n,i,r,s){dh.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(j0.x=s*dh.x-r*dh.y,j0.y=r*dh.x+s*dh.y):j0.copy(dh),t.copy(e),t.x+=j0.x,t.y+=j0.y,t.applyMatrix4(pU)}const aA=new F,uP=new F;class gU extends It{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0){n=Math.abs(n);const i=this.levels;let r;for(r=0;r<i.length&&!(n<i[r].distance);r++);return i.splice(r,0,{distance:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r&&!(e<n[i].distance);i++);return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){aA.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(aA);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){aA.setFromMatrixPosition(e.matrixWorld),uP.setFromMatrixPosition(this.matrixWorld);const i=aA.distanceTo(uP)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance})}return n}}const fP=new F,hP=new Pt,dP=new Pt,Kse=new F,pP=new Ne;class Ry extends $e{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ne,this.bindMatrixInverse=new Ne}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Pt,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const i=this.skeleton,r=this.geometry;hP.fromBufferAttribute(r.attributes.skinIndex,e),dP.fromBufferAttribute(r.attributes.skinWeight,e),fP.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=dP.getComponent(s);if(o!==0){const a=hP.getComponent(s);pP.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(Kse.copy(fP).applyMatrix4(pP),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class Md extends It{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Oo extends bn{constructor(e=null,n=1,i=1,r,s,o,a,l,c=vn,u=vn,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const mP=new Ne,$se=new Ne;class Wd{constructor(e=[],n=[]){this.uuid=Ms(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ne)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Ne;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:$se;mP.multiplyMatrices(a,n[s]),mP.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Wd(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=iU(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Oo(n,e,e,Fn,Qn);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Md),this.bones.push(o),this.boneInverses.push(new Ne().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class xc extends bt{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gP=new Ne,AP=new Ne,lA=[],Y0=new $e;class y3 extends $e{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new xc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Y0.geometry=this.geometry,Y0.material=this.material,Y0.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,gP),AP.multiplyMatrices(i,gP),Y0.matrixWorld=AP,Y0.raycast(e,lA);for(let o=0,a=lA.length;o<a;o++){const l=lA[o];l.instanceId=s,l.object=this,n.push(l)}lA.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new xc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ai extends mi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vP=new F,_P=new F,yP=new Ne,Qw=new Ho,cA=new zi;class Rt extends It{constructor(e=new ht,n=new ai){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)vP.fromBufferAttribute(n,r-1),_P.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=vP.distanceTo(_P);e.setAttribute("lineDistance",new et(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),cA.copy(i.boundingSphere),cA.applyMatrix4(r),cA.radius+=s,e.ray.intersectsSphere(cA)===!1)return;yP.copy(r).invert(),Qw.copy(e.ray).applyMatrix4(yP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,u=new F,f=new F,h=new F,d=this.isLineSegments?2:1,p=i.index,A=i.attributes.position;if(p!==null){const v=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let x=v,w=y-1;x<w;x+=d){const E=p.getX(x),S=p.getX(x+1);if(c.fromBufferAttribute(A,E),u.fromBufferAttribute(A,S),Qw.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||n.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),y=Math.min(A.count,o.start+o.count);for(let x=v,w=y-1;x<w;x+=d){if(c.fromBufferAttribute(A,x),u.fromBufferAttribute(A,x+1),Qw.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||n.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const xP=new F,wP=new F;class fo extends Rt{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)xP.fromBufferAttribute(n,r),wP.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+xP.distanceTo(wP);e.setAttribute("lineDistance",new et(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class x3 extends Rt{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class og extends mi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const EP=new Ne,OS=new Ho,uA=new zi,fA=new F;class w3 extends It{constructor(e=new ht,n=new og){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),uA.copy(i.boundingSphere),uA.applyMatrix4(r),uA.radius+=s,e.ray.intersectsSphere(uA)===!1)return;EP.copy(r).invert(),OS.copy(e.ray).applyMatrix4(EP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let p=h,m=d;p<m;p++){const A=c.getX(p);fA.fromBufferAttribute(f,A),bP(fA,A,l,r,e,n,this)}}else{const h=Math.max(0,o.start),d=Math.min(f.count,o.start+o.count);for(let p=h,m=d;p<m;p++)fA.fromBufferAttribute(f,p),bP(fA,p,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function bP(t,e,n,i,r,s,o){const a=OS.distanceSqToPoint(t);if(a<n){const l=new F;OS.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class AU extends bn{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Wt,this.magFilter=s!==void 0?s:Wt,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Zse extends bn{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=vn,this.minFilter=vn,this.generateMipmaps=!1,this.needsUpdate=!0}}class E3 extends bn{constructor(e,n,i,r,s,o,a,l,c,u,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class b3 extends bn{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ho{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],h=i[r+1]-u,d=(o-u)/h;return(r+d)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new Ae:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new F,r=[],s=[],o=[],a=new F,l=new Ne;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(oi(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(r[d],s[d])}if(n===!0){let d=Math.acos(oi(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class zu extends ho{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new Ae,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=c-this.aY;l=h*u-d*f+this.aX,c=h*f+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class vU extends zu{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function S3(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,d*=u,r(o,a,h,d)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const hA=new F,Hw=new S3,Vw=new S3,Ww=new S3;class C3 extends ho{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new F){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(hA.subVectors(r[0],r[1]).add(r[0]),c=hA);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(hA.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=hA),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(f),d),m=Math.pow(f.distanceToSquared(h),d),A=Math.pow(h.distanceToSquared(u),d);m<1e-4&&(m=1),p<1e-4&&(p=m),A<1e-4&&(A=m),Hw.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,p,m,A),Vw.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,p,m,A),Ww.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,p,m,A)}else this.curveType==="catmullrom"&&(Hw.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),Vw.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),Ww.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return i.set(Hw.calc(l),Vw.calc(l),Ww.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function SP(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function eoe(t,e){const n=1-t;return n*n*e}function toe(t,e){return 2*(1-t)*t*e}function noe(t,e){return t*t*e}function Hp(t,e,n,i){return eoe(t,e)+toe(t,n)+noe(t,i)}function ioe(t,e){const n=1-t;return n*n*n*e}function roe(t,e){const n=1-t;return 3*n*n*t*e}function soe(t,e){return 3*(1-t)*t*t*e}function ooe(t,e){return t*t*t*e}function Vp(t,e,n,i,r){return ioe(t,e)+roe(t,n)+soe(t,i)+ooe(t,r)}class M3 extends ho{constructor(e=new Ae,n=new Ae,i=new Ae,r=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ae){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Vp(e,r.x,s.x,o.x,a.x),Vp(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class I3 extends ho{constructor(e=new F,n=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new F){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Vp(e,r.x,s.x,o.x,a.x),Vp(e,r.y,s.y,o.y,a.y),Vp(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Py extends ho{constructor(e=new Ae,n=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ae){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const i=n||new Ae;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _U extends ho{constructor(e=new F,n=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new F){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class T3 extends ho{constructor(e=new Ae,n=new Ae,i=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ae){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Hp(e,r.x,s.x,o.x),Hp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dy extends ho{constructor(e=new F,n=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new F){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(Hp(e,r.x,s.x,o.x),Hp(e,r.y,s.y,o.y),Hp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class B3 extends ho{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ae){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(SP(a,l.x,c.x,u.x,f.x),SP(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ae().fromArray(r))}return this}}var R3=Object.freeze({__proto__:null,ArcCurve:vU,CatmullRomCurve3:C3,CubicBezierCurve:M3,CubicBezierCurve3:I3,EllipseCurve:zu,LineCurve:Py,LineCurve3:_U,QuadraticBezierCurve:T3,QuadraticBezierCurve3:Dy,SplineCurve:B3});class yU extends ho{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new Py(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(n.push(u),i=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new R3[r.type]().fromJSON(r))}return this}}class Mm extends yU{constructor(e){super(),this.type="Path",this.currentPoint=new Ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new Py(this.currentPoint.clone(),new Ae(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new T3(this.currentPoint.clone(),new Ae(e,n),new Ae(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new M3(this.currentPoint.clone(),new Ae(e,n),new Ae(i,r),new Ae(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new B3(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const c=new zu(e,n,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class jd extends ht{constructor(e=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=oi(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,f=new F,h=new Ae,d=new F,p=new F,m=new F;let A=0,v=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:A=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,d.x=v*1,d.y=-A,d.z=v*0,m.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:A=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,d.x=v*1,d.y=-A,d.z=v*0,p.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),l.push(d.x,d.y,d.z),m.copy(p)}for(let y=0;y<=n;y++){const x=i+y*u*r,w=Math.sin(x),E=Math.cos(x);for(let S=0;S<=e.length-1;S++){f.x=e[S].x*w,f.y=e[S].y,f.z=e[S].x*E,o.push(f.x,f.y,f.z),h.x=y/n,h.y=S/(e.length-1),a.push(h.x,h.y);const M=l[3*S+0]*w,b=l[3*S+1],B=l[3*S+0]*E;c.push(M,b,B)}}for(let y=0;y<n;y++)for(let x=0;x<e.length-1;x++){const w=x+y*e.length,E=w,S=w+e.length,M=w+e.length+1,b=w+1;s.push(E,S,b),s.push(M,b,S)}this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("uv",new et(a,2)),this.setAttribute("normal",new et(c,3))}static fromJSON(e){return new jd(e.points,e.segments,e.phiStart,e.phiLength)}}class ag extends jd{constructor(e=1,n=1,i=4,r=8){const s=new Mm;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new ag(e.radius,e.length,e.capSegments,e.radialSegments)}}class lg extends ht{constructor(e=1,n=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new F,u=new Ae;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=i+f/n*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("normal",new et(a,3)),this.setAttribute("uv",new et(l,2))}static fromJSON(e){return new lg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xi extends ht{constructor(e=1,n=1,i=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],h=[],d=[];let p=0;const m=[],A=i/2;let v=0;y(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new et(f,3)),this.setAttribute("normal",new et(h,3)),this.setAttribute("uv",new et(d,2));function y(){const w=new F,E=new F;let S=0;const M=(n-e)/i;for(let b=0;b<=s;b++){const B=[],T=b/s,k=T*(n-e)+e;for(let D=0;D<=r;D++){const N=D/r,O=N*l+a,Y=Math.sin(O),q=Math.cos(O);E.x=k*Y,E.y=-T*i+A,E.z=k*q,f.push(E.x,E.y,E.z),w.set(Y,M,q).normalize(),h.push(w.x,w.y,w.z),d.push(N,1-T),B.push(p++)}m.push(B)}for(let b=0;b<r;b++)for(let B=0;B<s;B++){const T=m[B][b],k=m[B+1][b],D=m[B+1][b+1],N=m[B][b+1];u.push(T,k,N),u.push(k,D,N),S+=6}c.addGroup(v,S,0),v+=S}function x(w){const E=p,S=new Ae,M=new F;let b=0;const B=w===!0?e:n,T=w===!0?1:-1;for(let D=1;D<=r;D++)f.push(0,A*T,0),h.push(0,T,0),d.push(.5,.5),p++;const k=p;for(let D=0;D<=r;D++){const O=D/r*l+a,Y=Math.cos(O),q=Math.sin(O);M.x=B*q,M.y=A*T,M.z=B*Y,f.push(M.x,M.y,M.z),h.push(0,T,0),S.x=Y*.5+.5,S.y=q*.5*T+.5,d.push(S.x,S.y),p++}for(let D=0;D<r;D++){const N=E+D,O=k+D;w===!0?u.push(O,O+1,N):u.push(O+1,O,N),b+=3}c.addGroup(v,b,w===!0?1:2),v+=b}}static fromJSON(e){return new xi(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cg extends xi{constructor(e=1,n=1,i=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new cg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gl extends ht{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new et(s,3)),this.setAttribute("normal",new et(s.slice(),3)),this.setAttribute("uv",new et(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const x=new F,w=new F,E=new F;for(let S=0;S<n.length;S+=3)d(n[S+0],x),d(n[S+1],w),d(n[S+2],E),l(x,w,E,y)}function l(y,x,w,E){const S=E+1,M=[];for(let b=0;b<=S;b++){M[b]=[];const B=y.clone().lerp(w,b/S),T=x.clone().lerp(w,b/S),k=S-b;for(let D=0;D<=k;D++)D===0&&b===S?M[b][D]=B:M[b][D]=B.clone().lerp(T,D/k)}for(let b=0;b<S;b++)for(let B=0;B<2*(S-b)-1;B++){const T=Math.floor(B/2);B%2===0?(h(M[b][T+1]),h(M[b+1][T]),h(M[b][T])):(h(M[b][T+1]),h(M[b+1][T+1]),h(M[b+1][T]))}}function c(y){const x=new F;for(let w=0;w<s.length;w+=3)x.x=s[w+0],x.y=s[w+1],x.z=s[w+2],x.normalize().multiplyScalar(y),s[w+0]=x.x,s[w+1]=x.y,s[w+2]=x.z}function u(){const y=new F;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const w=A(y)/2/Math.PI+.5,E=v(y)/Math.PI+.5;o.push(w,1-E)}p(),f()}function f(){for(let y=0;y<o.length;y+=6){const x=o[y+0],w=o[y+2],E=o[y+4],S=Math.max(x,w,E),M=Math.min(x,w,E);S>.9&&M<.1&&(x<.2&&(o[y+0]+=1),w<.2&&(o[y+2]+=1),E<.2&&(o[y+4]+=1))}}function h(y){s.push(y.x,y.y,y.z)}function d(y,x){const w=y*3;x.x=e[w+0],x.y=e[w+1],x.z=e[w+2]}function p(){const y=new F,x=new F,w=new F,E=new F,S=new Ae,M=new Ae,b=new Ae;for(let B=0,T=0;B<s.length;B+=9,T+=6){y.set(s[B+0],s[B+1],s[B+2]),x.set(s[B+3],s[B+4],s[B+5]),w.set(s[B+6],s[B+7],s[B+8]),S.set(o[T+0],o[T+1]),M.set(o[T+2],o[T+3]),b.set(o[T+4],o[T+5]),E.copy(y).add(x).add(w).divideScalar(3);const k=A(E);m(S,T+0,y,k),m(M,T+2,x,k),m(b,T+4,w,k)}}function m(y,x,w,E){E<0&&y.x===1&&(o[x]=y.x-1),w.x===0&&w.z===0&&(o[x]=E/2/Math.PI+.5)}function A(y){return Math.atan2(y.z,-y.x)}function v(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new gl(e.vertices,e.indices,e.radius,e.details)}}class ug extends gl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new ug(e.radius,e.detail)}}const dA=new F,pA=new F,jw=new F,mA=new _r;class P3 extends ht{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Ou*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},d=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:A,c:v}=mA;if(m.fromBufferAttribute(a,c[0]),A.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),mA.getNormal(jw),f[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,f[1]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,f[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let y=0;y<3;y++){const x=(y+1)%3,w=f[y],E=f[x],S=mA[u[y]],M=mA[u[x]],b=`${w}_${E}`,B=`${E}_${w}`;B in h&&h[B]?(jw.dot(h[B].normal)<=s&&(d.push(S.x,S.y,S.z),d.push(M.x,M.y,M.z)),h[B]=null):b in h||(h[b]={index0:c[y],index1:c[x],normal:jw.clone()})}}for(const p in h)if(h[p]){const{index0:m,index1:A}=h[p];dA.fromBufferAttribute(a,m),pA.fromBufferAttribute(a,A),d.push(dA.x,dA.y,dA.z),d.push(pA.x,pA.y,pA.z)}this.setAttribute("position",new et(d,3))}}}class pc extends Mm{constructor(e){super(e),this.uuid=Ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Mm().fromJSON(r))}return this}}const aoe={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=xU(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,h,d;if(i&&(s=hoe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<r;p+=n)f=t[p],h=t[p+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?1/d:0}return Im(s,o,n,a,l,d),o}};function xU(t,e,n,i,r){let s,o;if(r===Eoe(t,e,n,i)>0)for(s=e;s<n;s+=i)o=CP(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=CP(s,t[s],t[s+1],o);return o&&Ly(o,o.next)&&(Bm(o),o=o.next),o}function wc(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Ly(n,n.next)||Gn(n.prev,n,n.next)===0)){if(Bm(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Im(t,e,n,i,r,s,o){if(!t)return;!o&&s&&Aoe(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?coe(t,i,r,s):loe(t)){e.push(l.i/n),e.push(t.i/n),e.push(c.i/n),Bm(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=uoe(wc(t),e,n),Im(t,e,n,i,r,s,2)):o===2&&foe(t,e,n,i,r,s):Im(wc(t),e,n,i,r,s,1);break}}}function loe(t){const e=t.prev,n=t,i=t.next;if(Gn(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(Xh(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Gn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function coe(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Gn(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,f=US(a,l,e,n,i),h=US(c,u,e,n,i);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&Xh(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Gn(d.prev,d,d.next)>=0||(d=d.prevZ,p!==t.prev&&p!==t.next&&Xh(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Gn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&Xh(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Gn(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&Xh(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Gn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function uoe(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!Ly(r,s)&&wU(r,i,i.next,s)&&Tm(r,s)&&Tm(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),Bm(i),Bm(i.next),i=t=s),i=i.next}while(i!==t);return wc(i)}function foe(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&yoe(o,a)){let l=EU(o,a);o=wc(o,o.next),l=wc(l,l.next),Im(o,e,n,i,r,s),Im(l,e,n,i,r,s);return}a=a.next}o=o.next}while(o!==t)}function hoe(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=xU(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(_oe(c));for(r.sort(doe),s=0;s<r.length;s++)poe(r[s],n),n=wc(n,n.next);return n}function doe(t,e){return t.x-e.x}function poe(t,e){if(e=moe(t,e),e){const n=EU(e,t);wc(e,e.next),wc(n,n.next)}}function moe(t,e){let n=e;const i=t.x,r=t.y;let s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const h=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=i&&h>s){if(s=h,h===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let u=1/0,f;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&Xh(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(f=Math.abs(r-n.y)/(i-n.x),Tm(n,t)&&(f<u||f===u&&(n.x>o.x||n.x===o.x&&goe(o,n)))&&(o=n,u=f)),n=n.next;while(n!==a);return o}function goe(t,e){return Gn(t.prev,t,e.prev)<0&&Gn(e.next,t,t.next)<0}function Aoe(t,e,n,i){let r=t;do r.z===null&&(r.z=US(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,voe(r)}function voe(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function US(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function _oe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Xh(t,e,n,i,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function yoe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!xoe(t,e)&&(Tm(t,e)&&Tm(e,t)&&woe(t,e)&&(Gn(t.prev,t,e.prev)||Gn(t,e.prev,e))||Ly(t,e)&&Gn(t.prev,t,t.next)>0&&Gn(e.prev,e,e.next)>0)}function Gn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ly(t,e){return t.x===e.x&&t.y===e.y}function wU(t,e,n,i){const r=AA(Gn(t,e,n)),s=AA(Gn(t,e,i)),o=AA(Gn(n,i,t)),a=AA(Gn(n,i,e));return!!(r!==s&&o!==a||r===0&&gA(t,n,e)||s===0&&gA(t,i,e)||o===0&&gA(n,t,i)||a===0&&gA(n,e,i))}function gA(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function AA(t){return t>0?1:t<0?-1:0}function xoe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&wU(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Tm(t,e){return Gn(t.prev,t,t.next)<0?Gn(t,e,t.next)>=0&&Gn(t,t.prev,e)>=0:Gn(t,e,t.prev)<0||Gn(t,t.next,e)<0}function woe(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function EU(t,e){const n=new NS(t.i,t.x,t.y),i=new NS(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function CP(t,e,n,i){const r=new NS(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Bm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function NS(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Eoe(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class va{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return va.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];MP(e),IP(i,e);let o=e.length;n.forEach(MP);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,IP(i,n[l]);const a=aoe.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function MP(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function IP(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class qd extends ht{constructor(e=new pc([new Ae(.5,.5),new Ae(-.5,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new et(r,3)),this.setAttribute("uv",new et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:d-.1,m=n.bevelOffset!==void 0?n.bevelOffset:0,A=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:boe;let x,w=!1,E,S,M,b;v&&(x=v.getSpacedPoints(u),w=!0,h=!1,E=v.computeFrenetFrames(u,!1),S=new F,M=new F,b=new F),h||(A=0,d=0,p=0,m=0);const B=a.extractPoints(c);let T=B.shape;const k=B.holes;if(!va.isClockWise(T)){T=T.reverse();for(let oe=0,he=k.length;oe<he;oe++){const Re=k[oe];va.isClockWise(Re)&&(k[oe]=Re.reverse())}}const N=va.triangulateShape(T,k),O=T;for(let oe=0,he=k.length;oe<he;oe++){const Re=k[oe];T=T.concat(Re)}function Y(oe,he,Re){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().multiplyScalar(Re).add(oe)}const q=T.length,K=N.length;function z(oe,he,Re){let Ie,Te,qe;const ye=oe.x-he.x,Oe=oe.y-he.y,Ve=Re.x-oe.x,Pe=Re.y-oe.y,X=ye*ye+Oe*Oe,W=ye*Pe-Oe*Ve;if(Math.abs(W)>Number.EPSILON){const ne=Math.sqrt(X),ue=Math.sqrt(Ve*Ve+Pe*Pe),ve=he.x-Oe/ne,Ge=he.y+ye/ne,be=Re.x-Pe/ue,De=Re.y+Ve/ue,me=((be-ve)*Pe-(De-Ge)*Ve)/(ye*Pe-Oe*Ve);Ie=ve+ye*me-oe.x,Te=Ge+Oe*me-oe.y;const je=Ie*Ie+Te*Te;if(je<=2)return new Ae(Ie,Te);qe=Math.sqrt(je/2)}else{let ne=!1;ye>Number.EPSILON?Ve>Number.EPSILON&&(ne=!0):ye<-Number.EPSILON?Ve<-Number.EPSILON&&(ne=!0):Math.sign(Oe)===Math.sign(Pe)&&(ne=!0),ne?(Ie=-Oe,Te=ye,qe=Math.sqrt(X)):(Ie=ye,Te=Oe,qe=Math.sqrt(X/2))}return new Ae(Ie/qe,Te/qe)}const U=[];for(let oe=0,he=O.length,Re=he-1,Ie=oe+1;oe<he;oe++,Re++,Ie++)Re===he&&(Re=0),Ie===he&&(Ie=0),U[oe]=z(O[oe],O[Re],O[Ie]);const Q=[];let H,V=U.concat();for(let oe=0,he=k.length;oe<he;oe++){const Re=k[oe];H=[];for(let Ie=0,Te=Re.length,qe=Te-1,ye=Ie+1;Ie<Te;Ie++,qe++,ye++)qe===Te&&(qe=0),ye===Te&&(ye=0),H[Ie]=z(Re[Ie],Re[qe],Re[ye]);Q.push(H),V=V.concat(H)}for(let oe=0;oe<A;oe++){const he=oe/A,Re=d*Math.cos(he*Math.PI/2),Ie=p*Math.sin(he*Math.PI/2)+m;for(let Te=0,qe=O.length;Te<qe;Te++){const ye=Y(O[Te],U[Te],Ie);ae(ye.x,ye.y,-Re)}for(let Te=0,qe=k.length;Te<qe;Te++){const ye=k[Te];H=Q[Te];for(let Oe=0,Ve=ye.length;Oe<Ve;Oe++){const Pe=Y(ye[Oe],H[Oe],Ie);ae(Pe.x,Pe.y,-Re)}}}const J=p+m;for(let oe=0;oe<q;oe++){const he=h?Y(T[oe],V[oe],J):T[oe];w?(M.copy(E.normals[0]).multiplyScalar(he.x),S.copy(E.binormals[0]).multiplyScalar(he.y),b.copy(x[0]).add(M).add(S),ae(b.x,b.y,b.z)):ae(he.x,he.y,0)}for(let oe=1;oe<=u;oe++)for(let he=0;he<q;he++){const Re=h?Y(T[he],V[he],J):T[he];w?(M.copy(E.normals[oe]).multiplyScalar(Re.x),S.copy(E.binormals[oe]).multiplyScalar(Re.y),b.copy(x[oe]).add(M).add(S),ae(b.x,b.y,b.z)):ae(Re.x,Re.y,f/u*oe)}for(let oe=A-1;oe>=0;oe--){const he=oe/A,Re=d*Math.cos(he*Math.PI/2),Ie=p*Math.sin(he*Math.PI/2)+m;for(let Te=0,qe=O.length;Te<qe;Te++){const ye=Y(O[Te],U[Te],Ie);ae(ye.x,ye.y,f+Re)}for(let Te=0,qe=k.length;Te<qe;Te++){const ye=k[Te];H=Q[Te];for(let Oe=0,Ve=ye.length;Oe<Ve;Oe++){const Pe=Y(ye[Oe],H[Oe],Ie);w?ae(Pe.x,Pe.y+x[u-1].y,x[u-1].x+Re):ae(Pe.x,Pe.y,f+Re)}}}j(),re();function j(){const oe=r.length/3;if(h){let he=0,Re=q*he;for(let Ie=0;Ie<K;Ie++){const Te=N[Ie];ce(Te[2]+Re,Te[1]+Re,Te[0]+Re)}he=u+A*2,Re=q*he;for(let Ie=0;Ie<K;Ie++){const Te=N[Ie];ce(Te[0]+Re,Te[1]+Re,Te[2]+Re)}}else{for(let he=0;he<K;he++){const Re=N[he];ce(Re[2],Re[1],Re[0])}for(let he=0;he<K;he++){const Re=N[he];ce(Re[0]+q*u,Re[1]+q*u,Re[2]+q*u)}}i.addGroup(oe,r.length/3-oe,0)}function re(){const oe=r.length/3;let he=0;ee(O,he),he+=O.length;for(let Re=0,Ie=k.length;Re<Ie;Re++){const Te=k[Re];ee(Te,he),he+=Te.length}i.addGroup(oe,r.length/3-oe,1)}function ee(oe,he){let Re=oe.length;for(;--Re>=0;){const Ie=Re;let Te=Re-1;Te<0&&(Te=oe.length-1);for(let qe=0,ye=u+A*2;qe<ye;qe++){const Oe=q*qe,Ve=q*(qe+1),Pe=he+Ie+Oe,X=he+Te+Oe,W=he+Te+Ve,ne=he+Ie+Ve;ge(Pe,X,W,ne)}}}function ae(oe,he,Re){l.push(oe),l.push(he),l.push(Re)}function ce(oe,he,Re){xe(oe),xe(he),xe(Re);const Ie=r.length/3,Te=y.generateTopUV(i,r,Ie-3,Ie-2,Ie-1);Se(Te[0]),Se(Te[1]),Se(Te[2])}function ge(oe,he,Re,Ie){xe(oe),xe(he),xe(Ie),xe(he),xe(Re),xe(Ie);const Te=r.length/3,qe=y.generateSideWallUV(i,r,Te-6,Te-3,Te-2,Te-1);Se(qe[0]),Se(qe[1]),Se(qe[3]),Se(qe[1]),Se(qe[2]),Se(qe[3])}function xe(oe){r.push(l[oe*3+0]),r.push(l[oe*3+1]),r.push(l[oe*3+2])}function Se(oe){s.push(oe.x),s.push(oe.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return Soe(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new R3[r.type]().fromJSON(r)),new qd(i,e.options)}}const boe={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ae(s,o),new Ae(a,l),new Ae(c,u)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[r*3],d=e[r*3+1],p=e[r*3+2],m=e[s*3],A=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ae(o,1-l),new Ae(c,1-f),new Ae(h,1-p),new Ae(m,1-v)]:[new Ae(a,1-l),new Ae(u,1-f),new Ae(d,1-p),new Ae(A,1-v)]}};function Soe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Yd extends gl{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Yd(e.radius,e.detail)}}class xs extends gl{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new xs(e.radius,e.detail)}}class fg extends ht{constructor(e=.5,n=1,i=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const h=(n-e)/r,d=new F,p=new Ae;for(let m=0;m<=r;m++){for(let A=0;A<=i;A++){const v=s+A/i*o;d.x=f*Math.cos(v),d.y=f*Math.sin(v),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/n+1)/2,p.y=(d.y/n+1)/2,u.push(p.x,p.y)}f+=h}for(let m=0;m<r;m++){const A=m*(i+1);for(let v=0;v<i;v++){const y=v+A,x=y,w=y+i+1,E=y+i+2,S=y+1;a.push(x,w,S),a.push(w,E,S)}}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(u,2))}static fromJSON(e){return new fg(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class hg extends ht{constructor(e=new pc([new Ae(0,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new et(r,3)),this.setAttribute("normal",new et(s,3)),this.setAttribute("uv",new et(o,2));function c(u){const f=r.length/3,h=u.extractPoints(n);let d=h.shape;const p=h.holes;va.isClockWise(d)===!1&&(d=d.reverse());for(let A=0,v=p.length;A<v;A++){const y=p[A];va.isClockWise(y)===!0&&(p[A]=y.reverse())}const m=va.triangulateShape(d,p);for(let A=0,v=p.length;A<v;A++){const y=p[A];d=d.concat(y)}for(let A=0,v=d.length;A<v;A++){const y=d[A];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let A=0,v=m.length;A<v;A++){const y=m[A],x=y[0]+f,w=y[1]+f,E=y[2]+f;i.push(x,w,E),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Coe(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new hg(i,e.curveSegments)}}function Coe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class xf extends ht{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new F,h=new F,d=[],p=[],m=[],A=[];for(let v=0;v<=i;v++){const y=[],x=v/i;let w=0;v==0&&o==0?w=.5/n:v==i&&l==Math.PI&&(w=-.5/n);for(let E=0;E<=n;E++){const S=E/n;f.x=-e*Math.cos(r+S*s)*Math.sin(o+x*a),f.y=e*Math.cos(o+x*a),f.z=e*Math.sin(r+S*s)*Math.sin(o+x*a),p.push(f.x,f.y,f.z),h.copy(f).normalize(),m.push(h.x,h.y,h.z),A.push(S+w,1-x),y.push(c++)}u.push(y)}for(let v=0;v<i;v++)for(let y=0;y<n;y++){const x=u[v][y+1],w=u[v][y],E=u[v+1][y],S=u[v+1][y+1];(v!==0||o>0)&&d.push(x,w,S),(v!==i-1||l<Math.PI)&&d.push(w,E,S)}this.setIndex(d),this.setAttribute("position",new et(p,3)),this.setAttribute("normal",new et(m,3)),this.setAttribute("uv",new et(A,2))}static fromJSON(e){return new xf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class dg extends gl{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new dg(e.radius,e.detail)}}class el extends ht{constructor(e=1,n=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new F,f=new F,h=new F;for(let d=0;d<=i;d++)for(let p=0;p<=r;p++){const m=p/r*s,A=d/i*Math.PI*2;f.x=(e+n*Math.cos(A))*Math.cos(m),f.y=(e+n*Math.cos(A))*Math.sin(m),f.z=n*Math.sin(A),a.push(f.x,f.y,f.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(p/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let p=1;p<=r;p++){const m=(r+1)*d+p-1,A=(r+1)*(d-1)+p-1,v=(r+1)*(d-1)+p,y=(r+1)*d+p;o.push(m,A,y),o.push(A,v,y)}this.setIndex(o),this.setAttribute("position",new et(a,3)),this.setAttribute("normal",new et(l,3)),this.setAttribute("uv",new et(c,2))}static fromJSON(e){return new el(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class pg extends ht{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new F,h=new F,d=new F,p=new F,m=new F,A=new F,v=new F;for(let x=0;x<=i;++x){const w=x/i*s*Math.PI*2;y(w,s,o,e,d),y(w+.01,s,o,e,p),A.subVectors(p,d),v.addVectors(p,d),m.crossVectors(A,v),v.crossVectors(m,A),m.normalize(),v.normalize();for(let E=0;E<=r;++E){const S=E/r*Math.PI*2,M=-n*Math.cos(S),b=n*Math.sin(S);f.x=d.x+(M*v.x+b*m.x),f.y=d.y+(M*v.y+b*m.y),f.z=d.z+(M*v.z+b*m.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(x/i),u.push(E/r)}}for(let x=1;x<=i;x++)for(let w=1;w<=r;w++){const E=(r+1)*(x-1)+(w-1),S=(r+1)*x+(w-1),M=(r+1)*x+w,b=(r+1)*(x-1)+w;a.push(E,S,b),a.push(S,M,b)}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(c,3)),this.setAttribute("uv",new et(u,2));function y(x,w,E,S,M){const b=Math.cos(x),B=Math.sin(x),T=E/w*x,k=Math.cos(T);M.x=S*(2+k)*.5*b,M.y=S*(2+k)*B*.5,M.z=S*Math.sin(T)*.5}}static fromJSON(e){return new pg(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class mg extends ht{constructor(e=new Dy(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new Ae;let u=new F;const f=[],h=[],d=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new et(f,3)),this.setAttribute("normal",new et(h,3)),this.setAttribute("uv",new et(d,2));function m(){for(let x=0;x<n;x++)A(x);A(s===!1?n:0),y(),v()}function A(x){u=e.getPointAt(x/n,u);const w=o.normals[x],E=o.binormals[x];for(let S=0;S<=r;S++){const M=S/r*Math.PI*2,b=Math.sin(M),B=-Math.cos(M);l.x=B*w.x+b*E.x,l.y=B*w.y+b*E.y,l.z=B*w.z+b*E.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function v(){for(let x=1;x<=n;x++)for(let w=1;w<=r;w++){const E=(r+1)*(x-1)+(w-1),S=(r+1)*x+(w-1),M=(r+1)*x+w,b=(r+1)*(x-1)+w;p.push(E,S,b),p.push(S,M,b)}}function y(){for(let x=0;x<=n;x++)for(let w=0;w<=r;w++)c.x=x/n,c.y=w/r,d.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new mg(new R3[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class D3 extends ht{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,d=f.count;for(let p=h,m=h+d;p<m;p+=3)for(let A=0;A<3;A++){const v=a.getX(p+A),y=a.getX(p+(A+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,y),TP(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),TP(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new et(n,3))}}}function TP(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var BP=Object.freeze({__proto__:null,BoxGeometry:Ar,CapsuleGeometry:ag,CircleGeometry:lg,ConeGeometry:cg,CylinderGeometry:xi,DodecahedronGeometry:ug,EdgesGeometry:P3,ExtrudeGeometry:qd,IcosahedronGeometry:Yd,LatheGeometry:jd,OctahedronGeometry:xs,PlaneGeometry:Nr,PolyhedronGeometry:gl,RingGeometry:fg,ShapeGeometry:hg,SphereGeometry:xf,TetrahedronGeometry:dg,TorusGeometry:el,TorusKnotGeometry:pg,TubeGeometry:mg,WireframeGeometry:D3});class bU extends mi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class SU extends $n{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ic extends mi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pl,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ea extends Ic{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ae(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ad extends mi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pl,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Km,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class CU extends mi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pl,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MU extends mi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pl,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class L3 extends mi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pl,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Km,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IU extends mi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pl,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TU extends ai{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Js(t,e,n){return F3(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function Mu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function F3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function BU(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function zS(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function k3(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function Moe(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const p=c.times[d]*r;if(!(p<n||p>=i)){f.push(c.times[d]);for(let m=0;m<u;++m)h.push(c.values[d*u+m])}}f.length!==0&&(c.times=Mu(f,c.times.constructor),c.values=Mu(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Ioe(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const v=u,y=f-u;m=Js(a.values,v,y)}else if(s>=a.times[p]){const v=p*f+u,y=v+f-u;m=Js(a.values,v,y)}else{const v=a.createInterpolant(),y=u,x=f-u;v.evaluate(s),m=Js(v.resultBuffer,y,x)}l==="quaternion"&&new St().fromArray(m).normalize().conjugate().toArray(m);const A=c.times.length;for(let v=0;v<A;++v){const y=v*d+h;if(l==="quaternion")St.multiplyQuaternionsFlat(c.values,y,m,0,c.values,y);else{const x=d-h*2;for(let w=0;w<x;++w)c.values[y+w]-=m[w]}}}return t.blendMode=c3,t}var Toe=Object.freeze({__proto__:null,arraySlice:Js,convertArray:Mu,isTypedArray:F3,getKeyframeOrder:BU,sortedArray:zS,flattenJSON:k3,subclip:Moe,makeClipAdditive:Ioe});class Xd{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RU extends Xd{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bu,endingEnd:bu}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Su:s=e,a=2*n-i;break;case Em:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Su:o=e,l=2*i-n;break;case Em:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const c=(i-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-n)/(r-n),m=p*p,A=m*p,v=-h*A+2*h*m-h*p,y=(1+h)*A+(-1.5-2*h)*m+(-.5+h)*p+1,x=(-1-d)*A+(1.5+d)*m+.5*p,w=d*A-d*m;for(let E=0;E!==a;++E)s[E]=v*o[u+E]+y*o[c+E]+x*o[l+E]+w*o[f+E];return s}}class O3 extends Xd{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-n)/(r-n),f=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*f+o[l+h]*u;return s}}class PU extends Xd{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vo{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mu(n,this.TimeBufferType),this.values=Mu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Mu(e.times,Array),values:Mu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new PU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new O3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new RU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Sd:n=this.InterpolantFactoryMethodDiscrete;break;case nf:n=this.InterpolantFactoryMethodLinear;break;case Tv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sd;case this.InterpolantFactoryMethodLinear:return nf;case this.InterpolantFactoryMethodSmooth:return Tv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Js(i,s,o),this.values=Js(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&F3(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Js(this.times),n=Js(this.values),i=this.getValueSize(),r=this.getInterpolation()===Tv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,h=f-i,d=f+i;for(let p=0;p!==i;++p){const m=n[f+p];if(m!==n[h+p]||m!==n[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,h=o*i;for(let d=0;d!==i;++d)n[h+d]=n[f+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=Js(e,0,o),this.values=Js(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=Js(this.times,0),n=Js(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Vo.prototype.TimeBufferType=Float32Array;Vo.prototype.ValueBufferType=Float32Array;Vo.prototype.DefaultInterpolation=nf;class wf extends Vo{}wf.prototype.ValueTypeName="bool";wf.prototype.ValueBufferType=Array;wf.prototype.DefaultInterpolation=Sd;wf.prototype.InterpolantFactoryMethodLinear=void 0;wf.prototype.InterpolantFactoryMethodSmooth=void 0;class U3 extends Vo{}U3.prototype.ValueTypeName="color";class rf extends Vo{}rf.prototype.ValueTypeName="number";class DU extends Xd{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let u=c+a;c!==u;c+=4)St.slerpFlat(s,0,o,c-a,o,c,l);return s}}class cl extends Vo{InterpolantFactoryMethodLinear(e){return new DU(this.times,this.values,this.getValueSize(),e)}}cl.prototype.ValueTypeName="quaternion";cl.prototype.DefaultInterpolation=nf;cl.prototype.InterpolantFactoryMethodSmooth=void 0;class Ef extends Vo{}Ef.prototype.ValueTypeName="string";Ef.prototype.ValueBufferType=Array;Ef.prototype.DefaultInterpolation=Sd;Ef.prototype.InterpolantFactoryMethodLinear=void 0;Ef.prototype.InterpolantFactoryMethodSmooth=void 0;class sf extends Vo{}sf.prototype.ValueTypeName="vector";class of{constructor(e,n=-1,i,r=Sy){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Ms(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(Roe(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(Vo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=BU(l);l=zS(l,1,u),c=zS(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new rf(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,p,m){if(d.length!==0){const A=[],v=[];k3(d,A,v,p),A.length!==0&&m.push(new f(h,A,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)d[h[p].morphTargets[m]]=-1;for(const m in d){const A=[],v=[];for(let y=0;y!==h[p].morphTargets.length;++y){const x=h[p];A.push(x.time),v.push(x.morphTarget===m?1:0)}r.push(new rf(".morphTargetInfluence["+m+"]",A,v))}l=d.length*o}else{const d=".bones["+n[f].name+"]";i(sf,d+".position",h,"pos",r),i(cl,d+".quaternion",h,"rot",r),i(sf,d+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Boe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rf;case"vector":case"vector2":case"vector3":case"vector4":return sf;case"color":return U3;case"quaternion":return cl;case"bool":case"boolean":return wf;case"string":return Ef}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Roe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Boe(t.type);if(t.times===void 0){const n=[],i=[];k3(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const af={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class N3{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],p=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const Jh=new N3;class Gi{constructor(e){this.manager=e!==void 0?e:Jh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Na={};class Poe extends Error{constructor(e,n){super(e),this.response=n}}class Ui extends Gi{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=af.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Na[e]!==void 0){Na[e].push({onLoad:n,onProgress:i,onError:r});return}Na[e]=[],Na[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Na[e],f=c.body.getReader(),h=c.headers.get("Content-Length"),d=h?parseInt(h):0,p=d!==0;let m=0;const A=new ReadableStream({start(v){y();function y(){f.read().then(({done:x,value:w})=>{if(x)v.close();else{m+=w.byteLength;const E=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:d});for(let S=0,M=u.length;S<M;S++){const b=u[S];b.onProgress&&b.onProgress(E)}v.enqueue(w),y()}})}}});return new Response(A)}else throw new Poe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(p=>d.decode(p))}}}).then(c=>{af.add(e,c);const u=Na[e];delete Na[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=Na[e];if(u===void 0)throw this.manager.itemError(e),c;delete Na[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Doe extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Ui(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=of.parse(e[i]);n.push(r)}return n}}class Loe extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new E3,l=new Ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const d=s.parse(h,!0);o[f]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(a.minFilter=Wt),a.image=o,a.format=d.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let p=0;p<d;p++){o[p]={mipmaps:[]};for(let m=0;m<h.mipmapCount;m++)o[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+m]),o[p].format=h.format,o[p].width=h.width,o[p].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Wt),a.format=h.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class Rm extends Gi{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=af.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Cm("img");function l(){u(),af.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Fy extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=new eg,o=new Rm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class LU extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Oo,a=new Ui(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);!c||(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Fi,o.wrapT=c.wrapT!==void 0?c.wrapT:Fi,o.magFilter=c.magFilter!==void 0?c.magFilter:Wt,o.minFilter=c.minFilter!==void 0?c.minFilter:Wt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=wa),c.mipmapCount===1&&(o.minFilter=Wt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},i,r),o}}class Jd extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=new bn,o=new Rm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class Tc extends It{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class FU extends Tc{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(It.DefaultUp),this.updateMatrix(),this.groundColor=new ze(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const qw=new Ne,RP=new F,PP=new F;class z3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new Ne,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ng,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new Pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;RP.setFromMatrixPosition(e.matrixWorld),n.position.copy(RP),PP.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(PP),n.updateMatrixWorld(),qw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(qw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Foe extends z3{constructor(){super(new dn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=Sm*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ky extends Tc{constructor(e,n,i=0,r=Math.PI/3,s=0,o=1){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(It.DefaultUp),this.updateMatrix(),this.target=new It,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Foe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const DP=new Ne,X0=new F,Yw=new F;class koe extends z3{constructor(){super(new dn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new Pt(2,1,1,1),new Pt(0,1,1,1),new Pt(3,1,1,1),new Pt(1,1,1,1),new Pt(3,0,1,1),new Pt(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),X0.setFromMatrixPosition(e.matrixWorld),i.position.copy(X0),Yw.copy(i.position),Yw.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(Yw),i.updateMatrixWorld(),r.makeTranslation(-X0.x,-X0.y,-X0.z),DP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DP)}}class Pm extends Tc{constructor(e,n,i=0,r=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new koe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ooe extends z3{constructor(){super(new Is(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Oy extends Tc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(It.DefaultUp),this.updateMatrix(),this.target=new It,this.shadow=new Ooe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class G3 extends Tc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class kU extends Tc{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class OU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class Uy extends Tc{constructor(e=new OU,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Ny extends Gi{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new Ui(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=Ny.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ze().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ae().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Pt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new yr().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Ne().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ae().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ae().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:bU,SpriteMaterial:_3,RawShaderMaterial:SU,ShaderMaterial:$n,PointsMaterial:og,MeshPhysicalMaterial:Ea,MeshStandardMaterial:Ic,MeshPhongMaterial:ad,MeshToonMaterial:CU,MeshNormalMaterial:MU,MeshLambertMaterial:L3,MeshDepthMaterial:ig,MeshDistanceMaterial:Iy,MeshBasicMaterial:wr,MeshMatcapMaterial:IU,LineDashedMaterial:TU,LineBasicMaterial:ai,Material:mi};return new n[e]}}class Ts{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class zy extends ht{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class UU extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Ui(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(d,p){if(n[p]!==void 0)return n[p];const A=d.interleavedBuffers[p],v=s(d,A.buffer),y=qh(A.type,v),x=new sg(y,A.stride);return x.uuid=A.uuid,n[p]=x,x}function s(d,p){if(i[p]!==void 0)return i[p];const A=d.arrayBuffers[p],v=new Uint32Array(A).buffer;return i[p]=v,v}const o=e.isInstancedBufferGeometry?new zy:new ht,a=e.data.index;if(a!==void 0){const d=qh(a.type,a.array);o.setIndex(new bt(d,1))}const l=e.data.attributes;for(const d in l){const p=l[d];let m;if(p.isInterleavedBufferAttribute){const A=r(e.data,p.data);m=new ns(A,p.itemSize,p.offset,p.normalized)}else{const A=qh(p.type,p.array),v=p.isInstancedBufferAttribute?xc:bt;m=new v(A,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),o.setAttribute(d,m)}const c=e.data.morphAttributes;if(c)for(const d in c){const p=c[d],m=[];for(let A=0,v=p.length;A<v;A++){const y=p[A];let x;if(y.isInterleavedBufferAttribute){const w=r(e.data,y.data);x=new ns(w,y.itemSize,y.offset,y.normalized)}else{const w=qh(y.type,y.array);x=new bt(w,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),m.push(x)}o.morphAttributes[d]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let d=0,p=f.length;d!==p;++d){const m=f[d];o.addGroup(m.start,m.count,m.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new F;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new zi(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Uoe extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?Ts.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ui(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?Ts.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ui(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new pc().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Wd().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new UU;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in BP?a=BP[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new Ny;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=of.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:qh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new N3(n);s=new Rm(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const d=[];for(let p=0,m=h.length;p<m;p++){const A=h[p],v=a(A);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Oo(v.data,v.width,v.height)))}r[f.uuid]=new Cu(d)}else{const d=a(f.url);r[f.uuid]=new Cu(d)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:qh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Rm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f],p=await s(d);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new Oo(p.data,p.width,p.height)))}i[l.uuid]=new Cu(u)}else{const u=await s(l.url);i[l.uuid]=new Cu(u)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new eg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Oo:u=new bn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,Noe)),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],LP),u.wrapT=i(a.wrap[1],LP)),a.format!==void 0&&(u.format=a.format),a.type!==void 0&&(u.type=a.type),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,FP)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,FP)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,n,i,r,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const d=[];for(let p=0,m=h.length;p<m;p++){const A=h[p];i[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),d.push(i[A])}return d}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,f;switch(e.type){case"Scene":o=new ml,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new By(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ty(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new dn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Is(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new G3(e.color,e.intensity);break;case"DirectionalLight":o=new Oy(e.color,e.intensity);break;case"PointLight":o=new Pm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new kU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ky(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new FU(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Uy().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new Ry(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new $e(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const h=e.count,d=e.instanceMatrix,p=e.instanceColor;o=new y3(u,f,h),o.instanceMatrix=new xc(new Float32Array(d.array),16),p!==void 0&&(o.instanceColor=new xc(new Float32Array(p.array),p.itemSize));break;case"LOD":o=new gU;break;case"Line":o=new Rt(a(e.geometry),l(e.material));break;case"LineLoop":o=new x3(a(e.geometry),l(e.material));break;case"LineSegments":o=new fo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new w3(a(e.geometry),l(e.material));break;case"Sprite":o=new mU(l(e.material));break;case"Group":o=new ts;break;case"Bone":o=new Md;break;default:o=new It}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let d=0;d<h.length;d++)o.add(this.parseObject(h[d],n,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let d=0;d<h.length;d++){const p=h[d];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let d=0;d<h.length;d++){const p=h[d],m=o.getObjectByProperty("uuid",p.object);m!==void 0&&o.addLevel(m,p.distance)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Noe={UVMapping:wy,CubeReflectionMapping:ll,CubeRefractionMapping:yc,EquirectangularReflectionMapping:ef,EquirectangularRefractionMapping:_m,CubeUVReflectionMapping:Hd},LP={RepeatWrapping:Rs,ClampToEdgeWrapping:Fi,MirroredRepeatWrapping:bd},FP={NearestFilter:vn,NearestMipmapNearestFilter:ym,NearestMipmapLinearFilter:xm,LinearFilter:Wt,LinearMipmapNearestFilter:Ey,LinearMipmapLinearFilter:wa};class NU extends Gi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=af.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){af.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let vA;const Q3={getContext:function(){return vA===void 0&&(vA=new(window.AudioContext||window.webkitAudioContext)),vA},setContext:function(t){vA=t}};class zU extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Ui(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);Q3.getContext().decodeAudioData(l,function(u){n(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class zoe extends Uy{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new ze().set(e),s=new ze().set(n),o=new F(r.r,r.g,r.b),a=new F(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Goe extends Uy{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new ze().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const kP=new Ne,OP=new Ne,Xc=new Ne;class Qoe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Xc.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(Ou*n.fov*.5)/n.zoom;let a,l;OP.elements[12]=-r,kP.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,Xc.elements[0]=2*n.near/(l-a),Xc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Xc),a=-o*n.aspect-s,l=o*n.aspect-s,Xc.elements[0]=2*n.near/(l-a),Xc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Xc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(OP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(kP)}}class Gy{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=UP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=UP();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function UP(){return(typeof performance>"u"?Date:performance).now()}const Jc=new F,NP=new St,Hoe=new F,Kc=new F;class GU extends It{constructor(){super(),this.type="AudioListener",this.context=Q3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gy}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Jc,NP,Hoe),Kc.set(0,0,-1).applyQuaternion(NP),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Jc.x,r),n.positionY.linearRampToValueAtTime(Jc.y,r),n.positionZ.linearRampToValueAtTime(Jc.z,r),n.forwardX.linearRampToValueAtTime(Kc.x,r),n.forwardY.linearRampToValueAtTime(Kc.y,r),n.forwardZ.linearRampToValueAtTime(Kc.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Jc.x,Jc.y,Jc.z),n.setOrientation(Kc.x,Kc.y,Kc.z,i.x,i.y,i.z)}}class QU extends It{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const $c=new F,zP=new St,Voe=new F,Zc=new F;class Woe extends QU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose($c,zP,Voe),Zc.set(0,0,1).applyQuaternion(zP);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime($c.x,i),n.positionY.linearRampToValueAtTime($c.y,i),n.positionZ.linearRampToValueAtTime($c.z,i),n.orientationX.linearRampToValueAtTime(Zc.x,i),n.orientationY.linearRampToValueAtTime(Zc.y,i),n.orientationZ.linearRampToValueAtTime(Zc.z,i)}else n.setPosition($c.x,$c.y,$c.z),n.setOrientation(Zc.x,Zc.y,Zc.z)}}class joe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class HU{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){St.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;St.multiplyQuaternionsFlat(e,o,e,n,e,i),St.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const H3="\\[\\]\\.:\\/",qoe=new RegExp("["+H3+"]","g"),V3="[^"+H3+"]",Yoe="[^"+H3.replace("\\.","")+"]",Xoe=/((?:WC+[\/:])*)/.source.replace("WC",V3),Joe=/(WCOD+)?/.source.replace("WCOD",Yoe),Koe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",V3),$oe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",V3),Zoe=new RegExp("^"+Xoe+Joe+Koe+$oe+"$"),eae=["material","materials","bones","map"];class tae{constructor(e,n,i){const r=i||qt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class qt{constructor(e,n,i){this.path=n,this.parsedPath=i||qt.parseTrackName(n),this.node=qt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new qt.Composite(e,n,i):new qt(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qoe,"")}static parseTrackName(e){const n=Zoe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);eae.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=qt.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qt.Composite=tae;qt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qt.prototype.GetterByBindingType=[qt.prototype._getValue_direct,qt.prototype._getValue_array,qt.prototype._getValue_arrayElement,qt.prototype._getValue_toArray];qt.prototype.SetterByBindingTypeAndVersioning=[[qt.prototype._setValue_direct,qt.prototype._setValue_direct_setNeedsUpdate,qt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_array,qt.prototype._setValue_array_setNeedsUpdate,qt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_arrayElement,qt.prototype._setValue_arrayElement_setNeedsUpdate,qt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_fromArray,qt.prototype._setValue_fromArray_setNeedsUpdate,qt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nae{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ms(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],d=h.uuid;let p=n[d];if(p===void 0){p=l++,n[d]=p,e.push(h);for(let m=0,A=o;m!==A;++m)s[m].push(new qt(h,i[m],r[m]))}else if(p<c){a=e[p];const m=--c,A=e[m];n[A.uuid]=p,e[p]=A,n[d]=m,e[m]=h;for(let v=0,y=o;v!==y;++v){const x=s[v],w=x[m];let E=x[p];x[p]=w,E===void 0&&(E=new qt(h,i[v],r[v])),x[m]=E}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const f=s++,h=e[f];n[h.uuid]=u,e[u]=h,n[c]=f,e[f]=l;for(let d=0,p=r;d!==p;++d){const m=i[d],A=m[f],v=m[u];m[u]=A,m[f]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<s){const h=--s,d=e[h],p=--o,m=e[p];n[d.uuid]=f,e[f]=d,n[m.uuid]=h,e[h]=m,e.pop();for(let A=0,v=r;A!==v;++A){const y=i[A],x=y[h],w=y[p];y[f]=x,y[h]=w,y.pop()}}else{const h=--o,d=e[h];h>0&&(n[d.uuid]=f),e[f]=d,e.pop();for(let p=0,m=r;p!==m;++p){const A=i[p];A[f]=A[h],A.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(f);for(let h=u,d=l.length;h!==d;++h){const p=l[h];f[h]=new qt(p,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class iae{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:bu,endingEnd:bu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=J8,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case c3:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Sy:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(n*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n))}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===K8;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===X8){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Su,r.endingEnd=Su):(e?r.endingStart=this.zeroSlopeAtStart?Su:bu:r.endingStart=Em,n?r.endingEnd=this.zeroSlopeAtEnd?Su:bu:r.endingEnd=Em)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const rae=new Float32Array(1);class VU extends Cr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=r[f],d=h.name;let p=u[d];if(p!==void 0)++p.referenceCount,o[f]=p;else{if(p=o[f],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const m=n&&n._propertyBindings[f].binding.parsedPath;p=new HU(qt.create(i,d,m),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[f]=p}a[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new O3(new Float32Array(2),new Float32Array(2),1,rae),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?of.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Sy),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new iae(this,o,n,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?of.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class mr{constructor(e){this.value=e}clone(){return new mr(this.value.clone===void 0?this.value:this.value.clone())}}let sae=0;class oae extends Cr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:sae++}),this.name="",this.usage=bm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class M_ extends sg{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class aae{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Kd{constructor(e,n,i=0,r=1/0){this.ray=new Ho(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Nu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return GS(e,this,i,n),i.sort(GP),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)GS(e[r],this,i,n);return i.sort(GP),i}}function GP(t,e){return t.distance-e.distance}function GS(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)GS(r[s],e,n,!0)}}class Dm{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(oi(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lae{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const QP=new Ae;class cae{constructor(e=new Ae(1/0,1/0),n=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=QP.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return QP.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const HP=new F,_A=new F;class Uo{constructor(e=new F,n=new F){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){HP.subVectors(e,this.start),_A.subVectors(this.end,this.start);const i=_A.dot(_A);let s=_A.dot(HP)/i;return n&&(s=oi(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VP=new F;class uae extends It{constructor(e,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new ht,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new et(r,3));const s=new ai({fog:!1,toneMapped:!1});this.cone=new fo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),VP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ul=new F,yA=new Ne,Xw=new Ne;class fae extends fo{constructor(e){const n=WU(e),i=new ht,r=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new et(r,3)),i.setAttribute("color",new et(s,3));const l=new ai({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");Xw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(yA.multiplyMatrices(Xw,a.matrixWorld),Ul.setFromMatrixPosition(yA),r.setXYZ(o,Ul.x,Ul.y,Ul.z),yA.multiplyMatrices(Xw,a.parent.matrixWorld),Ul.setFromMatrixPosition(yA),r.setXYZ(o+1,Ul.x,Ul.y,Ul.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function WU(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,WU(t.children[n]));return e}class hae extends $e{constructor(e,n,i){const r=new xf(n,4,2),s=new wr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const dae=new F,WP=new ze,jP=new ze;class pae extends It{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new xs(n);r.rotateY(Math.PI*.5),this.material=new wr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new bt(o,3)),this.add(new $e(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");WP.copy(this.light.color),jP.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?WP:jP;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}e.lookAt(dae.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jU extends fo{constructor(e=10,n=10,i=4473924,r=8947848){i=new ze(i),r=new ze(r);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,d=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?i:r;m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3}const u=new ht;u.setAttribute("position",new et(l,3)),u.setAttribute("color",new et(c,3));const f=new ai({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class mae extends fo{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const h=f/n*(Math.PI*2),d=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(d,0,p);const m=f&1?s:o;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let f=0;f<i;f++){const h=f&1?s:o,d=e-e/i*f;for(let p=0;p<r;p++){let m=p/r*(Math.PI*2),A=Math.sin(m)*d,v=Math.cos(m)*d;a.push(A,0,v),l.push(h.r,h.g,h.b),m=(p+1)/r*(Math.PI*2),A=Math.sin(m)*d,v=Math.cos(m)*d,a.push(A,0,v),l.push(h.r,h.g,h.b)}}const c=new ht;c.setAttribute("position",new et(a,3)),c.setAttribute("color",new et(l,3));const u=new ai({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qP=new F,xA=new F,YP=new F;class gae extends It{constructor(e,n,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,n===void 0&&(n=1);let r=new ht;r.setAttribute("position",new et([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new ai({fog:!1,toneMapped:!1});this.lightPlane=new Rt(r,s),this.add(this.lightPlane),r=new ht,r.setAttribute("position",new et([0,0,0,0,0,1],3)),this.targetLine=new Rt(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){qP.setFromMatrixPosition(this.light.matrixWorld),xA.setFromMatrixPosition(this.light.target.matrixWorld),YP.subVectors(xA,qP),this.lightPlane.lookAt(xA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xA),this.targetLine.scale.z=YP.length()}}const wA=new F,Xn=new yf;class Aae extends fo{constructor(e){const n=new ht,i=new ai({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){l(p),l(m)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}n.setAttribute("position",new et(r,3)),n.setAttribute("color",new et(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ze(16755200),u=new ze(16711680),f=new ze(43775),h=new ze(16777215),d=new ze(3355443);this.setColors(c,u,f,h,d)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;Xn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ii("c",n,e,Xn,0,0,-1),ii("t",n,e,Xn,0,0,1),ii("n1",n,e,Xn,-i,-r,-1),ii("n2",n,e,Xn,i,-r,-1),ii("n3",n,e,Xn,-i,r,-1),ii("n4",n,e,Xn,i,r,-1),ii("f1",n,e,Xn,-i,-r,1),ii("f2",n,e,Xn,i,-r,1),ii("f3",n,e,Xn,-i,r,1),ii("f4",n,e,Xn,i,r,1),ii("u1",n,e,Xn,i*.7,r*1.1,-1),ii("u2",n,e,Xn,-i*.7,r*1.1,-1),ii("u3",n,e,Xn,0,r*2,-1),ii("cf1",n,e,Xn,-i,0,1),ii("cf2",n,e,Xn,i,0,1),ii("cf3",n,e,Xn,0,-r,1),ii("cf4",n,e,Xn,0,r,1),ii("cn1",n,e,Xn,-i,0,-1),ii("cn2",n,e,Xn,i,0,-1),ii("cn3",n,e,Xn,0,-r,-1),ii("cn4",n,e,Xn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ii(t,e,n,i,r,s,o){wA.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],wA.x,wA.y,wA.z)}}const EA=new Sn;class vae extends fo{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ht;s.setIndex(new bt(i,1)),s.setAttribute("position",new bt(r,3)),super(s,new ai({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&EA.setFromObject(this.object),EA.isEmpty())return;const n=EA.min,i=EA.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _ae extends fo{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ht;s.setIndex(new bt(i,1)),s.setAttribute("position",new et(r,3)),super(s,new ai({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class yae extends Rt{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new ht;o.setAttribute("position",new et(s,3)),o.computeBoundingSphere(),super(o,new ai({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new ht;l.setAttribute("position",new et(a,3)),l.computeBoundingSphere(),this.add(new $e(l,new wr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const XP=new F;let bA,Jw;class xae extends It{constructor(e=new F(0,0,1),n=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",bA===void 0&&(bA=new ht,bA.setAttribute("position",new et([0,0,0,0,1,0],3)),Jw=new xi(0,.5,1,5,1),Jw.translate(0,-.5,0)),this.position.copy(n),this.line=new Rt(bA,new ai({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $e(Jw,new wr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{XP.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(XP,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class wae extends fo{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ht;r.setAttribute("position",new et(n,3)),r.setAttribute("color",new et(i,3));const s=new ai({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new ze,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qU{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Mm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const y=[];for(let x=0,w=v.length;x<w;x++){const E=v[x],S=new pc;S.curves=E.curves,y.push(S)}return y}function i(v,y){const x=y.length;let w=!1;for(let E=x-1,S=0;S<x;E=S++){let M=y[E],b=y[S],B=b.x-M.x,T=b.y-M.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(M=y[S],B=-B,b=y[E],T=-T),v.y<M.y||v.y>b.y)continue;if(v.y===M.y){if(v.x===M.x)return!0}else{const k=T*(v.x-M.x)-B*(v.y-M.y);if(k===0)return!0;if(k<0)continue;w=!w}}else{if(v.y!==M.y)continue;if(b.x<=v.x&&v.x<=M.x||M.x<=v.x&&v.x<=b.x)return!0}}return w}const r=va.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new pc,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],h=[];let d=[],p=0,m;h[p]=void 0,d[p]=[];for(let v=0,y=s.length;v<y;v++)a=s[v],m=a.getPoints(),o=r(m),o=e?!o:o,o?(!u&&h[p]&&p++,h[p]={s:new pc,p:m},h[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:m[0]});if(!h[0])return n(s);if(h.length>1){let v=!1,y=0;for(let x=0,w=h.length;x<w;x++)f[x]=[];for(let x=0,w=h.length;x<w;x++){const E=d[x];for(let S=0;S<E.length;S++){const M=E[S];let b=!0;for(let B=0;B<h.length;B++)i(M.p,h[B].p)&&(x!==B&&y++,b?(b=!1,f[B].push(M)):v=!0);b&&f[x].push(M)}}y>0&&v===!1&&(d=f)}let A;for(let v=0,y=h.length;v<y;v++){l=h[v].s,c.push(l),A=d[v];for(let x=0,w=A.length;x<w;x++)l.holes.push(A[x].h)}return c}}const Ya=Eae();function Eae(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function bae(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=oi(t,-65504,65504),Ya.floatView[0]=t;const e=Ya.uint32View[0],n=e>>23&511;return Ya.baseTable[n]+((e&8388607)>>Ya.shiftTable[n])}function Sae(t){const e=t>>10;return Ya.uint32View[0]=Ya.mantissaTable[Ya.offsetTable[e]+(t&1023)]+Ya.exponentTable[e],Ya.floatView[0]}var bp=Object.freeze({__proto__:null,toHalfFloat:bae,fromHalfFloat:Sae});function Cae(){console.error("THREE.ImmediateRenderObject has been removed.")}class Mae extends kn{constructor(e,n,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,i),this.samples=4}}class Iae extends $m{constructor(e,n,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,i,r)}}class Tae extends Zm{constructor(e,n,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,i,r)}}class Bae extends Ar{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class Rae extends ag{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class Pae extends lg{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class Dae extends cg{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class Lae extends xi{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class Fae extends ug{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class kae extends qd{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class Oae extends Yd{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class Uae extends jd{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class Nae extends xs{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class I_ extends Nr{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class zae extends gl{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class Gae extends fg{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class Qae extends hg{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class Hae extends xf{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class Vae extends dg{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class Wae extends el{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class jae extends pg{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class qae extends mg{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xy);const Id=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:s3,AddEquation:du,AddOperation:U8,AdditiveAnimationBlendMode:c3,AdditiveBlending:g_,AlphaFormat:W8,AlwaysDepth:R8,AlwaysStencilFunc:h3,AmbientLight:G3,AmbientLightProbe:Goe,AnimationClip:of,AnimationLoader:Doe,AnimationMixer:VU,AnimationObjectGroup:nae,AnimationUtils:Toe,ArcCurve:vU,ArrayCamera:hU,ArrowHelper:xae,Audio:QU,AudioAnalyser:joe,AudioContext:Q3,AudioListener:GU,AudioLoader:zU,AxesHelper:wae,BackSide:Er,BasicDepthPacking:Z8,BasicShadowMap:pee,Bone:Md,BooleanKeyframeTrack:wf,Box2:cae,Box3:Sn,Box3Helper:_ae,BoxBufferGeometry:Bae,BoxGeometry:Ar,BoxHelper:vae,BufferAttribute:bt,BufferGeometry:ht,BufferGeometryLoader:UU,ByteType:v_,Cache:af,Camera:yf,CameraHelper:Aae,CanvasTexture:b3,CapsuleBufferGeometry:Rae,CapsuleGeometry:ag,CatmullRomCurve3:C3,CineonToneMapping:G8,CircleBufferGeometry:Pae,CircleGeometry:lg,ClampToEdgeWrapping:Fi,Clock:Gy,Color:ze,ColorKeyframeTrack:U3,ColorManagement:Xs,CompressedTexture:E3,CompressedTextureLoader:Loe,ConeBufferGeometry:Dae,ConeGeometry:cg,CubeCamera:g3,CubeReflectionMapping:ll,CubeRefractionMapping:yc,CubeTexture:eg,CubeTextureLoader:Fy,CubeUVReflectionMapping:Hd,CubicBezierCurve:M3,CubicBezierCurve3:I3,CubicInterpolant:RU,CullFaceBack:dS,CullFaceFront:A8,CullFaceFrontBack:dee,CullFaceNone:g8,Curve:ho,CurvePath:yU,CustomBlending:v8,CustomToneMapping:Q8,CylinderBufferGeometry:Lae,CylinderGeometry:xi,Cylindrical:lae,Data3DTexture:Zm,DataArrayTexture:$m,DataTexture:Oo,DataTexture2DArray:Iae,DataTexture3D:Tae,DataTextureLoader:LU,DataUtils:bp,DecrementStencilOp:Eee,DecrementWrapStencilOp:See,DefaultLoadingManager:Jh,DepthFormat:ko,DepthStencilFormat:tf,DepthTexture:rg,DirectionalLight:Oy,DirectionalLightHelper:gae,DiscreteInterpolant:PU,DodecahedronBufferGeometry:Fae,DodecahedronGeometry:ug,DoubleSide:bi,DstAlphaFactor:S8,DstColorFactor:M8,DynamicCopyUsage:Oee,DynamicDrawUsage:bs,DynamicReadUsage:Lee,EdgesGeometry:P3,EllipseCurve:zu,EqualDepth:D8,EqualStencilFunc:tU,EquirectangularReflectionMapping:ef,EquirectangularRefractionMapping:_m,Euler:xr,EventDispatcher:Cr,ExtrudeBufferGeometry:kae,ExtrudeGeometry:qd,FileLoader:Ui,Float16BufferAttribute:Ate,Float32BufferAttribute:et,Float64BufferAttribute:vte,FloatType:Qn,Fog:By,FogExp2:Ty,FramebufferTexture:Zse,FrontSide:Qo,Frustum:ng,GLBufferAttribute:aae,GLSL1:Nee,GLSL3:DS,GreaterDepth:F8,GreaterEqualDepth:L8,GreaterEqualStencilFunc:Ree,GreaterStencilFunc:Bee,GridHelper:jU,Group:ts,HalfFloatType:pi,HemisphereLight:FU,HemisphereLightHelper:pae,HemisphereLightProbe:zoe,IcosahedronBufferGeometry:Oae,IcosahedronGeometry:Yd,ImageBitmapLoader:NU,ImageLoader:Rm,ImageUtils:p3,ImmediateRenderObject:Cae,IncrementStencilOp:wee,IncrementWrapStencilOp:bee,InstancedBufferAttribute:xc,InstancedBufferGeometry:zy,InstancedInterleavedBuffer:M_,InstancedMesh:y3,Int16BufferAttribute:mte,Int32BufferAttribute:gte,Int8BufferAttribute:hte,IntType:Np,InterleavedBuffer:sg,InterleavedBufferAttribute:ns,Interpolant:Xd,InterpolateDiscrete:Sd,InterpolateLinear:nf,InterpolateSmooth:Tv,InvertStencilOp:Cee,KeepStencilOp:ku,KeyframeTrack:Vo,LOD:gU,LatheBufferGeometry:Uae,LatheGeometry:jd,Layers:Nu,LessDepth:P8,LessEqualDepth:A_,LessEqualStencilFunc:Tee,LessStencilFunc:Iee,Light:Tc,LightProbe:Uy,Line:Rt,Line3:Uo,LineBasicMaterial:ai,LineCurve:Py,LineCurve3:_U,LineDashedMaterial:TU,LineLoop:x3,LineSegments:fo,LinearEncoding:Ps,LinearFilter:Wt,LinearInterpolant:O3,LinearMipMapLinearFilter:vee,LinearMipMapNearestFilter:Aee,LinearMipmapLinearFilter:wa,LinearMipmapNearestFilter:Ey,LinearSRGBColorSpace:ec,LinearToneMapping:N8,Loader:Gi,LoaderUtils:Ts,LoadingManager:N3,LoopOnce:X8,LoopPingPong:K8,LoopRepeat:J8,LuminanceAlphaFormat:Y8,LuminanceFormat:q8,MOUSE:eo,Material:mi,MaterialLoader:Ny,MathUtils:ut,Matrix3:yr,Matrix4:Ne,MaxEquation:AS,Mesh:$e,MeshBasicMaterial:wr,MeshDepthMaterial:ig,MeshDistanceMaterial:Iy,MeshLambertMaterial:L3,MeshMatcapMaterial:IU,MeshNormalMaterial:MU,MeshPhongMaterial:ad,MeshPhysicalMaterial:Ea,MeshStandardMaterial:Ic,MeshToonMaterial:CU,MinEquation:gS,MirroredRepeatWrapping:bd,MixOperation:O8,MultiplyBlending:mS,MultiplyOperation:Km,NearestFilter:vn,NearestMipMapLinearFilter:gee,NearestMipMapNearestFilter:mee,NearestMipmapLinearFilter:xm,NearestMipmapNearestFilter:ym,NeverDepth:B8,NeverStencilFunc:Mee,NoBlending:Aa,NoColorSpace:yee,NoToneMapping:Fo,NormalAnimationBlendMode:Sy,NormalBlending:Lu,NotEqualDepth:k8,NotEqualStencilFunc:nU,NumberKeyframeTrack:rf,Object3D:It,ObjectLoader:Uoe,ObjectSpaceNormalMap:eU,OctahedronBufferGeometry:Nae,OctahedronGeometry:xs,OneFactor:w8,OneMinusDstAlphaFactor:C8,OneMinusDstColorFactor:I8,OneMinusSrcAlphaFactor:r3,OneMinusSrcColorFactor:b8,OrthographicCamera:Is,PCFShadowMap:t3,PCFSoftShadowMap:n3,PMREMGenerator:FS,Path:Mm,PerspectiveCamera:dn,Plane:Zr,PlaneBufferGeometry:I_,PlaneGeometry:Nr,PlaneHelper:yae,PointLight:Pm,PointLightHelper:hae,Points:w3,PointsMaterial:og,PolarGridHelper:mae,PolyhedronBufferGeometry:zae,PolyhedronGeometry:gl,PositionalAudio:Woe,PropertyBinding:qt,PropertyMixer:HU,QuadraticBezierCurve:T3,QuadraticBezierCurve3:Dy,Quaternion:St,QuaternionKeyframeTrack:cl,QuaternionLinearInterpolant:DU,REVISION:xy,RGBADepthPacking:f3,RGBAFormat:Fn,RGBAIntegerFormat:wm,RGBA_ASTC_10x10_Format:BS,RGBA_ASTC_10x5_Format:MS,RGBA_ASTC_10x6_Format:IS,RGBA_ASTC_10x8_Format:TS,RGBA_ASTC_12x10_Format:RS,RGBA_ASTC_12x12_Format:PS,RGBA_ASTC_4x4_Format:E_,RGBA_ASTC_5x4_Format:yS,RGBA_ASTC_5x5_Format:xS,RGBA_ASTC_6x5_Format:wS,RGBA_ASTC_6x6_Format:ES,RGBA_ASTC_8x5_Format:bS,RGBA_ASTC_8x6_Format:SS,RGBA_ASTC_8x8_Format:CS,RGBA_BPTC_Format:b_,RGBA_ETC2_EAC_Format:w_,RGBA_PVRTC_2BPPV1_Format:_S,RGBA_PVRTC_4BPPV1_Format:y_,RGBA_S3TC_DXT1_Format:Mv,RGBA_S3TC_DXT3_Format:Iv,RGBA_S3TC_DXT5_Format:Gp,RGBFormat:j8,RGB_ETC1_Format:l3,RGB_ETC2_Format:x_,RGB_PVRTC_2BPPV1_Format:vS,RGB_PVRTC_4BPPV1_Format:__,RGB_S3TC_DXT1_Format:zp,RGFormat:Eu,RGIntegerFormat:by,RawShaderMaterial:SU,Ray:Ho,Raycaster:Kd,RectAreaLight:kU,RedFormat:wu,RedIntegerFormat:a3,ReinhardToneMapping:z8,RepeatWrapping:Rs,ReplaceStencilOp:Bv,ReverseSubtractEquation:y8,RingBufferGeometry:Gae,RingGeometry:fg,SRGBColorSpace:aa,Scene:ml,ShaderChunk:vt,ShaderLib:zr,ShaderMaterial:$n,ShadowMaterial:bU,Shape:pc,ShapeBufferGeometry:Qae,ShapeGeometry:hg,ShapePath:qU,ShapeUtils:va,ShortType:o3,Skeleton:Wd,SkeletonHelper:fae,SkinnedMesh:Ry,Source:Cu,Sphere:zi,SphereBufferGeometry:Hae,SphereGeometry:xf,Spherical:Dm,SphericalHarmonics3:OU,SplineCurve:B3,SpotLight:ky,SpotLightHelper:uae,Sprite:mU,SpriteMaterial:_3,SrcAlphaFactor:i3,SrcAlphaSaturateFactor:T8,SrcColorFactor:E8,StaticCopyUsage:kee,StaticDrawUsage:bm,StaticReadUsage:Dee,StereoCamera:Qoe,StreamCopyUsage:Uee,StreamDrawUsage:Pee,StreamReadUsage:Fee,StringKeyframeTrack:Ef,SubtractEquation:_8,SubtractiveBlending:pS,TOUCH:qa,TangentSpaceNormalMap:pl,TetrahedronBufferGeometry:Vae,TetrahedronGeometry:dg,Texture:bn,TextureLoader:Jd,TorusBufferGeometry:Wae,TorusGeometry:el,TorusKnotBufferGeometry:jae,TorusKnotGeometry:pg,Triangle:_r,TriangleFanDrawMode:u3,TriangleStripDrawMode:$8,TrianglesDrawMode:_ee,TubeBufferGeometry:qae,TubeGeometry:mg,UVMapping:wy,Uint16BufferAttribute:Cy,Uint32BufferAttribute:m3,Uint8BufferAttribute:dte,Uint8ClampedBufferAttribute:pte,Uniform:mr,UniformsGroup:oae,UniformsLib:Ke,UniformsUtils:Mc,UnsignedByteType:er,UnsignedInt248Type:Fu,UnsignedIntType:Es,UnsignedShort4444Type:H8,UnsignedShort5551Type:V8,UnsignedShortType:_f,VSMShadowMap:jh,Vector2:Ae,Vector3:F,Vector4:Pt,VectorKeyframeTrack:sf,VideoTexture:AU,WebGL1Renderer:dU,WebGL3DRenderTarget:nte,WebGLArrayRenderTarget:tte,WebGLCubeRenderTarget:tg,WebGLMultipleRenderTargets:ite,WebGLMultisampleRenderTarget:Mae,WebGLRenderTarget:kn,WebGLRenderer:v3,WebGLUtils:fU,WireframeGeometry:D3,WrapAroundEnding:Em,ZeroCurvatureEnding:bu,ZeroFactor:x8,ZeroSlopeEnding:Su,ZeroStencilOp:xee,_SRGBAFormat:S_,sRGBEncoding:Nt},Symbol.toStringTag,{value:"Module"})),Yae=df(Id);Object.defineProperty(gi,"__esModule",{value:!0});gi.THREE=void 0;const Xae=Yae;gi.THREE=Xae;var gg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.glContextLost=t.glContextSet=t.HTMLElementSource=t.CameraSource=t.InstantWorldTracker=t.FaceTracker=t.BarcodeFinder=t.ImageTracker=t.getDefaultPipeline=t.onFrameUpdate=void 0;const e=Af,n=zo;let i;t.onFrameUpdate=new n.Event;function r(){return i||(i=new e.Pipeline,i.onFrameUpdate.bind(()=>t.onFrameUpdate.emit())),i}t.getDefaultPipeline=r;class s extends e.ImageTracker{constructor(p,m){super(m||r(),p)}}t.ImageTracker=s;class o extends e.BarcodeFinder{constructor(p){super(p||r())}}t.BarcodeFinder=o;class a extends e.FaceTracker{constructor(p){super(p||r())}}t.FaceTracker=a;class l extends e.InstantWorldTracker{constructor(p){super(p||r())}}t.InstantWorldTracker=l;class c extends e.CameraSource{constructor(p,m){super(m||r(),p)}}t.CameraSource=c;class u extends e.HTMLElementSource{constructor(p,m){super(m||r(),p)}}t.HTMLElementSource=u;function f(d){r().glContextSet(d)}t.glContextSet=f;function h(){r().glContextLost()}t.glContextLost=h})(gg);var J0={},JP;function YU(){if(JP)return J0;JP=1,Object.defineProperty(J0,"__esModule",{value:!0}),J0.CameraTexture=void 0;const t=$d(),e=gi;class n extends e.THREE.Texture{constructor(){super(...arguments),this.MirrorMode=t.CameraMirrorMode.None,this.isVideoTexture=!0}update(){}updateFromPipeline(r,s){this.encoding=r.outputEncoding,s.cameraFrameUploadGL();const o=s.cameraFrameTextureGL();if(!o)return;const a=r.properties.get(this);a.__webglTexture=o,a.__webglInit=!0;const l=new e.THREE.Matrix4;l.fromArray(s.cameraFrameTextureMatrix(r.domElement.width,r.domElement.height,this.MirrorMode===t.CameraMirrorMode.Poses));const c=new e.THREE.Matrix3;c.setFromMatrix4(l),c.elements[6]=l.elements[12],c.elements[7]=l.elements[13],c.elements[8]=1,this.matrixAutoUpdate=!1,this.matrix=c}}return J0.CameraTexture=n,J0}var KP;function $d(){return KP||(KP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=t.CameraMirrorMode=t.CameraPoseMode=void 0;const e=Af,n=gi,i=gg,r=YU();var s;(function(c){c[c.Default=0]="Default",c[c.Attitude=1]="Attitude",c[c.AnchorOrigin=2]="AnchorOrigin"})(s=t.CameraPoseMode||(t.CameraPoseMode={}));var o;(function(c){c[c.None=0]="None",c[c.Poses=1]="Poses",c[c.CSS=2]="CSS"})(o=t.CameraMirrorMode||(t.CameraMirrorMode={}));var a;(function(c){c[c.None=0]="None",c[c.User=1]="User",c[c.Rear=2]="Rear"})(a||(a={}));class l extends n.THREE.Camera{constructor(u){super(),this.poseMode=s.Default,this.rearCameraMirrorMode=o.None,this.userCameraMirrorMode=o.Poses,this._currentMirrorMode=o.None,this.isPerspectiveCamera=!0,this.cameraDirection=a.None,this.hasSetCSSScaleX=!1,this.renderWidth=0,this.renderHeight=0,this.pipeline=u instanceof e.Pipeline?u:(u==null?void 0:u.pipeline)||(0,i.getDefaultPipeline)(),this.rawPose=this.pipeline.cameraPoseDefault(),u&&!(u instanceof e.Pipeline)?(this.zNear=u.zNear?u.zNear:.1,this.zFar=u.zFar?u.zFar:100,this.rearCameraSource=this.cameraSourceFromOpts(u.rearCameraSource),this.userCameraSource=this.cameraSourceFromOpts(u.userCameraSource,!0),this.backgroundTexture=u.backgroundTexture?u.backgroundTexture:new r.CameraTexture):(this.rearCameraSource=new i.CameraSource(e.cameraDefaultDeviceID(),this.pipeline),this.userCameraSource=new i.CameraSource(e.cameraDefaultDeviceID(!0),this.pipeline),this.backgroundTexture=new r.CameraTexture),this.matrixAutoUpdate=!1,document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?this.resume():this.pause()})}cameraSourceFromOpts(u,f=!1){return u instanceof Element?new e.HTMLElementSource(this.pipeline,u):new i.CameraSource(u||e.cameraDefaultDeviceID(f),this.pipeline)}pause(){this.userCameraSource.pause(),this.rearCameraSource.pause()}resume(){switch(this.cameraDirection){case a.User:this.userCameraSource.start();break;case a.Rear:this.rearCameraSource.start();break}}start(u){this.cameraDirection=u?a.User:a.Rear,this.resume()}stop(){this.cameraDirection=a.None,this.pause()}setPoseModeAnchorOrigin(u){this.poseAnchorOrigin=u,this.poseMode=s.AnchorOrigin}get currentMirrorMode(){return this._currentMirrorMode}updateFrame(u){this.pipeline.processGL(),this.pipeline.frameUpdate(),this._currentMirrorMode=this.pipeline.cameraFrameUserFacing()?this.userCameraMirrorMode:this.rearCameraMirrorMode;const{domElement:f}=u;switch(this.currentMirrorMode!==o.CSS&&this.hasSetCSSScaleX?(f.style.transform="",this.hasSetCSSScaleX=!1):this.currentMirrorMode===o.CSS&&!this.hasSetCSSScaleX&&(f.style.transform="scaleX(-1)",this.hasSetCSSScaleX=!0),this.renderWidth=u.domElement.width,this.renderHeight=u.domElement.height,this._updateProjectionMatrix(),this.poseMode){case s.Default:this.rawPose=this.pipeline.cameraPoseDefault();break;case s.Attitude:this.rawPose=this.pipeline.cameraPoseWithAttitude(this.currentMirrorMode===o.Poses);break;case s.AnchorOrigin:this.rawPose=this.poseAnchorOrigin?this.getOriginPose():this.pipeline.cameraPoseDefault();break;default:this.rawPose=this.pipeline.cameraPoseDefault();break}this.matrixWorldNeedsUpdate=!0,this.backgroundTexture.MirrorMode=this.currentMirrorMode,this.backgroundTexture.updateFromPipeline(u,this.pipeline)}_updateProjectionMatrix(){const u=this.pipeline.cameraModel(),f=e.projectionMatrixFromCameraModel(u,this.renderWidth,this.renderHeight,this.zNear,this.zFar);this.projectionMatrix.fromArray(f),typeof this.projectionMatrixInverse.invert=="function"?this.projectionMatrixInverse.copy(this.projectionMatrix).invert():this.projectionMatrixInverse.getInverse(this.projectionMatrix)}updateMatrixWorld(u){this.matrix.fromArray(this.rawPose),this.matrix.decompose(this.position,this.quaternion,this.scale),super.updateMatrixWorld(u)}getOriginPose(){return this.poseAnchorOrigin?this.pipeline.cameraPoseWithOrigin(this.poseAnchorOrigin.poseCameraRelative(this.currentMirrorMode===o.Poses)):this.pipeline.cameraPoseDefault()}dispose(){this.rearCameraSource.destroy(),this.userCameraSource.destroy()}}t.Camera=l}(aw)),aw}var Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});Qy.ImageAnchorGroup=void 0;const Jae=gi,Kae=$d();class $ae extends Jae.THREE.Group{constructor(e,n,i){super(),this.camera=e,this.imageTracker=n,this.anchorId=i,this.isReady=!1,this.matrixAutoUpdate=!1}updateMatrixWorld(e){(!this.currentAnchor||!this.imageTracker.visible.has(this.currentAnchor))&&(this.anchorId?this.currentAnchor=this.imageTracker.anchors.get(this.anchorId):this.currentAnchor=this.imageTracker.visible.values().next().value),this.currentAnchor&&(this.matrix.fromArray(this.currentAnchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===Kae.CameraMirrorMode.Poses)),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(e)}}Qy.ImageAnchorGroup=$ae;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.ImageTrackerLoader=void 0;const Zae=gi,ele=gg;class tle extends Zae.THREE.Loader{load(e,n,i,r){const s=new ele.ImageTracker;return s.loadTarget(e).then(()=>{n==null||n(s),this.manager.itemEnd(e)}).catch(o=>{r==null||r(o),this.manager.itemError(e),this.manager.itemEnd(e)}),s}parse(){}}Hy.ImageTrackerLoader=tle;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.InstantWorldAnchorGroup=void 0;const nle=gi,ile=$d();class rle extends nle.THREE.Group{constructor(e,n){super(),this.camera=e,this.instantTracker=n,this.matrixAutoUpdate=!1}setAnchorPoseFromCameraOffset(e,n,i,r){this.instantTracker.setAnchorPoseFromCameraOffset(e,n,i,r)}updateMatrixWorld(e){this.matrix.fromArray(this.instantTracker.anchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===ile.CameraMirrorMode.Poses)),this.matrix.decompose(this.position,this.quaternion,this.scale),super.updateMatrixWorld(e)}}Vy.InstantWorldAnchorGroup=rle;var Wy={};Object.defineProperty(Wy,"__esModule",{value:!0});Wy.FaceAnchorGroup=void 0;const sle=gi,ole=$d();class ale extends sle.THREE.Group{constructor(e,n,i){super(),this.camera=e,this.faceTracker=n,this.anchorId=i,this.isReady=!1,this.matrixAutoUpdate=!1}updateMatrixWorld(e){(!this.currentAnchor||!this.faceTracker.visible.has(this.currentAnchor))&&(this.anchorId?this.currentAnchor=this.faceTracker.anchors.get(this.anchorId):this.currentAnchor=this.faceTracker.visible.values().next().value),this.currentAnchor&&(this.matrix.fromArray(this.currentAnchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===ole.CameraMirrorMode.Poses)),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(e)}}Wy.FaceAnchorGroup=ale;var jy={};Object.defineProperty(jy,"__esModule",{value:!0});jy.FaceLandmarkGroup=void 0;const lle=Af,$P=e3,cle=gi,ZP=$d();class ule extends cle.THREE.Group{constructor(e,n,i){super(),this.camera=e,this.faceTracker=n,this.pose=$P.mat4.create(),this.landmark=new lle.FaceLandmark(i),this.matrixAutoUpdate=!1}updateMatrixWorld(e){(!this.currentAnchor||!this.faceTracker.visible.has(this.currentAnchor))&&(this.currentAnchor=this.faceTracker.visible.values().next().value),this.currentAnchor&&(this.landmark.updateFromFaceAnchor(this.currentAnchor,this.camera.currentMirrorMode===ZP.CameraMirrorMode.Poses),$P.mat4.multiply(this.pose,this.currentAnchor.pose(this.camera.rawPose,this.camera.currentMirrorMode===ZP.CameraMirrorMode.Poses),this.landmark.pose),this.matrix.fromArray(this.pose),this.matrix.decompose(this.position,this.quaternion,this.scale)),super.updateMatrixWorld(e)}dispose(){this.landmark.destroy()}}jy.FaceLandmarkGroup=ule;var qy={};Object.defineProperty(qy,"__esModule",{value:!0});qy.FaceTrackerLoader=void 0;const fle=gi,hle=gg;class dle extends fle.THREE.Loader{load(e,n,i,r){const s=new hle.FaceTracker,o=e?s.loadModel(e):s.loadDefaultModel(),a=typeof e=="string"?e:"__zappar_threejs_face_tracker_default";return o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}parse(){}}qy.FaceTrackerLoader=dle;var Ag={},vg={};Object.defineProperty(vg,"__esModule",{value:!0});vg.FaceMeshLoader=void 0;const Kw=Af,ple=gi;class mle extends ple.THREE.Loader{load(e,n,i,r){const s=new Kw.FaceMesh;let o;const a=`__zappar_threejs_face_mesh_${JSON.stringify(e||"default")}`;return this.manager.itemStart(a),e?typeof e=="string"?o=s.load(e):e.customModel?o=s.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFace(e.fillMouth,e.fillEyeLeft,e.fillEyeRight):o=s.loadDefaultFace(),o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}loadFace(e,n,i,r){const s=new Kw.FaceMesh;let o;const a=`__zappar_threejs_face_mesh_face_${JSON.stringify(e||"default")}`;return e?e.customModel?o=s.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFace(e.fillMouth,e.fillEyeLeft,e.fillEyeRight):o=s.loadDefaultFace(),o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}loadFullHeadSimplified(e,n,i,r){const s=new Kw.FaceMesh;let o;const a=`__zappar_threejs_face_mesh_full_head_${JSON.stringify(e||"default")}`;return e?e.customModel?o=s.load(e.customModel,e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFullHeadSimplified(e.fillMouth,e.fillEyeLeft,e.fillEyeRight,e.fillNeck):o=s.loadDefaultFullHeadSimplified(),o.then(()=>{n==null||n(s),this.manager.itemEnd(a)}).catch(l=>{r==null||r(l),this.manager.itemError(a),this.manager.itemEnd(a)}),s}parse(){}}vg.FaceMeshLoader=mle;Object.defineProperty(Ag,"__esModule",{value:!0});Ag.FaceBufferGeometry=void 0;const Nl=gi,gle=vg;let $w;class Ale extends Nl.THREE.BufferGeometry{constructor(e){super(),this.hasSetIndices=!1,this.hasSetUVs=!1,this.recalculateNormals=!0,this.setIndex([]),this.setAttribute("position",new Nl.THREE.Float32BufferAttribute([],3)),this.setAttribute("normal",new Nl.THREE.Float32BufferAttribute([],3)),this.setAttribute("uv",new Nl.THREE.Float32BufferAttribute([],2)),e||($w||($w=new gle.FaceMeshLoader().load()),e=$w),this._faceMesh=e}_updateIndices(){this.hasSetIndices||this._faceMesh.indices.length!==0&&(this.setIndex(new Nl.THREE.Uint16BufferAttribute(this._faceMesh.indices,1)),this.hasSetIndices=!0)}_updateUVs(){this.hasSetUVs||this._faceMesh.uvs.length!==0&&(this.setAttribute("uv",new Nl.THREE.BufferAttribute(this._faceMesh.uvs,2)),this.hasSetUVs=!0)}get calculateNormals(){return this.recalculateNormals}set calculateNormals(e){this.recalculateNormals=e,this.recalculateNormals||(typeof this.removeAttribute=="function"&&this.removeAttribute("normal"),delete this.normals)}updateFromFaceAnchorGroup(e){this._faceMesh.vertices.length!==0&&(!e.currentAnchor||this.updateFromFaceAnchor(e.currentAnchor))}updateFromFaceAnchor(e){this.updateFromIdentityExpression(e.identity,e.expression)}updateFromIdentityExpression(e,n){this._faceMesh.vertices.length!==0&&(this._updateIndices(),this._updateUVs(),this._faceMesh.updateFromIdentityExpression(e,n),this.vertices||(this.vertices=new Float32Array(this._faceMesh.vertices.length),this.verticesAttribute=new Nl.THREE.BufferAttribute(this.vertices,3),this.setAttribute("position",this.verticesAttribute)),this.vertices.set(this._faceMesh.vertices),this.verticesAttribute&&(this.verticesAttribute.needsUpdate=!0),this.computeBoundingSphere(),this.calculateNormals&&(this.normals||(this.normals=new Float32Array(this._faceMesh.normals.length),this.normalsAttribute=new Nl.THREE.BufferAttribute(this.normals,3),this.setAttribute("normal",this.normalsAttribute)),this.normals.set(this._faceMesh.normals),this.normalsAttribute&&(this.normalsAttribute.needsUpdate=!0)))}}Ag.FaceBufferGeometry=Ale;var _g={};Object.defineProperty(_g,"__esModule",{value:!0});_g.HeadMaskMesh=void 0;const vle=Af,eD=gi,_le=Ag;class yle extends eD.THREE.Mesh{constructor(e,n){super(),this.onLoad=e,this.onError=n,this.faceMesh=new vle.FaceMesh,this.faceBufferGeometry=new _le.FaceBufferGeometry(this.faceMesh),this.geometry=this.faceBufferGeometry,this.material=new eD.THREE.MeshBasicMaterial({colorWrite:!1}),this.faceMesh.loadDefaultFullHeadSimplified(!0,!0,!0,!0).then(()=>{var i;return(i=this.onLoad)===null||i===void 0?void 0:i.call(this)}).catch(()=>{var i;return(i=this.onError)===null||i===void 0?void 0:i.call(this)}),this.renderOrder=Number.MIN_SAFE_INTEGER}updateFromFaceAnchorGroup(e){this.faceBufferGeometry.updateFromFaceAnchorGroup(e)}updateFromFaceAnchor(e){this.faceBufferGeometry.updateFromFaceAnchor(e)}updateFromIdentityExpression(e,n){this.faceBufferGeometry.updateFromIdentityExpression(e,n)}dispose(){this.faceMesh.destroy(),this.faceBufferGeometry.dispose()}}_g.HeadMaskMesh=yle;var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});Yy.HeadMaskMeshLoader=void 0;const xle=gi,wle=_g,SA="__zappar_threejs_head_mask_mesh";class Ele extends xle.THREE.Loader{load(e,n,i){return this.manager.itemStart(SA),new wle.HeadMaskMesh(()=>{e==null||e(),this.manager.itemEnd(SA)},()=>{i==null||i(),this.manager.itemError(SA),this.manager.itemEnd(SA)})}parse(){}}Yy.HeadMaskMeshLoader=Ele;var K0={},tD;function XU(){if(tD)return K0;tD=1,Object.defineProperty(K0,"__esModule",{value:!0}),K0.LibraryLoader=void 0;const t=Fs(),e=gi,n="__zappar_threejs_library";class i extends e.THREE.Loader{load(s,o,a){this.manager.itemStart(n),(0,t.loadedPromise)().then(()=>{s==null||s(),this.manager.itemEnd(n)}).catch(l=>{a==null||a(),this.manager.itemError(n),this.manager.itemEnd(n)})}parse(){}}return K0.LibraryLoader=i,K0}var eu={},nD;function ble(){if(nD)return eu;nD=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.LoadingManager=eu.DefaultLoaderUI=void 0;const t=gi,e=XU();class n{constructor(o){this.lastLoadPercentage=0,this.divs={inner:document.createElement("div"),title:document.createElement("div"),progress:document.createElement("div"),progressValue:document.createElement("div")},this.css={container:{position:"fixed",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:"10000",backgroundColor:"rgba(0,0,0,0.8)",fontFamily:"sans-serif",color:"rgba(255,255,255,1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"opacity 500ms"},inner:{maxWidth:"400px",textAlign:"center"},title:{fontSize:"20px"},progress:{background:"rgba(255,255,255, 0.1)",justifyContent:"flex-start",borderRadius:"100px",alignItems:"center",position:"relative",padding:"0 5px",display:"flex",height:"15px",width:"250px",margin:"15px"},progressValue:{boxShadow:"0 10px 40px -10px #fff",borderTopLeftRadius:"100px",borderBottomLeftRadius:"100px",background:"rgba(255,255,255,1)",height:"10px",width:"0",transition:"width 500ms"}},this.updateLoader=a=>{if(a<this.lastLoadPercentage)return;this.lastLoadPercentage=a;const l=document.getElementById("zappar-loader-progressValue");l.style.width=`${a}%`,l.style.borderTopRightRadius=`${a}px`,l.style.borderBottomRightRadius=`${a}px`,l.addEventListener("transitionend",()=>{a===100&&(this.containerDiv.style.opacity="0",this.containerDiv.addEventListener("transitionend",c=>{c.propertyName==="opacity"&&this.dispose()}))})},this.dispose=()=>{this.containerDiv.remove()},this.customStyle=o,this.containerDiv=document.createElement("div")}initialize(){for(const o in this.divs)this.divs[o].id=`zappar-loader-${o}`;this.refreshStyle(),this.divs.inner.appendChild(this.divs.title),this.divs.inner.appendChild(this.divs.progress),this.divs.progress.appendChild(this.divs.progressValue),this.containerDiv.appendChild(this.divs.inner),this.divs.title.innerHTML="Loading...",document.body.append(this.containerDiv)}refreshStyle(){var o,a,l,c,u;Object.assign(this.css.container,(o=this.customStyle)===null||o===void 0?void 0:o.container),Object.assign(this.css.inner,(a=this.customStyle)===null||a===void 0?void 0:a.inner),Object.assign(this.css.title,(l=this.customStyle)===null||l===void 0?void 0:l.title),Object.assign(this.css.progress,(c=this.customStyle)===null||c===void 0?void 0:c.progress),Object.assign(this.css.progressValue,(u=this.customStyle)===null||u===void 0?void 0:u.progressValue),Object.assign(this.containerDiv.style,this.css.container),Object.assign(this.divs.inner.style,this.css.inner),Object.assign(this.divs.title.style,this.css.title),Object.assign(this.divs.progress.style,this.css.progress),Object.assign(this.divs.progressValue.style,this.css.progressValue)}}class i extends n{constructor(o){super(o==null?void 0:o.style),t.THREE.DefaultLoadingManager.onStart=()=>{this.initialize()},t.THREE.DefaultLoadingManager.onLoad=()=>{var a;(a=o==null?void 0:o.onLoad)===null||a===void 0||a.call(o)},t.THREE.DefaultLoadingManager.onProgress=(a,l,c)=>{this.updateLoader(l/c*100)}}}eu.DefaultLoaderUI=i;class r extends t.THREE.LoadingManager{constructor(o){super(()=>{var a;return(a=o==null?void 0:o.onLoad)===null||a===void 0?void 0:a.call(o)},(a,l,c)=>{var u;this.ui.customStyle=o==null?void 0:o.style,this.ui.refreshStyle(),(u=o==null?void 0:o.onProgress)===null||u===void 0||u.call(o,a,l,c),this.ui.updateLoader(l/c*100)},o==null?void 0:o.onError),this.ui=new n,this.onStartCallback=void 0,this.onStart=()=>{this.ui.initialize(),this.onStartCallback&&this.onStartCallback()},this._onStart=a=>{this.onStartCallback=a},this.dispose=()=>{this.ui.dispose()},new e.LibraryLoader(this).load()}}return eu.LoadingManager=r,eu}var Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});Xy.CameraEnvironmentMap=void 0;const ea=gi;class Sle{constructor(){this.cubeMapScene=new ea.THREE.Scene,this.renderTarget=new ea.THREE.WebGLCubeRenderTarget(256,{format:ea.THREE.RGBAFormat,generateMipmaps:!0,minFilter:ea.THREE.LinearMipmapLinearFilter}),this.cubeCamera=new ea.THREE.CubeCamera(.1,1e3,this.renderTarget),this.sphereMaterial=new ea.THREE.MeshBasicMaterial({side:ea.THREE.DoubleSide}),this.sphereGroup=new ea.THREE.Group,this.environmentMap=this.renderTarget.texture,this.cubeMapScene.add(this.cubeCamera);const e=new ea.THREE.Mesh(new ea.THREE.SphereGeometry(10,16,12),this.sphereMaterial);e.rotation.set(0,-.5*Math.PI,0),this.sphereGroup.add(e),this.cubeMapScene.add(this.sphereGroup)}dispose(){this.renderTarget.dispose(),this.sphereMaterial.dispose()}update(e,n){this.environmentMap.encoding=e.outputEncoding,this.sphereMaterial.map=n.backgroundTexture,this.sphereGroup.quaternion.copy(n.quaternion),this.cubeCamera.update(e,this.cubeMapScene)}}Xy.CameraEnvironmentMap=Sle;var Jy={};Object.defineProperty(Jy,"__esModule",{value:!0});Jy.TargetImagePreviewBufferGeometry=void 0;const tu=gi;class Cle extends tu.THREE.BufferGeometry{constructor(e){var n;if(super(),this.imageTarget=e,this.hasSetIndices=!1,this.hasSetUVs=!1,this.recalculateNormals=!0,this.setIndex([]),this.setAttribute("position",new tu.THREE.Float32BufferAttribute([],3)),this.setAttribute("normal",new tu.THREE.Float32BufferAttribute([],3)),this.setAttribute("uv",new tu.THREE.Float32BufferAttribute([],2)),this.imageTarget.preview.vertices.length===0)throw new Error("No vertices found in the image target.");this._updateIndices(),this._updateUVs(),this.vertices||(this.vertices=new Float32Array((n=this.imageTarget)===null||n===void 0?void 0:n.preview.vertices.length),this.verticesAttribute=new tu.THREE.BufferAttribute(this.vertices,3),this.setAttribute("position",this.verticesAttribute)),this.vertices.set(this.imageTarget.preview.vertices),this.verticesAttribute&&(this.verticesAttribute.needsUpdate=!0),this.computeBoundingSphere()}_updateIndices(){var e;this.hasSetIndices||((e=this.imageTarget)===null||e===void 0?void 0:e.preview.indices.length)!==0&&(this.setIndex(new tu.THREE.Uint16BufferAttribute(this.imageTarget.preview.indices,1)),this.hasSetIndices=!0)}_updateUVs(){this.hasSetUVs||this.imageTarget.preview.uvs.length!==0&&(this.setAttribute("uv",new tu.THREE.BufferAttribute(this.imageTarget.preview.uvs,2)),this.hasSetUVs=!0)}get calculateNormals(){return this.recalculateNormals}}Jy.TargetImagePreviewBufferGeometry=Cle;var $0={},iD;function Mle(){if(iD)return $0;iD=1,Object.defineProperty($0,"__esModule",{value:!0}),$0.TargetImagePreviewMesh=void 0;const t=Fs(),e=gi;class n extends e.THREE.Mesh{constructor(r,s=new e.THREE.MeshBasicMaterial({map:new e.THREE.TextureLoader().load(r.image.src)})){super(new t.TargetImagePreviewBufferGeometry(r),s)}}return $0.TargetImagePreviewMesh=n,$0}var rD;function Fs(){return rD||(rD=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceSource=t.loadedPromise=t.loaded=t.browserIncompatibleUI=t.browserIncompatible=t.permissionRequestUI=t.permissionDeniedUI=t.permissionRequest=t.permissionGranted=t.permissionDenied=t.setLogLevel=t.LogLevel=t.Pipeline=t.FaceLandmarkName=t.FaceLandmark=t.FaceMesh=t.getDefaultPipeline=t.glContextLost=t.glContextSet=t.onFrameUpdate=t.HTMLElementSource=t.CameraSource=t.FaceTracker=t.BarcodeFinder=t.InstantWorldTracker=t.ImageTracker=t.TargetImagePreviewMesh=t.TargetImagePreviewBufferGeometry=t.CameraEnvironmentMap=t.DefaultLoaderUI=t.LoadingManager=t.LibraryLoader=t.HeadMaskMeshLoader=t.HeadMaskMesh=t.FaceMeshLoader=t.FaceBufferGeometry=t.FaceTrackerLoader=t.FaceLandmarkGroup=t.FaceAnchorGroup=t.InstantWorldAnchorGroup=t.ImageTrackerLoader=t.ImageAnchorGroup=t.CameraMirrorMode=t.CameraPoseMode=t.Camera=void 0,console.log(`Zappar for ThreeJS v${ay.VERSION}`);var n=$d();Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return n.Camera}}),Object.defineProperty(t,"CameraPoseMode",{enumerable:!0,get:function(){return n.CameraPoseMode}}),Object.defineProperty(t,"CameraMirrorMode",{enumerable:!0,get:function(){return n.CameraMirrorMode}});var i=Qy;Object.defineProperty(t,"ImageAnchorGroup",{enumerable:!0,get:function(){return i.ImageAnchorGroup}});var r=Hy;Object.defineProperty(t,"ImageTrackerLoader",{enumerable:!0,get:function(){return r.ImageTrackerLoader}});var s=Vy;Object.defineProperty(t,"InstantWorldAnchorGroup",{enumerable:!0,get:function(){return s.InstantWorldAnchorGroup}});var o=Wy;Object.defineProperty(t,"FaceAnchorGroup",{enumerable:!0,get:function(){return o.FaceAnchorGroup}});var a=jy;Object.defineProperty(t,"FaceLandmarkGroup",{enumerable:!0,get:function(){return a.FaceLandmarkGroup}});var l=qy;Object.defineProperty(t,"FaceTrackerLoader",{enumerable:!0,get:function(){return l.FaceTrackerLoader}});var c=Ag;Object.defineProperty(t,"FaceBufferGeometry",{enumerable:!0,get:function(){return c.FaceBufferGeometry}});var u=vg;Object.defineProperty(t,"FaceMeshLoader",{enumerable:!0,get:function(){return u.FaceMeshLoader}});var f=_g;Object.defineProperty(t,"HeadMaskMesh",{enumerable:!0,get:function(){return f.HeadMaskMesh}});var h=Yy;Object.defineProperty(t,"HeadMaskMeshLoader",{enumerable:!0,get:function(){return h.HeadMaskMeshLoader}});var d=XU();Object.defineProperty(t,"LibraryLoader",{enumerable:!0,get:function(){return d.LibraryLoader}});var p=ble();Object.defineProperty(t,"LoadingManager",{enumerable:!0,get:function(){return p.LoadingManager}}),Object.defineProperty(t,"DefaultLoaderUI",{enumerable:!0,get:function(){return p.DefaultLoaderUI}});var m=Xy;Object.defineProperty(t,"CameraEnvironmentMap",{enumerable:!0,get:function(){return m.CameraEnvironmentMap}});var A=Jy;Object.defineProperty(t,"TargetImagePreviewBufferGeometry",{enumerable:!0,get:function(){return A.TargetImagePreviewBufferGeometry}});var v=Mle();Object.defineProperty(t,"TargetImagePreviewMesh",{enumerable:!0,get:function(){return v.TargetImagePreviewMesh}});var y=gg;Object.defineProperty(t,"ImageTracker",{enumerable:!0,get:function(){return y.ImageTracker}}),Object.defineProperty(t,"InstantWorldTracker",{enumerable:!0,get:function(){return y.InstantWorldTracker}}),Object.defineProperty(t,"BarcodeFinder",{enumerable:!0,get:function(){return y.BarcodeFinder}}),Object.defineProperty(t,"FaceTracker",{enumerable:!0,get:function(){return y.FaceTracker}}),Object.defineProperty(t,"CameraSource",{enumerable:!0,get:function(){return y.CameraSource}}),Object.defineProperty(t,"HTMLElementSource",{enumerable:!0,get:function(){return y.HTMLElementSource}}),Object.defineProperty(t,"onFrameUpdate",{enumerable:!0,get:function(){return y.onFrameUpdate}}),Object.defineProperty(t,"glContextSet",{enumerable:!0,get:function(){return y.glContextSet}}),Object.defineProperty(t,"glContextLost",{enumerable:!0,get:function(){return y.glContextLost}}),Object.defineProperty(t,"getDefaultPipeline",{enumerable:!0,get:function(){return y.getDefaultPipeline}});var x=Af;Object.defineProperty(t,"FaceMesh",{enumerable:!0,get:function(){return x.FaceMesh}}),Object.defineProperty(t,"FaceLandmark",{enumerable:!0,get:function(){return x.FaceLandmark}}),Object.defineProperty(t,"FaceLandmarkName",{enumerable:!0,get:function(){return x.FaceLandmarkName}}),Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return x.Pipeline}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return x.LogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return x.setLogLevel}}),Object.defineProperty(t,"permissionDenied",{enumerable:!0,get:function(){return x.permissionDenied}}),Object.defineProperty(t,"permissionGranted",{enumerable:!0,get:function(){return x.permissionGranted}}),Object.defineProperty(t,"permissionRequest",{enumerable:!0,get:function(){return x.permissionRequest}}),Object.defineProperty(t,"permissionDeniedUI",{enumerable:!0,get:function(){return x.permissionDeniedUI}}),Object.defineProperty(t,"permissionRequestUI",{enumerable:!0,get:function(){return x.permissionRequestUI}}),Object.defineProperty(t,"browserIncompatible",{enumerable:!0,get:function(){return x.browserIncompatible}}),Object.defineProperty(t,"browserIncompatibleUI",{enumerable:!0,get:function(){return x.browserIncompatibleUI}}),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return x.loaded}}),Object.defineProperty(t,"loadedPromise",{enumerable:!0,get:function(){return x.loadedPromise}}),Object.defineProperty(t,"SequenceSource",{enumerable:!0,get:function(){return x.SequenceSource}})}(ow)),ow}var W3={};function jn(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}const Ile=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),Bc=df(Ile);var Iu={exports:{}},bf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */bf.ConcurrentRoot=1;bf.ContinuousEventPriority=4;bf.DefaultEventPriority=16;bf.DiscreteEventPriority=1;bf.IdleEventPriority=536870912;bf.LegacyRoot=0;(function(t){t.exports=bf})(Iu);function Tle(t){let e;const n=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),n.forEach(d=>d(e,h))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function d(){const p=u(e);if(!f(h,p)){const m=h;c(h=p,m)}}return n.add(d),()=>n.delete(d)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const Ble=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sD=Ble?R.exports.useEffect:R.exports.useLayoutEffect;function Ky(t){const e=typeof t=="function"?Tle(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=R.exports.useReducer(A=>A+1,0),o=e.getState(),a=R.exports.useRef(o),l=R.exports.useRef(i),c=R.exports.useRef(r),u=R.exports.useRef(!1),f=R.exports.useRef();f.current===void 0&&(f.current=i(o));let h,d=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(h=i(o),d=!r(f.current,h)),sD(()=>{d&&(f.current=h),a.current=o,l.current=i,c.current=r,u.current=!1});const p=R.exports.useRef(o);sD(()=>{const A=()=>{try{const y=e.getState(),x=l.current(y);c.current(f.current,x)||(a.current=y,f.current=x,s())}catch{u.current=!0,s()}},v=e.subscribe(A);return e.getState()!==p.current&&A(),v},[]);const m=d?h:f.current;return R.exports.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var JU={exports:{}},Zw={exports:{}},eE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oD;function Rle(){return oD||(oD=1,function(t){function e(z,U){var Q=z.length;z.push(U);e:for(;0<Q;){var H=Q-1>>>1,V=z[H];if(0<r(V,U))z[H]=U,z[Q]=V,Q=H;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var U=z[0],Q=z.pop();if(Q!==U){z[0]=Q;e:for(var H=0,V=z.length,J=V>>>1;H<J;){var j=2*(H+1)-1,re=z[j],ee=j+1,ae=z[ee];if(0>r(re,Q))ee<V&&0>r(ae,re)?(z[H]=ae,z[ee]=Q,H=ee):(z[H]=re,z[j]=Q,H=j);else if(ee<V&&0>r(ae,Q))z[H]=ae,z[ee]=Q,H=ee;else break e}}return U}function r(z,U){var Q=z.sortIndex-U.sortIndex;return Q!==0?Q:z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,m=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=z)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function w(z){if(m=!1,x(z),!p)if(n(l)!==null)p=!0,q(E);else{var U=n(c);U!==null&&K(w,U.startTime-z)}}function E(z,U){p=!1,m&&(m=!1,v(b),b=-1),d=!0;var Q=h;try{for(x(U),f=n(l);f!==null&&(!(f.expirationTime>U)||z&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var V=H(f.expirationTime<=U);U=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&i(l),x(U)}else i(l);f=n(l)}if(f!==null)var J=!0;else{var j=n(c);j!==null&&K(w,j.startTime-U),J=!1}return J}finally{f=null,h=Q,d=!1}}var S=!1,M=null,b=-1,B=5,T=-1;function k(){return!(t.unstable_now()-T<B)}function D(){if(M!==null){var z=t.unstable_now();T=z;var U=!0;try{U=M(!0,z)}finally{U?N():(S=!1,M=null)}}else S=!1}var N;if(typeof y=="function")N=function(){y(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Y=O.port2;O.port1.onmessage=D,N=function(){Y.postMessage(null)}}else N=function(){A(D,0)};function q(z){M=z,S||(S=!0,N())}function K(z,U){b=A(function(){z(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,q(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var Q=h;h=U;try{return z()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=h;h=z;try{return U()}finally{h=Q}},t.unstable_scheduleCallback=function(z,U,Q){var H=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,z={id:u++,callback:U,priorityLevel:z,startTime:Q,expirationTime:V,sortIndex:-1},Q>H?(z.sortIndex=Q,e(c,z),n(l)===null&&z===n(c)&&(m?(v(b),b=-1):m=!0,K(w,Q-H))):(z.sortIndex=V,e(l,z),p||d||(p=!0,q(E))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var U=h;return function(){var Q=h;h=U;try{return z.apply(this,arguments)}finally{h=Q}}}}(eE)),eE}var aD;function Ple(){return aD||(aD=1,function(t){t.exports=Rle()}(Zw)),Zw.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dle=function(e){var n={},i=R.exports,r=Ple(),s=Object.assign;function o(g){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),E=Symbol.iterator;function S(g){return g===null||typeof g!="object"?null:(g=E&&g[E]||g["@@iterator"],typeof g=="function"?g:null)}function M(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case f:return"StrictMode";case A:return"Suspense";case v:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case p:return(g.displayName||"Context")+".Consumer";case d:return(g._context.displayName||"Context")+".Provider";case m:var _=g.render;return g=g.displayName,g||(g=_.displayName||_.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case y:return _=g.displayName||null,_!==null?_:M(g.type)||"Memo";case x:_=g._payload,g=g._init;try{return M(g(_))}catch{}}return null}function b(g){var _=g.type;switch(g.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=_.render,g=g.displayName||g.name||"",_.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(_);case 8:return _===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function B(g){var _=g,C=g;if(g.alternate)for(;_.return;)_=_.return;else{g=_;do _=g,(_.flags&4098)!==0&&(C=_.return),g=_.return;while(g)}return _.tag===3?C:null}function T(g){if(B(g)!==g)throw Error(o(188))}function k(g){var _=g.alternate;if(!_){if(_=B(g),_===null)throw Error(o(188));return _!==g?null:g}for(var C=g,I=_;;){var P=C.return;if(P===null)break;var G=P.alternate;if(G===null){if(I=P.return,I!==null){C=I;continue}break}if(P.child===G.child){for(G=P.child;G;){if(G===C)return T(P),g;if(G===I)return T(P),_;G=G.sibling}throw Error(o(188))}if(C.return!==I.return)C=P,I=G;else{for(var te=!1,le=P.child;le;){if(le===C){te=!0,C=P,I=G;break}if(le===I){te=!0,I=P,C=G;break}le=le.sibling}if(!te){for(le=G.child;le;){if(le===C){te=!0,C=G,I=P;break}if(le===I){te=!0,I=G,C=P;break}le=le.sibling}if(!te)throw Error(o(189))}}if(C.alternate!==I)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?g:_}function D(g){return g=k(g),g!==null?N(g):null}function N(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var _=N(g);if(_!==null)return _;g=g.sibling}return null}function O(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var _=O(g);if(_!==null)return _}g=g.sibling}return null}var Y=Array.isArray,q=e.getPublicInstance,K=e.getRootHostContext,z=e.getChildHostContext,U=e.prepareForCommit,Q=e.resetAfterCommit,H=e.createInstance,V=e.appendInitialChild,J=e.finalizeInitialChildren,j=e.prepareUpdate,re=e.shouldSetTextContent,ee=e.createTextInstance,ae=e.scheduleTimeout,ce=e.cancelTimeout,ge=e.noTimeout,xe=e.isPrimaryRenderer,Se=e.supportsMutation,oe=e.supportsPersistence,he=e.supportsHydration,Re=e.getInstanceFromNode,Ie=e.preparePortalMount,Te=e.getCurrentEventPriority,qe=e.detachDeletedInstance,ye=e.supportsMicrotasks,Oe=e.scheduleMicrotask,Ve=e.supportsTestSelectors,Pe=e.findFiberRoot,X=e.getBoundingRect,W=e.getTextContent,ne=e.isHiddenSubtree,ue=e.matchAccessibilityRole,ve=e.setFocusIfFocusable,Ge=e.setupIntersectionObserver,be=e.appendChild,De=e.appendChildToContainer,me=e.commitTextUpdate,je=e.commitMount,ie=e.commitUpdate,_e=e.insertBefore,Ce=e.insertInContainerBefore,ke=e.removeChild,tt=e.removeChildFromContainer,se=e.resetTextContent,Je=e.hideInstance,Qe=e.hideTextInstance,Ee=e.unhideInstance,We=e.unhideTextInstance,ft=e.clearContainer,Tt=e.cloneInstance,cn=e.createContainerChildSet,Yt=e.appendChildToContainerChildSet,gt=e.finalizeContainerChildren,un=e.replaceContainerChildren,pn=e.cloneHiddenInstance,fn=e.cloneHiddenTextInstance,qn=e.canHydrateInstance,Mr=e.canHydrateTextInstance,Zn=e.canHydrateSuspenseInstance,On=e.isSuspenseInstancePending,Ai=e.isSuspenseInstanceFallback,Z=e.registerSuspenseInstanceRetry,de=e.getNextHydratableSibling,Le=e.getFirstHydratableChild,pe=e.getFirstHydratableChildWithinContainer,Ue=e.getFirstHydratableChildWithinSuspenseInstance,mt=e.hydrateInstance,xt=e.hydrateTextInstance,kt=e.hydrateSuspenseInstance,Mt=e.getNextHydratableInstanceAfterSuspenseInstance,Xt=e.commitHydratedContainer,Qt=e.commitHydratedSuspenseInstance,Jt=e.clearSuspenseBoundary,_n=e.clearSuspenseBoundaryFromContainer,Wr=e.shouldDeleteUnhydratedTailInstances,ks=e.didNotMatchHydratedContainerTextInstance,Os=e.didNotMatchHydratedTextInstance,st;function Ot(g){if(st===void 0)try{throw Error()}catch(C){var _=C.stack.trim().match(/\n( *(at )?)/);st=_&&_[1]||""}return`
`+st+g}var Us=!1;function mn(g,_){if(!g||Us)return"";Us=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Xe){var I=Xe}Reflect.construct(g,[],_)}else{try{_.call()}catch(Xe){I=Xe}g.call(_.prototype)}else{try{throw Error()}catch(Xe){I=Xe}g()}}catch(Xe){if(Xe&&I&&typeof Xe.stack=="string"){for(var P=Xe.stack.split(`
`),G=I.stack.split(`
`),te=P.length-1,le=G.length-1;1<=te&&0<=le&&P[te]!==G[le];)le--;for(;1<=te&&0<=le;te--,le--)if(P[te]!==G[le]){if(te!==1||le!==1)do if(te--,le--,0>le||P[te]!==G[le]){var Fe=`
`+P[te].replace(" at new "," at ");return g.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",g.displayName)),Fe}while(1<=te&&0<=le);break}}}finally{Us=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?Ot(g):""}var Hi=Object.prototype.hasOwnProperty,rr=[],Vi=-1;function Wi(g){return{current:g}}function Bt(g){0>Vi||(g.current=rr[Vi],rr[Vi]=null,Vi--)}function Ht(g,_){Vi++,rr[Vi]=g.current,g.current=_}var Ir={},nn=Wi(Ir),ei=Wi(!1),Tr=Ir;function ls(g,_){var C=g.type.contextTypes;if(!C)return Ir;var I=g.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===_)return I.__reactInternalMemoizedMaskedChildContext;var P={},G;for(G in C)P[G]=_[G];return I&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=_,g.__reactInternalMemoizedMaskedChildContext=P),P}function ti(g){return g=g.childContextTypes,g!=null}function Al(){Bt(ei),Bt(nn)}function Tf(g,_,C){if(nn.current!==Ir)throw Error(o(168));Ht(nn,_),Ht(ei,C)}function Bf(g,_,C){var I=g.stateNode;if(_=_.childContextTypes,typeof I.getChildContext!="function")return C;I=I.getChildContext();for(var P in I)if(!(P in _))throw Error(o(108,b(g)||"Unknown",P));return s({},C,I)}function Wo(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Ir,Tr=nn.current,Ht(nn,g),Ht(ei,ei.current),!0}function Ig(g,_,C){var I=g.stateNode;if(!I)throw Error(o(169));C?(g=Bf(g,_,Tr),I.__reactInternalMemoizedMergedChildContext=g,Bt(ei),Bt(nn),Ht(nn,g)):Bt(ei),Ht(ei,C)}var sr=Math.clz32?Math.clz32:Tg,Rf=Math.log,Pc=Math.LN2;function Tg(g){return g>>>=0,g===0?32:31-(Rf(g)/Pc|0)|0}var ba=64,Sa=4194304;function Ca(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Dc(g,_){var C=g.pendingLanes;if(C===0)return 0;var I=0,P=g.suspendedLanes,G=g.pingedLanes,te=C&268435455;if(te!==0){var le=te&~P;le!==0?I=Ca(le):(G&=te,G!==0&&(I=Ca(G)))}else te=C&~P,te!==0?I=Ca(te):G!==0&&(I=Ca(G));if(I===0)return 0;if(_!==0&&_!==I&&(_&P)===0&&(P=I&-I,G=_&-_,P>=G||P===16&&(G&4194240)!==0))return _;if((I&4)!==0&&(I|=C&16),_=g.entangledLanes,_!==0)for(g=g.entanglements,_&=I;0<_;)C=31-sr(_),P=1<<C,I|=g[C],_&=~P;return I}function Bg(g,_){switch(g){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l0(g,_){for(var C=g.suspendedLanes,I=g.pingedLanes,P=g.expirationTimes,G=g.pendingLanes;0<G;){var te=31-sr(G),le=1<<te,Fe=P[te];Fe===-1?((le&C)===0||(le&I)!==0)&&(P[te]=Bg(le,_)):Fe<=_&&(g.expiredLanes|=le),G&=~le}}function Ma(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Pf(g){for(var _=[],C=0;31>C;C++)_.push(g);return _}function jo(g,_,C){g.pendingLanes|=_,_!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,_=31-sr(_),g[_]=C}function vl(g,_){var C=g.pendingLanes&~_;g.pendingLanes=_,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=_,g.mutableReadLanes&=_,g.entangledLanes&=_,_=g.entanglements;var I=g.eventTimes;for(g=g.expirationTimes;0<C;){var P=31-sr(C),G=1<<P;_[P]=0,I[P]=-1,g[P]=-1,C&=~G}}function qo(g,_){var C=g.entangledLanes|=_;for(g=g.entanglements;C;){var I=31-sr(C),P=1<<I;P&_|g[I]&_&&(g[I]|=_),C&=~P}}var jt=0;function c0(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var Ia=r.unstable_scheduleCallback,Df=r.unstable_cancelCallback,u0=r.unstable_shouldYield,Rg=r.unstable_requestPaint,Rn=r.unstable_now,_l=r.unstable_ImmediatePriority,Pg=r.unstable_UserBlockingPriority,Br=r.unstable_NormalPriority,f0=r.unstable_IdlePriority,yl=null,cs=null;function h0(g){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(yl,g,void 0,(g.current.flags&128)===128)}catch{}}function Lf(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var us=typeof Object.is=="function"?Object.is:Lf,Rr=null,Yo=!1,Ns=!1;function d0(g){Rr===null?Rr=[g]:Rr.push(g)}function p0(g){Yo=!0,d0(g)}function jr(){if(!Ns&&Rr!==null){Ns=!0;var g=0,_=jt;try{var C=Rr;for(jt=1;g<C.length;g++){var I=C[g];do I=I(!0);while(I!==null)}Rr=null,Yo=!1}catch(P){throw Rr!==null&&(Rr=Rr.slice(g+1)),Ia(_l,jr),P}finally{jt=_,Ns=!1}}return null}var Lc=a.ReactCurrentBatchConfig;function Fc(g,_){if(us(g,_))return!0;if(typeof g!="object"||g===null||typeof _!="object"||_===null)return!1;var C=Object.keys(g),I=Object.keys(_);if(C.length!==I.length)return!1;for(I=0;I<C.length;I++){var P=C[I];if(!Hi.call(_,P)||!us(g[P],_[P]))return!1}return!0}function kc(g){switch(g.tag){case 5:return Ot(g.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 2:case 15:return g=mn(g.type,!1),g;case 11:return g=mn(g.type.render,!1),g;case 1:return g=mn(g.type,!0),g;default:return""}}function or(g,_){if(g&&g.defaultProps){_=s({},_),g=g.defaultProps;for(var C in g)_[C]===void 0&&(_[C]=g[C]);return _}return _}var Ii=Wi(null),Ff=null,po=null,xl=null;function kf(){xl=po=Ff=null}function Dg(g,_,C){xe?(Ht(Ii,_._currentValue),_._currentValue=C):(Ht(Ii,_._currentValue2),_._currentValue2=C)}function Xo(g){var _=Ii.current;Bt(Ii),xe?g._currentValue=_:g._currentValue2=_}function li(g,_,C){for(;g!==null;){var I=g.alternate;if((g.childLanes&_)!==_?(g.childLanes|=_,I!==null&&(I.childLanes|=_)):I!==null&&(I.childLanes&_)!==_&&(I.childLanes|=_),g===C)break;g=g.return}}function Ti(g,_){Ff=g,xl=po=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&_)!==0&&(ds=!0),g.firstContext=null)}function yn(g){var _=xe?g._currentValue:g._currentValue2;if(xl!==g)if(g={context:g,memoizedValue:_,next:null},po===null){if(Ff===null)throw Error(o(308));po=g,Ff.dependencies={lanes:0,firstContext:g}}else po=po.next=g;return _}var vi=null,mo=!1;function xx(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rT(g,_){g=g.updateQueue,_.updateQueue===g&&(_.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Ta(g,_){return{eventTime:g,lane:_,tag:0,payload:null,callback:null,next:null}}function wl(g,_){var C=g.updateQueue;C!==null&&(C=C.shared,ci!==null&&(g.mode&1)!==0&&(Vt&2)===0?(g=C.interleaved,g===null?(_.next=_,vi===null?vi=[C]:vi.push(C)):(_.next=g.next,g.next=_),C.interleaved=_):(g=C.pending,g===null?_.next=_:(_.next=g.next,g.next=_),C.pending=_))}function Lg(g,_,C){if(_=_.updateQueue,_!==null&&(_=_.shared,(C&4194240)!==0)){var I=_.lanes;I&=g.pendingLanes,C|=I,_.lanes=C,qo(g,C)}}function sT(g,_){var C=g.updateQueue,I=g.alternate;if(I!==null&&(I=I.updateQueue,C===I)){var P=null,G=null;if(C=C.firstBaseUpdate,C!==null){do{var te={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};G===null?P=G=te:G=G.next=te,C=C.next}while(C!==null);G===null?P=G=_:G=G.next=_}else P=G=_;C={baseState:I.baseState,firstBaseUpdate:P,lastBaseUpdate:G,shared:I.shared,effects:I.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=_:g.next=_,C.lastBaseUpdate=_}function Fg(g,_,C,I){var P=g.updateQueue;mo=!1;var G=P.firstBaseUpdate,te=P.lastBaseUpdate,le=P.shared.pending;if(le!==null){P.shared.pending=null;var Fe=le,Xe=Fe.next;Fe.next=null,te===null?G=Xe:te.next=Xe,te=Fe;var at=g.alternate;at!==null&&(at=at.updateQueue,le=at.lastBaseUpdate,le!==te&&(le===null?at.firstBaseUpdate=Xe:le.next=Xe,at.lastBaseUpdate=Fe))}if(G!==null){var Lt=P.baseState;te=0,at=Xe=Fe=null,le=G;do{var _t=le.lane,xn=le.eventTime;if((I&_t)===_t){at!==null&&(at=at.next={eventTime:xn,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var pt=g,ur=le;switch(_t=_,xn=C,ur.tag){case 1:if(pt=ur.payload,typeof pt=="function"){Lt=pt.call(xn,Lt,_t);break e}Lt=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=ur.payload,_t=typeof pt=="function"?pt.call(xn,Lt,_t):pt,_t==null)break e;Lt=s({},Lt,_t);break e;case 2:mo=!0}}le.callback!==null&&le.lane!==0&&(g.flags|=64,_t=P.effects,_t===null?P.effects=[le]:_t.push(le))}else xn={eventTime:xn,lane:_t,tag:le.tag,payload:le.payload,callback:le.callback,next:null},at===null?(Xe=at=xn,Fe=Lt):at=at.next=xn,te|=_t;if(le=le.next,le===null){if(le=P.shared.pending,le===null)break;_t=le,le=_t.next,_t.next=null,P.lastBaseUpdate=_t,P.shared.pending=null}}while(1);if(at===null&&(Fe=Lt),P.baseState=Fe,P.firstBaseUpdate=Xe,P.lastBaseUpdate=at,_=P.shared.interleaved,_!==null){P=_;do te|=P.lane,P=P.next;while(P!==_)}else G===null&&(P.shared.lanes=0);Wf|=te,g.lanes=te,g.memoizedState=Lt}}function oT(g,_,C){if(g=_.effects,_.effects=null,g!==null)for(_=0;_<g.length;_++){var I=g[_],P=I.callback;if(P!==null){if(I.callback=null,I=C,typeof P!="function")throw Error(o(191,P));P.call(I)}}}var aT=new i.Component().refs;function wx(g,_,C,I){_=g.memoizedState,C=C(I,_),C=C==null?_:s({},_,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var kg={isMounted:function(g){return(g=g._reactInternals)?B(g)===g:!1},enqueueSetState:function(g,_,C){g=g._reactInternals;var I=Dr(),P=Sl(g),G=Ta(I,P);G.payload=_,C!=null&&(G.callback=C),wl(g,G),_=Vs(g,P,I),_!==null&&Lg(_,g,P)},enqueueReplaceState:function(g,_,C){g=g._reactInternals;var I=Dr(),P=Sl(g),G=Ta(I,P);G.tag=1,G.payload=_,C!=null&&(G.callback=C),wl(g,G),_=Vs(g,P,I),_!==null&&Lg(_,g,P)},enqueueForceUpdate:function(g,_){g=g._reactInternals;var C=Dr(),I=Sl(g),P=Ta(C,I);P.tag=2,_!=null&&(P.callback=_),wl(g,P),_=Vs(g,I,C),_!==null&&Lg(_,g,I)}};function lT(g,_,C,I,P,G,te){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(I,G,te):_.prototype&&_.prototype.isPureReactComponent?!Fc(C,I)||!Fc(P,G):!0}function cT(g,_,C){var I=!1,P=Ir,G=_.contextType;return typeof G=="object"&&G!==null?G=yn(G):(P=ti(_)?Tr:nn.current,I=_.contextTypes,G=(I=I!=null)?ls(g,P):Ir),_=new _(C,G),g.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=kg,g.stateNode=_,_._reactInternals=g,I&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=P,g.__reactInternalMemoizedMaskedChildContext=G),_}function uT(g,_,C,I){g=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(C,I),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(C,I),_.state!==g&&kg.enqueueReplaceState(_,_.state,null)}function Ex(g,_,C,I){var P=g.stateNode;P.props=C,P.state=g.memoizedState,P.refs=aT,xx(g);var G=_.contextType;typeof G=="object"&&G!==null?P.context=yn(G):(G=ti(_)?Tr:nn.current,P.context=ls(g,G)),P.state=g.memoizedState,G=_.getDerivedStateFromProps,typeof G=="function"&&(wx(g,_,G,C),P.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(_=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),_!==P.state&&kg.enqueueReplaceState(P,P.state,null),Fg(g,C,P,I),P.state=g.memoizedState),typeof P.componentDidMount=="function"&&(g.flags|=4194308)}var Of=[],Uf=0,Og=null,Ug=0,zs=[],Gs=0,Oc=null,Ba=1,Ra="";function Uc(g,_){Of[Uf++]=Ug,Of[Uf++]=Og,Og=g,Ug=_}function fT(g,_,C){zs[Gs++]=Ba,zs[Gs++]=Ra,zs[Gs++]=Oc,Oc=g;var I=Ba;g=Ra;var P=32-sr(I)-1;I&=~(1<<P),C+=1;var G=32-sr(_)+P;if(30<G){var te=P-P%5;G=(I&(1<<te)-1).toString(32),I>>=te,P-=te,Ba=1<<32-sr(_)+P|C<<P|I,Ra=G+g}else Ba=1<<G|C<<P|I,Ra=g}function bx(g){g.return!==null&&(Uc(g,1),fT(g,1,0))}function Sx(g){for(;g===Og;)Og=Of[--Uf],Of[Uf]=null,Ug=Of[--Uf],Of[Uf]=null;for(;g===Oc;)Oc=zs[--Gs],zs[Gs]=null,Ra=zs[--Gs],zs[Gs]=null,Ba=zs[--Gs],zs[Gs]=null}var fs=null,hs=null,Pn=!1,m0=!1,go=null;function hT(g,_){var C=Ws(5,null,null,0);C.elementType="DELETED",C.stateNode=_,C.return=g,_=g.deletions,_===null?(g.deletions=[C],g.flags|=16):_.push(C)}function dT(g,_){switch(g.tag){case 5:return _=qn(_,g.type,g.pendingProps),_!==null?(g.stateNode=_,fs=g,hs=Le(_),!0):!1;case 6:return _=Mr(_,g.pendingProps),_!==null?(g.stateNode=_,fs=g,hs=null,!0):!1;case 13:if(_=Zn(_),_!==null){var C=Oc!==null?{id:Ba,overflow:Ra}:null;return g.memoizedState={dehydrated:_,treeContext:C,retryLane:1073741824},C=Ws(18,null,null,0),C.stateNode=_,C.return=g,g.child=C,fs=g,hs=null,!0}return!1;default:return!1}}function Cx(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Mx(g){if(Pn){var _=hs;if(_){var C=_;if(!dT(g,_)){if(Cx(g))throw Error(o(418));_=de(C);var I=fs;_&&dT(g,_)?hT(I,C):(g.flags=g.flags&-4097|2,Pn=!1,fs=g)}}else{if(Cx(g))throw Error(o(418));g.flags=g.flags&-4097|2,Pn=!1,fs=g}}}function pT(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;fs=g}function g0(g){if(!he||g!==fs)return!1;if(!Pn)return pT(g),Pn=!0,!1;if(g.tag!==3&&(g.tag!==5||Wr(g.type)&&!re(g.type,g.memoizedProps))){var _=hs;if(_){if(Cx(g)){for(g=hs;g;)g=de(g);throw Error(o(418))}for(;_;)hT(g,_),_=de(_)}}if(pT(g),g.tag===13){if(!he)throw Error(o(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));hs=Mt(g)}else hs=fs?de(g.stateNode):null;return!0}function Nf(){he&&(hs=fs=null,m0=Pn=!1)}function Ix(g){go===null?go=[g]:go.push(g)}function A0(g,_,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var I=C.stateNode}if(!I)throw Error(o(147,g));var P=I,G=""+g;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===G?_.ref:(_=function(te){var le=P.refs;le===aT&&(le=P.refs={}),te===null?delete le[G]:le[G]=te},_._stringRef=G,_)}if(typeof g!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,g))}return g}function Ng(g,_){throw g=Object.prototype.toString.call(_),Error(o(31,g==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":g))}function mT(g){var _=g._init;return _(g._payload)}function gT(g){function _(we,fe){if(g){var Be=we.deletions;Be===null?(we.deletions=[fe],we.flags|=16):Be.push(fe)}}function C(we,fe){if(!g)return null;for(;fe!==null;)_(we,fe),fe=fe.sibling;return null}function I(we,fe){for(we=new Map;fe!==null;)fe.key!==null?we.set(fe.key,fe):we.set(fe.index,fe),fe=fe.sibling;return we}function P(we,fe){return we=Ml(we,fe),we.index=0,we.sibling=null,we}function G(we,fe,Be){return we.index=Be,g?(Be=we.alternate,Be!==null?(Be=Be.index,Be<fe?(we.flags|=2,fe):Be):(we.flags|=2,fe)):(we.flags|=1048576,fe)}function te(we){return g&&we.alternate===null&&(we.flags|=2),we}function le(we,fe,Be,rt){return fe===null||fe.tag!==6?(fe=f2(Be,we.mode,rt),fe.return=we,fe):(fe=P(fe,Be),fe.return=we,fe)}function Fe(we,fe,Be,rt){var dt=Be.type;return dt===u?at(we,fe,Be.props.children,rt,Be.key):fe!==null&&(fe.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&mT(dt)===fe.type)?(rt=P(fe,Be.props),rt.ref=A0(we,fe,Be),rt.return=we,rt):(rt=g1(Be.type,Be.key,Be.props,null,we.mode,rt),rt.ref=A0(we,fe,Be),rt.return=we,rt)}function Xe(we,fe,Be,rt){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Be.containerInfo||fe.stateNode.implementation!==Be.implementation?(fe=h2(Be,we.mode,rt),fe.return=we,fe):(fe=P(fe,Be.children||[]),fe.return=we,fe)}function at(we,fe,Be,rt,dt){return fe===null||fe.tag!==7?(fe=Wc(Be,we.mode,rt,dt),fe.return=we,fe):(fe=P(fe,Be),fe.return=we,fe)}function Lt(we,fe,Be){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=f2(""+fe,we.mode,Be),fe.return=we,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return Be=g1(fe.type,fe.key,fe.props,null,we.mode,Be),Be.ref=A0(we,null,fe),Be.return=we,Be;case c:return fe=h2(fe,we.mode,Be),fe.return=we,fe;case x:var rt=fe._init;return Lt(we,rt(fe._payload),Be)}if(Y(fe)||S(fe))return fe=Wc(fe,we.mode,Be,null),fe.return=we,fe;Ng(we,fe)}return null}function _t(we,fe,Be,rt){var dt=fe!==null?fe.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return dt!==null?null:le(we,fe,""+Be,rt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return Be.key===dt?Fe(we,fe,Be,rt):null;case c:return Be.key===dt?Xe(we,fe,Be,rt):null;case x:return dt=Be._init,_t(we,fe,dt(Be._payload),rt)}if(Y(Be)||S(Be))return dt!==null?null:at(we,fe,Be,rt,null);Ng(we,Be)}return null}function xn(we,fe,Be,rt,dt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return we=we.get(Be)||null,le(fe,we,""+rt,dt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case l:return we=we.get(rt.key===null?Be:rt.key)||null,Fe(fe,we,rt,dt);case c:return we=we.get(rt.key===null?Be:rt.key)||null,Xe(fe,we,rt,dt);case x:var zt=rt._init;return xn(we,fe,Be,zt(rt._payload),dt)}if(Y(rt)||S(rt))return we=we.get(Be)||null,at(fe,we,rt,dt,null);Ng(fe,rt)}return null}function pt(we,fe,Be,rt){for(var dt=null,zt=null,Ft=fe,on=fe=0,Ri=null;Ft!==null&&on<Be.length;on++){Ft.index>on?(Ri=Ft,Ft=null):Ri=Ft.sibling;var an=_t(we,Ft,Be[on],rt);if(an===null){Ft===null&&(Ft=Ri);break}g&&Ft&&an.alternate===null&&_(we,Ft),fe=G(an,fe,on),zt===null?dt=an:zt.sibling=an,zt=an,Ft=Ri}if(on===Be.length)return C(we,Ft),Pn&&Uc(we,on),dt;if(Ft===null){for(;on<Be.length;on++)Ft=Lt(we,Be[on],rt),Ft!==null&&(fe=G(Ft,fe,on),zt===null?dt=Ft:zt.sibling=Ft,zt=Ft);return Pn&&Uc(we,on),dt}for(Ft=I(we,Ft);on<Be.length;on++)Ri=xn(Ft,we,on,Be[on],rt),Ri!==null&&(g&&Ri.alternate!==null&&Ft.delete(Ri.key===null?on:Ri.key),fe=G(Ri,fe,on),zt===null?dt=Ri:zt.sibling=Ri,zt=Ri);return g&&Ft.forEach(function(Il){return _(we,Il)}),Pn&&Uc(we,on),dt}function ur(we,fe,Be,rt){var dt=S(Be);if(typeof dt!="function")throw Error(o(150));if(Be=dt.call(Be),Be==null)throw Error(o(151));for(var zt=dt=null,Ft=fe,on=fe=0,Ri=null,an=Be.next();Ft!==null&&!an.done;on++,an=Be.next()){Ft.index>on?(Ri=Ft,Ft=null):Ri=Ft.sibling;var Il=_t(we,Ft,an.value,rt);if(Il===null){Ft===null&&(Ft=Ri);break}g&&Ft&&Il.alternate===null&&_(we,Ft),fe=G(Il,fe,on),zt===null?dt=Il:zt.sibling=Il,zt=Il,Ft=Ri}if(an.done)return C(we,Ft),Pn&&Uc(we,on),dt;if(Ft===null){for(;!an.done;on++,an=Be.next())an=Lt(we,an.value,rt),an!==null&&(fe=G(an,fe,on),zt===null?dt=an:zt.sibling=an,zt=an);return Pn&&Uc(we,on),dt}for(Ft=I(we,Ft);!an.done;on++,an=Be.next())an=xn(Ft,we,on,an.value,rt),an!==null&&(g&&an.alternate!==null&&Ft.delete(an.key===null?on:an.key),fe=G(an,fe,on),zt===null?dt=an:zt.sibling=an,zt=an);return g&&Ft.forEach(function(r7){return _(we,r7)}),Pn&&Uc(we,on),dt}function js(we,fe,Be,rt){if(typeof Be=="object"&&Be!==null&&Be.type===u&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:e:{for(var dt=Be.key,zt=fe;zt!==null;){if(zt.key===dt){if(dt=Be.type,dt===u){if(zt.tag===7){C(we,zt.sibling),fe=P(zt,Be.props.children),fe.return=we,we=fe;break e}}else if(zt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===x&&mT(dt)===zt.type){C(we,zt.sibling),fe=P(zt,Be.props),fe.ref=A0(we,zt,Be),fe.return=we,we=fe;break e}C(we,zt);break}else _(we,zt);zt=zt.sibling}Be.type===u?(fe=Wc(Be.props.children,we.mode,rt,Be.key),fe.return=we,we=fe):(rt=g1(Be.type,Be.key,Be.props,null,we.mode,rt),rt.ref=A0(we,fe,Be),rt.return=we,we=rt)}return te(we);case c:e:{for(zt=Be.key;fe!==null;){if(fe.key===zt)if(fe.tag===4&&fe.stateNode.containerInfo===Be.containerInfo&&fe.stateNode.implementation===Be.implementation){C(we,fe.sibling),fe=P(fe,Be.children||[]),fe.return=we,we=fe;break e}else{C(we,fe);break}else _(we,fe);fe=fe.sibling}fe=h2(Be,we.mode,rt),fe.return=we,we=fe}return te(we);case x:return zt=Be._init,js(we,fe,zt(Be._payload),rt)}if(Y(Be))return pt(we,fe,Be,rt);if(S(Be))return ur(we,fe,Be,rt);Ng(we,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,fe!==null&&fe.tag===6?(C(we,fe.sibling),fe=P(fe,Be),fe.return=we,we=fe):(C(we,fe),fe=f2(Be,we.mode,rt),fe.return=we,we=fe),te(we)):C(we,fe)}return js}var zf=gT(!0),AT=gT(!1),v0={},Qs=Wi(v0),_0=Wi(v0),Gf=Wi(v0);function Jo(g){if(g===v0)throw Error(o(174));return g}function Tx(g,_){Ht(Gf,_),Ht(_0,g),Ht(Qs,v0),g=K(_),Bt(Qs),Ht(Qs,g)}function Qf(){Bt(Qs),Bt(_0),Bt(Gf)}function vT(g){var _=Jo(Gf.current),C=Jo(Qs.current);_=z(C,g.type,_),C!==_&&(Ht(_0,g),Ht(Qs,_))}function Bx(g){_0.current===g&&(Bt(Qs),Bt(_0))}var Un=Wi(0);function zg(g){for(var _=g;_!==null;){if(_.tag===13){var C=_.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||On(C)||Ai(C)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===g)break;for(;_.sibling===null;){if(_.return===null||_.return===g)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Rx=[];function Px(){for(var g=0;g<Rx.length;g++){var _=Rx[g];xe?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}Rx.length=0}var Gg=a.ReactCurrentDispatcher,Hs=a.ReactCurrentBatchConfig,Hf=0,Yn=null,ar=null,Bi=null,Qg=!1,y0=!1,x0=0,TG=0;function lr(){throw Error(o(321))}function Dx(g,_){if(_===null)return!1;for(var C=0;C<_.length&&C<g.length;C++)if(!us(g[C],_[C]))return!1;return!0}function Lx(g,_,C,I,P,G){if(Hf=G,Yn=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Gg.current=g===null||g.memoizedState===null?DG:LG,g=C(I,P),y0){G=0;do{if(y0=!1,x0=0,25<=G)throw Error(o(301));G+=1,Bi=ar=null,_.updateQueue=null,Gg.current=FG,g=C(I,P)}while(y0)}if(Gg.current=qg,_=ar!==null&&ar.next!==null,Hf=0,Bi=ar=Yn=null,Qg=!1,_)throw Error(o(300));return g}function Fx(){var g=x0!==0;return x0=0,g}function Pa(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bi===null?Yn.memoizedState=Bi=g:Bi=Bi.next=g,Bi}function Ko(){if(ar===null){var g=Yn.alternate;g=g!==null?g.memoizedState:null}else g=ar.next;var _=Bi===null?Yn.memoizedState:Bi.next;if(_!==null)Bi=_,ar=g;else{if(g===null)throw Error(o(310));ar=g,g={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},Bi===null?Yn.memoizedState=Bi=g:Bi=Bi.next=g}return Bi}function Nc(g,_){return typeof _=="function"?_(g):_}function Hg(g){var _=Ko(),C=_.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=g;var I=ar,P=I.baseQueue,G=C.pending;if(G!==null){if(P!==null){var te=P.next;P.next=G.next,G.next=te}I.baseQueue=P=G,C.pending=null}if(P!==null){G=P.next,I=I.baseState;var le=te=null,Fe=null,Xe=G;do{var at=Xe.lane;if((Hf&at)===at)Fe!==null&&(Fe=Fe.next={lane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),I=Xe.hasEagerState?Xe.eagerState:g(I,Xe.action);else{var Lt={lane:at,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null};Fe===null?(le=Fe=Lt,te=I):Fe=Fe.next=Lt,Yn.lanes|=at,Wf|=at}Xe=Xe.next}while(Xe!==null&&Xe!==G);Fe===null?te=I:Fe.next=le,us(I,_.memoizedState)||(ds=!0),_.memoizedState=I,_.baseState=te,_.baseQueue=Fe,C.lastRenderedState=I}if(g=C.interleaved,g!==null){P=g;do G=P.lane,Yn.lanes|=G,Wf|=G,P=P.next;while(P!==g)}else P===null&&(C.lanes=0);return[_.memoizedState,C.dispatch]}function Vg(g){var _=Ko(),C=_.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=g;var I=C.dispatch,P=C.pending,G=_.memoizedState;if(P!==null){C.pending=null;var te=P=P.next;do G=g(G,te.action),te=te.next;while(te!==P);us(G,_.memoizedState)||(ds=!0),_.memoizedState=G,_.baseQueue===null&&(_.baseState=G),C.lastRenderedState=G}return[G,I]}function _T(){}function yT(g,_){var C=Yn,I=Ko(),P=_(),G=!us(I.memoizedState,P);if(G&&(I.memoizedState=P,ds=!0),I=I.queue,E0(ET.bind(null,C,I,g),[g]),I.getSnapshot!==_||G||Bi!==null&&Bi.memoizedState.tag&1){if(C.flags|=2048,w0(9,wT.bind(null,C,I,P,_),void 0,null),ci===null)throw Error(o(349));(Hf&30)!==0||xT(C,_,P)}return P}function xT(g,_,C){g.flags|=16384,g={getSnapshot:_,value:C},_=Yn.updateQueue,_===null?(_={lastEffect:null,stores:null},Yn.updateQueue=_,_.stores=[g]):(C=_.stores,C===null?_.stores=[g]:C.push(g))}function wT(g,_,C,I){_.value=C,_.getSnapshot=I,bT(_)&&Vs(g,1,-1)}function ET(g,_,C){return C(function(){bT(_)&&Vs(g,1,-1)})}function bT(g){var _=g.getSnapshot;g=g.value;try{var C=_();return!us(g,C)}catch{return!0}}function kx(g){var _=Pa();return typeof g=="function"&&(g=g()),_.memoizedState=_.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:g},_.queue=g,g=g.dispatch=PG.bind(null,Yn,g),[_.memoizedState,g]}function w0(g,_,C,I){return g={tag:g,create:_,destroy:C,deps:I,next:null},_=Yn.updateQueue,_===null?(_={lastEffect:null,stores:null},Yn.updateQueue=_,_.lastEffect=g.next=g):(C=_.lastEffect,C===null?_.lastEffect=g.next=g:(I=C.next,C.next=g,g.next=I,_.lastEffect=g)),g}function ST(){return Ko().memoizedState}function Wg(g,_,C,I){var P=Pa();Yn.flags|=g,P.memoizedState=w0(1|_,C,void 0,I===void 0?null:I)}function jg(g,_,C,I){var P=Ko();I=I===void 0?null:I;var G=void 0;if(ar!==null){var te=ar.memoizedState;if(G=te.destroy,I!==null&&Dx(I,te.deps)){P.memoizedState=w0(_,C,G,I);return}}Yn.flags|=g,P.memoizedState=w0(1|_,C,G,I)}function Ox(g,_){return Wg(8390656,8,g,_)}function E0(g,_){return jg(2048,8,g,_)}function CT(g,_){return jg(4,2,g,_)}function MT(g,_){return jg(4,4,g,_)}function IT(g,_){if(typeof _=="function")return g=g(),_(g),function(){_(null)};if(_!=null)return g=g(),_.current=g,function(){_.current=null}}function TT(g,_,C){return C=C!=null?C.concat([g]):null,jg(4,4,IT.bind(null,_,g),C)}function Ux(){}function BT(g,_){var C=Ko();_=_===void 0?null:_;var I=C.memoizedState;return I!==null&&_!==null&&Dx(_,I[1])?I[0]:(C.memoizedState=[g,_],g)}function RT(g,_){var C=Ko();_=_===void 0?null:_;var I=C.memoizedState;return I!==null&&_!==null&&Dx(_,I[1])?I[0]:(g=g(),C.memoizedState=[g,_],g)}function BG(g,_){var C=jt;jt=C!==0&&4>C?C:4,g(!0);var I=Hs.transition;Hs.transition={};try{g(!1),_()}finally{jt=C,Hs.transition=I}}function PT(){return Ko().memoizedState}function RG(g,_,C){var I=Sl(g);C={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null},DT(g)?LT(_,C):(FT(g,_,C),C=Dr(),g=Vs(g,I,C),g!==null&&kT(g,_,I))}function PG(g,_,C){var I=Sl(g),P={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null};if(DT(g))LT(_,P);else{FT(g,_,P);var G=g.alternate;if(g.lanes===0&&(G===null||G.lanes===0)&&(G=_.lastRenderedReducer,G!==null))try{var te=_.lastRenderedState,le=G(te,C);if(P.hasEagerState=!0,P.eagerState=le,us(le,te))return}catch{}finally{}C=Dr(),g=Vs(g,I,C),g!==null&&kT(g,_,I)}}function DT(g){var _=g.alternate;return g===Yn||_!==null&&_===Yn}function LT(g,_){y0=Qg=!0;var C=g.pending;C===null?_.next=_:(_.next=C.next,C.next=_),g.pending=_}function FT(g,_,C){ci!==null&&(g.mode&1)!==0&&(Vt&2)===0?(g=_.interleaved,g===null?(C.next=C,vi===null?vi=[_]:vi.push(_)):(C.next=g.next,g.next=C),_.interleaved=C):(g=_.pending,g===null?C.next=C:(C.next=g.next,g.next=C),_.pending=C)}function kT(g,_,C){if((C&4194240)!==0){var I=_.lanes;I&=g.pendingLanes,C|=I,_.lanes=C,qo(g,C)}}var qg={readContext:yn,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},DG={readContext:yn,useCallback:function(g,_){return Pa().memoizedState=[g,_===void 0?null:_],g},useContext:yn,useEffect:Ox,useImperativeHandle:function(g,_,C){return C=C!=null?C.concat([g]):null,Wg(4194308,4,IT.bind(null,_,g),C)},useLayoutEffect:function(g,_){return Wg(4194308,4,g,_)},useInsertionEffect:function(g,_){return Wg(4,2,g,_)},useMemo:function(g,_){var C=Pa();return _=_===void 0?null:_,g=g(),C.memoizedState=[g,_],g},useReducer:function(g,_,C){var I=Pa();return _=C!==void 0?C(_):_,I.memoizedState=I.baseState=_,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:_},I.queue=g,g=g.dispatch=RG.bind(null,Yn,g),[I.memoizedState,g]},useRef:function(g){var _=Pa();return g={current:g},_.memoizedState=g},useState:kx,useDebugValue:Ux,useDeferredValue:function(g){var _=kx(g),C=_[0],I=_[1];return Ox(function(){var P=Hs.transition;Hs.transition={};try{I(g)}finally{Hs.transition=P}},[g]),C},useTransition:function(){var g=kx(!1),_=g[0];return g=BG.bind(null,g[1]),Pa().memoizedState=g,[_,g]},useMutableSource:function(){},useSyncExternalStore:function(g,_,C){var I=Yn,P=Pa();if(Pn){if(C===void 0)throw Error(o(407));C=C()}else{if(C=_(),ci===null)throw Error(o(349));(Hf&30)!==0||xT(I,_,C)}P.memoizedState=C;var G={value:C,getSnapshot:_};return P.queue=G,Ox(ET.bind(null,I,G,g),[g]),I.flags|=2048,w0(9,wT.bind(null,I,G,C,_),void 0,null),C},useId:function(){var g=Pa(),_=ci.identifierPrefix;if(Pn){var C=Ra,I=Ba;C=(I&~(1<<32-sr(I)-1)).toString(32)+C,_=":"+_+"R"+C,C=x0++,0<C&&(_+="H"+C.toString(32)),_+=":"}else C=TG++,_=":"+_+"r"+C.toString(32)+":";return g.memoizedState=_},unstable_isNewReconciler:!1},LG={readContext:yn,useCallback:BT,useContext:yn,useEffect:E0,useImperativeHandle:TT,useInsertionEffect:CT,useLayoutEffect:MT,useMemo:RT,useReducer:Hg,useRef:ST,useState:function(){return Hg(Nc)},useDebugValue:Ux,useDeferredValue:function(g){var _=Hg(Nc),C=_[0],I=_[1];return E0(function(){var P=Hs.transition;Hs.transition={};try{I(g)}finally{Hs.transition=P}},[g]),C},useTransition:function(){var g=Hg(Nc)[0],_=Ko().memoizedState;return[g,_]},useMutableSource:_T,useSyncExternalStore:yT,useId:PT,unstable_isNewReconciler:!1},FG={readContext:yn,useCallback:BT,useContext:yn,useEffect:E0,useImperativeHandle:TT,useInsertionEffect:CT,useLayoutEffect:MT,useMemo:RT,useReducer:Vg,useRef:ST,useState:function(){return Vg(Nc)},useDebugValue:Ux,useDeferredValue:function(g){var _=Vg(Nc),C=_[0],I=_[1];return E0(function(){var P=Hs.transition;Hs.transition={};try{I(g)}finally{Hs.transition=P}},[g]),C},useTransition:function(){var g=Vg(Nc)[0],_=Ko().memoizedState;return[g,_]},useMutableSource:_T,useSyncExternalStore:yT,useId:PT,unstable_isNewReconciler:!1};function Nx(g,_){try{var C="",I=_;do C+=kc(I),I=I.return;while(I);var P=C}catch(G){P=`
Error generating stack: `+G.message+`
`+G.stack}return{value:g,source:_,stack:P}}function zx(g,_){try{console.error(_.value)}catch(C){setTimeout(function(){throw C})}}var kG=typeof WeakMap=="function"?WeakMap:Map;function OT(g,_,C){C=Ta(-1,C),C.tag=3,C.payload={element:null};var I=_.value;return C.callback=function(){c1||(c1=!0,r2=I),zx(g,_)},C}function UT(g,_,C){C=Ta(-1,C),C.tag=3;var I=g.type.getDerivedStateFromError;if(typeof I=="function"){var P=_.value;C.payload=function(){return I(P)},C.callback=function(){zx(g,_)}}var G=g.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(C.callback=function(){zx(g,_),typeof I!="function"&&(El===null?El=new Set([this]):El.add(this));var te=_.stack;this.componentDidCatch(_.value,{componentStack:te!==null?te:""})}),C}function NT(g,_,C){var I=g.pingCache;if(I===null){I=g.pingCache=new kG;var P=new Set;I.set(_,P)}else P=I.get(_),P===void 0&&(P=new Set,I.set(_,P));P.has(C)||(P.add(C),g=JG.bind(null,g,_,C),_.then(g,g))}function zT(g){do{var _;if((_=g.tag===13)&&(_=g.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return g;g=g.return}while(g!==null);return null}function GT(g,_,C,I,P){return(g.mode&1)===0?(g===_?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(_=Ta(-1,1),_.tag=2,wl(C,_))),C.lanes|=1),g):(g.flags|=65536,g.lanes=P,g)}function $o(g){g.flags|=4}function QT(g,_){if(g!==null&&g.child===_.child)return!0;if((_.flags&16)!==0)return!1;for(g=_.child;g!==null;){if((g.flags&12854)!==0||(g.subtreeFlags&12854)!==0)return!1;g=g.sibling}return!0}var b0,S0,Yg,Xg;if(Se)b0=function(g,_){for(var C=_.child;C!==null;){if(C.tag===5||C.tag===6)V(g,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===_)break;for(;C.sibling===null;){if(C.return===null||C.return===_)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},S0=function(){},Yg=function(g,_,C,I,P){if(g=g.memoizedProps,g!==I){var G=_.stateNode,te=Jo(Qs.current);C=j(G,C,g,I,P,te),(_.updateQueue=C)&&$o(_)}},Xg=function(g,_,C,I){C!==I&&$o(_)};else if(oe){b0=function(g,_,C,I){for(var P=_.child;P!==null;){if(P.tag===5){var G=P.stateNode;C&&I&&(G=pn(G,P.type,P.memoizedProps,P)),V(g,G)}else if(P.tag===6)G=P.stateNode,C&&I&&(G=fn(G,P.memoizedProps,P)),V(g,G);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)G=P.child,G!==null&&(G.return=P),b0(g,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var HT=function(g,_,C,I){for(var P=_.child;P!==null;){if(P.tag===5){var G=P.stateNode;C&&I&&(G=pn(G,P.type,P.memoizedProps,P)),Yt(g,G)}else if(P.tag===6)G=P.stateNode,C&&I&&(G=fn(G,P.memoizedProps,P)),Yt(g,G);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)G=P.child,G!==null&&(G.return=P),HT(g,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};S0=function(g,_){var C=_.stateNode;if(!QT(g,_)){g=C.containerInfo;var I=cn(g);HT(I,_,!1,!1),C.pendingChildren=I,$o(_),gt(g,I)}},Yg=function(g,_,C,I,P){var G=g.stateNode,te=g.memoizedProps;if((g=QT(g,_))&&te===I)_.stateNode=G;else{var le=_.stateNode,Fe=Jo(Qs.current),Xe=null;te!==I&&(Xe=j(le,C,te,I,P,Fe)),g&&Xe===null?_.stateNode=G:(G=Tt(G,Xe,C,te,I,_,g,le),J(G,C,I,P,Fe)&&$o(_),_.stateNode=G,g?$o(_):b0(G,_,!1,!1))}},Xg=function(g,_,C,I){C!==I?(g=Jo(Gf.current),C=Jo(Qs.current),_.stateNode=ee(I,g,C,_),$o(_)):_.stateNode=g.stateNode}}else S0=function(){},Yg=function(){},Xg=function(){};function C0(g,_){if(!Pn)switch(g.tailMode){case"hidden":_=g.tail;for(var C=null;_!==null;)_.alternate!==null&&(C=_),_=_.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var I=null;C!==null;)C.alternate!==null&&(I=C),C=C.sibling;I===null?_||g.tail===null?g.tail=null:g.tail.sibling=null:I.sibling=null}}function cr(g){var _=g.alternate!==null&&g.alternate.child===g.child,C=0,I=0;if(_)for(var P=g.child;P!==null;)C|=P.lanes|P.childLanes,I|=P.subtreeFlags&14680064,I|=P.flags&14680064,P.return=g,P=P.sibling;else for(P=g.child;P!==null;)C|=P.lanes|P.childLanes,I|=P.subtreeFlags,I|=P.flags,P.return=g,P=P.sibling;return g.subtreeFlags|=I,g.childLanes=C,_}function OG(g,_,C){var I=_.pendingProps;switch(Sx(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(_),null;case 1:return ti(_.type)&&Al(),cr(_),null;case 3:return I=_.stateNode,Qf(),Bt(ei),Bt(nn),Px(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(g===null||g.child===null)&&(g0(_)?$o(_):g===null||g.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,go!==null&&(a2(go),go=null))),S0(g,_),cr(_),null;case 5:Bx(_),C=Jo(Gf.current);var P=_.type;if(g!==null&&_.stateNode!=null)Yg(g,_,P,I,C),g.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!I){if(_.stateNode===null)throw Error(o(166));return cr(_),null}if(g=Jo(Qs.current),g0(_)){if(!he)throw Error(o(175));g=mt(_.stateNode,_.type,_.memoizedProps,C,g,_,!m0),_.updateQueue=g,g!==null&&$o(_)}else{var G=H(P,I,C,g,_);b0(G,_,!1,!1),_.stateNode=G,J(G,P,I,C,g)&&$o(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return cr(_),null;case 6:if(g&&_.stateNode!=null)Xg(g,_,g.memoizedProps,I);else{if(typeof I!="string"&&_.stateNode===null)throw Error(o(166));if(g=Jo(Gf.current),C=Jo(Qs.current),g0(_)){if(!he)throw Error(o(176));if(g=_.stateNode,I=_.memoizedProps,(C=xt(g,I,_,!m0))&&(P=fs,P!==null))switch(G=(P.mode&1)!==0,P.tag){case 3:ks(P.stateNode.containerInfo,g,I,G);break;case 5:Os(P.type,P.memoizedProps,P.stateNode,g,I,G)}C&&$o(_)}else _.stateNode=ee(I,g,C,_)}return cr(_),null;case 13:if(Bt(Un),I=_.memoizedState,Pn&&hs!==null&&(_.mode&1)!==0&&(_.flags&128)===0){for(g=hs;g;)g=de(g);return Nf(),_.flags|=98560,_}if(I!==null&&I.dehydrated!==null){if(I=g0(_),g===null){if(!I)throw Error(o(318));if(!he)throw Error(o(344));if(g=_.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));kt(g,_)}else Nf(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;return cr(_),null}return go!==null&&(a2(go),go=null),(_.flags&128)!==0?(_.lanes=C,_):(I=I!==null,C=!1,g===null?g0(_):C=g.memoizedState!==null,I&&!C&&(_.child.flags|=8192,(_.mode&1)!==0&&(g===null||(Un.current&1)!==0?_i===0&&(_i=3):c2())),_.updateQueue!==null&&(_.flags|=4),cr(_),null);case 4:return Qf(),S0(g,_),g===null&&Ie(_.stateNode.containerInfo),cr(_),null;case 10:return Xo(_.type._context),cr(_),null;case 17:return ti(_.type)&&Al(),cr(_),null;case 19:if(Bt(Un),P=_.memoizedState,P===null)return cr(_),null;if(I=(_.flags&128)!==0,G=P.rendering,G===null)if(I)C0(P,!1);else{if(_i!==0||g!==null&&(g.flags&128)!==0)for(g=_.child;g!==null;){if(G=zg(g),G!==null){for(_.flags|=128,C0(P,!1),g=G.updateQueue,g!==null&&(_.updateQueue=g,_.flags|=4),_.subtreeFlags=0,g=C,I=_.child;I!==null;)C=I,P=g,C.flags&=14680066,G=C.alternate,G===null?(C.childLanes=0,C.lanes=P,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=G.childLanes,C.lanes=G.lanes,C.child=G.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=G.memoizedProps,C.memoizedState=G.memoizedState,C.updateQueue=G.updateQueue,C.type=G.type,P=G.dependencies,C.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),I=I.sibling;return Ht(Un,Un.current&1|2),_.child}g=g.sibling}P.tail!==null&&Rn()>i2&&(_.flags|=128,I=!0,C0(P,!1),_.lanes=4194304)}else{if(!I)if(g=zg(G),g!==null){if(_.flags|=128,I=!0,g=g.updateQueue,g!==null&&(_.updateQueue=g,_.flags|=4),C0(P,!0),P.tail===null&&P.tailMode==="hidden"&&!G.alternate&&!Pn)return cr(_),null}else 2*Rn()-P.renderingStartTime>i2&&C!==1073741824&&(_.flags|=128,I=!0,C0(P,!1),_.lanes=4194304);P.isBackwards?(G.sibling=_.child,_.child=G):(g=P.last,g!==null?g.sibling=G:_.child=G,P.last=G)}return P.tail!==null?(_=P.tail,P.rendering=_,P.tail=_.sibling,P.renderingStartTime=Rn(),_.sibling=null,g=Un.current,Ht(Un,I?g&1|2:g&1),_):(cr(_),null);case 22:case 23:return l2(),I=_.memoizedState!==null,g!==null&&g.memoizedState!==null!==I&&(_.flags|=8192),I&&(_.mode&1)!==0?(ps&1073741824)!==0&&(cr(_),Se&&_.subtreeFlags&6&&(_.flags|=8192)):cr(_),null;case 24:return null;case 25:return null}throw Error(o(156,_.tag))}var UG=a.ReactCurrentOwner,ds=!1;function Pr(g,_,C,I){_.child=g===null?AT(_,null,C,I):zf(_,g.child,C,I)}function VT(g,_,C,I,P){C=C.render;var G=_.ref;return Ti(_,P),I=Lx(g,_,C,I,G,P),C=Fx(),g!==null&&!ds?(_.updateQueue=g.updateQueue,_.flags&=-2053,g.lanes&=~P,Da(g,_,P)):(Pn&&C&&bx(_),_.flags|=1,Pr(g,_,I,P),_.child)}function WT(g,_,C,I,P){if(g===null){var G=C.type;return typeof G=="function"&&!u2(G)&&G.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(_.tag=15,_.type=G,jT(g,_,G,I,P)):(g=g1(C.type,null,I,_,_.mode,P),g.ref=_.ref,g.return=_,_.child=g)}if(G=g.child,(g.lanes&P)===0){var te=G.memoizedProps;if(C=C.compare,C=C!==null?C:Fc,C(te,I)&&g.ref===_.ref)return Da(g,_,P)}return _.flags|=1,g=Ml(G,I),g.ref=_.ref,g.return=_,_.child=g}function jT(g,_,C,I,P){if(g!==null&&Fc(g.memoizedProps,I)&&g.ref===_.ref)if(ds=!1,(g.lanes&P)!==0)(g.flags&131072)!==0&&(ds=!0);else return _.lanes=g.lanes,Da(g,_,P);return Gx(g,_,C,I,P)}function qT(g,_,C){var I=_.pendingProps,P=I.children,G=g!==null?g.memoizedState:null;if(I.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null},Ht(Vf,ps),ps|=C;else if((C&1073741824)!==0)_.memoizedState={baseLanes:0,cachePool:null},I=G!==null?G.baseLanes:C,Ht(Vf,ps),ps|=I;else return g=G!==null?G.baseLanes|C:C,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:g,cachePool:null},_.updateQueue=null,Ht(Vf,ps),ps|=g,null;else G!==null?(I=G.baseLanes|C,_.memoizedState=null):I=C,Ht(Vf,ps),ps|=I;return Pr(g,_,P,C),_.child}function YT(g,_){var C=_.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(_.flags|=512,_.flags|=2097152)}function Gx(g,_,C,I,P){var G=ti(C)?Tr:nn.current;return G=ls(_,G),Ti(_,P),C=Lx(g,_,C,I,G,P),I=Fx(),g!==null&&!ds?(_.updateQueue=g.updateQueue,_.flags&=-2053,g.lanes&=~P,Da(g,_,P)):(Pn&&I&&bx(_),_.flags|=1,Pr(g,_,C,P),_.child)}function XT(g,_,C,I,P){if(ti(C)){var G=!0;Wo(_)}else G=!1;if(Ti(_,P),_.stateNode===null)g!==null&&(g.alternate=null,_.alternate=null,_.flags|=2),cT(_,C,I),Ex(_,C,I,P),I=!0;else if(g===null){var te=_.stateNode,le=_.memoizedProps;te.props=le;var Fe=te.context,Xe=C.contextType;typeof Xe=="object"&&Xe!==null?Xe=yn(Xe):(Xe=ti(C)?Tr:nn.current,Xe=ls(_,Xe));var at=C.getDerivedStateFromProps,Lt=typeof at=="function"||typeof te.getSnapshotBeforeUpdate=="function";Lt||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(le!==I||Fe!==Xe)&&uT(_,te,I,Xe),mo=!1;var _t=_.memoizedState;te.state=_t,Fg(_,I,te,P),Fe=_.memoizedState,le!==I||_t!==Fe||ei.current||mo?(typeof at=="function"&&(wx(_,C,at,I),Fe=_.memoizedState),(le=mo||lT(_,C,le,I,_t,Fe,Xe))?(Lt||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(_.flags|=4194308)):(typeof te.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=I,_.memoizedState=Fe),te.props=I,te.state=Fe,te.context=Xe,I=le):(typeof te.componentDidMount=="function"&&(_.flags|=4194308),I=!1)}else{te=_.stateNode,rT(g,_),le=_.memoizedProps,Xe=_.type===_.elementType?le:or(_.type,le),te.props=Xe,Lt=_.pendingProps,_t=te.context,Fe=C.contextType,typeof Fe=="object"&&Fe!==null?Fe=yn(Fe):(Fe=ti(C)?Tr:nn.current,Fe=ls(_,Fe));var xn=C.getDerivedStateFromProps;(at=typeof xn=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(le!==Lt||_t!==Fe)&&uT(_,te,I,Fe),mo=!1,_t=_.memoizedState,te.state=_t,Fg(_,I,te,P);var pt=_.memoizedState;le!==Lt||_t!==pt||ei.current||mo?(typeof xn=="function"&&(wx(_,C,xn,I),pt=_.memoizedState),(Xe=mo||lT(_,C,Xe,I,_t,pt,Fe)||!1)?(at||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(I,pt,Fe),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(I,pt,Fe)),typeof te.componentDidUpdate=="function"&&(_.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof te.componentDidUpdate!="function"||le===g.memoizedProps&&_t===g.memoizedState||(_.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||le===g.memoizedProps&&_t===g.memoizedState||(_.flags|=1024),_.memoizedProps=I,_.memoizedState=pt),te.props=I,te.state=pt,te.context=Fe,I=Xe):(typeof te.componentDidUpdate!="function"||le===g.memoizedProps&&_t===g.memoizedState||(_.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||le===g.memoizedProps&&_t===g.memoizedState||(_.flags|=1024),I=!1)}return Qx(g,_,C,I,G,P)}function Qx(g,_,C,I,P,G){YT(g,_);var te=(_.flags&128)!==0;if(!I&&!te)return P&&Ig(_,C,!1),Da(g,_,G);I=_.stateNode,UG.current=_;var le=te&&typeof C.getDerivedStateFromError!="function"?null:I.render();return _.flags|=1,g!==null&&te?(_.child=zf(_,g.child,null,G),_.child=zf(_,null,le,G)):Pr(g,_,le,G),_.memoizedState=I.state,P&&Ig(_,C,!0),_.child}function JT(g){var _=g.stateNode;_.pendingContext?Tf(g,_.pendingContext,_.pendingContext!==_.context):_.context&&Tf(g,_.context,!1),Tx(g,_.containerInfo)}function KT(g,_,C,I,P){return Nf(),Ix(P),_.flags|=256,Pr(g,_,C,I),_.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function Kg(g){return{baseLanes:g,cachePool:null}}function $T(g,_,C){var I=_.pendingProps,P=Un.current,G=!1,te=(_.flags&128)!==0,le;if((le=te)||(le=g!==null&&g.memoizedState===null?!1:(P&2)!==0),le?(G=!0,_.flags&=-129):(g===null||g.memoizedState!==null)&&(P|=1),Ht(Un,P&1),g===null)return Mx(_),g=_.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((_.mode&1)===0?_.lanes=1:Ai(g)?_.lanes=8:_.lanes=1073741824,null):(P=I.children,g=I.fallback,G?(I=_.mode,G=_.child,P={mode:"hidden",children:P},(I&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=P):G=A1(P,I,0,null),g=Wc(g,I,C,null),G.return=_,g.return=_,G.sibling=g,_.child=G,_.child.memoizedState=Kg(C),_.memoizedState=Jg,g):Hx(_,P));if(P=g.memoizedState,P!==null){if(le=P.dehydrated,le!==null){if(te)return _.flags&256?(_.flags&=-257,$g(g,_,C,Error(o(422)))):_.memoizedState!==null?(_.child=g.child,_.flags|=128,null):(G=I.fallback,P=_.mode,I=A1({mode:"visible",children:I.children},P,0,null),G=Wc(G,P,C,null),G.flags|=2,I.return=_,G.return=_,I.sibling=G,_.child=I,(_.mode&1)!==0&&zf(_,g.child,null,C),_.child.memoizedState=Kg(C),_.memoizedState=Jg,G);if((_.mode&1)===0)_=$g(g,_,C,null);else if(Ai(le))_=$g(g,_,C,Error(o(419)));else if(I=(C&g.childLanes)!==0,ds||I){if(I=ci,I!==null){switch(C&-C){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}I=(G&(I.suspendedLanes|C))!==0?0:G,I!==0&&I!==P.retryLane&&(P.retryLane=I,Vs(g,I,-1))}c2(),_=$g(g,_,C,Error(o(421)))}else On(le)?(_.flags|=128,_.child=g.child,_=KG.bind(null,g),Z(le,_),_=null):(C=P.treeContext,he&&(hs=Ue(le),fs=_,Pn=!0,go=null,m0=!1,C!==null&&(zs[Gs++]=Ba,zs[Gs++]=Ra,zs[Gs++]=Oc,Ba=C.id,Ra=C.overflow,Oc=_)),_=Hx(_,_.pendingProps.children),_.flags|=4096);return _}return G?(I=eB(g,_,I.children,I.fallback,C),G=_.child,P=g.child.memoizedState,G.memoizedState=P===null?Kg(C):{baseLanes:P.baseLanes|C,cachePool:null},G.childLanes=g.childLanes&~C,_.memoizedState=Jg,I):(C=ZT(g,_,I.children,C),_.memoizedState=null,C)}return G?(I=eB(g,_,I.children,I.fallback,C),G=_.child,P=g.child.memoizedState,G.memoizedState=P===null?Kg(C):{baseLanes:P.baseLanes|C,cachePool:null},G.childLanes=g.childLanes&~C,_.memoizedState=Jg,I):(C=ZT(g,_,I.children,C),_.memoizedState=null,C)}function Hx(g,_){return _=A1({mode:"visible",children:_},g.mode,0,null),_.return=g,g.child=_}function ZT(g,_,C,I){var P=g.child;return g=P.sibling,C=Ml(P,{mode:"visible",children:C}),(_.mode&1)===0&&(C.lanes=I),C.return=_,C.sibling=null,g!==null&&(I=_.deletions,I===null?(_.deletions=[g],_.flags|=16):I.push(g)),_.child=C}function eB(g,_,C,I,P){var G=_.mode;g=g.child;var te=g.sibling,le={mode:"hidden",children:C};return(G&1)===0&&_.child!==g?(C=_.child,C.childLanes=0,C.pendingProps=le,_.deletions=null):(C=Ml(g,le),C.subtreeFlags=g.subtreeFlags&14680064),te!==null?I=Ml(te,I):(I=Wc(I,G,P,null),I.flags|=2),I.return=_,C.return=_,C.sibling=I,_.child=C,I}function $g(g,_,C,I){return I!==null&&Ix(I),zf(_,g.child,null,C),g=Hx(_,_.pendingProps.children),g.flags|=2,_.memoizedState=null,g}function tB(g,_,C){g.lanes|=_;var I=g.alternate;I!==null&&(I.lanes|=_),li(g.return,_,C)}function Vx(g,_,C,I,P){var G=g.memoizedState;G===null?g.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:I,tail:C,tailMode:P}:(G.isBackwards=_,G.rendering=null,G.renderingStartTime=0,G.last=I,G.tail=C,G.tailMode=P)}function nB(g,_,C){var I=_.pendingProps,P=I.revealOrder,G=I.tail;if(Pr(g,_,I.children,C),I=Un.current,(I&2)!==0)I=I&1|2,_.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=_.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&tB(g,C,_);else if(g.tag===19)tB(g,C,_);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===_)break e;for(;g.sibling===null;){if(g.return===null||g.return===_)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}I&=1}if(Ht(Un,I),(_.mode&1)===0)_.memoizedState=null;else switch(P){case"forwards":for(C=_.child,P=null;C!==null;)g=C.alternate,g!==null&&zg(g)===null&&(P=C),C=C.sibling;C=P,C===null?(P=_.child,_.child=null):(P=C.sibling,C.sibling=null),Vx(_,!1,P,C,G);break;case"backwards":for(C=null,P=_.child,_.child=null;P!==null;){if(g=P.alternate,g!==null&&zg(g)===null){_.child=P;break}g=P.sibling,P.sibling=C,C=P,P=g}Vx(_,!0,C,null,G);break;case"together":Vx(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Da(g,_,C){if(g!==null&&(_.dependencies=g.dependencies),Wf|=_.lanes,(C&_.childLanes)===0)return null;if(g!==null&&_.child!==g.child)throw Error(o(153));if(_.child!==null){for(g=_.child,C=Ml(g,g.pendingProps),_.child=C,C.return=_;g.sibling!==null;)g=g.sibling,C=C.sibling=Ml(g,g.pendingProps),C.return=_;C.sibling=null}return _.child}function NG(g,_,C){switch(_.tag){case 3:JT(_),Nf();break;case 5:vT(_);break;case 1:ti(_.type)&&Wo(_);break;case 4:Tx(_,_.stateNode.containerInfo);break;case 10:Dg(_,_.type._context,_.memoizedProps.value);break;case 13:var I=_.memoizedState;if(I!==null)return I.dehydrated!==null?(Ht(Un,Un.current&1),_.flags|=128,null):(C&_.child.childLanes)!==0?$T(g,_,C):(Ht(Un,Un.current&1),g=Da(g,_,C),g!==null?g.sibling:null);Ht(Un,Un.current&1);break;case 19:if(I=(C&_.childLanes)!==0,(g.flags&128)!==0){if(I)return nB(g,_,C);_.flags|=128}var P=_.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Ht(Un,Un.current),I)break;return null;case 22:case 23:return _.lanes=0,qT(g,_,C)}return Da(g,_,C)}function zG(g,_){switch(Sx(_),_.tag){case 1:return ti(_.type)&&Al(),g=_.flags,g&65536?(_.flags=g&-65537|128,_):null;case 3:return Qf(),Bt(ei),Bt(nn),Px(),g=_.flags,(g&65536)!==0&&(g&128)===0?(_.flags=g&-65537|128,_):null;case 5:return Bx(_),null;case 13:if(Bt(Un),g=_.memoizedState,g!==null&&g.dehydrated!==null){if(_.alternate===null)throw Error(o(340));Nf()}return g=_.flags,g&65536?(_.flags=g&-65537|128,_):null;case 19:return Bt(Un),null;case 4:return Qf(),null;case 10:return Xo(_.type._context),null;case 22:case 23:return l2(),null;case 24:return null;default:return null}}var Zg=!1,zc=!1,GG=typeof WeakSet=="function"?WeakSet:Set,nt=null;function e1(g,_){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(I){Xr(g,_,I)}else C.current=null}function Wx(g,_,C){try{C()}catch(I){Xr(g,_,I)}}var iB=!1;function QG(g,_){for(U(g.containerInfo),nt=_;nt!==null;)if(g=nt,_=g.child,(g.subtreeFlags&1028)!==0&&_!==null)_.return=g,nt=_;else for(;nt!==null;){g=nt;try{var C=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var I=C.memoizedProps,P=C.memoizedState,G=g.stateNode,te=G.getSnapshotBeforeUpdate(g.elementType===g.type?I:or(g.type,I),P);G.__reactInternalSnapshotBeforeUpdate=te}break;case 3:Se&&ft(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(le){Xr(g,g.return,le)}if(_=g.sibling,_!==null){_.return=g.return,nt=_;break}nt=g.return}return C=iB,iB=!1,C}function Gc(g,_,C){var I=_.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var P=I=I.next;do{if((P.tag&g)===g){var G=P.destroy;P.destroy=void 0,G!==void 0&&Wx(_,C,G)}P=P.next}while(P!==I)}}function M0(g,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&g)===g){var I=C.create;C.destroy=I()}C=C.next}while(C!==_)}}function jx(g){var _=g.ref;if(_!==null){var C=g.stateNode;switch(g.tag){case 5:g=q(C);break;default:g=C}typeof _=="function"?_(g):_.current=g}}function rB(g,_,C){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(yl,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(g=_.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var I=g=g.next;do{var P=I,G=P.destroy;P=P.tag,G!==void 0&&((P&2)!==0||(P&4)!==0)&&Wx(_,C,G),I=I.next}while(I!==g)}break;case 1:if(e1(_,C),g=_.stateNode,typeof g.componentWillUnmount=="function")try{g.props=_.memoizedProps,g.state=_.memoizedState,g.componentWillUnmount()}catch(te){Xr(_,C,te)}break;case 5:e1(_,C);break;case 4:Se?uB(g,_,C):oe&&oe&&(_=_.stateNode.containerInfo,C=cn(_),un(_,C))}}function sB(g,_,C){for(var I=_;;)if(rB(g,I,C),I.child===null||Se&&I.tag===4){if(I===_)break;for(;I.sibling===null;){if(I.return===null||I.return===_)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function oB(g){var _=g.alternate;_!==null&&(g.alternate=null,oB(_)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(_=g.stateNode,_!==null&&qe(_)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function aB(g){return g.tag===5||g.tag===3||g.tag===4}function lB(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||aB(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function cB(g){if(Se){e:{for(var _=g.return;_!==null;){if(aB(_))break e;_=_.return}throw Error(o(160))}var C=_;switch(C.tag){case 5:_=C.stateNode,C.flags&32&&(se(_),C.flags&=-33),C=lB(g),Yx(g,C,_);break;case 3:case 4:_=C.stateNode.containerInfo,C=lB(g),qx(g,C,_);break;default:throw Error(o(161))}}}function qx(g,_,C){var I=g.tag;if(I===5||I===6)g=g.stateNode,_?Ce(C,g,_):De(C,g);else if(I!==4&&(g=g.child,g!==null))for(qx(g,_,C),g=g.sibling;g!==null;)qx(g,_,C),g=g.sibling}function Yx(g,_,C){var I=g.tag;if(I===5||I===6)g=g.stateNode,_?_e(C,g,_):be(C,g);else if(I!==4&&(g=g.child,g!==null))for(Yx(g,_,C),g=g.sibling;g!==null;)Yx(g,_,C),g=g.sibling}function uB(g,_,C){for(var I=_,P=!1,G,te;;){if(!P){P=I.return;e:for(;;){if(P===null)throw Error(o(160));switch(G=P.stateNode,P.tag){case 5:te=!1;break e;case 3:G=G.containerInfo,te=!0;break e;case 4:G=G.containerInfo,te=!0;break e}P=P.return}P=!0}if(I.tag===5||I.tag===6)sB(g,I,C),te?tt(G,I.stateNode):ke(G,I.stateNode);else if(I.tag===18)te?_n(G,I.stateNode):Jt(G,I.stateNode);else if(I.tag===4){if(I.child!==null){G=I.stateNode.containerInfo,te=!0,I.child.return=I,I=I.child;continue}}else if(rB(g,I,C),I.child!==null){I.child.return=I,I=I.child;continue}if(I===_)break;for(;I.sibling===null;){if(I.return===null||I.return===_)return;I=I.return,I.tag===4&&(P=!1)}I.sibling.return=I.return,I=I.sibling}}function Xx(g,_){if(Se){switch(_.tag){case 0:case 11:case 14:case 15:Gc(3,_,_.return),M0(3,_),Gc(5,_,_.return);return;case 1:return;case 5:var C=_.stateNode;if(C!=null){var I=_.memoizedProps;g=g!==null?g.memoizedProps:I;var P=_.type,G=_.updateQueue;_.updateQueue=null,G!==null&&ie(C,G,P,g,I,_)}return;case 6:if(_.stateNode===null)throw Error(o(162));C=_.memoizedProps,me(_.stateNode,g!==null?g.memoizedProps:C,C);return;case 3:he&&g!==null&&g.memoizedState.isDehydrated&&Xt(_.stateNode.containerInfo);return;case 12:return;case 13:t1(_);return;case 19:t1(_);return;case 17:return}throw Error(o(163))}switch(_.tag){case 0:case 11:case 14:case 15:Gc(3,_,_.return),M0(3,_),Gc(5,_,_.return);return;case 12:return;case 13:t1(_);return;case 19:t1(_);return;case 3:he&&g!==null&&g.memoizedState.isDehydrated&&Xt(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(oe){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,un(_.containerInfo,_.pendingChildren);break e}throw Error(o(163))}}function t1(g){var _=g.updateQueue;if(_!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new GG),_.forEach(function(I){var P=$G.bind(null,g,I);C.has(I)||(C.add(I),I.then(P,P))})}}function HG(g,_){for(nt=_;nt!==null;){_=nt;var C=_.deletions;if(C!==null)for(var I=0;I<C.length;I++){var P=C[I];try{var G=g;Se?uB(G,P,_):sB(G,P,_);var te=P.alternate;te!==null&&(te.return=null),P.return=null}catch(dt){Xr(P,_,dt)}}if(C=_.child,(_.subtreeFlags&12854)!==0&&C!==null)C.return=_,nt=C;else for(;nt!==null;){_=nt;try{var le=_.flags;if(le&32&&Se&&se(_.stateNode),le&512){var Fe=_.alternate;if(Fe!==null){var Xe=Fe.ref;Xe!==null&&(typeof Xe=="function"?Xe(null):Xe.current=null)}}if(le&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var at=_.alternate;(at===null||at.memoizedState===null)&&(n2=Rn())}break;case 22:var Lt=_.memoizedState!==null,_t=_.alternate,xn=_t!==null&&_t.memoizedState!==null;if(C=_,Se){e:if(I=C,P=Lt,G=null,Se)for(var pt=I;;){if(pt.tag===5){if(G===null){G=pt;var ur=pt.stateNode;P?Je(ur):Ee(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if(G===null){var js=pt.stateNode;P?Qe(js):We(js,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===I)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===I)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===I)break e;G===pt&&(G=null),pt=pt.return}G===pt&&(G=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(Lt&&!xn&&(C.mode&1)!==0){nt=C;for(var we=C.child;we!==null;){for(C=nt=we;nt!==null;){I=nt;var fe=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Gc(4,I,I.return);break;case 1:e1(I,I.return);var Be=I.stateNode;if(typeof Be.componentWillUnmount=="function"){var rt=I.return;try{Be.props=I.memoizedProps,Be.state=I.memoizedState,Be.componentWillUnmount()}catch(dt){Xr(I,rt,dt)}}break;case 5:e1(I,I.return);break;case 22:if(I.memoizedState!==null){dB(C);continue}}fe!==null?(fe.return=I,nt=fe):dB(C)}we=we.sibling}}}switch(le&4102){case 2:cB(_),_.flags&=-3;break;case 6:cB(_),_.flags&=-3,Xx(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,Xx(_.alternate,_);break;case 4:Xx(_.alternate,_)}}catch(dt){Xr(_,_.return,dt)}if(C=_.sibling,C!==null){C.return=_.return,nt=C;break}nt=_.return}}}function VG(g,_,C){nt=g,fB(g)}function fB(g,_,C){for(var I=(g.mode&1)!==0;nt!==null;){var P=nt,G=P.child;if(P.tag===22&&I){var te=P.memoizedState!==null||Zg;if(!te){var le=P.alternate,Fe=le!==null&&le.memoizedState!==null||zc;le=Zg;var Xe=zc;if(Zg=te,(zc=Fe)&&!Xe)for(nt=P;nt!==null;)te=nt,Fe=te.child,te.tag===22&&te.memoizedState!==null?pB(P):Fe!==null?(Fe.return=te,nt=Fe):pB(P);for(;G!==null;)nt=G,fB(G),G=G.sibling;nt=P,Zg=le,zc=Xe}hB(g)}else(P.subtreeFlags&8772)!==0&&G!==null?(G.return=P,nt=G):hB(g)}}function hB(g){for(;nt!==null;){var _=nt;if((_.flags&8772)!==0){var C=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:zc||M0(5,_);break;case 1:var I=_.stateNode;if(_.flags&4&&!zc)if(C===null)I.componentDidMount();else{var P=_.elementType===_.type?C.memoizedProps:or(_.type,C.memoizedProps);I.componentDidUpdate(P,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var G=_.updateQueue;G!==null&&oT(_,G,I);break;case 3:var te=_.updateQueue;if(te!==null){if(C=null,_.child!==null)switch(_.child.tag){case 5:C=q(_.child.stateNode);break;case 1:C=_.child.stateNode}oT(_,te,C)}break;case 5:var le=_.stateNode;C===null&&_.flags&4&&je(le,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(he&&_.memoizedState===null){var Fe=_.alternate;if(Fe!==null){var Xe=Fe.memoizedState;if(Xe!==null){var at=Xe.dehydrated;at!==null&&Qt(at)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}zc||_.flags&512&&jx(_)}catch(Lt){Xr(_,_.return,Lt)}}if(_===g){nt=null;break}if(C=_.sibling,C!==null){C.return=_.return,nt=C;break}nt=_.return}}function dB(g){for(;nt!==null;){var _=nt;if(_===g){nt=null;break}var C=_.sibling;if(C!==null){C.return=_.return,nt=C;break}nt=_.return}}function pB(g){for(;nt!==null;){var _=nt;try{switch(_.tag){case 0:case 11:case 15:var C=_.return;try{M0(4,_)}catch(Fe){Xr(_,C,Fe)}break;case 1:var I=_.stateNode;if(typeof I.componentDidMount=="function"){var P=_.return;try{I.componentDidMount()}catch(Fe){Xr(_,P,Fe)}}var G=_.return;try{jx(_)}catch(Fe){Xr(_,G,Fe)}break;case 5:var te=_.return;try{jx(_)}catch(Fe){Xr(_,te,Fe)}}}catch(Fe){Xr(_,_.return,Fe)}if(_===g){nt=null;break}var le=_.sibling;if(le!==null){le.return=_.return,nt=le;break}nt=_.return}}var n1=0,i1=1,r1=2,s1=3,o1=4;if(typeof Symbol=="function"&&Symbol.for){var I0=Symbol.for;n1=I0("selector.component"),i1=I0("selector.has_pseudo_class"),r1=I0("selector.role"),s1=I0("selector.test_id"),o1=I0("selector.text")}function Jx(g){var _=Re(g);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(o(364));return _}if(g=Pe(g),g===null)throw Error(o(362));return g.stateNode.current}function Kx(g,_){switch(_.$$typeof){case n1:if(g.type===_.value)return!0;break;case i1:e:{_=_.value,g=[g,0];for(var C=0;C<g.length;){var I=g[C++],P=g[C++],G=_[P];if(I.tag!==5||!ne(I)){for(;G!=null&&Kx(I,G);)P++,G=_[P];if(P===_.length){_=!0;break e}else for(I=I.child;I!==null;)g.push(I,P),I=I.sibling}}_=!1}return _;case r1:if(g.tag===5&&ue(g.stateNode,_.value))return!0;break;case o1:if((g.tag===5||g.tag===6)&&(g=W(g),g!==null&&0<=g.indexOf(_.value)))return!0;break;case s1:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function $x(g){switch(g.$$typeof){case n1:return"<"+(M(g.value)||"Unknown")+">";case i1:return":has("+($x(g)||"")+")";case r1:return'[role="'+g.value+'"]';case o1:return'"'+g.value+'"';case s1:return'[data-testname="'+g.value+'"]';default:throw Error(o(365))}}function mB(g,_){var C=[];g=[g,0];for(var I=0;I<g.length;){var P=g[I++],G=g[I++],te=_[G];if(P.tag!==5||!ne(P)){for(;te!=null&&Kx(P,te);)G++,te=_[G];if(G===_.length)C.push(P);else for(P=P.child;P!==null;)g.push(P,G),P=P.sibling}}return C}function Zx(g,_){if(!Ve)throw Error(o(363));g=Jx(g),g=mB(g,_),_=[],g=Array.from(g);for(var C=0;C<g.length;){var I=g[C++];if(I.tag===5)ne(I)||_.push(I.stateNode);else for(I=I.child;I!==null;)g.push(I),I=I.sibling}return _}var WG=Math.ceil,a1=a.ReactCurrentDispatcher,e2=a.ReactCurrentOwner,ni=a.ReactCurrentBatchConfig,Vt=0,ci=null,ui=null,ji=0,ps=0,Vf=Wi(0),_i=0,T0=null,Wf=0,l1=0,t2=0,B0=null,qr=null,n2=0,i2=1/0;function jf(){i2=Rn()+500}var c1=!1,r2=null,El=null,u1=!1,bl=null,f1=0,R0=0,s2=null,h1=-1,d1=0;function Dr(){return(Vt&6)!==0?Rn():h1!==-1?h1:h1=Rn()}function Sl(g){return(g.mode&1)===0?1:(Vt&2)!==0&&ji!==0?ji&-ji:Lc.transition!==null?(d1===0&&(g=ba,ba<<=1,(ba&4194240)===0&&(ba=64),d1=g),d1):(g=jt,g!==0?g:Te())}function Vs(g,_,C){if(50<R0)throw R0=0,s2=null,Error(o(185));var I=p1(g,_);return I===null?null:(jo(I,_,C),((Vt&2)===0||I!==ci)&&(I===ci&&((Vt&2)===0&&(l1|=_),_i===4&&Cl(I,ji)),Yr(I,C),_===1&&Vt===0&&(g.mode&1)===0&&(jf(),Yo&&jr())),I)}function p1(g,_){g.lanes|=_;var C=g.alternate;for(C!==null&&(C.lanes|=_),C=g,g=g.return;g!==null;)g.childLanes|=_,C=g.alternate,C!==null&&(C.childLanes|=_),C=g,g=g.return;return C.tag===3?C.stateNode:null}function Yr(g,_){var C=g.callbackNode;l0(g,_);var I=Dc(g,g===ci?ji:0);if(I===0)C!==null&&Df(C),g.callbackNode=null,g.callbackPriority=0;else if(_=I&-I,g.callbackPriority!==_){if(C!=null&&Df(C),_===1)g.tag===0?p0(AB.bind(null,g)):d0(AB.bind(null,g)),ye?Oe(function(){Vt===0&&jr()}):Ia(_l,jr),C=null;else{switch(c0(I)){case 1:C=_l;break;case 4:C=Pg;break;case 16:C=Br;break;case 536870912:C=f0;break;default:C=Br}C=CB(C,gB.bind(null,g))}g.callbackPriority=_,g.callbackNode=C}}function gB(g,_){if(h1=-1,d1=0,(Vt&6)!==0)throw Error(o(327));var C=g.callbackNode;if(Vc()&&g.callbackNode!==C)return null;var I=Dc(g,g===ci?ji:0);if(I===0)return null;if((I&30)!==0||(I&g.expiredLanes)!==0||_)_=m1(g,I);else{_=I;var P=Vt;Vt|=2;var G=yB();(ci!==g||ji!==_)&&(jf(),Qc(g,_));do try{YG();break}catch(le){_B(g,le)}while(1);kf(),a1.current=G,Vt=P,ui!==null?_=0:(ci=null,ji=0,_=_i)}if(_!==0){if(_===2&&(P=Ma(g),P!==0&&(I=P,_=o2(g,P))),_===1)throw C=T0,Qc(g,0),Cl(g,I),Yr(g,Rn()),C;if(_===6)Cl(g,I);else{if(P=g.current.alternate,(I&30)===0&&!jG(P)&&(_=m1(g,I),_===2&&(G=Ma(g),G!==0&&(I=G,_=o2(g,G))),_===1))throw C=T0,Qc(g,0),Cl(g,I),Yr(g,Rn()),C;switch(g.finishedWork=P,g.finishedLanes=I,_){case 0:case 1:throw Error(o(345));case 2:Hc(g,qr);break;case 3:if(Cl(g,I),(I&130023424)===I&&(_=n2+500-Rn(),10<_)){if(Dc(g,0)!==0)break;if(P=g.suspendedLanes,(P&I)!==I){Dr(),g.pingedLanes|=g.suspendedLanes&P;break}g.timeoutHandle=ae(Hc.bind(null,g,qr),_);break}Hc(g,qr);break;case 4:if(Cl(g,I),(I&4194240)===I)break;for(_=g.eventTimes,P=-1;0<I;){var te=31-sr(I);G=1<<te,te=_[te],te>P&&(P=te),I&=~G}if(I=P,I=Rn()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*WG(I/1960))-I,10<I){g.timeoutHandle=ae(Hc.bind(null,g,qr),I);break}Hc(g,qr);break;case 5:Hc(g,qr);break;default:throw Error(o(329))}}}return Yr(g,Rn()),g.callbackNode===C?gB.bind(null,g):null}function o2(g,_){var C=B0;return g.current.memoizedState.isDehydrated&&(Qc(g,_).flags|=256),g=m1(g,_),g!==2&&(_=qr,qr=C,_!==null&&a2(_)),g}function a2(g){qr===null?qr=g:qr.push.apply(qr,g)}function jG(g){for(var _=g;;){if(_.flags&16384){var C=_.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var I=0;I<C.length;I++){var P=C[I],G=P.getSnapshot;P=P.value;try{if(!us(G(),P))return!1}catch{return!1}}}if(C=_.child,_.subtreeFlags&16384&&C!==null)C.return=_,_=C;else{if(_===g)break;for(;_.sibling===null;){if(_.return===null||_.return===g)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Cl(g,_){for(_&=~t2,_&=~l1,g.suspendedLanes|=_,g.pingedLanes&=~_,g=g.expirationTimes;0<_;){var C=31-sr(_),I=1<<C;g[C]=-1,_&=~I}}function AB(g){if((Vt&6)!==0)throw Error(o(327));Vc();var _=Dc(g,0);if((_&1)===0)return Yr(g,Rn()),null;var C=m1(g,_);if(g.tag!==0&&C===2){var I=Ma(g);I!==0&&(_=I,C=o2(g,I))}if(C===1)throw C=T0,Qc(g,0),Cl(g,_),Yr(g,Rn()),C;if(C===6)throw Error(o(345));return g.finishedWork=g.current.alternate,g.finishedLanes=_,Hc(g,qr),Yr(g,Rn()),null}function vB(g){bl!==null&&bl.tag===0&&(Vt&6)===0&&Vc();var _=Vt;Vt|=1;var C=ni.transition,I=jt;try{if(ni.transition=null,jt=1,g)return g()}finally{jt=I,ni.transition=C,Vt=_,(Vt&6)===0&&jr()}}function l2(){ps=Vf.current,Bt(Vf)}function Qc(g,_){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==ge&&(g.timeoutHandle=ge,ce(C)),ui!==null)for(C=ui.return;C!==null;){var I=C;switch(Sx(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Al();break;case 3:Qf(),Bt(ei),Bt(nn),Px();break;case 5:Bx(I);break;case 4:Qf();break;case 13:Bt(Un);break;case 19:Bt(Un);break;case 10:Xo(I.type._context);break;case 22:case 23:l2()}C=C.return}if(ci=g,ui=g=Ml(g.current,null),ji=ps=_,_i=0,T0=null,t2=l1=Wf=0,qr=B0=null,vi!==null){for(_=0;_<vi.length;_++)if(C=vi[_],I=C.interleaved,I!==null){C.interleaved=null;var P=I.next,G=C.pending;if(G!==null){var te=G.next;G.next=P,I.next=te}C.pending=I}vi=null}return g}function _B(g,_){do{var C=ui;try{if(kf(),Gg.current=qg,Qg){for(var I=Yn.memoizedState;I!==null;){var P=I.queue;P!==null&&(P.pending=null),I=I.next}Qg=!1}if(Hf=0,Bi=ar=Yn=null,y0=!1,x0=0,e2.current=null,C===null||C.return===null){_i=1,T0=_,ui=null;break}e:{var G=g,te=C.return,le=C,Fe=_;if(_=ji,le.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var Xe=Fe,at=le,Lt=at.tag;if((at.mode&1)===0&&(Lt===0||Lt===11||Lt===15)){var _t=at.alternate;_t?(at.updateQueue=_t.updateQueue,at.memoizedState=_t.memoizedState,at.lanes=_t.lanes):(at.updateQueue=null,at.memoizedState=null)}var xn=zT(te);if(xn!==null){xn.flags&=-257,GT(xn,te,le,G,_),xn.mode&1&&NT(G,Xe,_),_=xn,Fe=Xe;var pt=_.updateQueue;if(pt===null){var ur=new Set;ur.add(Fe),_.updateQueue=ur}else pt.add(Fe);break e}else{if((_&1)===0){NT(G,Xe,_),c2();break e}Fe=Error(o(426))}}else if(Pn&&le.mode&1){var js=zT(te);if(js!==null){(js.flags&65536)===0&&(js.flags|=256),GT(js,te,le,G,_),Ix(Fe);break e}}G=Fe,_i!==4&&(_i=2),B0===null?B0=[G]:B0.push(G),Fe=Nx(Fe,le),le=te;do{switch(le.tag){case 3:le.flags|=65536,_&=-_,le.lanes|=_;var we=OT(le,Fe,_);sT(le,we);break e;case 1:G=Fe;var fe=le.type,Be=le.stateNode;if((le.flags&128)===0&&(typeof fe.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(El===null||!El.has(Be)))){le.flags|=65536,_&=-_,le.lanes|=_;var rt=UT(le,G,_);sT(le,rt);break e}}le=le.return}while(le!==null)}wB(C)}catch(dt){_=dt,ui===C&&C!==null&&(ui=C=C.return);continue}break}while(1)}function yB(){var g=a1.current;return a1.current=qg,g===null?qg:g}function c2(){(_i===0||_i===3||_i===2)&&(_i=4),ci===null||(Wf&268435455)===0&&(l1&268435455)===0||Cl(ci,ji)}function m1(g,_){var C=Vt;Vt|=2;var I=yB();ci===g&&ji===_||Qc(g,_);do try{qG();break}catch(P){_B(g,P)}while(1);if(kf(),Vt=C,a1.current=I,ui!==null)throw Error(o(261));return ci=null,ji=0,_i}function qG(){for(;ui!==null;)xB(ui)}function YG(){for(;ui!==null&&!u0();)xB(ui)}function xB(g){var _=SB(g.alternate,g,ps);g.memoizedProps=g.pendingProps,_===null?wB(g):ui=_,e2.current=null}function wB(g){var _=g;do{var C=_.alternate;if(g=_.return,(_.flags&32768)===0){if(C=OG(C,_,ps),C!==null){ui=C;return}}else{if(C=zG(C,_),C!==null){C.flags&=32767,ui=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{_i=6,ui=null;return}}if(_=_.sibling,_!==null){ui=_;return}ui=_=g}while(_!==null);_i===0&&(_i=5)}function Hc(g,_){var C=jt,I=ni.transition;try{ni.transition=null,jt=1,XG(g,_,C)}finally{ni.transition=I,jt=C}return null}function XG(g,_,C){do Vc();while(bl!==null);if((Vt&6)!==0)throw Error(o(327));var I=g.finishedWork,P=g.finishedLanes;if(I===null)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(o(177));g.callbackNode=null,g.callbackPriority=0;var G=I.lanes|I.childLanes;if(vl(g,G),g===ci&&(ui=ci=null,ji=0),(I.subtreeFlags&2064)===0&&(I.flags&2064)===0||u1||(u1=!0,CB(Br,function(){return Vc(),null})),G=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||G){G=ni.transition,ni.transition=null;var te=jt;jt=1;var le=Vt;Vt|=4,e2.current=null,QG(g,I),HG(g,I),Q(g.containerInfo),g.current=I,VG(I),Rg(),Vt=le,jt=te,ni.transition=G}else g.current=I;if(u1&&(u1=!1,bl=g,f1=P),G=g.pendingLanes,G===0&&(El=null),h0(I.stateNode),Yr(g,Rn()),_!==null)for(C=g.onRecoverableError,I=0;I<_.length;I++)C(_[I]);if(c1)throw c1=!1,g=r2,r2=null,g;return(f1&1)!==0&&g.tag!==0&&Vc(),G=g.pendingLanes,(G&1)!==0?g===s2?R0++:(R0=0,s2=g):R0=0,jr(),null}function Vc(){if(bl!==null){var g=c0(f1),_=ni.transition,C=jt;try{if(ni.transition=null,jt=16>g?16:g,bl===null)var I=!1;else{if(g=bl,bl=null,f1=0,(Vt&6)!==0)throw Error(o(331));var P=Vt;for(Vt|=4,nt=g.current;nt!==null;){var G=nt,te=G.child;if((nt.flags&16)!==0){var le=G.deletions;if(le!==null){for(var Fe=0;Fe<le.length;Fe++){var Xe=le[Fe];for(nt=Xe;nt!==null;){var at=nt;switch(at.tag){case 0:case 11:case 15:Gc(8,at,G)}var Lt=at.child;if(Lt!==null)Lt.return=at,nt=Lt;else for(;nt!==null;){at=nt;var _t=at.sibling,xn=at.return;if(oB(at),at===Xe){nt=null;break}if(_t!==null){_t.return=xn,nt=_t;break}nt=xn}}}var pt=G.alternate;if(pt!==null){var ur=pt.child;if(ur!==null){pt.child=null;do{var js=ur.sibling;ur.sibling=null,ur=js}while(ur!==null)}}nt=G}}if((G.subtreeFlags&2064)!==0&&te!==null)te.return=G,nt=te;else e:for(;nt!==null;){if(G=nt,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:Gc(9,G,G.return)}var we=G.sibling;if(we!==null){we.return=G.return,nt=we;break e}nt=G.return}}var fe=g.current;for(nt=fe;nt!==null;){te=nt;var Be=te.child;if((te.subtreeFlags&2064)!==0&&Be!==null)Be.return=te,nt=Be;else e:for(te=fe;nt!==null;){if(le=nt,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:M0(9,le)}}catch(dt){Xr(le,le.return,dt)}if(le===te){nt=null;break e}var rt=le.sibling;if(rt!==null){rt.return=le.return,nt=rt;break e}nt=le.return}}if(Vt=P,jr(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(yl,g)}catch{}I=!0}return I}finally{jt=C,ni.transition=_}}return!1}function EB(g,_,C){_=Nx(C,_),_=OT(g,_,1),wl(g,_),_=Dr(),g=p1(g,1),g!==null&&(jo(g,1,_),Yr(g,_))}function Xr(g,_,C){if(g.tag===3)EB(g,g,C);else for(;_!==null;){if(_.tag===3){EB(_,g,C);break}else if(_.tag===1){var I=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(El===null||!El.has(I))){g=Nx(C,g),g=UT(_,g,1),wl(_,g),g=Dr(),_=p1(_,1),_!==null&&(jo(_,1,g),Yr(_,g));break}}_=_.return}}function JG(g,_,C){var I=g.pingCache;I!==null&&I.delete(_),_=Dr(),g.pingedLanes|=g.suspendedLanes&C,ci===g&&(ji&C)===C&&(_i===4||_i===3&&(ji&130023424)===ji&&500>Rn()-n2?Qc(g,0):t2|=C),Yr(g,_)}function bB(g,_){_===0&&((g.mode&1)===0?_=1:(_=Sa,Sa<<=1,(Sa&130023424)===0&&(Sa=4194304)));var C=Dr();g=p1(g,_),g!==null&&(jo(g,_,C),Yr(g,C))}function KG(g){var _=g.memoizedState,C=0;_!==null&&(C=_.retryLane),bB(g,C)}function $G(g,_){var C=0;switch(g.tag){case 13:var I=g.stateNode,P=g.memoizedState;P!==null&&(C=P.retryLane);break;case 19:I=g.stateNode;break;default:throw Error(o(314))}I!==null&&I.delete(_),bB(g,C)}var SB;SB=function(g,_,C){if(g!==null)if(g.memoizedProps!==_.pendingProps||ei.current)ds=!0;else{if((g.lanes&C)===0&&(_.flags&128)===0)return ds=!1,NG(g,_,C);ds=(g.flags&131072)!==0}else ds=!1,Pn&&(_.flags&1048576)!==0&&fT(_,Ug,_.index);switch(_.lanes=0,_.tag){case 2:var I=_.type;g!==null&&(g.alternate=null,_.alternate=null,_.flags|=2),g=_.pendingProps;var P=ls(_,nn.current);Ti(_,C),P=Lx(null,_,I,g,P,C);var G=Fx();return _.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,ti(I)?(G=!0,Wo(_)):G=!1,_.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,xx(_),P.updater=kg,_.stateNode=P,P._reactInternals=_,Ex(_,I,g,C),_=Qx(null,_,I,!0,G,C)):(_.tag=0,Pn&&G&&bx(_),Pr(null,_,P,C),_=_.child),_;case 16:I=_.elementType;e:{switch(g!==null&&(g.alternate=null,_.alternate=null,_.flags|=2),g=_.pendingProps,P=I._init,I=P(I._payload),_.type=I,P=_.tag=e7(I),g=or(I,g),P){case 0:_=Gx(null,_,I,g,C);break e;case 1:_=XT(null,_,I,g,C);break e;case 11:_=VT(null,_,I,g,C);break e;case 14:_=WT(null,_,I,or(I.type,g),C);break e}throw Error(o(306,I,""))}return _;case 0:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:or(I,P),Gx(g,_,I,P,C);case 1:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:or(I,P),XT(g,_,I,P,C);case 3:e:{if(JT(_),g===null)throw Error(o(387));I=_.pendingProps,G=_.memoizedState,P=G.element,rT(g,_),Fg(_,I,null,C);var te=_.memoizedState;if(I=te.element,he&&G.isDehydrated)if(G={element:I,isDehydrated:!1,cache:te.cache,transitions:te.transitions},_.updateQueue.baseState=G,_.memoizedState=G,_.flags&256){P=Error(o(423)),_=KT(g,_,I,C,P);break e}else if(I!==P){P=Error(o(424)),_=KT(g,_,I,C,P);break e}else for(he&&(hs=pe(_.stateNode.containerInfo),fs=_,Pn=!0,go=null,m0=!1),C=AT(_,null,I,C),_.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Nf(),I===P){_=Da(g,_,C);break e}Pr(g,_,I,C)}_=_.child}return _;case 5:return vT(_),g===null&&Mx(_),I=_.type,P=_.pendingProps,G=g!==null?g.memoizedProps:null,te=P.children,re(I,P)?te=null:G!==null&&re(I,G)&&(_.flags|=32),YT(g,_),Pr(g,_,te,C),_.child;case 6:return g===null&&Mx(_),null;case 13:return $T(g,_,C);case 4:return Tx(_,_.stateNode.containerInfo),I=_.pendingProps,g===null?_.child=zf(_,null,I,C):Pr(g,_,I,C),_.child;case 11:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:or(I,P),VT(g,_,I,P,C);case 7:return Pr(g,_,_.pendingProps,C),_.child;case 8:return Pr(g,_,_.pendingProps.children,C),_.child;case 12:return Pr(g,_,_.pendingProps.children,C),_.child;case 10:e:{if(I=_.type._context,P=_.pendingProps,G=_.memoizedProps,te=P.value,Dg(_,I,te),G!==null)if(us(G.value,te)){if(G.children===P.children&&!ei.current){_=Da(g,_,C);break e}}else for(G=_.child,G!==null&&(G.return=_);G!==null;){var le=G.dependencies;if(le!==null){te=G.child;for(var Fe=le.firstContext;Fe!==null;){if(Fe.context===I){if(G.tag===1){Fe=Ta(-1,C&-C),Fe.tag=2;var Xe=G.updateQueue;if(Xe!==null){Xe=Xe.shared;var at=Xe.pending;at===null?Fe.next=Fe:(Fe.next=at.next,at.next=Fe),Xe.pending=Fe}}G.lanes|=C,Fe=G.alternate,Fe!==null&&(Fe.lanes|=C),li(G.return,C,_),le.lanes|=C;break}Fe=Fe.next}}else if(G.tag===10)te=G.type===_.type?null:G.child;else if(G.tag===18){if(te=G.return,te===null)throw Error(o(341));te.lanes|=C,le=te.alternate,le!==null&&(le.lanes|=C),li(te,C,_),te=G.sibling}else te=G.child;if(te!==null)te.return=G;else for(te=G;te!==null;){if(te===_){te=null;break}if(G=te.sibling,G!==null){G.return=te.return,te=G;break}te=te.return}G=te}Pr(g,_,P.children,C),_=_.child}return _;case 9:return P=_.type,I=_.pendingProps.children,Ti(_,C),P=yn(P),I=I(P),_.flags|=1,Pr(g,_,I,C),_.child;case 14:return I=_.type,P=or(I,_.pendingProps),P=or(I.type,P),WT(g,_,I,P,C);case 15:return jT(g,_,_.type,_.pendingProps,C);case 17:return I=_.type,P=_.pendingProps,P=_.elementType===I?P:or(I,P),g!==null&&(g.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,ti(I)?(g=!0,Wo(_)):g=!1,Ti(_,C),cT(_,I,P),Ex(_,I,P,C),Qx(null,_,I,!0,g,C);case 19:return nB(g,_,C);case 22:return qT(g,_,C)}throw Error(o(156,_.tag))};function CB(g,_){return Ia(g,_)}function ZG(g,_,C,I){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(g,_,C,I){return new ZG(g,_,C,I)}function u2(g){return g=g.prototype,!(!g||!g.isReactComponent)}function e7(g){if(typeof g=="function")return u2(g)?1:0;if(g!=null){if(g=g.$$typeof,g===m)return 11;if(g===y)return 14}return 2}function Ml(g,_){var C=g.alternate;return C===null?(C=Ws(g.tag,_,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=_,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,_=g.dependencies,C.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function g1(g,_,C,I,P,G){var te=2;if(I=g,typeof g=="function")u2(g)&&(te=1);else if(typeof g=="string")te=5;else e:switch(g){case u:return Wc(C.children,P,G,_);case f:te=8,P|=8;break;case h:return g=Ws(12,C,_,P|2),g.elementType=h,g.lanes=G,g;case A:return g=Ws(13,C,_,P),g.elementType=A,g.lanes=G,g;case v:return g=Ws(19,C,_,P),g.elementType=v,g.lanes=G,g;case w:return A1(C,P,G,_);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case d:te=10;break e;case p:te=9;break e;case m:te=11;break e;case y:te=14;break e;case x:te=16,I=null;break e}throw Error(o(130,g==null?g:typeof g,""))}return _=Ws(te,C,_,P),_.elementType=g,_.type=I,_.lanes=G,_}function Wc(g,_,C,I){return g=Ws(7,g,I,_),g.lanes=C,g}function A1(g,_,C,I){return g=Ws(22,g,I,_),g.elementType=w,g.lanes=C,g.stateNode={},g}function f2(g,_,C){return g=Ws(6,g,null,_),g.lanes=C,g}function h2(g,_,C){return _=Ws(4,g.children!==null?g.children:[],g.key,_),_.lanes=C,_.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},_}function t7(g,_,C,I,P){this.tag=_,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ge,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pf(0),this.expirationTimes=Pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pf(0),this.identifierPrefix=I,this.onRecoverableError=P,he&&(this.mutableSourceEagerHydrationData=null)}function MB(g,_,C,I,P,G,te,le,Fe){return g=new t7(g,_,C,le,Fe),_===1?(_=1,G===!0&&(_|=8)):_=0,G=Ws(3,null,null,_),g.current=G,G.stateNode=g,G.memoizedState={element:I,isDehydrated:C,cache:null,transitions:null},xx(G),g}function IB(g){if(!g)return Ir;g=g._reactInternals;e:{if(B(g)!==g||g.tag!==1)throw Error(o(170));var _=g;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(ti(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(o(171))}if(g.tag===1){var C=g.type;if(ti(C))return Bf(g,C,_)}return _}function TB(g){var _=g._reactInternals;if(_===void 0)throw typeof g.render=="function"?Error(o(188)):(g=Object.keys(g).join(","),Error(o(268,g)));return g=D(_),g===null?null:g.stateNode}function BB(g,_){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<_?C:_}}function d2(g,_){BB(g,_),(g=g.alternate)&&BB(g,_)}function n7(g){return g=D(g),g===null?null:g.stateNode}function i7(){return null}return n.attemptContinuousHydration=function(g){if(g.tag===13){var _=Dr();Vs(g,134217728,_),d2(g,134217728)}},n.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var _=Dr(),C=Sl(g);Vs(g,C,_),d2(g,C)}},n.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var _=g.stateNode;if(_.current.memoizedState.isDehydrated){var C=Ca(_.pendingLanes);C!==0&&(qo(_,C|1),Yr(_,Rn()),(Vt&6)===0&&(jf(),jr()))}break;case 13:var I=Dr();vB(function(){return Vs(g,1,I)}),d2(g,1)}},n.batchedUpdates=function(g,_){var C=Vt;Vt|=1;try{return g(_)}finally{Vt=C,Vt===0&&(jf(),Yo&&jr())}},n.createComponentSelector=function(g){return{$$typeof:n1,value:g}},n.createContainer=function(g,_,C,I,P,G,te){return MB(g,_,!1,null,C,I,P,G,te)},n.createHasPseudoClassSelector=function(g){return{$$typeof:i1,value:g}},n.createHydrationContainer=function(g,_,C,I,P,G,te,le,Fe){return g=MB(C,I,!0,g,P,G,te,le,Fe),g.context=IB(null),C=g.current,I=Dr(),P=Sl(C),G=Ta(I,P),G.callback=_!=null?_:null,wl(C,G),g.current.lanes=P,jo(g,P,I),Yr(g,I),g},n.createPortal=function(g,_,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:g,containerInfo:_,implementation:C}},n.createRoleSelector=function(g){return{$$typeof:r1,value:g}},n.createTestNameSelector=function(g){return{$$typeof:s1,value:g}},n.createTextSelector=function(g){return{$$typeof:o1,value:g}},n.deferredUpdates=function(g){var _=jt,C=ni.transition;try{return ni.transition=null,jt=16,g()}finally{jt=_,ni.transition=C}},n.discreteUpdates=function(g,_,C,I,P){var G=jt,te=ni.transition;try{return ni.transition=null,jt=1,g(_,C,I,P)}finally{jt=G,ni.transition=te,Vt===0&&jf()}},n.findAllNodes=Zx,n.findBoundingRects=function(g,_){if(!Ve)throw Error(o(363));_=Zx(g,_),g=[];for(var C=0;C<_.length;C++)g.push(X(_[C]));for(_=g.length-1;0<_;_--){C=g[_];for(var I=C.x,P=I+C.width,G=C.y,te=G+C.height,le=_-1;0<=le;le--)if(_!==le){var Fe=g[le],Xe=Fe.x,at=Xe+Fe.width,Lt=Fe.y,_t=Lt+Fe.height;if(I>=Xe&&G>=Lt&&P<=at&&te<=_t){g.splice(_,1);break}else if(I!==Xe||C.width!==Fe.width||_t<G||Lt>te){if(!(G!==Lt||C.height!==Fe.height||at<I||Xe>P)){Xe>I&&(Fe.width+=Xe-I,Fe.x=I),at<P&&(Fe.width=P-Xe),g.splice(_,1);break}}else{Lt>G&&(Fe.height+=Lt-G,Fe.y=G),_t<te&&(Fe.height=te-Lt),g.splice(_,1);break}}}return g},n.findHostInstance=TB,n.findHostInstanceWithNoPortals=function(g){return g=k(g),g=g!==null?O(g):null,g===null?null:g.stateNode},n.findHostInstanceWithWarning=function(g){return TB(g)},n.flushControlled=function(g){var _=Vt;Vt|=1;var C=ni.transition,I=jt;try{ni.transition=null,jt=1,g()}finally{jt=I,ni.transition=C,Vt=_,Vt===0&&(jf(),jr())}},n.flushPassiveEffects=Vc,n.flushSync=vB,n.focusWithin=function(g,_){if(!Ve)throw Error(o(363));for(g=Jx(g),_=mB(g,_),_=Array.from(_),g=0;g<_.length;){var C=_[g++];if(!ne(C)){if(C.tag===5&&ve(C.stateNode))return!0;for(C=C.child;C!==null;)_.push(C),C=C.sibling}}return!1},n.getCurrentUpdatePriority=function(){return jt},n.getFindAllNodesFailureDescription=function(g,_){if(!Ve)throw Error(o(363));var C=0,I=[];g=[Jx(g),0];for(var P=0;P<g.length;){var G=g[P++],te=g[P++],le=_[te];if((G.tag!==5||!ne(G))&&(Kx(G,le)&&(I.push($x(le)),te++,te>C&&(C=te)),te<_.length))for(G=G.child;G!==null;)g.push(G,te),G=G.sibling}if(C<_.length){for(g=[];C<_.length;C++)g.push($x(_[C]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},n.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return q(g.child.stateNode);default:return g.child.stateNode}},n.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:n7,findFiberByHostInstance:g.findFiberByHostInstance||i7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)g=!0;else{try{yl=_.inject(g),cs=_}catch{}g=!!_.checkDCE}}return g},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(g,_,C,I){if(!Ve)throw Error(o(363));g=Zx(g,_);var P=Ge(g,C,I).disconnect;return{disconnect:function(){P()}}},n.registerMutableSourceForHydration=function(g,_){var C=_._getVersion;C=C(_._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[_,C]:g.mutableSourceEagerHydrationData.push(_,C)},n.runWithPriority=function(g,_){var C=jt;try{return jt=g,_()}finally{jt=C}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(g,_,C,I){var P=_.current,G=Dr(),te=Sl(P);return C=IB(C),_.context===null?_.context=C:_.pendingContext=C,_=Ta(G,te),_.payload={element:g},I=I===void 0?null:I,I!==null&&(_.callback=I),wl(P,_),g=Vs(P,te,G),g!==null&&Lg(g,P,te),te},n};(function(t){t.exports=Dle})(JU);const Lle=TC(JU.exports);var QS={exports:{}},KU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,U){var Q=z.length;z.push(U);e:for(;0<Q;){var H=Q-1>>>1,V=z[H];if(0<r(V,U))z[H]=U,z[Q]=V,Q=H;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var U=z[0],Q=z.pop();if(Q!==U){z[0]=Q;e:for(var H=0,V=z.length,J=V>>>1;H<J;){var j=2*(H+1)-1,re=z[j],ee=j+1,ae=z[ee];if(0>r(re,Q))ee<V&&0>r(ae,re)?(z[H]=ae,z[ee]=Q,H=ee):(z[H]=re,z[j]=Q,H=j);else if(ee<V&&0>r(ae,Q))z[H]=ae,z[ee]=Q,H=ee;else break e}}return U}function r(z,U){var Q=z.sortIndex-U.sortIndex;return Q!==0?Q:z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,m=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var U=n(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=z)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function w(z){if(m=!1,x(z),!p)if(n(l)!==null)p=!0,q(E);else{var U=n(c);U!==null&&K(w,U.startTime-z)}}function E(z,U){p=!1,m&&(m=!1,v(b),b=-1),d=!0;var Q=h;try{for(x(U),f=n(l);f!==null&&(!(f.expirationTime>U)||z&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,h=f.priorityLevel;var V=H(f.expirationTime<=U);U=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(l)&&i(l),x(U)}else i(l);f=n(l)}if(f!==null)var J=!0;else{var j=n(c);j!==null&&K(w,j.startTime-U),J=!1}return J}finally{f=null,h=Q,d=!1}}var S=!1,M=null,b=-1,B=5,T=-1;function k(){return!(t.unstable_now()-T<B)}function D(){if(M!==null){var z=t.unstable_now();T=z;var U=!0;try{U=M(!0,z)}finally{U?N():(S=!1,M=null)}}else S=!1}var N;if(typeof y=="function")N=function(){y(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Y=O.port2;O.port1.onmessage=D,N=function(){Y.postMessage(null)}}else N=function(){A(D,0)};function q(z){M=z,S||(S=!0,N())}function K(z,U){b=A(function(){z(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,q(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var Q=h;h=U;try{return z()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=h;h=z;try{return U()}finally{h=Q}},t.unstable_scheduleCallback=function(z,U,Q){var H=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,z={id:u++,callback:U,priorityLevel:z,startTime:Q,expirationTime:V,sortIndex:-1},Q>H?(z.sortIndex=Q,e(c,z),n(l)===null&&z===n(c)&&(m?(v(b),b=-1):m=!0,K(w,Q-H))):(z.sortIndex=V,e(l,z),p||d||(p=!0,q(E))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var U=h;return function(){var Q=h;h=U;try{return z.apply(this,arguments)}finally{h=Q}}}})(KU);(function(t){t.exports=KU})(QS);function $U(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}const Xa=[];function ZU(t,e,n=!1,i={}){for(const s of Xa)if($U(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,promise:t(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Xa.indexOf(r);s!==-1&&Xa.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Xa.push(r),!n)throw r.promise}const Sf=(t,e,n)=>ZU(t,e,!1,n),Fle=(t,e,n)=>void ZU(t,e,!0,n),kle=t=>{if(t===void 0||t.length===0)Xa.splice(0,Xa.length);else{const e=Xa.find(n=>$U(t,n.keys,n.equal));if(e){const n=Xa.indexOf(e);n!==-1&&Xa.splice(n,1)}}};var Ole=Object.freeze({__proto__:null}),lD,cD;const eN=t=>t&&t.isOrthographicCamera,Ule=t=>t&&t.hasOwnProperty("current"),Zd=typeof window<"u"&&((lD=window.document)!=null&&lD.createElement||((cD=window.navigator)==null?void 0:cD.product)==="ReactNative")?R.exports.useLayoutEffect:R.exports.useEffect;function tN(t){const e=R.exports.useRef(t);return Zd(()=>void(e.current=t),[t]),e}function Nle({set:t}){return Zd(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class nN extends R.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}nN.getDerivedStateFromError=()=>({error:!0});const iN="__default",zle=t=>t&&!!t.memoized&&!!t.changes;function rN(t){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(t)?Math.min(Math.max(t[0],e),t[1]):t}const Th=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Kn={obj:t=>t===Object(t)&&!Kn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Kn.str(t)||Kn.num(t))return t===e;const s=Kn.obj(t);if(s&&i==="reference")return t===e;const o=Kn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;for(a in r?e:t)if(t[a]!==e[a])return!1;if(Kn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function sN(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function oN(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Bh(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function HS(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const uD=/-\d+$/;function tE(t,e,n){if(Kn.str(n)){if(uD.test(n)){const s=n.replace(uD,""),{target:o,key:a}=HS(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=HS(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function fD(t,e,n){var i,r;if(Kn.str(n)){const{target:s,key:o}=HS(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function aN(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=t==null?void 0:t.__r3f)!=null?u:{},h=Object.entries(r),d=[];if(c){const m=Object.keys(l);for(let A=0;A<m.length;A++)r.hasOwnProperty(m[A])||h.unshift([m[A],iN+"remove"])}h.forEach(([m,A])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&m==="object"||Kn.equ(A,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return d.push([m,A,!0,[]]);let y=[];m.includes("-")&&(y=m.split("-")),d.push([m,A,!1,y])});const p={...r};return f.memoizedProps&&f.memoizedProps.args&&(p.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(p.attach=f.memoizedProps.attach),{memoized:p,changes:d}}function nE(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=zle(e)?e:aN(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[p,m,A,v]=c[d],y=t,x=y[p];if(v.length&&(x=v.reduce((w,E)=>w[E],t),!(x&&x.set))){const[w,...E]=v.reverse();y=E.reverse().reduce((S,M)=>S[M],t),p=w}if(m===iN+"remove")if(x&&x.constructor){var f;m=new x.constructor(...(f=l.args)!=null?f:[])}else if(y.constructor){var h;const w=new y.constructor(...(h=y.__r3f.memoizedProps.args)!=null?h:[]);m=w[x],w.dispose&&w.dispose()}else m=0;if(A)m?s.handlers[p]=m:delete s.handlers[p],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Nu)){if(Array.isArray(m))x.fromArray?x.fromArray(m):x.set(...m);else if(x.copy&&m&&m.constructor&&x.constructor.name===m.constructor.name)x.copy(m);else if(m!==void 0){const w=x instanceof ze;!w&&x.setScalar?x.setScalar(m):x instanceof Nu&&m instanceof Nu?x.mask=m.mask:x.set(m),!("ColorManagement"in Id)&&!a.linear&&w&&x.convertSRGBToLinear()}}else y[p]=m,!a.linear&&y[p]instanceof bn&&(y[p].encoding=Nt);Rh(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const d=a.internal.interaction.indexOf(t);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(t)}return c.length&&(r=t.__r3f)!=null&&r.parent&&VS(t),t}function Rh(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function VS(t){t.onUpdate==null||t.onUpdate(t)}function lN(t,e){t.manual||(eN(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Gle(t,e,n){const i=n.pop(),r=n.reduce((s,o)=>s[o],t);return r[i]=e}function iE(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Qle(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Iu.exports.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Iu.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Iu.exports.ContinuousEventPriority;default:return Iu.exports.DefaultEventPriority}}function cN(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function Hle(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{cN(n.capturedMap,e,i,r)})}function uN(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=t.getState(),f=new Set,h=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<d.length;v++){const y=Th(d[v]);y&&(y.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(v){const y=Th(v);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var x;y.events.compute==null||y.events.compute(l,y,(x=y.previousRoot)==null?void 0:x.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(v,!0):[]}let m=d.flatMap(p).sort((v,y)=>{const x=Th(v.object),w=Th(y.object);return!x||!w?0:w.events.priority-x.events.priority||v.distance-y.distance}).filter(v=>{const y=iE(v);return f.has(y)?!1:(f.add(y),!0)});u.events.filter&&(m=u.events.filter(m,u));for(const v of m){let y=v.object;for(;y;){var A;(A=y.__r3f)!=null&&A.eventCount&&h.push({...v,eventObject:y}),y=y.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())h.push(v.intersection);return h}function r(l,c,u,f){const h=t.getState();if(l.length){const d={stopped:!1};for(const p of l){const m=Th(p.object)||h,{raycaster:A,pointer:v,camera:y,internal:x}=m,w=new F(v.x,v.y,0).unproject(y),E=T=>{var k,D;return(k=(D=x.capturedMap.get(T))==null?void 0:D.has(p.eventObject))!=null?k:!1},S=T=>{const k={intersection:p,target:c.target};x.capturedMap.has(T)?x.capturedMap.get(T).set(p.eventObject,k):x.capturedMap.set(T,new Map([[p.eventObject,k]])),c.target.setPointerCapture(T)},M=T=>{const k=x.capturedMap.get(T);k&&cN(x.capturedMap,p.eventObject,k,T)};let b={};for(let T in c){let k=c[T];typeof k!="function"&&(b[T]=k)}let B={...p,...b,pointer:v,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:w,ray:A.ray,camera:y,stopPropagation(){const T="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!T||T.has(p.eventObject))&&(B.stopped=d.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(k=>k.eventObject===p.eventObject))){const k=l.slice(0,l.indexOf(p));s([...k,p])}},target:{hasPointerCapture:E,setPointerCapture:S,releasePointerCapture:M},currentTarget:{hasPointerCapture:E,setPointerCapture:S,releasePointerCapture:M},nativeEvent:c};if(f(B),d.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f,d=h==null?void 0:h.handlers;if(c.hovered.delete(iE(u)),h!=null&&h.eventCount){const p={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&!u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))}}return function(u){const{onPointerMissed:f,internal:h}=t.getState();h.lastEvent.current=u;const d=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",A=i(u,d?n:void 0),v=p?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=A.map(x=>x.eventObject)),p&&!A.length&&v<=2&&(o(u,h.interaction),f&&f(u)),d&&s(A);function y(x){const w=x.eventObject,E=w.__r3f,S=E==null?void 0:E.handlers;if(!!(E!=null&&E.eventCount))if(d){if(S.onPointerOver||S.onPointerEnter||S.onPointerOut||S.onPointerLeave){const M=iE(x),b=h.hovered.get(M);b?b.stopped&&x.stopPropagation():(h.hovered.set(M,x),S.onPointerOver==null||S.onPointerOver(x),S.onPointerEnter==null||S.onPointerEnter(x))}S.onPointerMove==null||S.onPointerMove(x)}else{const M=S[l];M?(!p||h.initialHits.includes(w))&&(o(u,h.interaction.filter(b=>!h.initialHits.includes(b))),M(x)):p&&h.initialHits.includes(w)&&o(u,h.interaction.filter(b=>!h.initialHits.includes(b)))}}r(A,u,v,y)}}return{handlePointer:a}}let WS={},Vr=t=>void(WS={...WS,...t});function Vle(t,e){function n(u,{args:f=[],attach:h,...d},p){let m=`${u[0].toUpperCase()}${u.slice(1)}`,A;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=d.object;A=Bh(v,{type:u,root:p,attach:h,primitive:!0})}else{const v=WS[m];if(!v)throw new Error(`R3F: ${m} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");A=Bh(new v(...f),{type:u,root:p,attach:h,memoizedProps:{args:f}})}return A.__r3f.attach===void 0&&(A instanceof ht?A.__r3f.attach="geometry":A instanceof mi&&(A.__r3f.attach="material")),m!=="inject"&&nE(A,d),A}function i(u,f){let h=!1;if(f){var d,p;(d=f.__r3f)!=null&&d.attach?tE(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),h=!0),h||(p=u.__r3f)==null||p.objects.push(f),f.__r3f||Bh(f,{}),f.__r3f.parent=u,VS(f),Rh(f)}}function r(u,f,h){let d=!1;if(f){var p,m;if((p=f.__r3f)!=null&&p.attach)tE(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const A=u.children.filter(y=>y!==f),v=A.indexOf(h);u.children=[...A.slice(0,v),f,...A.slice(v)],d=!0}d||(m=u.__r3f)==null||m.objects.push(f),f.__r3f||Bh(f,{}),f.__r3f.parent=u,VS(f),Rh(f)}}function s(u,f,h=!1){u&&[...u].forEach(d=>o(f,d,h))}function o(u,f,h){if(f){var d,p,m;if(f.__r3f&&(f.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(w=>w!==f)),(p=f.__r3f)!=null&&p.attach)fD(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var A;u.remove(f),(A=f.__r3f)!=null&&A.root&&Hle(f.__r3f.root,f)}const y=(m=f.__r3f)==null?void 0:m.primitive,x=h===void 0?f.dispose!==null&&!y:h;if(!y){var v;s((v=f.__r3f)==null?void 0:v.objects,f,x),s(f.children,f,x)}f.__r3f&&(delete f.__r3f.root,delete f.__r3f.objects,delete f.__r3f.handlers,delete f.__r3f.memoizedProps,y||delete f.__r3f),x&&f.dispose&&f.type!=="Scene"&&QS.exports.unstable_scheduleCallback(QS.exports.unstable_IdlePriority,()=>{try{f.dispose()}catch{}}),Rh(u)}}function a(u,f,h,d){var p;const m=(p=u.__r3f)==null?void 0:p.parent;if(!m)return;const A=n(f,h,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(A,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(A,v)),u.__r3f.objects=[],o(m,u),i(m,A),A.raycast&&A.__r3f.eventCount&&A.__r3f.root.getState().internal.interaction.push(A),[d,d.alternate].forEach(v=>{v!==null&&(v.stateNode=A,v.ref&&(typeof v.ref=="function"?v.ref(A):v.ref.current=A))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Lle({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const h=u.getState().scene;!h.__r3f||(h.__r3f.root=u,i(h,f))},removeChildFromContainer:(u,f)=>{!f||o(u.getState().scene,f)},insertInContainerBefore:(u,f,h)=>{if(!f||!h)return;const d=u.getState().scene;!d.__r3f||r(d,f,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;const h=(f=u==null?void 0:u.__r3f)!=null?f:{};return Boolean(h.handlers)},prepareUpdate(u,f,h,d){if(u.__r3f.primitive&&d.object&&d.object!==u)return[!0];{const{args:p=[],children:m,...A}=d,{args:v=[],children:y,...x}=h;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((E,S)=>E!==v[S]))return[!0];const w=aN(u,A,x,!0);return w.changes.length?[!1,w]:null}},commitUpdate(u,[f,h],d,p,m,A){f?a(u,d,m,A):nE(u,h)},commitMount(u,f,h,d){var p;const m=(p=u.__r3f)!=null?p:{};u.raycast&&m.handlers&&m.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Bh(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:h,parent:d}=(f=u.__r3f)!=null?f:{};h&&d&&fD(d,u,h),u.isObject3D&&(u.visible=!1),Rh(u)},unhideInstance(u,f){var h;const{attach:d,parent:p}=(h=u.__r3f)!=null?h:{};d&&p&&tE(p,u,d),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Rh(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Iu.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Kn.fun(performance.now)?performance.now:Kn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Kn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Kn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:nE}}const Wle=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],fN=t=>!!(t!=null&&t.render),Td=R.exports.createContext(null),jle=(t,e)=>{const n=Ky((a,l)=>{const c=new F,u=new F,f=new F;function h(v=l().camera,y=u,x=l().size){const{width:w,height:E,top:S,left:M}=x,b=w/E;y instanceof F?f.copy(y):f.set(...y);const B=v.getWorldPosition(c).distanceTo(f);if(eN(v))return{width:w/v.zoom,height:E/v.zoom,top:S,left:M,factor:1,distance:B,aspect:b};{const T=v.fov*Math.PI/180,k=2*Math.tan(T/2)*B,D=k*(w/E);return{width:D,height:k,top:S,left:M,factor:w/D,distance:B,aspect:b}}}let d;const p=v=>a(y=>({performance:{...y.performance,current:v}})),m=new Ae;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(v=1)=>t(l(),v),advance:(v,y)=>e(v,y,l()),legacy:!1,linear:!1,flat:!1,scene:Bh(new ml),controls:null,clock:new Gy,pointer:m,mouse:m,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();d&&clearTimeout(d),v.performance.current!==v.performance.min&&p(v.performance.min),d=setTimeout(()=>p(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:v=>a(y=>({...y,events:{...y.events,...v}})),setSize:(v,y,x,w,E)=>{const S=l().camera,M={width:v,height:y,top:w||0,left:E||0,updateStyle:x};a(b=>({size:M,viewport:{...b.viewport,...h(S,u,M)}}))},setDpr:v=>a(y=>{const x=rN(v);return{viewport:{...y.viewport,dpr:x,initialDpr:y.viewport.initialDpr||x}}}),setFrameloop:(v="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,v!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,y,x)=>{const w=l().internal;return w.priority=w.priority+(y>0?1:0),w.subscribers.push({ref:v,priority:y,store:x}),w.subscribers=w.subscribers.sort((E,S)=>E.priority-S.priority),()=>{const E=l().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(y>0?1:0),E.subscribers=E.subscribers.filter(S=>S.ref!==v))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=n.getState();(l!==r||c.dpr!==s)&&(r=l,s=c.dpr,lN(a,l),u.setPixelRatio(c.dpr),u.setSize(l.width,l.height,l.updateStyle)),a!==o&&(o=a,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function j3(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let CA,hN=new Set,dN=new Set,pN=new Set;const $y=t=>j3(t,hN),q3=t=>j3(t,dN),qle=t=>j3(t,pN);function rE(t,e){if(!!t.size)for(const{callback:n}of t.values())n(e)}function Z0(t,e){switch(t){case"before":return rE(hN,e);case"after":return rE(dN,e);case"tail":return rE(pN,e)}}let sE,oE;function aE(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),sE=e.internal.subscribers,CA=0;CA<sE.length;CA++)oE=sE[CA],oE.ref.current(oE.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Yle(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,Z0("before",l);for(const u of t.values()){var c;r=u.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(n+=aE(l,r))}if(Z0("after",l),n===0)return Z0("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var u;if(!l)return t.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){if(c&&Z0("before",l),u)aE(l,u,f);else for(const h of t.values())aE(l,h.store.getState());c&&Z0("after",l)}return{loop:s,invalidate:o,advance:a}}function Xle(t){const e=R.exports.useRef(null);return Zd(()=>void(e.current=t.current.__r3f),[t]),e}function Zy(){const t=R.exports.useContext(Td);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Me(t=n=>n,e){return Zy()(t,e)}function Ct(t,e=0){const n=Zy(),i=n.getState().internal.subscribe,r=tN(t);return Zd(()=>i(r,e,n),[e,i,n]),null}function Jle(t){return R.exports.useMemo(()=>sN(t),[t])}function mN(t,e){return function(n,...i){const r=new n;return t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,sN(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Mi(t,e,n,i){const r=Array.isArray(e)?e:[e],s=Sf(mN(n,i),[t,...r],{equal:Kn.equ});return Array.isArray(e)?s:s[0]}Mi.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return Fle(mN(n),[t,...i])};Mi.clear=function(t,e){const n=Array.isArray(e)?e:[e];return kle([t,...n])};const lf=new Map,{invalidate:jS,advance:qS}=Yle(lf),{reconciler:Bd,applyProps:Ss}=Vle(lf,Qle),ph={objects:"shallow",strict:!1},Kle=(t,e)=>{const n=typeof t=="function"?t(e):t;return fN(n)?n:new v3({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function $le(t){return t instanceof HTMLCanvasElement}function Zle(t,e){if(e)return e;if($le(t)&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}return{width:0,height:0,top:0,left:0}}function Y3(t){const e=lf.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||jle(jS,qS),o=n||Bd.createContainer(s,Iu.exports.ConcurrentRoot,null,!1,null,"",r,null);e||lf.set(t,{fiber:o,store:s});let a,l=!1;return{configure(c={}){let{gl:u,size:f,events:h,onCreated:d,shadows:p=!1,linear:m=!1,flat:A=!1,legacy:v=!1,orthographic:y=!1,frameloop:x="always",dpr:w=[1,2],performance:E,raycaster:S,camera:M,onPointerMissed:b}=c,B=s.getState(),T=B.gl;B.gl||B.set({gl:T=Kle(u,t)});let k=B.raycaster;k||B.set({raycaster:k=new Kd});const{params:D,...N}=S||{};if(Kn.equ(N,k,ph)||Ss(k,{...N}),Kn.equ(D,k.params,ph)||Ss(k,{params:{...k.params,...D}}),!B.camera){const K=M instanceof yf,z=K?M:y?new Is(0,0,0,0,.1,1e3):new dn(75,0,.1,1e3);K||(z.position.z=5,M&&Ss(z,M),M!=null&&M.rotation||z.lookAt(0,0,0)),B.set({camera:z})}if(!B.xr){const K=(Q,H)=>{const V=s.getState();V.frameloop!=="never"&&qS(Q,!0,V,H)},z=()=>{const Q=s.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?K:null),Q.gl.xr.isPresenting||jS(Q)},U={connect(){const Q=s.getState().gl;Q.xr.addEventListener("sessionstart",z),Q.xr.addEventListener("sessionend",z)},disconnect(){const Q=s.getState().gl;Q.xr.removeEventListener("sessionstart",z),Q.xr.removeEventListener("sessionend",z)}};T.xr&&U.connect(),B.set({xr:U})}if(T.shadowMap){const K=Kn.boo(p);if(K&&T.shadowMap.enabled!==p||!Kn.equ(p,T.shadowMap,ph)){const z=T.shadowMap.enabled;T.shadowMap.enabled=!!p,K?T.shadowMap.type=n3:Object.assign(T.shadowMap,p),z!==T.shadowMap.enabled&&(T.shadowMap.needsUpdate=!0)}}"ColorManagement"in Id&&Gle(Id,v,["ColorManagement","legacyMode"]);const O=m?Ps:Nt,Y=A?Fo:s3;T.outputEncoding!==O&&(T.outputEncoding=O),T.toneMapping!==Y&&(T.toneMapping=Y),B.legacy!==v&&B.set(()=>({legacy:v})),B.linear!==m&&B.set(()=>({linear:m})),B.flat!==A&&B.set(()=>({flat:A})),u&&!Kn.fun(u)&&!fN(u)&&!Kn.equ(u,T,ph)&&Ss(T,u),h&&!B.events.handlers&&B.set({events:h(s)}),w&&B.viewport.dpr!==rN(w)&&B.setDpr(w);const q=Zle(t,f);return Kn.equ(q,B.size,ph)||B.setSize(q.width,q.height,q.updateStyle,q.top,q.left),B.frameloop!==x&&B.setFrameloop(x),B.onPointerMissed||B.set({onPointerMissed:b}),E&&!Kn.equ(E,B.performance,ph)&&B.set(K=>({performance:{...K.performance,...E}})),a=d,l=!0,this},render(c){return l||this.configure(),Bd.updateContainer($(tce,{store:s,children:c,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){X3(t)}}}function ece(t,e,n){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const i=Y3(e);return i.configure(n),i.render(t)}function tce({store:t,children:e,onCreated:n,rootElement:i}){return Zd(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),R.exports.createElement(Td.Provider,{value:t},e)}function X3(t,e){const n=lf.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),Bd.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),oN(r),lf.delete(t),e&&e(t)}catch{}},500)})}}function e0(t,e,n){return $(nce,{children:t,container:e,state:n},e.uuid)}function nce({state:t={},children:e,container:n}){const{events:i,size:r,...s}=t,o=Zy(),[a]=R.exports.useState(()=>new Kd),[l]=R.exports.useState(()=>new Ae),c=R.exports.useCallback((f,h)=>{const d={...f};Object.keys(f).forEach(m=>{(Wle.includes(m)||f[m]!==h[m])&&delete d[m]});let p;if(h&&r){const m=h.camera;p=f.viewport.getCurrentViewport(m,new F,r),m!==f.camera&&lN(m,r)}return{...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...p},...s}},[t]),[u]=R.exports.useState(()=>{const f=o.getState();return Ky((d,p)=>({...f,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:d,get:p,setEvents:m=>d(A=>({...A,events:{...A.events,...m}}))}))});return R.exports.useEffect(()=>{const f=o.subscribe(h=>u.setState(d=>c(h,d)));return()=>{f(),u.destroy()}},[]),R.exports.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),$(Sr,{children:Bd.createPortal(R.exports.createElement(Td.Provider,{value:u},e),u,null)})}Bd.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.exports.version});const ice=R.exports.unstable_act;function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cf.apply(this,arguments)}function YS(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}YS.debounce=YS;var hD=YS;function rce(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=R.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=R.exports.useRef(!1);R.exports.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,d,p]=R.exports.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:x,top:w,width:E,height:S,bottom:M,right:b,x:B,y:T}=l.current.element.getBoundingClientRect(),k={left:x,top:w,width:E,height:S,bottom:M,right:b,x:B,y:T};l.current.element instanceof HTMLElement&&r&&(k.height=l.current.element.offsetHeight,k.width=l.current.element.offsetWidth),Object.freeze(k),f.current&&!lce(l.current.lastBounds,k)&&a(l.current.lastBounds=k)};return[y,u?hD(y,u):y,c?hD(y,c):y]},[a,r,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function A(){!l.current.element||(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const v=y=>{!y||y===l.current.element||(m(),l.current.element=y,l.current.scrollContainers=gN(y),A())};return oce(p,Boolean(n)),sce(d),R.exports.useEffect(()=>{m(),A()},[n,p,d]),R.exports.useEffect(()=>m,[]),[v,o,h]}function sce(t){R.exports.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function oce(t,e){R.exports.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function gN(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...gN(t.parentElement)]}const ace=["x","y","top","bottom","left","right","width","height"],lce=(t,e)=>ace.every(n=>t[n]===e[n]);var cce=Object.defineProperty,uce=Object.defineProperties,fce=Object.getOwnPropertyDescriptors,dD=Object.getOwnPropertySymbols,hce=Object.prototype.hasOwnProperty,dce=Object.prototype.propertyIsEnumerable,pD=(t,e,n)=>e in t?cce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mD=(t,e)=>{for(var n in e||(e={}))hce.call(e,n)&&pD(t,n,e[n]);if(dD)for(var n of dD(e))dce.call(e,n)&&pD(t,n,e[n]);return t},pce=(t,e)=>uce(t,fce(e));function J3(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=J3(i,e,n);if(r)return r;i=i.sibling}}function AN(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const K3=AN(R.exports.createContext(null));class vN extends R.exports.Component{render(){return $(K3.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:mce,ReactCurrentDispatcher:gce}=R.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Ace(){const t=R.exports.useContext(K3);if(!t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.exports.useId();return R.exports.useMemo(()=>{var i;return(i=mce.current)!=null?i:J3(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[t,e])}const ep=[],gD=new WeakMap;function vce(){var t;const e=Ace();ep.splice(0,ep.length),J3(e,!0,n=>{var i;const r=(i=n.type)==null?void 0:i._context;r&&r!==K3&&ep.push(AN(r))});for(const n of ep){const i=(t=gce.current)==null?void 0:t.readContext(n);gD.set(n,i)}return R.exports.useMemo(()=>ep.reduce((n,i)=>r=>R.exports.createElement(n,null,R.exports.createElement(i.Provider,pce(mD({},r),{value:gD.get(i)}))),n=>$(vN,{...mD({},n)})),[])}const lE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _N(t){const{handlePointer:e}=uN(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(lE).reduce((n,i)=>({...n,[i]:e(i)}),{}),connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=lE[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=lE[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const _ce=R.exports.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=_N,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:p,dpr:m,performance:A,raycaster:v,camera:y,onPointerMissed:x,onCreated:w,...E},S){R.exports.useMemo(()=>Vr(Id),[]);const M=vce(),[b,B]=rce({scroll:!0,debounce:{scroll:50,resize:0},...i}),T=R.exports.useRef(null),k=R.exports.useRef(null),[D,N]=R.exports.useState(null);R.exports.useImperativeHandle(S,()=>T.current);const O=tN(x),[Y,q]=R.exports.useState(!1),[K,z]=R.exports.useState(!1);if(Y)throw Y;if(K)throw K;const U=R.exports.useRef(null);return B.width>0&&B.height>0&&D&&(U.current||(U.current=Y3(D)),U.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:p,dpr:m,performance:A,raycaster:v,camera:y,size:B,onPointerMissed:(...H)=>O.current==null?void 0:O.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(a?Ule(a)?a.current:a:k.current),l&&H.setEvents({compute:(V,J)=>{const j=V[l+"X"],re=V[l+"Y"];J.pointer.set(j/J.size.width*2-1,-(re/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),w==null||w(H)}}),U.current.render($(M,{children:$(nN,{set:z,children:$(R.exports.Suspense,{fallback:$(Nle,{set:q}),children:e})})}))),Zd(()=>{N(T.current)},[]),R.exports.useEffect(()=>{if(D)return()=>X3(D)},[D]),$("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:a?"none":"auto",...r},...E,children:$("div",{ref:b,style:{width:"100%",height:"100%"},children:$("canvas",{ref:T,style:{display:"block"},children:n})})})}),yce=R.exports.forwardRef(function(e,n){return $(vN,{children:$(_ce,{...e,ref:n})})}),xce=Object.freeze(Object.defineProperty({__proto__:null,Canvas:yce,events:_N,ReactThreeFiber:Ole,_roots:lf,act:ice,addAfterEffect:q3,addEffect:$y,addTail:qle,advance:qS,applyProps:Ss,context:Td,createEvents:uN,createPortal:e0,createRoot:Y3,dispose:oN,extend:Vr,getRootState:Th,invalidate:jS,reconciler:Bd,render:ece,unmountComponentAtNode:X3,useFrame:Ct,useGraph:Jle,useInstanceHandle:Xle,useLoader:Mi,useStore:Zy,useThree:Me},Symbol.toStringTag,{value:"Module"})),Rc=df(xce);var wce=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Ece=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yN=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&wce(e,t,n);return Ece(e,t),e},bce=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(W3,"__esModule",{value:!0});const XS=yN(Fs()),tp=yN(R.exports),Sce=bce(Bc),xN=Rc,{FaceBufferGeometry:Cce}=XS;(0,xN.extend)({FaceBufferGeometry:Cce});const Mce=(0,tp.forwardRef)((t,e)=>{const{fillMouth:n=!1,fillEyeLeft:i=!1,fillEyeRight:r=!1,fillNeck:s=!1,fullHead:o=!1,children:a,trackerGroup:l}=t,c=tp.default.useRef(),[u,f]=(0,tp.useState)();return(0,tp.useEffect)(()=>{f(o?new XS.FaceMeshLoader().loadFullHeadSimplified({fillMouth:n,fillEyeLeft:i,fillEyeRight:r,fillNeck:s}):new XS.FaceMeshLoader().loadFace({fillMouth:n,fillEyeLeft:i,fillEyeRight:r}))},[n,i,r,s]),(0,xN.useFrame)(()=>{c.current&&l&&l.current&&c.current.updateFromFaceAnchorGroup(l.current)}),u?tp.default.createElement("faceBufferGeometry",Object.assign({args:[u],ref:(0,Sce.default)([c,e])},t),a):null});W3.default=Mce;var $3={},Cf={},wN={},EN={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=function(r){var s,o=new Set,a=function(d,p){var m=typeof d=="function"?d(s):d;if(!Object.is(m,s)){var A=s;s=(p!=null?p:typeof m!="object")?m:Object.assign({},s,m),o.forEach(function(v){return v(s,A)})}},l=function(){return s},c=function(d){return o.add(d),function(){return o.delete(d)}},u=function(){return o.clear()},f={setState:a,getState:l,subscribe:c,destroy:u};return s=r(a,l,f),f},n=function(r){return r?e(r):e};t.default=n})(EN);var bN={exports:{}},SN={},CN={exports:{}},MN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=R.exports;function Ice(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tce=typeof Object.is=="function"?Object.is:Ice,Bce=Rd.useState,Rce=Rd.useEffect,Pce=Rd.useLayoutEffect,Dce=Rd.useDebugValue;function Lce(t,e){var n=e(),i=Bce({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return Pce(function(){r.value=n,r.getSnapshot=e,cE(r)&&s({inst:r})},[t,n,e]),Rce(function(){return cE(r)&&s({inst:r}),t(function(){cE(r)&&s({inst:r})})},[t]),Dce(n),n}function cE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tce(t,n)}catch{return!0}}function Fce(t,e){return e()}var kce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fce:Lce;MN.useSyncExternalStore=Rd.useSyncExternalStore!==void 0?Rd.useSyncExternalStore:kce;(function(t){t.exports=MN})(CN);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=R.exports,Oce=CN.exports;function Uce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nce=typeof Object.is=="function"?Object.is:Uce,zce=Oce.useSyncExternalStore,Gce=ex.useRef,Qce=ex.useEffect,Hce=ex.useMemo,Vce=ex.useDebugValue;SN.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=Gce(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Hce(function(){function l(d){if(!c){if(c=!0,u=d,d=i(d),r!==void 0&&o.hasValue){var p=o.value;if(r(p,d))return f=p}return f=d}if(p=f,Nce(u,d))return p;var m=i(d);return r!==void 0&&r(p,m)?p:(u=d,f=m)}var c=!1,u,f,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,i,r]);var a=zce(t,s[0],s[1]);return Qce(function(){o.hasValue=!0,o.value=a},[a]),Vce(a),a};(function(t){t.exports=SN})(bN);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=EN,n=R.exports,i=bN.exports;function r(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var s=r(e),o=r(i),a=o.default.useSyncExternalStoreWithSelector;function l(h,d,p){d===void 0&&(d=h.getState);var m=a(h.subscribe,h.getState,h.getServerState||h.getState,d,p);return n.useDebugValue(m),m}var c=function(d){var p=typeof d=="function"?s.default(d):d,m=function(v,y){return l(p,v,y)};return Object.assign(m,p),m},u=function(d){return d?c(d):c},f=u;Object.defineProperty(t,"createStore",{enumerable:!0,get:function(){return s.default}}),t.default=f,t.useStore=l,Object.keys(e).forEach(function(h){h!=="default"&&!t.hasOwnProperty(h)&&Object.defineProperty(t,h,{enumerable:!0,get:function(){return e[h]}})})})(wN);var Wce=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cf,"__esModule",{value:!0});const tx=Wce(wN),jce=(0,tx.default)(t=>({object:void 0,set:e=>t({object:e})})),qce=(0,tx.default)(t=>({object:void 0,set:e=>t({object:e})})),Yce=(0,tx.default)(t=>({object:void 0,set:e=>t({object:e})})),Xce=(0,tx.default)(t=>({object:void 0,set:e=>t({object:e})}));Cf.default={camera:jce,imageTracker:qce,instantTracker:Yce,faceTracker:Xce};var Jce=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Kce=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IN=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Jce(e,t,n);return Kce(e,t),e},TN=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($3,"__esModule",{value:!0});const BN=IN(Fs()),uE=IN(R.exports),$ce=Rc,Zce=TN(Bc),AD=TN(Cf),{FaceLandmarkGroup:eue}=BN;(0,$ce.extend)({FaceLandmarkGroup:eue});const tue=(0,uE.forwardRef)((t,e)=>{var n;const{children:i,trackerGroup:r,camera:s,target:o}=t,a=(0,uE.useRef)(),l={camera:AD.default.camera(f=>f),faceTracker:AD.default.faceTracker(f=>f)},c=!((n=r==null?void 0:r.current)===null||n===void 0)&&n.faceTracker?r.current.faceTracker:l.faceTracker.object,u=s!=null&&s.current?s.current:l.camera.object;return!c||!u?null:uE.default.createElement("faceLandmarkGroup",Object.assign({args:[u,c,BN.FaceLandmarkName[o.toUpperCase().replace("-","_")]],ref:(0,Zce.default)([a,e])},t),i)});$3.default=tue;var Z3={},yg={};Object.defineProperty(yg,"__esModule",{value:!0});const nue=R.exports,iue=(t,e)=>{(0,nue.useEffect)(()=>{t&&e!==void 0&&(t.enabled=e)},[t,e])};yg.default=iue;var rue=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),sue=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RN=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&rue(e,t,n);return sue(e,t),e},eI=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Z3,"__esModule",{value:!0});const PN=RN(Fs()),mh=RN(R.exports),oue=Rc,aue=eI(Bc),vD=eI(Cf),lue=eI(yg),{FaceAnchorGroup:cue}=PN;(0,oue.extend)({FaceAnchorGroup:cue});const uue=(0,mh.forwardRef)((t,e)=>{const{camera:n,children:i,useFaceTracker:r,onNotVisible:s,onVisible:o,onNewAnchor:a,pipeline:l,model:c,enabled:u}=t,[f,h]=(0,mh.useState)(),d=mh.default.useRef(),p={camera:vD.default.camera(A=>A),faceTracker:vD.default.faceTracker(A=>A)};(0,mh.useEffect)(()=>{const A=new PN.FaceTracker(l);c?A.loadModel(c):A.loadDefaultModel(),h(A),p.faceTracker.set(A)},[c,l]);const m=n!=null&&n.current?n.current:p.camera.object;return(0,mh.useEffect)(()=>(f&&(r&&r(f),s&&f.onNotVisible.bind(s),o&&f.onVisible.bind(o),a&&f.onVisible.bind(a)),()=>{f&&(s&&f.onNotVisible.unbind(s),o&&f.onVisible.unbind(o),a&&f.onVisible.unbind(a))}),[r,o,s,d,f]),(0,lue.default)(f,u),!f||!m?null:mh.default.createElement("faceAnchorGroup",Object.assign({ref:(0,aue.default)([d,e]),args:[m,f]},t),i)});Z3.default=uue;var tI={},fue=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),hue=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DN=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&fue(e,t,n);return hue(e,t),e},due=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tI,"__esModule",{value:!0});const pue=DN(Fs()),MA=DN(R.exports),mue=due(Bc),gue=Rc,Aue=(0,MA.forwardRef)((t,e)=>{const{children:n,trackerGroup:i}=t,r=MA.default.useRef(),[s]=(0,MA.useState)(new pue.HeadMaskMeshLoader().load());return(0,gue.useFrame)(()=>{r.current&&i&&i.current&&r.current.updateFromFaceAnchorGroup(i.current)}),s?MA.default.createElement("primitive",Object.assign({object:s,ref:(0,mue.default)([r,e])},t),n):null});tI.default=Aue;var nI={},vue=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),_ue=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LN=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&vue(e,t,n);return _ue(e,t),e},iI=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nI,"__esModule",{value:!0});const FN=LN(Fs()),gh=LN(R.exports),yue=Rc,xue=iI(Bc),wue=iI(Cf),Eue=iI(yg),{ImageAnchorGroup:bue}=FN;(0,yue.extend)({ImageAnchorGroup:bue});const Sue=(0,gh.forwardRef)((t,e)=>{const{useImageTracker:n,onNotVisible:i,onNewAnchor:r,onVisible:s,targetImage:o,camera:a,children:l,pipeline:c,enabled:u}=t,f=(0,gh.useRef)(),h=wue.default.camera(A=>A),d=a!=null&&a.current?a.current:h.object,[p,m]=(0,gh.useState)();return(0,gh.useEffect)(()=>{m(new FN.ImageTracker(o,c))},[o,c]),(0,gh.useEffect)(()=>(p&&(n&&n(p),i&&p.onNotVisible.bind(i),r&&p.onNewAnchor.bind(r),s&&p.onVisible.bind(s)),()=>{i&&(p==null||p.onNotVisible.unbind(i)),r&&(p==null||p.onNewAnchor.unbind(r)),s&&(p==null||p.onVisible.unbind(s))}),[n,s,r,i,p]),(0,Eue.default)(p,u),!d||!p?null:gh.default.createElement("imageAnchorGroup",Object.assign({ref:(0,xue.default)([f,e]),args:[d,p]},t),l)});nI.default=Sue;var rI={},sI={};const xg=new F,oI=new F,Cue=new F;function Mue(t,e,n){const i=xg.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function Iue(t,e){const n=xg.setFromMatrixPosition(t.matrixWorld),i=oI.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(Cue);return r.angleTo(s)>Math.PI/2}function Tue(t,e,n,i){const r=xg.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(n.ray.origin)<a}return!0}function Bue(t,e){if(e instanceof Is)return e.zoom;if(e instanceof dn){const n=xg.setFromMatrixPosition(t.matrixWorld),i=oI.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i),o=2*Math.tan(r/2)*s;return 1/o}else return 1}function Rue(t,e,n){if(e instanceof dn||e instanceof Is){const i=xg.setFromMatrixPosition(t.matrixWorld),r=oI.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const JS=t=>Math.abs(t)<1e-10?0:t;function kN(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=JS(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const Pue=(t=>e=>kN(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Due=(t=>(e,n)=>kN(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]),nx=R.exports.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,zIndexRange:d=[16777271,0],calculatePosition:p=Mue,as:m="div",wrapperClass:A,pointerEvents:v="auto",...y},x)=>{const{gl:w,camera:E,scene:S,size:M,raycaster:b,events:B}=Me(),[T]=R.exports.useState(()=>document.createElement(m)),k=R.exports.useRef(),D=R.exports.useRef(null),N=R.exports.useRef(0),O=R.exports.useRef([0,0]),Y=R.exports.useRef(null),q=R.exports.useRef(null),K=(a==null?void 0:a.current)||B.connected||w.domElement.parentNode;R.exports.useLayoutEffect(()=>{if(D.current){const H=k.current=bM(T);if(S.updateMatrixWorld(),u)T.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const V=p(D.current,E,M);T.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${V[0]}px,${V[1]}px,0);transform-origin:0 0;`}return K&&(r?K.prepend(T):K.appendChild(T)),()=>{K&&K.removeChild(T),H.unmount()}}},[K,u]),R.exports.useLayoutEffect(()=>{A&&(T.className=A)},[A]);const z=R.exports.useMemo(()=>u?{position:"absolute",top:0,left:0,width:M.width,height:M.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-M.height/2,left:-M.width/2,width:M.width,height:M.height},...n},[n,s,o,M,u]),U=R.exports.useMemo(()=>({position:"absolute",pointerEvents:v}),[v]);R.exports.useLayoutEffect(()=>{if(u){var H;(H=k.current)==null||H.render($("div",{ref:Y,style:z,children:$("div",{ref:q,style:U,children:$("div",{ref:x,className:i,style:n,children:t})})}))}else{var V;(V=k.current)==null||V.render($("div",{ref:x,style:z,className:i,children:t}))}});const Q=R.exports.useRef(!0);return Ct(()=>{if(D.current){E.updateMatrixWorld(),D.current.updateWorldMatrix(!0,!1);const H=u?O.current:p(D.current,E,M);if(u||Math.abs(N.current-E.zoom)>e||Math.abs(O.current[0]-H[0])>e||Math.abs(O.current[1]-H[1])>e){const V=Iue(D.current,E);let J=!1;typeof f=="boolean"?f===!0&&(J=[S]):Array.isArray(f)&&(J=f.map(re=>re.current));const j=Q.current;if(J){const re=Tue(D.current,E,b,J);Q.current=re&&!V}else Q.current=!V;if(j!==Q.current&&(h?h(!Q.current):T.style.display=Q.current?"block":"none"),T.style.zIndex=`${Rue(D.current,E,d)}`,u){const[re,ee]=[M.width/2,M.height/2],ae=E.projectionMatrix.elements[5]*ee,{isOrthographicCamera:ce,top:ge,left:xe,bottom:Se,right:oe}=E,he=Pue(E.matrixWorldInverse),Re=ce?`scale(${ae})translate(${JS(-(oe+xe)/2)}px,${JS((ge+Se)/2)}px)`:`translateZ(${ae}px)`;let Ie=D.current.matrixWorld;c&&(Ie=E.matrixWorldInverse.clone().transpose().copyPosition(Ie).scale(D.current.scale),Ie.elements[3]=Ie.elements[7]=Ie.elements[11]=0,Ie.elements[15]=1),T.style.width=M.width+"px",T.style.height=M.height+"px",T.style.perspective=ce?"":`${ae}px`,Y.current&&q.current&&(Y.current.style.transform=`${Re}${he}translate(${re}px,${ee}px)`,q.current.style.transform=Due(Ie,1/((l||10)/400)))}else{const re=l===void 0?1:Bue(D.current,E)*l;T.style.transform=`translate3d(${H[0]}px,${H[1]}px,0) scale(${re})`}O.current=H,N.current=E.zoom}}}),$("group",{...y,ref:D})});function Lue({onChanged:t,portal:e,preventDefault:n=!0,scroll:i=!0,keyCode:r=9}){const s=R.exports.useRef(0),o=Me(c=>c.setEvents),a=Me(c=>c.get),l=Me(c=>c.gl);return R.exports.useEffect(()=>{var c;let u=[],f;const h=a().events.filter,d=(c=e==null?void 0:e.current)!==null&&c!==void 0?c:l.domElement.parentNode,p=()=>d&&t&&t(u,Math.round(s.current)%u.length);o({filter:(x,w)=>{let E=[...x];(E.length!==u.length||!u.every(S=>E.map(M=>M.object.uuid).includes(S.object.uuid)))&&(s.current=0,u=E,p()),h&&(E=h(E,w));for(let S=0;S<Math.round(s.current)%E.length;S++){const M=E.shift();E=[...E,M]}return E}});const m=x=>{var w,E;s.current=x(s.current),(w=a().events.handlers)==null||w.onPointerCancel(void 0),(E=a().events.handlers)==null||E.onPointerMove(f),p()},A=x=>{(x.keyCode||x.which===r)&&(n&&x.preventDefault(),u.length>1&&m(w=>w+1))},v=x=>{n&&x.preventDefault();let w=0;x||(x=window.event),x.wheelDelta?w=x.wheelDelta/120:x.detail&&(w=-x.detail/3),u.length>1&&m(E=>Math.abs(E-w))},y=x=>f=x;return document.addEventListener("pointermove",y,{passive:!0}),i&&document.addEventListener("wheel",v),r!==void 0&&document.addEventListener("keydown",A),()=>{o({filter:h}),r!==void 0&&document.removeEventListener("keydown",A),i&&document.removeEventListener("wheel",v),document.removeEventListener("pointermove",y)}},[l,a,o,n,i,r]),null}function Fue(t,e="pointer",n="auto"){R.exports.useEffect(()=>{if(t)return document.body.style.cursor=e,()=>void(document.body.style.cursor=n)},[t])}let np=0;const ON=Ky(t=>(Jh.onStart=(e,n,i)=>{t({active:!0,item:e,loaded:n,total:i,progress:(n-np)/(i-np)*100})},Jh.onLoad=()=>{t({active:!1})},Jh.onError=e=>t(n=>({errors:[...n.errors,e]})),Jh.onProgress=(e,n,i)=>{n===i&&(np=i),t({active:!0,item:e,loaded:n,total:i,progress:(n-np)/(i-np)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),kue=t=>`Loading ${t.toFixed(2)}%`;function Oue({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:i,dataInterpolation:r=kue,initialState:s=o=>o}){const{active:o,progress:a}=ON(),l=R.exports.useRef(0),c=R.exports.useRef(0),u=R.exports.useRef(null),[f,h]=R.exports.useState(s(o));R.exports.useEffect(()=>{let p;return o!==f&&(p=setTimeout(()=>h(o),300)),()=>clearTimeout(p)},[f,o]);const d=R.exports.useCallback(()=>{!u.current||(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=r(l.current),l.current<a&&(c.current=requestAnimationFrame(d)))},[r,a]);return R.exports.useEffect(()=>(d(),()=>cancelAnimationFrame(c.current)),[d]),f?$("div",{style:{...IA.container,opacity:o?1:0,...t},children:$("div",{children:it("div",{style:{...IA.inner,...e},children:[$("div",{style:{...IA.bar,transform:`scaleX(${a/100})`,...n}}),$("span",{ref:u,style:{...IA.data,...i}})]})})}):null}const IA={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},aI=R.exports.createContext(null);function lI(){return R.exports.useContext(aI)}function Uue({eps:t=1e-5,enabled:e=!0,infinite:n,horizontal:i,pages:r=1,distance:s=1,damping:o=4,style:a={},children:l}){const{get:c,setEvents:u,gl:f,size:h,invalidate:d,events:p}=Me(),[m]=R.exports.useState(()=>document.createElement("div")),[A]=R.exports.useState(()=>document.createElement("div")),[v]=R.exports.useState(()=>document.createElement("div")),y=f.domElement.parentNode,x=R.exports.useRef(0),w=R.exports.useMemo(()=>({el:m,eps:t,fill:A,fixed:v,horizontal:i,damping:o,offset:0,delta:0,scroll:x,pages:r,range(M,b,B=0){const T=M-B,k=T+b+B*2;return this.offset<T?0:this.offset>k?1:(this.offset-T)/(k-T)},curve(M,b,B=0){return Math.sin(this.range(M,b,B)*Math.PI)},visible(M,b,B=0){const T=M-B,k=T+b+B*2;return this.offset>=T&&this.offset<=k}}),[t,o,i,r]);R.exports.useEffect(()=>{m.style.position="absolute",m.style.width="100%",m.style.height="100%",m.style[i?"overflowX":"overflowY"]="auto",m.style[i?"overflowY":"overflowX"]="hidden",m.style.top="0px",m.style.left="0px";for(const b in a)m.style[b]=a[b];v.style.position="sticky",v.style.top="0px",v.style.left="0px",v.style.width="100%",v.style.height="100%",v.style.overflow="hidden",m.appendChild(v),A.style.height=i?"100%":`${r*s*100}%`,A.style.width=i?`${r*s*100}%`:"100%",A.style.pointerEvents="none",m.appendChild(A),y.appendChild(m),m[i?"scrollLeft":"scrollTop"]=1;const S=p.connected||f.domElement;requestAnimationFrame(()=>p.connect==null?void 0:p.connect(m));const M=c().events.compute;return u({compute(b,B){const T=b.clientX-y.offsetLeft,k=b.clientY-y.offsetTop;B.pointer.set(T/B.size.width*2-1,-(k/B.size.height)*2+1),B.raycaster.setFromCamera(B.pointer,B.camera)}}),()=>{y.removeChild(m),u({compute:M}),p.connect==null||p.connect(S)}},[r,s,i,m,A,v,y]),R.exports.useEffect(()=>{if(p.connected===m){const S=h[i?"width":"height"],M=m[i?"scrollWidth":"scrollHeight"],b=M-S;let B=0,T=!0,k=!0;const D=()=>{if(!(!e||k)&&(d(),B=m[i?"scrollLeft":"scrollTop"],x.current=B/b,n)){if(!T){if(B>=b){const O=1-w.offset;m[i?"scrollLeft":"scrollTop"]=1,x.current=w.offset=-O,T=!0}else if(B<=0){const O=1+w.offset;m[i?"scrollLeft":"scrollTop"]=M,x.current=w.offset=O,T=!0}}T&&setTimeout(()=>T=!1,40)}};m.addEventListener("scroll",D,{passive:!0}),requestAnimationFrame(()=>k=!1);const N=O=>m.scrollLeft+=O.deltaY/2;return i&&m.addEventListener("wheel",N,{passive:!0}),()=>{m.removeEventListener("scroll",D),i&&m.removeEventListener("wheel",N)}}},[m,p,h,n,w,d,i,e]);let E=0;return Ct((S,M)=>{w.offset=ut.damp(E=w.offset,x.current,o,M),w.delta=ut.damp(w.delta,Math.abs(E-w.offset),o,M),w.delta>t&&d()}),R.exports.createElement(aI.Provider,{value:w},l)}const Nue=R.exports.forwardRef(({children:t},e)=>{const n=R.exports.useRef(null),i=lI(),{width:r,height:s}=Me(o=>o.viewport);return Ct(()=>{n.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,n.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),$("group",{ref:jn([e,n]),children:t})}),zue=R.exports.forwardRef(({children:t,style:e,...n},i)=>{const r=lI(),s=R.exports.useRef(null),{width:o,height:a}=Me(u=>u.size),l=R.exports.useContext(Td),c=R.exports.useMemo(()=>bM(r.fixed),[r.fixed]);return Ct(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(R.exports.createElement("div",cf({ref:jn([i,s]),style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},n),R.exports.createElement(aI.Provider,{value:r},R.exports.createElement(Td.Provider,{value:l},t)))),null}),Gue=R.exports.forwardRef(({html:t,...e},n)=>$(t?zue:Nue,{ref:n,...e}));let cI=Eg();const Dt=t=>wg(t,cI);let uI=Eg();Dt.write=t=>wg(t,uI);let ix=Eg();Dt.onStart=t=>wg(t,ix);let fI=Eg();Dt.onFrame=t=>wg(t,fI);let hI=Eg();Dt.onFinish=t=>wg(t,hI);let ld=[];Dt.setTimeout=(t,e)=>{let n=Dt.now()+e,i=()=>{let s=ld.findIndex(o=>o.cancel==i);~s&&ld.splice(s,1),nc-=~s?1:0},r={time:n,handler:t,cancel:i};return ld.splice(UN(n),0,r),nc+=1,NN(),r};let UN=t=>~(~ld.findIndex(e=>e.time>t)||~ld.length);Dt.cancel=t=>{ix.delete(t),fI.delete(t),hI.delete(t),cI.delete(t),uI.delete(t)};Dt.sync=t=>{KS=!0,Dt.batchedUpdates(t),KS=!1};Dt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Dt.onStart(n)}return i.handler=t,i.cancel=()=>{ix.delete(n),e=null},i};let dI=typeof window<"u"?window.requestAnimationFrame:()=>{};Dt.use=t=>dI=t;Dt.now=typeof performance<"u"?()=>performance.now():Date.now;Dt.batchedUpdates=t=>t();Dt.catch=console.error;Dt.frameLoop="always";Dt.advance=()=>{Dt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):GN()};let tc=-1,nc=0,KS=!1;function wg(t,e){KS?(e.delete(t),t(0)):(e.add(t),NN())}function NN(){tc<0&&(tc=0,Dt.frameLoop!=="demand"&&dI(zN))}function Que(){tc=-1}function zN(){~tc&&(dI(zN),Dt.batchedUpdates(GN))}function GN(){let t=tc;tc=Dt.now();let e=UN(tc);if(e&&(QN(ld.splice(0,e),n=>n.handler()),nc-=e),!nc){Que();return}ix.flush(),cI.flush(t?Math.min(64,tc-t):16.667),fI.flush(),uI.flush(),hI.flush()}function Eg(){let t=new Set,e=t;return{add(n){nc+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return nc-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,nc-=e.size,QN(e,i=>i(n)&&t.add(i)),nc+=t.size,e=t)}}}function QN(t,e){t.forEach(n=>{try{e(n)}catch(i){Dt.catch(i)}})}function $S(){}const Hue=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Ze={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Wa(t,e){if(Ze.arr(t)){if(!Ze.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const hn=(t,e)=>t.forEach(e);function ul(t,e,n){if(Ze.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}const so=t=>Ze.und(t)?[]:Ze.arr(t)?t:[t];function Wp(t,e){if(t.size){const n=Array.from(t);t.clear(),hn(n,e)}}const Sp=(t,...e)=>Wp(t,n=>n(...e)),pI=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let mI,HN,mc=null,VN=!1,gI=$S;const Vue=t=>{t.to&&(HN=t.to),t.now&&(Dt.now=t.now),t.colors!==void 0&&(mc=t.colors),t.skipAnimation!=null&&(VN=t.skipAnimation),t.createStringInterpolator&&(mI=t.createStringInterpolator),t.requestAnimationFrame&&Dt.use(t.requestAnimationFrame),t.batchedUpdates&&(Dt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(gI=t.willAdvance),t.frameLoop&&(Dt.frameLoop=t.frameLoop)};var _a=Object.freeze({__proto__:null,get createStringInterpolator(){return mI},get to(){return HN},get colors(){return mc},get skipAnimation(){return VN},get willAdvance(){return gI},assign:Vue});const jp=new Set;let no=[],fE=[],T_=0;const rx={get idle(){return!jp.size&&!no.length},start(t){T_>t.priority?(jp.add(t),Dt.onStart(Wue)):(WN(t),Dt(ZS))},advance:ZS,sort(t){if(T_)Dt.onFrame(()=>rx.sort(t));else{const e=no.indexOf(t);~e&&(no.splice(e,1),jN(t))}},clear(){no=[],jp.clear()}};function Wue(){jp.forEach(WN),jp.clear(),Dt(ZS)}function WN(t){no.includes(t)||jN(t)}function jN(t){no.splice(jue(no,e=>e.priority>t.priority),0,t)}function ZS(t){const e=fE;for(let n=0;n<no.length;n++){const i=no[n];T_=i.priority,i.idle||(gI(i),i.advance(t),i.idle||e.push(i))}return T_=0,fE=no,fE.length=0,no=e,no.length>0}function jue(t,e){const n=t.findIndex(e);return n<0?t.length:n}const que={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Po="[-+]?\\d*\\.?\\d+",B_=Po+"%";function sx(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Yue=new RegExp("rgb"+sx(Po,Po,Po)),Xue=new RegExp("rgba"+sx(Po,Po,Po,Po)),Jue=new RegExp("hsl"+sx(Po,B_,B_)),Kue=new RegExp("hsla"+sx(Po,B_,B_,Po)),$ue=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Zue=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,efe=/^#([0-9a-fA-F]{6})$/,tfe=/^#([0-9a-fA-F]{8})$/;function nfe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=efe.exec(t))?parseInt(e[1]+"ff",16)>>>0:mc&&mc[t]!==void 0?mc[t]:(e=Yue.exec(t))?(Ah(e[1])<<24|Ah(e[2])<<16|Ah(e[3])<<8|255)>>>0:(e=Xue.exec(t))?(Ah(e[1])<<24|Ah(e[2])<<16|Ah(e[3])<<8|xD(e[4]))>>>0:(e=$ue.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=tfe.exec(t))?parseInt(e[1],16)>>>0:(e=Zue.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Jue.exec(t))?(_D(yD(e[1]),TA(e[2]),TA(e[3]))|255)>>>0:(e=Kue.exec(t))?(_D(yD(e[1]),TA(e[2]),TA(e[3]))|xD(e[4]))>>>0:null}function hE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _D(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=hE(r,i,t+1/3),o=hE(r,i,t),a=hE(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Ah(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function yD(t){return(parseFloat(t)%360+360)%360/360}function xD(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function TA(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function wD(t){let e=nfe(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}const Lm=(t,e,n)=>{if(Ze.fun(t))return t;if(Ze.arr(t))return Lm({range:t,output:e,extrapolate:n});if(Ze.str(t.output[0]))return mI(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=rfe(c,s);return ife(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function ife(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function rfe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}function eC(){return eC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eC.apply(this,arguments)}const Pd=Symbol.for("FluidValue.get"),uf=Symbol.for("FluidValue.observers"),ca=t=>Boolean(t&&t[Pd]),Ks=t=>t&&t[Pd]?t[Pd]():t,ED=t=>t[uf]||null;function sfe(t,e){t.eventObserved?t.eventObserved(e):t(e)}function R_(t,e){let n=t[uf];n&&n.forEach(i=>{sfe(i,e)})}class ofe{constructor(e){if(this[Pd]=void 0,this[uf]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");afe(this,e)}}const afe=(t,e)=>qN(t,Pd,e);function bg(t,e){if(t[Pd]){let n=t[uf];n||qN(t,uf,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function P_(t,e){let n=t[uf];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[uf]=null,t.observerRemoved&&t.observerRemoved(i,e)}}const qN=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Dv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,lfe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,bD=new RegExp(`(${Dv.source})(%|[a-z]+)`,"i"),cfe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ox=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,YN=t=>{const[e,n]=ufe(t);if(!e||pI())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&ox.test(n))return YN(n);if(n)return n}return t},ufe=t=>{const e=ox.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]};let dE;const ffe=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,XN=t=>{dE||(dE=mc?new RegExp(`(${Object.keys(mc).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Ks(s).replace(ox,YN).replace(lfe,wD).replace(dE,wD)),n=e.map(s=>s.match(Dv).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Lm(eC({},t,{output:s})));return s=>{var o;const a=!bD.test(e[0])&&((o=e.find(c=>bD.test(c)))==null?void 0:o.replace(Dv,""));let l=0;return e[0].replace(Dv,()=>`${r[l++](s)}${a||""}`).replace(cfe,ffe)}},AI="react-spring: ",JN=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${AI}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},hfe=JN(console.warn);function dfe(){hfe(`${AI}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const pfe=JN(console.warn);function mfe(){pfe(`${AI}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ax(t){return Ze.str(t)&&(t[0]=="#"||/\d/.test(t)||!pI()&&ox.test(t)||t in(mc||{}))}const vI=pI()?R.exports.useEffect:R.exports.useLayoutEffect,gfe=()=>{const t=R.exports.useRef(!1);return vI(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function KN(){const t=R.exports.useState()[1],e=gfe();return()=>{e.current&&t(Math.random())}}function Afe(t,e){const[n]=R.exports.useState(()=>({inputs:e,result:t()})),i=R.exports.useRef(),r=i.current;let s=r;return s?Boolean(e&&s.inputs&&vfe(e,s.inputs))||(s={inputs:e,result:t()}):s=n,R.exports.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function vfe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const $N=t=>R.exports.useEffect(t,_fe),_fe=[];function SD(t){const e=R.exports.useRef();return R.exports.useEffect(()=>{e.current=t}),e.current}const Fm=Symbol.for("Animated:node"),yfe=t=>!!t&&t[Fm]===t,la=t=>t&&t[Fm],_I=(t,e)=>Hue(t,Fm,e),lx=t=>t&&t[Fm]&&t[Fm].getPayload();class ZN{constructor(){this.payload=void 0,_I(this,this)}getPayload(){return this.payload||[]}}class t0 extends ZN{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Ze.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new t0(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return Ze.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Ze.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Dd extends t0{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Lm({output:[e,e]})}static create(e){return new Dd(e)}getValue(){let e=this._string;return e==null?this._string=this._toString(this._value):e}setValue(e){if(Ze.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Lm({output:[this.getValue(),e]})),this._value=0,super.reset()}}const D_={dependencies:null};class yI extends ZN{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const n={};return ul(this.source,(i,r)=>{yfe(i)?n[r]=i.getValue(e):ca(i)?n[r]=Ks(i):e||(n[r]=i)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&hn(this.payload,e=>e.reset())}_makePayload(e){if(e){const n=new Set;return ul(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){D_.dependencies&&ca(e)&&D_.dependencies.add(e);const n=lx(e);n&&hn(n,i=>this.add(i))}}class xI extends yI{constructor(e){super(e)}static create(e){return new xI(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(xfe)),!0)}}function xfe(t){return(ax(t)?Dd:t0).create(t)}function tC(t){const e=la(t);return e?e.constructor:Ze.arr(t)?xI:ax(t)?Dd:t0}function nC(){return nC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nC.apply(this,arguments)}const CD=(t,e)=>{const n=!Ze.fun(t)||t.prototype&&t.prototype.isReactComponent;return R.exports.forwardRef((i,r)=>{const s=R.exports.useRef(null),o=n&&R.exports.useCallback(p=>{s.current=bfe(r,p)},[r]),[a,l]=Efe(i,e),c=KN(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},f=new wfe(u,l),h=R.exports.useRef();vI(()=>(h.current=f,hn(l,p=>bg(p,f)),()=>{h.current&&(hn(h.current.deps,p=>P_(p,h.current)),Dt.cancel(h.current.update))})),R.exports.useEffect(u,[]),$N(()=>()=>{const p=h.current;hn(p.deps,m=>P_(m,p))});const d=e.getComponentProps(a.getValue());return $(t,{...d,ref:o})})};class wfe{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&Dt.write(this.update)}}function Efe(t,e){const n=new Set;return D_.dependencies=n,t.style&&(t=nC({},t,{style:e.createAnimatedStyle(t.style)})),t=new yI(t),D_.dependencies=null,[t,n]}function bfe(t,e){return t&&(Ze.fun(t)?t(e):t.current=e),e}const MD=Symbol.for("AnimatedComponent"),Sfe=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new yI(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=ID(o)||"Anonymous";return Ze.str(o)?o=s[o]||(s[o]=CD(o,r)):o=o[MD]||(o[MD]=CD(o,r)),o.displayName=`Animated(${a})`,o};return ul(t,(o,a)=>{Ze.arr(t)&&(a=ID(o)),s[a]=s(o)}),{animated:s}},ID=t=>Ze.str(t)?t:t&&Ze.str(t.displayName)?t.displayName:Ze.fun(t)&&t.name||null;function ki(){return ki=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ki.apply(this,arguments)}function mu(t,...e){return Ze.fun(t)?t(...e):t}const qp=(t,e)=>t===!0||!!(e&&t&&(Ze.fun(t)?t(e):so(t).includes(e))),ez=(t,e)=>Ze.obj(t)?e&&t[e]:t,tz=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Cfe=t=>t,wI=(t,e=Cfe)=>{let n=Mfe;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);Ze.und(s)||(i[r]=s)}return i},Mfe=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Ife={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Tfe(t){const e={};let n=0;if(ul(t,(i,r)=>{Ife[r]||(e[r]=i,n++)}),n)return e}function nz(t){const e=Tfe(t);if(e){const n={to:e};return ul(t,(i,r)=>r in e||(n[r]=i)),n}return ki({},t)}function km(t){return t=Ks(t),Ze.arr(t)?t.map(km):ax(t)?_a.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Bfe(t){for(const e in t)return!0;return!1}function iC(t){return Ze.fun(t)||Ze.arr(t)&&Ze.obj(t[0])}function Rfe(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Pfe(t,e){if(e&&t.ref!==e){var n;(n=t.ref)==null||n.delete(t),e.add(t),t.ref=e}}const Dfe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},L_=1.70158,BA=L_*1.525,TD=L_+1,BD=2*Math.PI/3,RD=2*Math.PI/4.5,RA=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Lfe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>TD*t*t*t-L_*t*t,easeOutBack:t=>1+TD*Math.pow(t-1,3)+L_*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((BA+1)*2*t-BA)/2:(Math.pow(2*t-2,2)*((BA+1)*(t*2-2)+BA)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*BD),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*BD)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*RD))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*RD)/2+1,easeInBounce:t=>1-RA(1-t),easeOutBounce:RA,easeInOutBounce:t=>t<.5?(1-RA(1-2*t))/2:(1+RA(2*t-1))/2},rC=ki({},Dfe.default,{mass:1,damping:1,easing:Lfe.linear,clamp:!1});class Ffe{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,rC)}}function kfe(t,e,n){n&&(n=ki({},n),PD(n,e),e=ki({},n,e)),PD(t,e),Object.assign(t,e);for(const o in rC)t[o]==null&&(t[o]=rC[o]);let{mass:i,frequency:r,damping:s}=t;return Ze.und(r)||(r<.01&&(r=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/r,2)*i,t.friction=4*Math.PI*s*i/r),t}function PD(t,e){if(!Ze.und(e.decay))t.duration=void 0;else{const n=!Ze.und(e.tension)||!Ze.und(e.friction);(n||!Ze.und(e.frequency)||!Ze.und(e.damping)||!Ze.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}const DD=[];class Ofe{constructor(){this.changed=!1,this.values=DD,this.toValues=null,this.fromValues=DD,this.to=void 0,this.from=void 0,this.config=new Ffe,this.immediate=!1}}function iz(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,f=qp((l=n.cancel)!=null?l:i==null?void 0:i.cancel,e);if(f)p();else{Ze.und(n.pause)||(r.paused=qp(n.pause,e));let m=i==null?void 0:i.pause;m!==!0&&(m=r.paused||qp(m,e)),c=mu(n.delay||0,e),m?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function h(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),c=u.time-Dt.now()}function d(){c>0&&!_a.skipAnimation?(r.delayed=!0,u=Dt.setTimeout(p,c),r.pauseQueue.add(h),r.timeouts.add(u)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(u),t<=(r.cancelId||0)&&(f=!0);try{s.start(ki({},n,{callId:t,cancel:f}),o)}catch(m){a(m)}}})}const EI=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?cd(t.get()):e.every(n=>n.noop)?rz(t.get()):Io(t.get(),e.every(n=>n.finished)),rz=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Io=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),cd=t=>({value:t,cancelled:!0,finished:!1});function sz(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=wI(e,(A,v)=>v==="onRest"?void 0:A);let u,f;const h=new Promise((A,v)=>(u=A,f=v)),d=A=>{const v=r<=(n.cancelId||0)&&cd(i)||r!==n.asyncId&&Io(i,!1);if(v)throw A.result=v,f(A),A},p=(A,v)=>{const y=new LD,x=new FD;return(async()=>{if(_a.skipAnimation)throw Om(n),x.result=Io(i,!1),f(x),x;d(y);const w=Ze.obj(A)?ki({},A):ki({},v,{to:A});w.parentId=r,ul(c,(S,M)=>{Ze.und(w[M])&&(w[M]=S)});const E=await i.start(w);return d(y),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),E})()};let m;if(_a.skipAnimation)return Om(n),Io(i,!1);try{let A;Ze.arr(t)?A=(async v=>{for(const y of v)await p(y)})(t):A=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([A.then(u),h]),m=Io(i.get(),!0,!1)}catch(A){if(A instanceof LD)m=A.result;else if(A instanceof FD)m=A.result;else throw A}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Ze.fun(o)&&Dt.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Om(t,e){Wp(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class LD extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class FD extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const sC=t=>t instanceof bI;let Ufe=1;class bI extends ofe{constructor(...e){super(...e),this.id=Ufe++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=la(this);return e&&e.getValue()}to(...e){return _a.to(this,e)}interpolate(...e){return dfe(),_a.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){R_(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||rx.sort(this),R_(this,{type:"priority",parent:this,priority:e})}}const ff=Symbol.for("SpringPhase"),oz=1,oC=2,aC=4,pE=t=>(t[ff]&oz)>0,zl=t=>(t[ff]&oC)>0,ip=t=>(t[ff]&aC)>0,kD=(t,e)=>e?t[ff]|=oC|oz:t[ff]&=~oC,OD=(t,e)=>e?t[ff]|=aC:t[ff]&=~aC;class Nfe extends bI{constructor(e,n){if(super(),this.key=void 0,this.animation=new Ofe,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ze.und(e)||!Ze.und(n)){const i=Ze.obj(e)?ki({},e):ki({},n,{from:e});Ze.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(zl(this)||this._state.asyncTo)||ip(this)}get goal(){return Ks(this.animation.to)}get velocity(){const e=la(this);return e instanceof t0?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return pE(this)}get isAnimating(){return zl(this)}get isPaused(){return ip(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=lx(r.to);!a&&ca(r.to)&&(o=so(Ks(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const h=u.constructor==Dd?1:a?a[f].lastPosition:o[f];let d=r.immediate,p=h;if(!d){if(p=u.lastPosition,s.tension<=0){u.done=!0;return}let m=u.elapsedTime+=e;const A=r.fromValues[f],v=u.v0!=null?u.v0:u.v0=Ze.arr(s.velocity)?s.velocity[f]:s.velocity;let y;const x=s.precision||(A==h?.005:Math.min(1,Math.abs(h-A)*.001));if(Ze.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,E=Math.exp(-(1-w)*m);p=A+v/(1-w)*(1-E),d=Math.abs(u.lastPosition-p)<=x,y=v*E}else{y=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||x/10,E=s.clamp?0:s.bounce,S=!Ze.und(E),M=A==h?u.v0>0:A<h;let b,B=!1;const T=1,k=Math.ceil(e/T);for(let D=0;D<k&&(b=Math.abs(y)>w,!(!b&&(d=Math.abs(h-p)<=x,d)));++D){S&&(B=p==h||p>h==M,B&&(y=-y*E,p=h));const N=-s.tension*1e-6*(p-h),O=-s.friction*.001*y,Y=(N+O)/s.mass;y=y+Y*T,p=p+y*T}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,m=u.elapsedTime+=e)),w=(s.progress||0)+m/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),p=A+s.easing(w)*(h-A),y=(p-u.lastPosition)/e,d=w==1}u.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[f].done&&(d=!1),d?u.done=!0:n=!1,u.setValue(p,s.round)&&(i=!0)});const l=la(this),c=l.getValue();if(n){const u=Ks(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return Dt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(zl(this)){const{to:e,config:n}=this.animation;Dt.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let i;return Ze.und(e)?(i=this.queue||[],this.queue=[]):i=[Ze.obj(e)?e:ki({},n,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>EI(this,r))}stop(e){const{to:n}=this.animation;return this._focus(this.get()),Om(this._state,e&&this._lastCallId),Dt.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const n=this.key||"";let{to:i,from:r}=e;i=Ze.obj(i)?i[n]:i,(i==null||iC(i))&&(i=void 0),r=Ze.obj(r)?r[n]:r,r==null&&(r=void 0);const s={to:i,from:r};return pE(this)||(e.reverse&&([i,r]=[r,i]),r=Ks(r),Ze.und(r)?la(this)||this._set(i):this._set(r)),s}_update(e,n){let i=ki({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,wI(i,(l,c)=>/^on/.test(c)?ez(l,r):l)),ND(this,i,"onProps"),sp(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return iz(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{ip(this)||(OD(this,!0),Sp(a.pauseQueue),sp(this,"onPause",Io(this,rp(this,this.animation.to)),this))},resume:()=>{ip(this)&&(OD(this,!1),zl(this)&&this._resume(),Sp(a.resumeQueue),sp(this,"onResume",Io(this,rp(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(n&&l.noop)){const c=az(i);if(c)return this._update(c,!0)}return l})}_merge(e,n,i){if(n.cancel)return this.stop(!0),i(cd(this));const r=!Ze.und(e.to),s=!Ze.und(e.from);if(r||s)if(n.callId>this._lastToId)this._lastToId=n.callId;else return i(cd(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:h=u}=e;s&&!r&&(!n.default||Ze.und(f))&&(f=h),n.reverse&&([f,h]=[h,f]);const d=!Wa(h,u);d&&(l.from=h),h=Ks(h);const p=!Wa(f,c);p&&this._focus(f);const m=iC(n.to),{config:A}=l,{decay:v,velocity:y}=A;(r||s)&&(A.velocity=0),n.config&&!m&&kfe(A,mu(n.config,o),n.config!==a.config?mu(a.config,o):void 0);let x=la(this);if(!x||Ze.und(f))return i(Io(this,!0));const w=Ze.und(n.reset)?s&&!n.default:!Ze.und(h)&&qp(n.reset,o),E=w?h:this.get(),S=km(f),M=Ze.num(S)||Ze.arr(S)||ax(S),b=!m&&(!M||qp(a.immediate||n.immediate,o));if(p){const D=tC(f);if(D!==x.constructor)if(b)x=this._set(S);else throw Error(`Cannot animate between ${x.constructor.name} and ${D.name}, as the "to" prop suggests`)}const B=x.constructor;let T=ca(f),k=!1;if(!T){const D=w||!pE(this)&&d;(p||D)&&(k=Wa(km(E),S),T=!k),(!Wa(l.immediate,b)&&!b||!Wa(A.decay,v)||!Wa(A.velocity,y))&&(T=!0)}if(k&&zl(this)&&(l.changed&&!w?T=!0:T||this._stop(c)),!m&&((T||ca(c))&&(l.values=x.getPayload(),l.toValues=ca(f)?null:B==Dd?[1]:so(S)),l.immediate!=b&&(l.immediate=b,!b&&!w&&this._set(c)),T)){const{onRest:D}=l;hn(Gfe,O=>ND(this,n,O));const N=Io(this,rp(this,c));Sp(this._pendingCalls,N),this._pendingCalls.add(i),l.changed&&Dt.batchedUpdates(()=>{l.changed=!w,D==null||D(N,this),w?mu(a.onRest,N):l.onStart==null||l.onStart(N,this)})}w&&this._set(E),m?i(sz(n.to,n,this._state,this)):T?this._start():zl(this)&&!p?this._pendingCalls.add(i):i(rz(E))}_focus(e){const n=this.animation;e!==n.to&&(ED(this)&&this._detach(),n.to=e,ED(this)&&this._attach())}_attach(){let e=0;const{to:n}=this.animation;ca(n)&&(bg(n,this),sC(n)&&(e=n.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ca(e)&&P_(e,this)}_set(e,n=!0){const i=Ks(e);if(!Ze.und(i)){const r=la(this);if(!r||!Wa(i,r.getValue())){const s=tC(i);!r||r.constructor!=s?_I(this,s.create(i)):r.setValue(i),r&&Dt.batchedUpdates(()=>{this._onChange(i,n)})}}return la(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,sp(this,"onStart",Io(this,rp(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),mu(this.animation.onChange,e,this)),mu(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){const e=this.animation;la(this).reset(Ks(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),zl(this)||(kD(this,!0),ip(this)||this._resume())}_resume(){_a.skipAnimation?this.finish():rx.start(this)}_stop(e,n){if(zl(this)){kD(this,!1);const i=this.animation;hn(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),R_(this,{type:"idle",parent:this});const r=n?cd(this.get()):Io(this.get(),rp(this,e!=null?e:i.to));Sp(this._pendingCalls,r),i.changed&&(i.changed=!1,sp(this,"onRest",r,this))}}}function rp(t,e){const n=km(e),i=km(t.get());return Wa(i,n)}function az(t,e=t.loop,n=t.to){let i=mu(e);if(i){const r=i!==!0&&nz(i),s=(r||t).reverse,o=!r||r.reset;return Um(ki({},t,{loop:e,default:!1,pause:void 0,to:!s||iC(n)?n:void 0,from:o?t.from:void 0,reset:o},r))}}function Um(t){const{to:e,from:n}=t=nz(t),i=new Set;return Ze.obj(e)&&UD(e,i),Ze.obj(n)&&UD(n,i),t.keys=i.size?Array.from(i):null,t}function zfe(t){const e=Um(t);return Ze.und(e.default)&&(e.default=wI(e)),e}function UD(t,e){ul(t,(n,i)=>n!=null&&e.add(i))}const Gfe=["onStart","onRest","onChange","onPause","onResume"];function ND(t,e,n){t.animation[n]=e[n]!==tz(e,n)?ez(e[n],t.key):void 0}function sp(t,e,...n){var i,r,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(s=(o=t.defaultProps)[e])==null||s.call(o,...n)}const Qfe=["onStart","onChange","onRest"];let Hfe=1;class Vfe{constructor(e,n){this.id=Hfe++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start(ki({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,i)=>e[i]=n.get()),e}set(e){for(const n in e){const i=e[n];Ze.und(i)||this.springs[n].set(i)}}update(e){return e&&this.queue.push(Um(e)),this}start(e){let{queue:n}=this;return e?n=so(e).map(Um):this.queue=[],this._flush?this._flush(this,n):(hz(this,n),lC(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const i=this.springs;hn(so(n),r=>i[r].stop(!!e))}else Om(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Ze.und(e))this.start({pause:!0});else{const n=this.springs;hn(so(e),i=>n[i].pause())}return this}resume(e){if(Ze.und(e))this.start({pause:!1});else{const n=this.springs;hn(so(e),i=>n[i].resume())}return this}each(e){ul(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Wp(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&n.size&&Wp(n,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,Wp(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Dt.onFrame(this._onFrame)}}function lC(t,e){return Promise.all(e.map(n=>lz(t,n))).then(n=>EI(t,n))}async function lz(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=Ze.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=Ze.arr(r)||Ze.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):hn(Qfe,m=>{const A=e[m];if(Ze.fun(A)){const v=t._events[m];e[m]=({finished:y,cancelled:x})=>{const w=v.get(A);w?(y||(w.finished=!1),x&&(w.cancelled=!0)):v.set(A,{value:null,finished:y||!1,cancelled:x||!1})},c&&(c[m]=e[m])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,Sp(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),d=e.cancel===!0||tz(e,"cancel")===!0;(u||d&&f.asyncId)&&h.push(iz(++t._lastAsyncId,{props:e,state:f,actions:{pause:$S,resume:$S,start(m,A){d?(Om(f,t._lastAsyncId),A(cd(t))):(m.onRest=a,A(sz(u,m,f,t)))}}})),f.paused&&await new Promise(m=>{f.resumeQueue.add(m)});const p=EI(t,await Promise.all(h));if(o&&p.finished&&!(n&&p.noop)){const m=az(e,o,r);if(m)return hz(t,[m]),lz(t,m,!0)}return l&&Dt.batchedUpdates(()=>l(p,t,t.item)),p}function zD(t,e){const n=ki({},t.springs);return e&&hn(so(e),i=>{Ze.und(i.keys)&&(i=Um(i)),Ze.obj(i.to)||(i=ki({},i,{to:void 0})),fz(n,i,r=>uz(r))}),cz(t,n),n}function cz(t,e){ul(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,bg(n,t))})}function uz(t,e){const n=new Nfe;return n.key=t,e&&bg(n,e),n}function fz(t,e,n){e.keys&&hn(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function hz(t,e){hn(e,n=>{fz(t.springs,n,i=>uz(i,t))})}function Wfe(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}const jfe=["children"],cx=t=>{let{children:e}=t,n=Wfe(t,jfe);const i=R.exports.useContext(F_),r=n.pause||!!i.pause,s=n.immediate||!!i.immediate;n=Afe(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=F_;return $(o,{value:n,children:e})},F_=qfe(cx,{});cx.Provider=F_.Provider;cx.Consumer=F_.Consumer;function qfe(t,e){return Object.assign(t,R.exports.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}const Yfe=()=>{const t=[],e=function(r){mfe();const s=[];return hn(t,(o,a)=>{if(Ze.und(r))s.push(o.start());else{const l=n(r,o,a);l&&s.push(o.start(l))}}),s};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return hn(t,i=>i.pause(...arguments)),this},e.resume=function(){return hn(t,i=>i.resume(...arguments)),this},e.set=function(i){hn(t,r=>r.set(i))},e.start=function(i){const r=[];return hn(t,(s,o)=>{if(Ze.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return hn(t,i=>i.stop(...arguments)),this},e.update=function(i){return hn(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(r,s,o){return Ze.fun(r)?r(o,s):r};return e._getProps=n,e};function Xfe(t,e,n){const i=Ze.fun(e)&&e;i&&!n&&(n=[]);const r=R.exports.useMemo(()=>i||arguments.length==3?Yfe():void 0,[]),s=R.exports.useRef(0),o=KN(),a=R.exports.useMemo(()=>({ctrls:[],queue:[],flush(v,y){const x=zD(v,y);return s.current>0&&!a.queue.length&&!Object.keys(x).some(E=>!v.springs[E])?lC(v,y):new Promise(E=>{cz(v,x),a.queue.push(()=>{E(lC(v,y))}),o()})}}),[]),l=R.exports.useRef([...a.ctrls]),c=[],u=SD(t)||0;R.exports.useMemo(()=>{hn(l.current.slice(t,u),v=>{Rfe(v,r),v.stop(!0)}),l.current.length=t,f(u,t)},[t]),R.exports.useMemo(()=>{f(0,Math.min(u,t))},n);function f(v,y){for(let x=v;x<y;x++){const w=l.current[x]||(l.current[x]=new Vfe(null,a.flush)),E=i?i(x,w):e[x];E&&(c[x]=zfe(E))}}const h=l.current.map((v,y)=>zD(v,c[y])),d=R.exports.useContext(cx),p=SD(d),m=d!==p&&Bfe(d);vI(()=>{s.current++,a.ctrls=l.current;const{queue:v}=a;v.length&&(a.queue=[],hn(v,y=>y())),hn(l.current,(y,x)=>{r==null||r.add(y),m&&y.start({default:d});const w=c[x];w&&(Pfe(y,w.ref),y.ref?y.queue.push(w):y.start(w))})}),$N(()=>()=>{hn(a.ctrls,v=>v.stop(!0))});const A=h.map(v=>ki({},v));return r?[A,r]:A}function Jfe(t,e){const n=Ze.fun(t),[[i],r]=Xfe(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[i,r]:i}let GD;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(GD||(GD={}));class Kfe extends bI{constructor(e,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Lm(...n);const i=this._get(),r=tC(i);_I(this,r.create(i))}advance(e){const n=this._get(),i=this.get();Wa(n,i)||(la(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&QD(this._active)&&mE(this)}_get(){const e=Ze.arr(this.source)?this.source.map(Ks):so(Ks(this.source));return this.calc(...e)}_start(){this.idle&&!QD(this._active)&&(this.idle=!1,hn(lx(this),e=>{e.done=!1}),_a.skipAnimation?(Dt.batchedUpdates(()=>this.advance()),mE(this)):rx.start(this))}_attach(){let e=1;hn(so(this.source),n=>{ca(n)&&bg(n,this),sC(n)&&(n.idle||this._active.add(n),e=Math.max(e,n.priority+1))}),this.priority=e,this._start()}_detach(){hn(so(this.source),e=>{ca(e)&&P_(e,this)}),this._active.clear(),mE(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=so(this.source).reduce((n,i)=>Math.max(n,(sC(i)?i.priority:0)+1),0))}}function $fe(t){return t.idle!==!1}function QD(t){return!t.size||Array.from(t).every($fe)}function mE(t){t.idle||(t.idle=!0,hn(lx(t),e=>{e.done=!0}),R_(t,{type:"idle",parent:t}))}_a.assign({createStringInterpolator:XN,to:(t,e)=>new Kfe(t,e)});const Zfe=["primitive"].concat(Object.keys(Id).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));_a.assign({createStringInterpolator:XN,colors:que,frameLoop:"demand"});$y(()=>{Dt.advance()});const ehe=Sfe(Zfe,{applyAnimatedValues:Ss}),the=ehe.animated;function nhe(t,e,n){return Math.max(e,Math.min(t,n))}const Bn={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function HD(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function VD(t,e,n,i=.15){return i===0?nhe(t,e,n):t<e?-HD(e-t,n-e,i)+e:t>n?+HD(t-n,n-e,i)+n:t}function ihe(t,[e,n],[i,r]){const[[s,o],[a,l]]=t;return[VD(e,s,o,i),VD(n,a,l,r)]}function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Hn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(n),!0).forEach(function(i){hi(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const dz={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function jD(t){return t?t[0].toUpperCase()+t.slice(1):""}const rhe=["enter","leave"];function she(t=!1,e){return t&&!rhe.includes(e)}function ohe(t,e="",n=!1){const i=dz[t],r=i&&i[e]||e;return"on"+jD(t)+jD(r)+(she(n,r)?"Capture":"")}const ahe=["gotpointercapture","lostpointercapture"];function lhe(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const i=ahe.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:n}}function che(t,e=""){const n=dz[t],i=n&&n[e]||e;return t+i}function ux(t){return"touches"in t}function pz(t){return ux(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function uhe(t){return Array.from(t.touches).filter(e=>{var n,i;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(i=n.contains)===null||i===void 0?void 0:i.call(n,e.target))})}function fhe(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function mz(t){return ux(t)?fhe(t)[0]:t}function cC(t,e){const n=e.clientX-t.clientX,i=e.clientY-t.clientY,r=(e.clientX+t.clientX)/2,s=(e.clientY+t.clientY)/2,o=Math.hypot(n,i);return{angle:-(Math.atan2(n,i)*180)/Math.PI,distance:o,origin:[r,s]}}function hhe(t){return uhe(t).map(e=>e.identifier)}function qD(t,e){const[n,i]=Array.from(t.touches).filter(r=>e.includes(r.identifier));return cC(n,i)}function gE(t){const e=mz(t);return ux(t)?e.identifier:e.pointerId}function Ld(t){const e=mz(t);return[e.clientX,e.clientY]}const YD=40,XD=800;function gz(t){let{deltaX:e,deltaY:n,deltaMode:i}=t;return i===1?(e*=YD,n*=YD):i===2&&(e*=XD,n*=XD),[e,n]}function dhe(t){var e,n;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=t.currentTarget;return[(e=i!=null?i:s)!==null&&e!==void 0?e:0,(n=r!=null?r:o)!==null&&n!==void 0?n:0]}function phe(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:i,metaKey:r,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:s})}return e}function k_(t,...e){return typeof t=="function"?t(...e):t}function mhe(){}function ghe(...t){return t.length===0?mhe:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function JD(t,e){return Object.assign({},e,t||{})}const Ahe=32;class Az{constructor(e,n,i){this.ctrl=e,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:i,args:r}=this;n[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,i=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=i.from?k_(i.from,n):n.offset,n.offset=n.lastOffset),n.startTime=n.timeStamp=e.timeStamp}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:i,shared:r}=this;n.args=this.args;let s=0;if(e&&(n.event=e,i.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,phe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const S=n._delta.map(Math.abs);Bn.addTo(n._distance,S)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,c]=i.threshold,{_step:u,values:f}=n;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const h=[0,0];if(i.hasCustomTransform){const[S,M]=f;h[0]=u[0]!==!1?S-u[0]:0,h[1]=u[1]!==!1?M-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const d=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=r[this.ingKey]=n._active,e&&(n.first&&("bounds"in i&&(n._bounds=k_(i.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[m,A]=n.offset,[[v,y],[x,w]]=n._bounds;n.overflow=[m<v?-1:m>y?1:0,A<x?-1:A>w?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const E=n._active?i.rubberband||[0,0]:[0,0];if(n.offset=ihe(n._bounds,n.offset,E),n.delta=Bn.sub(n.offset,d),this.computeMovement(),p&&(!n.last||s>Ahe)){n.delta=Bn.sub(n.offset,d);const S=n.delta.map(Math.abs);Bn.addTo(n.distance,S),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[S[0]/s,S[1]/s])}}emit(){const e=this.state,n=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Hn(Hn(Hn({},n),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function vhe([t,e],n){const i=Math.abs(t),r=Math.abs(e);if(i>r&&i>n)return"x";if(r>i&&r>n)return"y"}class Sg extends Az{constructor(...e){super(...e),hi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Bn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Bn.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,i=this.config;if(!n.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[pz(e)]:i.axisThreshold;n.axis=vhe(n._movement,r)}n._blocked=(i.lockDirection||!!i.axis)&&!n.axis||!!i.axis&&i.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const _he=t=>t,KD=.15,vz={enabled(t=!0){return t},eventOptions(t,e,n){return Hn(Hn({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[KD,KD];case!1:return[0,0];default:return Bn.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Bn.toVector(t)},transform(t,e,n){const i=t||n.shared.transform;return this.hasCustomTransform=!!i,i||_he},threshold(t){return Bn.toVector(t,0)}},yhe=0,Mf=Hn(Hn({},vz),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=yhe){return t},bounds(t={}){if(typeof t=="function")return s=>Mf.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:i=-1/0,bottom:r=1/0}=t;return[[e,n],[i,r]]}}),PA=10,$D={ArrowRight:(t=1)=>[PA*t,0],ArrowLeft:(t=1)=>[-PA*t,0],ArrowUp:(t=1)=>[0,-PA*t],ArrowDown:(t=1)=>[0,PA*t]};class xhe extends Sg{constructor(...e){super(...e),hi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:n.left-i.left+e.offset[0],right:n.right-i.right+e.offset[0],top:n.top-i.top+e.offset[1],bottom:n.bottom-i.bottom+e.offset[1]};e._bounds=Mf.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=gE(e),i._pointerActive=!0,this.computeValues(Ld(e)),this.computeInitial(),n.preventScrollAxis&&pz(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,i=this.config;if(!n._pointerActive||n.type===e.type&&e.timeStamp===n.timeStamp)return;const r=gE(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;const s=Ld(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Bn.sub(s,n._values),this.computeValues(s)),Bn.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,i=this.config;if(!n._active||!n._pointerActive)return;const r=gE(e);if(n._pointerId!==void 0&&r!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,n.tap&&i.filterTaps)n._force=!0;else{const[a,l]=n.direction,[c,u]=n.velocity,[f,h]=n.movement,[d,p]=i.swipe.velocity,[m,A]=i.swipe.distance,v=i.swipe.duration;n.elapsedTime<v&&(Math.abs(c)>d&&Math.abs(f)>m&&(n.swipe[0]=a),Math.abs(u)>p&&Math.abs(h)>A&&(n.swipe[1]=l))}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,i=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,whe(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=$D[e.key];if(n){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=n(r),i._keyboardActive=!0,Bn.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in $D&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function whe(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Cg=typeof window<"u"&&window.document&&window.document.createElement;function Ehe(){return Cg&&"ontouchstart"in window}function ZD(){return Ehe()||Cg&&window.navigator.maxTouchPoints>1}function bhe(){return Cg&&"onpointerdown"in window}function She(){return Cg&&"exitPointerLock"in window.document}function Che(){try{return"constructor"in GestureEvent}catch{return!1}}const to={isBrowser:Cg,gesture:Che(),touch:ZD(),touchscreen:ZD(),pointer:bhe(),pointerLock:She()},Mhe=250,Ihe=180,The=.5,Bhe=50,Rhe=250,eL={mouse:0,touch:0,pen:8},Phe=Hn(Hn({},Mf),{},{device(t,e,{pointer:{touch:n=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&to.pointerLock,to.touch&&n?"touch":this.pointerLock?"mouse":to.pointer&&!r?"pointer":to.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?Mhe:void 0,!(!to.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:i=1}={}}){return this.pointerButtons=i,!this.pointerLock&&this.device==="pointer"&&n},keys(t=!0){return t},threshold(t,e,{filterTaps:n=!1,tapsThreshold:i=3,axis:r=void 0}){const s=Bn.toVector(t,n?i:r?1:0);return this.filterTaps=n,this.tapsThreshold=i,s},swipe({velocity:t=The,distance:e=Bhe,duration:n=Rhe}={}){return{velocity:this.transform(Bn.toVector(t)),distance:this.transform(Bn.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return Ihe;case!1:return 0;default:return t}},axisThreshold(t){return t?Hn(Hn({},eL),t):eL}}),Dhe=30,Lhe=100;class Fhe extends Az{constructor(...e){super(...e),hi(this,"ingKey","pinching"),hi(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:n,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Bn.add(n,i):this.state.offset=[(1+n[0])*i[0],n[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){const e=this.state,[n,i]=e._movement;if(!e.axis){const r=Math.abs(n)*Dhe-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const n=this.state,i=this.ctrl.touchIds;if(n._active&&n._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),n._touchIds=Array.from(i).slice(0,2);const r=qD(e,n._touchIds);this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const n=this.state,i=n._pointerEvents,r=this.ctrl.pointerIds;if(n._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);const s=cC(...Array.from(i.values()));this.pinchStart(e,s)}pinchStart(e,n){const i=this.state;i.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const n=qD(e,this.state._touchIds);this.pinchMove(e,n)}pointerMove(e){const n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;const i=cC(...Array.from(n.values()));this.pinchMove(e,i)}pinchMove(e,n){const i=this.state,r=i._values[1],s=n.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([n.distance,n.angle-360*o]),i.origin=n.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),!!this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),!!n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];const i=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=Bn.sub(n._movement,i),this.compute(e),this.emit()}gestureEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const n=this.config.modifierKey;n&&!e[n]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-gz(e)[1]/Lhe*i.offset[0],0],Bn.addTo(i._movement,i._delta),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){const n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this))),e("wheel","",this.wheel.bind(this),{passive:!1})}}const khe=Hn(Hn({},vz),{},{device(t,e,{shared:n,pointer:{touch:i=!1}={}}){if(n.target&&!to.touch&&to.gesture)return"gesture";if(to.touch&&i)return"touch";if(to.touchscreen){if(to.pointer)return"pointer";if(to.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:i={}}){const r=o=>{const a=JD(k_(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=JD(k_(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Bn.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t}});class Ohe extends Sg{constructor(...e){super(...e),hi(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Ld(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const n=Ld(e),i=this.state;i._delta=Bn.sub(n,i._values),Bn.addTo(i._movement,i._delta),this.computeValues(n),this.compute(e),this.emit()}moveEnd(e){!this.state._active||(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Uhe=Hn(Hn({},Mf),{},{mouseOnly:(t=!0)=>t});class Nhe extends Sg{constructor(...e){super(...e),hi(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const n=this.state,i=dhe(e);n._delta=Bn.sub(i,n._values),Bn.addTo(n._movement,n._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const zhe=Mf;class Ghe extends Sg{constructor(...e){super(...e),hi(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const n=this.state;n._delta=gz(e),Bn.addTo(n._movement,n._delta);const[i,r]=n.overflow,[s,o]=n._delta,[a,l]=n._direction;(i<0&&s>0&&a<0||i>0&&s<0&&a>0)&&(n._movement[0]=n._movementBound[0]),(r<0&&o>0&&l<0||r>0&&o<0&&l>0)&&(n._movement[1]=n._movementBound[1]),this.compute(e),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const Qhe=Mf;class Hhe extends Sg{constructor(...e){super(...e),hi(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Ld(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const n=this.state;if(!n._active)return;n._active=!1;const i=Ld(e);n._movement=n._delta=Bn.sub(i,n._values),this.computeValues(i),this.compute(e),n.delta=n.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const Vhe=Hn(Hn({},Mf),{},{mouseOnly:(t=!0)=>t}),SI=new Map,uC=new Map;function Whe(t){SI.set(t.key,t.engine),uC.set(t.key,t.resolver)}const jhe={key:"drag",engine:xhe,resolver:Phe},qhe={key:"hover",engine:Hhe,resolver:Vhe},Yhe={key:"move",engine:Ohe,resolver:Uhe},Xhe={key:"pinch",engine:Fhe,resolver:khe},Jhe={key:"scroll",engine:Nhe,resolver:zhe},Khe={key:"wheel",engine:Ghe,resolver:Qhe};function $he(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Zhe(t,e){if(t==null)return{};var n=$he(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}const ede={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=to.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},tde=["target","eventOptions","window","enabled","transform"];function Lv(t={},e){const n={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":n[i]=r.call(n,t[i],i,t);break;case"object":n[i]=Lv(t[i],r);break;case"boolean":r&&(n[i]=t[i]);break}return n}function nde(t,e,n={}){const i=t,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=Zhe(i,tde);if(n.shared=Lv({target:r,eventOptions:s,window:o,enabled:a,transform:l},ede),e){const u=uC.get(e);n[e]=Lv(Hn({shared:n.shared},c),u)}else for(const u in c){const f=uC.get(u);f&&(n[u]=Lv(Hn({shared:n.shared},c[u]),f))}return n}class _z{constructor(e,n){hi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,i,r,s){const o=this._listeners,a=che(n,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Hn(Hn({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class ide{constructor(){hi(this,"_timeouts",new Map)}add(e,n,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(n,i,...r))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class rde{constructor(e){hi(this,"gestures",new Set),hi(this,"_targetEventStore",new _z(this)),hi(this,"gestureEventStores",{}),hi(this,"gestureTimeoutStores",{}),hi(this,"handlers",{}),hi(this,"config",{}),hi(this,"pointerIds",new Set),hi(this,"touchIds",new Set),hi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),sde(this,e)}setEventIds(e){if(ux(e))return this.touchIds=new Set(hhe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=nde(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,i={};let r;if(!(n.target&&(r=n.target(),!r))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=tL(i,a.eventOptions,!!r);if(a.enabled){const c=SI.get(o);new c(this,e,o).bind(l)}}const s=tL(i,n.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Hn(Hn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=ghe(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=lhe(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}}function vh(t,e){t.gestures.add(e),t.gestureEventStores[e]=new _z(t,e),t.gestureTimeoutStores[e]=new ide}function sde(t,e){e.drag&&vh(t,"drag"),e.wheel&&vh(t,"wheel"),e.scroll&&vh(t,"scroll"),e.move&&vh(t,"move"),e.pinch&&vh(t,"pinch"),e.hover&&vh(t,"hover")}const tL=(t,e,n)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let h=a?i:ohe(i,r,u);n&&f&&(h+="Passive"),t[h]=t[h]||[],t[h].push(s)},ode=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ade(t){const e={},n={},i=new Set;for(let r in t)ode.test(r)?(i.add(RegExp.lastMatch),n[r]=t[r]):e[r]=t[r];return[n,e,i]}function _h(t,e,n,i,r,s){if(!t.has(n)||!SI.has(i))return;const o=n+"Start",a=n+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),n in e&&(u=e[n](c)),c.last&&a in e&&e[a](c),u};r[i]=l,s[i]=s[i]||{}}function lde(t,e){const[n,i,r]=ade(t),s={};return _h(r,n,"onDrag","drag",s,e),_h(r,n,"onWheel","wheel",s,e),_h(r,n,"onScroll","scroll",s,e),_h(r,n,"onPinch","pinch",s,e),_h(r,n,"onMove","move",s,e),_h(r,n,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function cde(t,e={},n,i){const r=tl.useMemo(()=>new rde(t),[]);if(r.applyHandlers(t,i),r.applyConfig(e,n),tl.useEffect(r.effect.bind(r)),tl.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function ude(t){return t.forEach(Whe),function(n,i){const{handlers:r,nativeHandlers:s,config:o}=lde(n,i||{});return cde(r,o,void 0,s)}}function fde(t,e){return ude([jhe,Xhe,Jhe,Khe,Yhe,qhe])(t,e||{})}function hde({snap:t,global:e,cursor:n=!0,children:i,speed:r=1,rotation:s=[0,0,0],zoom:o=1,polar:a=[0,Math.PI/2],azimuth:l=[-1/0,1/0],config:c={mass:1,tension:170,friction:26}}){const{size:u,gl:f}=Me(),h=R.exports.useMemo(()=>[s[0]+a[0],s[0]+a[1]],[s[0],a[0],a[1]]),d=R.exports.useMemo(()=>[s[1]+l[0],s[1]+l[1]],[s[1],l[0],l[1]]),p=R.exports.useMemo(()=>[ut.clamp(s[0],...h),ut.clamp(s[1],...d),s[2]],[s[0],s[1],s[2],h,d]),[m,A]=Jfe(()=>({scale:1,rotation:p,config:c}));R.exports.useEffect(()=>void A.start({scale:1,rotation:p,config:c}),[p]),R.exports.useEffect(()=>{e&&n&&(f.domElement.style.cursor="grab")},[e,n,f.domElement]);const v=fde({onHover:({last:y})=>{n&&!e&&(f.domElement.style.cursor=y?"auto":"grab")},onDrag:({down:y,delta:[x,w],memo:[E,S]=m.rotation.animation.to||p})=>{n&&(f.domElement.style.cursor=y?"grabbing":"grab"),x=ut.clamp(S+x/u.width*Math.PI*r,...d),w=ut.clamp(E+w/u.height*Math.PI*r,...h);const M=t&&!y&&typeof t!="boolean"?t:c;return A.start({scale:y&&w>h[1]/2?o:1,rotation:t&&!y?p:[w,x,0],config:b=>b==="scale"?{...M,friction:M.friction*3}:M}),[w,x]}},{target:e?f.domElement:void 0});return R.exports.createElement(the.group,cf({},v==null?void 0:v(),m),i)}const dde=t=>(e,n,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(i.getState());c=h=>{const d=o(h);if(!u(f,d)){const p=f;a(f=d,p)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},t(e,n,i)},yz=R.exports.createContext(null);function pde({map:t,children:e,onChange:n,domElement:i}){const r=t.map(l=>l.name+l.keys).join("-"),s=R.exports.useMemo(()=>Ky(dde(()=>t.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=R.exports.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return R.exports.useEffect(()=>{const c=t.map(({name:d,keys:p,up:m})=>({keys:p,up:m,fn:A=>{a({[d]:A}),n&&n(d,A,o[2]())}})).reduce((d,{keys:p,fn:m,up:A=!0})=>(p.forEach(v=>d[v]={fn:m,pressed:!1,up:A}),d),{}),u=({key:d,code:p})=>{const m=c[d]||c[p];if(!m)return;const{fn:A,pressed:v,up:y}=m;m.pressed=!0,(y||!v)&&A(!0)},f=({key:d,code:p})=>{const m=c[d]||c[p];if(!m)return;const{fn:A,up:v}=m;m.pressed=!1,v&&A(!1)},h=i||window;return h.addEventListener("keydown",u,{passive:!0}),h.addEventListener("keyup",f,{passive:!0}),()=>{h.removeEventListener("keydown",u),h.removeEventListener("keyup",f)}},[i,r]),R.exports.createElement(yz.Provider,{value:o,children:e})}function mde(t){const[e,n,i]=R.exports.useContext(yz);return t?i(t):[e,n]}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ph=4,ud=1024,ha=4,gde=(t=1)=>{const e=new Float32Array(ud*ha*t*Ph),n=new Oo(e,ud,ha*t,Fn,Qn);return n.wrapS=Rs,n.wrapT=Rs,n.magFilter=vn,n.needsUpdate=!0,n},Ade=(t,e,n=0)=>{const i=Math.floor(ud*(ha/4));e.arcLengthDivisions=i/2,e.updateArcLengths();const r=e.getSpacedPoints(i),s=e.computeFrenetFrames(i,!0);for(let o=0;o<i;o++){const a=Math.floor(o/ud),l=o%ud;let c=r[o];DA(t,l,c.x,c.y,c.z,0+a+ha*n),c=s.tangents[o],DA(t,l,c.x,c.y,c.z,1+a+ha*n),c=s.normals[o],DA(t,l,c.x,c.y,c.z,2+a+ha*n),c=s.binormals[o],DA(t,l,c.x,c.y,c.z,3+a+ha*n)}t.needsUpdate=!0},DA=(t,e,n,i,r,s)=>{const o=t.image,{data:a}=o,l=Ph*ud*s;a[e*Ph+l+0]=n,a[e*Ph+l+1]=i,a[e*Ph+l+2]=r,a[e*Ph+l+3]=1},vde=t=>({spineTexture:{value:t},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function _de(t,e,n=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=i=>{if(i.__modified)return;i.__modified=!0,Object.assign(i.uniforms,e);const r=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${ha*n}.;
		float textureStacks = ${ha/4}.;

		${i.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${ha}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);i.vertexShader=r})}class yde{constructor(e,n=1){L(this,"curveArray",void 0),L(this,"curveLengthArray",void 0),L(this,"object3D",void 0),L(this,"splineTexure",void 0),L(this,"uniforms",void 0);const i=e.clone(),r=gde(n),s=vde(r);i.traverse(o=>{(o instanceof $e||o instanceof y3)&&(o.material=o.material.clone(),_de(o.material,s,n))}),this.curveArray=new Array(n),this.curveLengthArray=new Array(n),this.object3D=i,this.splineTexure=r,this.uniforms=s}updateCurve(e,n){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const i=n.getLength();this.uniforms.spineLength.value=i,this.curveLengthArray[e]=i,this.curveArray[e]=n,Ade(this.splineTexure,n,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new Ne;var io=Uint8Array,ic=Uint16Array,fC=Uint32Array,xz=new io([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wz=new io([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xde=new io([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ez=function(t,e){for(var n=new ic(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new fC(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},bz=Ez(xz,2),Sz=bz[0],wde=bz[1];Sz[28]=258,wde[258]=28;var Ede=Ez(wz,0),bde=Ede[0],hC=new ic(32768);for(var In=0;In<32768;++In){var Gl=(In&43690)>>>1|(In&21845)<<1;Gl=(Gl&52428)>>>2|(Gl&13107)<<2,Gl=(Gl&61680)>>>4|(Gl&3855)<<4,hC[In]=((Gl&65280)>>>8|(Gl&255)<<8)>>>1}var Yp=function(t,e,n){for(var i=t.length,r=0,s=new ic(e);r<i;++r)++s[t[r]-1];var o=new ic(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(n){a=new ic(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=o[t[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[hC[f]>>>l]=c}else for(a=new ic(i),r=0;r<i;++r)t[r]&&(a[r]=hC[o[t[r]-1]++]>>>15-t[r]);return a},Mg=new io(288);for(var In=0;In<144;++In)Mg[In]=8;for(var In=144;In<256;++In)Mg[In]=9;for(var In=256;In<280;++In)Mg[In]=7;for(var In=280;In<288;++In)Mg[In]=8;var Cz=new io(32);for(var In=0;In<32;++In)Cz[In]=5;var Sde=Yp(Mg,9,1),Cde=Yp(Cz,5,1),AE=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},wo=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},vE=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Mde=function(t){return(t/8|0)+(t&7&&1)},Ide=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof ic?ic:t instanceof fC?fC:io)(n-e);return i.set(t.subarray(e,n)),i},Tde=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new io(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new io(i*3));var o=function(ee){var ae=e.length;if(ee>ae){var ce=new io(Math.max(ae*2,ee));ce.set(e),e=ce}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,f=n.d,h=n.m,d=n.n,p=i*8;do{if(!u){n.f=a=wo(t,l,1);var m=wo(t,l+1,3);if(l+=3,m)if(m==1)u=Sde,f=Cde,h=9,d=5;else if(m==2){var x=wo(t,l,31)+257,w=wo(t,l+10,15)+4,E=x+wo(t,l+5,31)+1;l+=14;for(var S=new io(E),M=new io(19),b=0;b<w;++b)M[xde[b]]=wo(t,l+b*3,7);l+=w*3;for(var B=AE(M),T=(1<<B)-1,k=Yp(M,B,1),b=0;b<E;){var D=k[wo(t,l,T)];l+=D&15;var A=D>>>4;if(A<16)S[b++]=A;else{var N=0,O=0;for(A==16?(O=3+wo(t,l,3),l+=2,N=S[b-1]):A==17?(O=3+wo(t,l,7),l+=3):A==18&&(O=11+wo(t,l,127),l+=7);O--;)S[b++]=N}}var Y=S.subarray(0,x),q=S.subarray(x);h=AE(Y),d=AE(q),u=Yp(Y,h,1),f=Yp(q,d,1)}else throw"invalid block type";else{var A=Mde(l)+4,v=t[A-4]|t[A-3]<<8,y=A+v;if(y>i){if(s)throw"unexpected EOF";break}r&&o(c+v),e.set(t.subarray(A,y),c),n.b=c+=v,n.p=l=y*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var K=(1<<h)-1,z=(1<<d)-1,U=l;;U=l){var N=u[vE(t,l)&K],Q=N>>>4;if(l+=N&15,l>p){if(s)throw"unexpected EOF";break}if(!N)throw"invalid length/literal";if(Q<256)e[c++]=Q;else if(Q==256){U=l,u=null;break}else{var H=Q-254;if(Q>264){var b=Q-257,V=xz[b];H=wo(t,l,(1<<V)-1)+Sz[b],l+=V}var J=f[vE(t,l)&z],j=J>>>4;if(!J)throw"invalid distance";l+=J&15;var q=bde[j];if(j>3){var V=wz[j];q+=vE(t,l)&(1<<V)-1,l+=V}if(l>p){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var re=c+H;c<re;c+=4)e[c]=e[c-q],e[c+1]=e[c+1-q],e[c+2]=e[c+2-q],e[c+3]=e[c+3-q];c=re}}n.l=u,n.p=U,n.b=c,u&&(a=1,n.m=h,n.d=f,n.n=d)}while(!a);return c==e.length?e:Ide(e,0,c)},Bde=new io(0),Rde=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Pde(t,e){return Tde((Rde(t),t.subarray(2,-4)),e)}var Dde=typeof TextDecoder<"u"&&new TextDecoder,Lde=0;try{Dde.decode(Bde,{stream:!0}),Lde=1}catch{}class Mz extends $e{constructor(e,n,i=!1,r=!1,s=1e4){const o=new ht;super(o,n);const a=this,l=new Float32Array(12*3),c=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=i,this.enableColors=r,this.init=function(y){this.resolution=y,this.isolation=80,this.size=y,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const x=s*3;this.positionArray=new Float32Array(x*3);const w=new bt(this.positionArray,3);w.setUsage(bs),o.setAttribute("position",w),this.normalArray=new Float32Array(x*3);const E=new bt(this.normalArray,3);if(E.setUsage(bs),o.setAttribute("normal",E),this.enableUvs){this.uvArray=new Float32Array(x*2);const S=new bt(this.uvArray,2);S.setUsage(bs),o.setAttribute("uv",S)}if(this.enableColors){this.colorArray=new Float32Array(x*3);const S=new bt(this.colorArray,3);S.setUsage(bs),o.setAttribute("color",S)}};function f(y,x,w){return y+(x-y)*w}function h(y,x,w,E,S,M,b,B,T,k){const D=(w-b)/(B-b),N=a.normal_cache;l[x+0]=E+D*a.delta,l[x+1]=S,l[x+2]=M,c[x+0]=f(N[y+0],N[y+3],D),c[x+1]=f(N[y+1],N[y+4],D),c[x+2]=f(N[y+2],N[y+5],D),u[x+0]=f(a.palette[T*3+0],a.palette[k*3+0],D),u[x+1]=f(a.palette[T*3+1],a.palette[k*3+1],D),u[x+2]=f(a.palette[T*3+2],a.palette[k*3+2],D)}function d(y,x,w,E,S,M,b,B,T,k){const D=(w-b)/(B-b),N=a.normal_cache;l[x+0]=E,l[x+1]=S+D*a.delta,l[x+2]=M;const O=y+a.yd*3;c[x+0]=f(N[y+0],N[O+0],D),c[x+1]=f(N[y+1],N[O+1],D),c[x+2]=f(N[y+2],N[O+2],D),u[x+0]=f(a.palette[T*3+0],a.palette[k*3+0],D),u[x+1]=f(a.palette[T*3+1],a.palette[k*3+1],D),u[x+2]=f(a.palette[T*3+2],a.palette[k*3+2],D)}function p(y,x,w,E,S,M,b,B,T,k){const D=(w-b)/(B-b),N=a.normal_cache;l[x+0]=E,l[x+1]=S,l[x+2]=M+D*a.delta;const O=y+a.zd*3;c[x+0]=f(N[y+0],N[O+0],D),c[x+1]=f(N[y+1],N[O+1],D),c[x+2]=f(N[y+2],N[O+2],D),u[x+0]=f(a.palette[T*3+0],a.palette[k*3+0],D),u[x+1]=f(a.palette[T*3+1],a.palette[k*3+1],D),u[x+2]=f(a.palette[T*3+2],a.palette[k*3+2],D)}function m(y){const x=y*3;a.normal_cache[x]===0&&(a.normal_cache[x+0]=a.field[y-1]-a.field[y+1],a.normal_cache[x+1]=a.field[y-a.yd]-a.field[y+a.yd],a.normal_cache[x+2]=a.field[y-a.zd]-a.field[y+a.zd])}function A(y,x,w,E,S){const M=E+1,b=E+a.yd,B=E+a.zd,T=M+a.yd,k=M+a.zd,D=E+a.yd+a.zd,N=M+a.yd+a.zd;let O=0;const Y=a.field[E],q=a.field[M],K=a.field[b],z=a.field[T],U=a.field[B],Q=a.field[k],H=a.field[D],V=a.field[N];Y<S&&(O|=1),q<S&&(O|=2),K<S&&(O|=8),z<S&&(O|=4),U<S&&(O|=16),Q<S&&(O|=32),H<S&&(O|=128),V<S&&(O|=64);const J=Fde[O];if(J===0)return 0;const j=a.delta,re=y+j,ee=x+j,ae=w+j;J&1&&(m(E),m(M),h(E*3,0,S,y,x,w,Y,q,E,M)),J&2&&(m(M),m(T),d(M*3,3,S,re,x,w,q,z,M,T)),J&4&&(m(b),m(T),h(b*3,6,S,y,ee,w,K,z,b,T)),J&8&&(m(E),m(b),d(E*3,9,S,y,x,w,Y,K,E,b)),J&16&&(m(B),m(k),h(B*3,12,S,y,x,ae,U,Q,B,k)),J&32&&(m(k),m(N),d(k*3,15,S,re,x,ae,Q,V,k,N)),J&64&&(m(D),m(N),h(D*3,18,S,y,ee,ae,H,V,D,N)),J&128&&(m(B),m(D),d(B*3,21,S,y,x,ae,U,H,B,D)),J&256&&(m(E),m(B),p(E*3,24,S,y,x,w,Y,U,E,B)),J&512&&(m(M),m(k),p(M*3,27,S,re,x,w,q,Q,M,k)),J&1024&&(m(T),m(N),p(T*3,30,S,re,ee,w,z,V,T,N)),J&2048&&(m(b),m(D),p(b*3,33,S,y,ee,w,K,H,b,D)),O<<=4;let ce,ge,xe,Se=0,oe=0;for(;LA[O+oe]!=-1;)ce=O+oe,ge=ce+1,xe=ce+2,v(l,c,u,3*LA[ce],3*LA[ge],3*LA[xe]),oe+=3,Se++;return Se}function v(y,x,w,E,S,M){const b=a.count*3;if(a.positionArray[b+0]=y[E],a.positionArray[b+1]=y[E+1],a.positionArray[b+2]=y[E+2],a.positionArray[b+3]=y[S],a.positionArray[b+4]=y[S+1],a.positionArray[b+5]=y[S+2],a.positionArray[b+6]=y[M],a.positionArray[b+7]=y[M+1],a.positionArray[b+8]=y[M+2],a.material.flatShading===!0){const B=(x[E+0]+x[S+0]+x[M+0])/3,T=(x[E+1]+x[S+1]+x[M+1])/3,k=(x[E+2]+x[S+2]+x[M+2])/3;a.normalArray[b+0]=B,a.normalArray[b+1]=T,a.normalArray[b+2]=k,a.normalArray[b+3]=B,a.normalArray[b+4]=T,a.normalArray[b+5]=k,a.normalArray[b+6]=B,a.normalArray[b+7]=T,a.normalArray[b+8]=k}else a.normalArray[b+0]=x[E+0],a.normalArray[b+1]=x[E+1],a.normalArray[b+2]=x[E+2],a.normalArray[b+3]=x[S+0],a.normalArray[b+4]=x[S+1],a.normalArray[b+5]=x[S+2],a.normalArray[b+6]=x[M+0],a.normalArray[b+7]=x[M+1],a.normalArray[b+8]=x[M+2];if(a.enableUvs){const B=a.count*2;a.uvArray[B+0]=y[E+0],a.uvArray[B+1]=y[E+2],a.uvArray[B+2]=y[S+0],a.uvArray[B+3]=y[S+2],a.uvArray[B+4]=y[M+0],a.uvArray[B+5]=y[M+2]}a.enableColors&&(a.colorArray[b+0]=w[E+0],a.colorArray[b+1]=w[E+1],a.colorArray[b+2]=w[E+2],a.colorArray[b+3]=w[S+0],a.colorArray[b+4]=w[S+1],a.colorArray[b+5]=w[S+2],a.colorArray[b+6]=w[M+0],a.colorArray[b+7]=w[M+1],a.colorArray[b+8]=w[M+2]),a.count+=3}this.addBall=function(y,x,w,E,S,M){const b=Math.sign(E);E=Math.abs(E);const B=M!=null;let T=new ze(y,x,w);if(B)try{T=M instanceof ze?M:Array.isArray(M)?new ze(Math.min(Math.abs(M[0]),1),Math.min(Math.abs(M[1]),1),Math.min(Math.abs(M[2]),1)):new ze(M)}catch{T=new ze(y,x,w)}const k=this.size*Math.sqrt(E/S),D=w*this.size,N=x*this.size,O=y*this.size;let Y=Math.floor(D-k);Y<1&&(Y=1);let q=Math.floor(D+k);q>this.size-1&&(q=this.size-1);let K=Math.floor(N-k);K<1&&(K=1);let z=Math.floor(N+k);z>this.size-1&&(z=this.size-1);let U=Math.floor(O-k);U<1&&(U=1);let Q=Math.floor(O+k);Q>this.size-1&&(Q=this.size-1);let H,V,J,j,re,ee,ae,ce,ge,xe,Se;for(J=Y;J<q;J++)for(re=this.size2*J,ce=J/this.size-w,ge=ce*ce,V=K;V<z;V++)for(j=re+this.size*V,ae=V/this.size-x,xe=ae*ae,H=U;H<Q;H++)if(ee=H/this.size-y,Se=E/(1e-6+ee*ee+xe+ge)-S,Se>0){this.field[j+H]+=Se*b;const oe=Math.sqrt((H-O)*(H-O)+(V-N)*(V-N)+(J-D)*(J-D))/k,he=1-oe*oe*oe*(oe*(oe*6-15)+10);this.palette[(j+H)*3+0]+=T.r*he,this.palette[(j+H)*3+1]+=T.g*he,this.palette[(j+H)*3+2]+=T.b*he}},this.addPlaneX=function(y,x){const w=this.size,E=this.yd,S=this.zd,M=this.field;let b,B,T,k,D,N,O,Y=w*Math.sqrt(y/x);for(Y>w&&(Y=w),b=0;b<Y;b++)if(N=b/w,k=N*N,D=y/(1e-4+k)-x,D>0)for(B=0;B<w;B++)for(O=b+B*E,T=0;T<w;T++)M[S*T+O]+=D},this.addPlaneY=function(y,x){const w=this.size,E=this.yd,S=this.zd,M=this.field;let b,B,T,k,D,N,O,Y,q=w*Math.sqrt(y/x);for(q>w&&(q=w),B=0;B<q;B++)if(N=B/w,k=N*N,D=y/(1e-4+k)-x,D>0)for(O=B*E,b=0;b<w;b++)for(Y=O+b,T=0;T<w;T++)M[S*T+Y]+=D},this.addPlaneZ=function(y,x){const w=this.size,E=this.yd,S=this.zd,M=this.field;let b,B,T,k,D,N,O,Y,q=w*Math.sqrt(y/x);for(q>w&&(q=w),T=0;T<q;T++)if(N=T/w,k=N*N,D=y/(1e-4+k)-x,D>0)for(O=S*T,B=0;B<w;B++)for(Y=O+B*E,b=0;b<w;b++)M[Y+b]+=D},this.setCell=function(y,x,w,E){const S=this.size2*w+this.size*x+y;this.field[S]=E},this.getCell=function(y,x,w){const E=this.size2*w+this.size*x+y;return this.field[E]},this.blur=function(y=1){const x=this.field,w=x.slice(),E=this.size,S=this.size2;for(let M=0;M<E;M++)for(let b=0;b<E;b++)for(let B=0;B<E;B++){const T=S*B+E*b+M;let k=w[T],D=1;for(let N=-1;N<=1;N+=2){const O=N+M;if(!(O<0||O>=E))for(let Y=-1;Y<=1;Y+=2){const q=Y+b;if(!(q<0||q>=E))for(let K=-1;K<=1;K+=2){const z=K+B;if(z<0||z>=E)continue;const U=S*z+E*q+O,Q=w[U];D++,k+=y*(Q-k)/D}}}x[T]=k}},this.reset=function(){for(let y=0;y<this.size3;y++)this.normal_cache[y*3]=0,this.field[y]=0,this.palette[y*3]=this.palette[y*3+1]=this.palette[y*3+2]=0},this.onBeforeRender=function(){this.count=0;const y=this.size-2;for(let x=1;x<y;x++){const w=this.size2*x,E=(x-this.halfsize)/this.halfsize;for(let S=1;S<y;S++){const M=w+this.size*S,b=(S-this.halfsize)/this.halfsize;for(let B=1;B<y;B++){const T=(B-this.halfsize)/this.halfsize,k=M+B;A(T,b,E,k,this.isolation)}}}for(let x=this.count*3;x<this.positionArray.length;x++)this.positionArray[x]=0;o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>s&&console.warn("MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}}Mz.prototype.isMarchingCubes=!0;const Fde=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),LA=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);class _E{constructor(e=Math){L(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),L(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),L(this,"p",[]),L(this,"perm",[]),L(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),L(this,"dot",(n,i,r)=>n[0]*i+n[1]*r),L(this,"dot3",(n,i,r,s)=>n[0]*i+n[1]*r+n[2]*s),L(this,"dot4",(n,i,r,s,o)=>n[0]*i+n[1]*r+n[2]*s+n[3]*o),L(this,"noise",(n,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(n+i)*a,c=Math.floor(n+l),u=Math.floor(i+l),f=(3-Math.sqrt(3))/6,h=(c+u)*f,d=c-h,p=u-h,m=n-d,A=i-p;let v=0,y=1;m>A&&(v=1,y=0);const x=m-v+f,w=A-y+f,E=m-1+2*f,S=A-1+2*f,M=c&255,b=u&255,B=this.perm[M+this.perm[b]]%12,T=this.perm[M+v+this.perm[b+y]]%12,k=this.perm[M+1+this.perm[b+1]]%12;let D=.5-m*m-A*A;D<0?r=0:(D*=D,r=D*D*this.dot(this.grad3[B],m,A));let N=.5-x*x-w*w;N<0?s=0:(N*=N,s=N*N*this.dot(this.grad3[T],x,w));let O=.5-E*E-S*S;return O<0?o=0:(O*=O,o=O*O*this.dot(this.grad3[k],E,S)),70*(r+s+o)}),L(this,"noise3d",(n,i,r)=>{let s,o,a,l;const c=.3333333333333333,u=(n+i+r)*c,f=Math.floor(n+u),h=Math.floor(i+u),d=Math.floor(r+u),p=1/6,m=(f+h+d)*p,A=f-m,v=h-m,y=d-m,x=n-A,w=i-v,E=r-y;let S,M,b,B,T,k;x>=w?w>=E?(S=1,M=0,b=0,B=1,T=1,k=0):x>=E?(S=1,M=0,b=0,B=1,T=0,k=1):(S=0,M=0,b=1,B=1,T=0,k=1):w<E?(S=0,M=0,b=1,B=0,T=1,k=1):x<E?(S=0,M=1,b=0,B=0,T=1,k=1):(S=0,M=1,b=0,B=1,T=1,k=0);const D=x-S+p,N=w-M+p,O=E-b+p,Y=x-B+2*p,q=w-T+2*p,K=E-k+2*p,z=x-1+3*p,U=w-1+3*p,Q=E-1+3*p,H=f&255,V=h&255,J=d&255,j=this.perm[H+this.perm[V+this.perm[J]]]%12,re=this.perm[H+S+this.perm[V+M+this.perm[J+b]]]%12,ee=this.perm[H+B+this.perm[V+T+this.perm[J+k]]]%12,ae=this.perm[H+1+this.perm[V+1+this.perm[J+1]]]%12;let ce=.6-x*x-w*w-E*E;ce<0?s=0:(ce*=ce,s=ce*ce*this.dot3(this.grad3[j],x,w,E));let ge=.6-D*D-N*N-O*O;ge<0?o=0:(ge*=ge,o=ge*ge*this.dot3(this.grad3[re],D,N,O));let xe=.6-Y*Y-q*q-K*K;xe<0?a=0:(xe*=xe,a=xe*xe*this.dot3(this.grad3[ee],Y,q,K));let Se=.6-z*z-U*U-Q*Q;return Se<0?l=0:(Se*=Se,l=Se*Se*this.dot3(this.grad3[ae],z,U,Q)),32*(s+o+a+l)}),L(this,"noise4d",(n,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let f,h,d,p,m;const A=(n+i+r+s)*c,v=Math.floor(n+A),y=Math.floor(i+A),x=Math.floor(r+A),w=Math.floor(s+A),E=(v+y+x+w)*u,S=v-E,M=y-E,b=x-E,B=w-E,T=n-S,k=i-M,D=r-b,N=s-B,O=T>k?32:0,Y=T>D?16:0,q=k>D?8:0,K=T>N?4:0,z=k>N?2:0,U=D>N?1:0,Q=O+Y+q+K+z+U;let H,V,J,j,re,ee,ae,ce,ge,xe,Se,oe;H=a[Q][0]>=3?1:0,V=a[Q][1]>=3?1:0,J=a[Q][2]>=3?1:0,j=a[Q][3]>=3?1:0,re=a[Q][0]>=2?1:0,ee=a[Q][1]>=2?1:0,ae=a[Q][2]>=2?1:0,ce=a[Q][3]>=2?1:0,ge=a[Q][0]>=1?1:0,xe=a[Q][1]>=1?1:0,Se=a[Q][2]>=1?1:0,oe=a[Q][3]>=1?1:0;const he=T-H+u,Re=k-V+u,Ie=D-J+u,Te=N-j+u,qe=T-re+2*u,ye=k-ee+2*u,Oe=D-ae+2*u,Ve=N-ce+2*u,Pe=T-ge+3*u,X=k-xe+3*u,W=D-Se+3*u,ne=N-oe+3*u,ue=T-1+4*u,ve=k-1+4*u,Ge=D-1+4*u,be=N-1+4*u,De=v&255,me=y&255,je=x&255,ie=w&255,_e=l[De+l[me+l[je+l[ie]]]]%32,Ce=l[De+H+l[me+V+l[je+J+l[ie+j]]]]%32,ke=l[De+re+l[me+ee+l[je+ae+l[ie+ce]]]]%32,tt=l[De+ge+l[me+xe+l[je+Se+l[ie+oe]]]]%32,se=l[De+1+l[me+1+l[je+1+l[ie+1]]]]%32;let Je=.6-T*T-k*k-D*D-N*N;Je<0?f=0:(Je*=Je,f=Je*Je*this.dot4(o[_e],T,k,D,N));let Qe=.6-he*he-Re*Re-Ie*Ie-Te*Te;Qe<0?h=0:(Qe*=Qe,h=Qe*Qe*this.dot4(o[Ce],he,Re,Ie,Te));let Ee=.6-qe*qe-ye*ye-Oe*Oe-Ve*Ve;Ee<0?d=0:(Ee*=Ee,d=Ee*Ee*this.dot4(o[ke],qe,ye,Oe,Ve));let We=.6-Pe*Pe-X*X-W*W-ne*ne;We<0?p=0:(We*=We,p=We*We*this.dot4(o[tt],Pe,X,W,ne));let ft=.6-ue*ue-ve*ve-Ge*Ge-be*be;return ft<0?m=0:(ft*=ft,m=ft*ft*this.dot4(o[se],ue,ve,Ge,be)),27*(f+h+d+p+m)});for(let n=0;n<256;n++)this.p[n]=Math.floor(e.random()*256);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}}class rc extends $e{constructor(){super(new Ar(1,1,1),rc.material)}}L(rc,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new F},up:{value:new F(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});L(rc,"material",new $n({name:"SkyShader",fragmentShader:rc.SkyShader.fragmentShader,vertexShader:rc.SkyShader.vertexShader,uniforms:Mc.clone(rc.SkyShader.uniforms),side:Er,depthWrite:!1}));const kde=t=>t&&t.isCubeTexture;class Ode extends $e{constructor(e,n){var i,r;const s=kde(e),a=((i=s?(r=e.image[0])===null||r===void 0?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,m={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},A=new Yd(1,16),v=new $n({uniforms:m,fragmentShader:p,vertexShader:d,side:bi});super(A,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ude=function(){var t=new _r,e=new F;function n(i){var r=i.geometry;if(!r.isBufferGeometry||r.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");r.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}return n.prototype={constructor:n,setWeightAttribute:function(i){return this.weightAttribute=i?this.geometry.getAttribute(i):null,this},build:function(){var i=this.positionAttribute,r=this.weightAttribute,s=new Float32Array(i.count/3);for(let l=0;l<i.count;l+=3){var o=1;r&&(o=r.getX(l)+r.getX(l+1)+r.getX(l+2)),t.a.fromBufferAttribute(i,l),t.b.fromBufferAttribute(i,l+1),t.c.fromBufferAttribute(i,l+2),o*=t.getArea(),s[l/3]=o}this.distribution=new Float32Array(i.count/3);var a=0;for(let l=0;l<s.length;l++)a+=s[l],this.distribution[l]=a;return this},setRandomGenerator:function(i){return this.randomFunction=i,this},sample:function(i,r,s){var o=this.distribution[this.distribution.length-1],a=this.binarySearch(this.randomFunction()*o);return this.sampleFace(a,i,r,s)},binarySearch:function(i){for(var r=this.distribution,s=0,o=r.length-1,a=-1;s<=o;){var l=Math.ceil((s+o)/2);if(l===0||r[l-1]<=i&&r[l]>i){a=l;break}else i<r[l]?o=l-1:s=l+1}return a},sampleFace:function(i,r,s,o){var a=this.randomFunction(),l=this.randomFunction();return a+l>1&&(a=1-a,l=1-l),t.a.fromBufferAttribute(this.positionAttribute,i*3),t.b.fromBufferAttribute(this.positionAttribute,i*3+1),t.c.fromBufferAttribute(this.positionAttribute,i*3+2),r.set(0,0,0).addScaledVector(t.a,a).addScaledVector(t.b,l).addScaledVector(t.c,1-(a+l)),s!==void 0&&t.getNormal(s),o!==void 0&&this.colorAttribute!==void 0&&(t.a.fromBufferAttribute(this.colorAttribute,i*3),t.b.fromBufferAttribute(this.colorAttribute,i*3+1),t.c.fromBufferAttribute(this.colorAttribute,i*3+2),e.set(0,0,0).addScaledVector(t.a,a).addScaledVector(t.b,l).addScaledVector(t.c,1-(a+l)),o.r=e.x,o.g=e.y,o.b=e.z),this}},n}();const nL=new F;class Nde extends Cr{constructor(e,n){super(),L(this,"object",void 0),L(this,"domElement",void 0),L(this,"enabled",!0),L(this,"movementSpeed",1),L(this,"lookSpeed",.005),L(this,"lookVertical",!0),L(this,"autoForward",!1),L(this,"activeLook",!0),L(this,"heightSpeed",!1),L(this,"heightCoef",1),L(this,"heightMin",0),L(this,"heightMax",1),L(this,"constrainVertical",!1),L(this,"verticalMin",0),L(this,"verticalMax",Math.PI),L(this,"mouseDragOn",!1),L(this,"autoSpeedFactor",0),L(this,"mouseX",0),L(this,"mouseY",0),L(this,"moveForward",!1),L(this,"moveBackward",!1),L(this,"moveLeft",!1),L(this,"moveRight",!1),L(this,"moveUp",!1),L(this,"moveDown",!1),L(this,"viewHalfX",0),L(this,"viewHalfY",0),L(this,"lat",0),L(this,"lon",0),L(this,"lookDirection",new F),L(this,"spherical",new Dm),L(this,"target",new F),L(this,"connect",i=>{i.setAttribute("tabindex","-1"),i.style.touchAction="none",i.addEventListener("contextmenu",this.contextmenu),i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),this.domElement=i,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),L(this,"dispose",()=>{var i,r,s,o;(i=this.domElement)===null||i===void 0||i.removeEventListener("contextmenu",this.contextmenu),(r=this.domElement)===null||r===void 0||r.removeEventListener("mousedown",this.onMouseDown),(s=this.domElement)===null||s===void 0||s.removeEventListener("mousemove",this.onMouseMove),(o=this.domElement)===null||o===void 0||o.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),L(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),L(this,"onMouseDown",i=>{var r;if((r=this.domElement)===null||r===void 0||r.focus(),this.activeLook)switch(i.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),L(this,"onMouseUp",i=>{if(this.activeLook)switch(i.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),L(this,"onMouseMove",i=>{this.domElement&&(this.mouseX=i.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=i.pageY-this.domElement.offsetTop-this.viewHalfY)}),L(this,"onKeyDown",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),L(this,"onKeyUp",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),L(this,"lookAt",(i,r,s)=>(i instanceof F?this.target.copy(i):r&&s&&this.target.set(i,r,s),this.object.lookAt(this.target),this.setOrientation(),this)),L(this,"update",i=>{if(!this.enabled)return;if(this.heightSpeed){const f=ut.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=i*(f*this.heightCoef)}else this.autoSpeedFactor=0;const r=i*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(r+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(r),this.moveLeft&&this.object.translateX(-r),this.moveRight&&this.object.translateX(r),this.moveUp&&this.object.translateY(r),this.moveDown&&this.object.translateY(-r);let s=i*this.lookSpeed;this.activeLook||(s=0);let o=1;this.constrainVertical&&(o=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*s,this.lookVertical&&(this.lat-=this.mouseY*s*o),this.lat=Math.max(-85,Math.min(85,this.lat));let a=ut.degToRad(90-this.lat);const l=ut.degToRad(this.lon);this.constrainVertical&&(a=ut.mapLinear(a,0,Math.PI,this.verticalMin,this.verticalMax));const c=this.object.position;nL.setFromSphericalCoords(1,a,l).add(c),this.object.lookAt(nL)}),L(this,"contextmenu",i=>i.preventDefault()),L(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-ut.radToDeg(this.spherical.phi),this.lon=ut.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=n,this.setOrientation(),n&&this.connect(n)}}class zde extends It{constructor(e,n){super(),L(this,"isTransformControls",!0),L(this,"visible",!1),L(this,"domElement",void 0),L(this,"raycaster",new Kd),L(this,"gizmo",void 0),L(this,"plane",void 0),L(this,"tempVector",new F),L(this,"tempVector2",new F),L(this,"tempQuaternion",new St),L(this,"unit",{X:new F(1,0,0),Y:new F(0,1,0),Z:new F(0,0,1)}),L(this,"pointStart",new F),L(this,"pointEnd",new F),L(this,"offset",new F),L(this,"rotationAxis",new F),L(this,"startNorm",new F),L(this,"endNorm",new F),L(this,"rotationAngle",0),L(this,"cameraPosition",new F),L(this,"cameraQuaternion",new St),L(this,"cameraScale",new F),L(this,"parentPosition",new F),L(this,"parentQuaternion",new St),L(this,"parentQuaternionInv",new St),L(this,"parentScale",new F),L(this,"worldPositionStart",new F),L(this,"worldQuaternionStart",new St),L(this,"worldScaleStart",new F),L(this,"worldPosition",new F),L(this,"worldQuaternion",new St),L(this,"worldQuaternionInv",new St),L(this,"worldScale",new F),L(this,"eye",new F),L(this,"positionStart",new F),L(this,"quaternionStart",new St),L(this,"scaleStart",new F),L(this,"camera",void 0),L(this,"object",void 0),L(this,"enabled",!0),L(this,"axis",null),L(this,"mode","translate"),L(this,"translationSnap",null),L(this,"rotationSnap",null),L(this,"scaleSnap",null),L(this,"space","world"),L(this,"size",1),L(this,"dragging",!1),L(this,"showX",!0),L(this,"showY",!0),L(this,"showZ",!0),L(this,"changeEvent",{type:"change"}),L(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),L(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),L(this,"objectChangeEvent",{type:"objectChange"}),L(this,"intersectObjectWithRay",(r,s,o)=>{const a=s.intersectObject(r,!0);for(let l=0;l<a.length;l++)if(a[l].object.visible||o)return a[l];return!1}),L(this,"attach",r=>(this.object=r,this.visible=!0,this)),L(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),L(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),L(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),L(this,"pointerHover",r=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);s?this.axis=s.object.name:this.axis=null}),L(this,"pointerDown",r=>{if(!(this.object===void 0||this.dragging===!0||r.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(s){let o=this.space;if(this.mode==="scale"?o="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(o="world"),o==="local"&&this.mode==="rotate"){const a=this.rotationSnap;this.axis==="X"&&a&&(this.object.rotation.x=Math.round(this.object.rotation.x/a)*a),this.axis==="Y"&&a&&(this.object.rotation.y=Math.round(this.object.rotation.y/a)*a),this.axis==="Z"&&a&&(this.object.rotation.z=Math.round(this.object.rotation.z/a)*a)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(s.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),L(this,"pointerMove",r=>{const s=this.axis,o=this.mode,a=this.object;let l=this.space;if(o==="scale"?l="local":(s==="E"||s==="XYZE"||s==="XYZ")&&(l="world"),a===void 0||s===null||this.dragging===!1||r.button!==-1)return;this.raycaster.setFromCamera(r,this.camera);const c=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(!!c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),o==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&s!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),s.indexOf("X")===-1&&(this.offset.x=0),s.indexOf("Y")===-1&&(this.offset.y=0),s.indexOf("Z")===-1&&(this.offset.z=0),l==="local"&&s!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),a.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(l==="local"&&(a.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this.quaternionStart)),l==="world"&&(a.parent&&a.position.add(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld)),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld))));else if(o==="scale"){if(s.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),this.tempVector2.set(u,u,u)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),s.search("X")===-1&&(this.tempVector2.x=1),s.search("Y")===-1&&(this.tempVector2.y=1),s.search("Z")===-1&&(this.tempVector2.z=1);a.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(s.search("X")!==-1&&(this.object.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));s==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):s==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*u):(s==="X"||s==="Y"||s==="Z")&&(this.rotationAxis.copy(this.unit[s]),this.tempVector.copy(this.unit[s]),l==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&s!=="E"&&s!=="XYZE"?(a.quaternion.copy(this.quaternionStart),a.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),a.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),L(this,"pointerUp",r=>{r.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),L(this,"getPointer",r=>{var s;if(this.domElement&&(s=this.domElement.ownerDocument)!==null&&s!==void 0&&s.pointerLockElement)return{x:0,y:0,button:r.button};{var o;const a=r.changedTouches?r.changedTouches[0]:r,l=(o=this.domElement)===null||o===void 0?void 0:o.getBoundingClientRect();return{x:(a.clientX-l.left)/l.width*2-1,y:-(a.clientY-l.top)/l.height*2+1,button:r.button}}}),L(this,"onPointerHover",r=>{if(!!this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(r));break}}),L(this,"onPointerDown",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(r)),this.pointerDown(this.getPointer(r)))}),L(this,"onPointerMove",r=>{!this.enabled||this.pointerMove(this.getPointer(r))}),L(this,"onPointerUp",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(r)))}),L(this,"getMode",()=>this.mode),L(this,"setMode",r=>{this.mode=r}),L(this,"setTranslationSnap",r=>{this.translationSnap=r}),L(this,"setRotationSnap",r=>{this.rotationSnap=r}),L(this,"setScaleSnap",r=>{this.scaleSnap=r}),L(this,"setSize",r=>{this.size=r}),L(this,"setSpace",r=>{this.space=r}),L(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),L(this,"connect",r=>{r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),L(this,"dispose",()=>{var r,s,o,a,l,c;(r=this.domElement)===null||r===void 0||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)===null||s===void 0||s.removeEventListener("pointermove",this.onPointerHover),(o=this.domElement)===null||o===void 0||(a=o.ownerDocument)===null||a===void 0||a.removeEventListener("pointermove",this.onPointerMove),(l=this.domElement)===null||l===void 0||(c=l.ownerDocument)===null||c===void 0||c.removeEventListener("pointerup",this.onPointerUp),this.traverse(u=>{const f=u;f.geometry&&f.geometry.dispose(),f.material&&f.material.dispose()})}),this.domElement=n,this.camera=e,this.gizmo=new Gde,this.add(this.gizmo),this.plane=new Qde,this.add(this.plane);const i=(r,s)=>{let o=s;Object.defineProperty(this,r,{get:function(){return o!==void 0?o:s},set:function(a){o!==a&&(o=a,this.plane[r]=a,this.gizmo[r]=a,this.dispatchEvent({type:r+"-changed",value:a}),this.dispatchEvent(this.changeEvent))}}),this[r]=s,this.plane[r]=s,this.gizmo[r]=s};i("camera",this.camera),i("object",this.object),i("enabled",this.enabled),i("axis",this.axis),i("mode",this.mode),i("translationSnap",this.translationSnap),i("rotationSnap",this.rotationSnap),i("scaleSnap",this.scaleSnap),i("space",this.space),i("size",this.size),i("dragging",this.dragging),i("showX",this.showX),i("showY",this.showY),i("showZ",this.showZ),i("worldPosition",this.worldPosition),i("worldPositionStart",this.worldPositionStart),i("worldQuaternion",this.worldQuaternion),i("worldQuaternionStart",this.worldQuaternionStart),i("cameraPosition",this.cameraPosition),i("cameraQuaternion",this.cameraQuaternion),i("pointStart",this.pointStart),i("pointEnd",this.pointEnd),i("rotationAxis",this.rotationAxis),i("rotationAngle",this.rotationAngle),i("eye",this.eye),n!==void 0&&this.connect(n)}}class Gde extends It{constructor(){super(),L(this,"isTransformControlsGizmo",!0),L(this,"type","TransformControlsGizmo"),L(this,"tempVector",new F(0,0,0)),L(this,"tempEuler",new xr),L(this,"alignVector",new F(0,1,0)),L(this,"zeroVector",new F(0,0,0)),L(this,"lookAtMatrix",new Ne),L(this,"tempQuaternion",new St),L(this,"tempQuaternion2",new St),L(this,"identityQuaternion",new St),L(this,"unitX",new F(1,0,0)),L(this,"unitY",new F(0,1,0)),L(this,"unitZ",new F(0,0,1)),L(this,"gizmo",void 0),L(this,"picker",void 0),L(this,"helper",void 0),L(this,"rotationAxis",new F),L(this,"cameraPosition",new F),L(this,"worldPositionStart",new F),L(this,"worldQuaternionStart",new St),L(this,"worldPosition",new F),L(this,"worldQuaternion",new St),L(this,"eye",new F),L(this,"camera",null),L(this,"enabled",!0),L(this,"axis",null),L(this,"mode","translate"),L(this,"space","world"),L(this,"size",1),L(this,"dragging",!1),L(this,"showX",!0),L(this,"showY",!0),L(this,"showZ",!0),L(this,"updateMatrixWorld",()=>{let Q=this.space;this.mode==="scale"&&(Q="local");const H=Q==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let V=[];V=V.concat(this.picker[this.mode].children),V=V.concat(this.gizmo[this.mode].children),V=V.concat(this.helper[this.mode].children);for(let J=0;J<V.length;J++){const j=V[J];j.visible=!0,j.rotation.set(0,0,0),j.position.copy(this.worldPosition);let re;if(this.camera.isOrthographicCamera?re=(this.camera.top-this.camera.bottom)/this.camera.zoom:re=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),j.scale.set(1,1,1).multiplyScalar(re*this.size/7),j.tag==="helper"){j.visible=!1,j.name==="AXIS"?(j.position.copy(this.worldPositionStart),j.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),j.quaternion.copy(H).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(H).dot(this.eye))>.9&&(j.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),j.quaternion.copy(H).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(H).dot(this.eye))>.9&&(j.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),j.quaternion.copy(H).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(H).dot(this.eye))>.9&&(j.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),j.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),j.quaternion.multiply(this.tempQuaternion),j.visible=this.dragging),this.axis==="E"&&(j.visible=!1)):j.name==="START"?(j.position.copy(this.worldPositionStart),j.visible=this.dragging):j.name==="END"?(j.position.copy(this.worldPosition),j.visible=this.dragging):j.name==="DELTA"?(j.position.copy(this.worldPositionStart),j.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),j.scale.copy(this.tempVector),j.visible=this.dragging):(j.quaternion.copy(H),this.dragging?j.position.copy(this.worldPositionStart):j.position.copy(this.worldPosition),this.axis&&(j.visible=this.axis.search(j.name)!==-1));continue}j.quaternion.copy(H),this.mode==="translate"||this.mode==="scale"?((j.name==="X"||j.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(H).dot(this.eye))>.99&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),(j.name==="Y"||j.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(H).dot(this.eye))>.99&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),(j.name==="Z"||j.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(H).dot(this.eye))>.99&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(H).dot(this.eye))<.2&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(H).dot(this.eye))<.2&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(H).dot(this.eye))<.2&&(j.scale.set(1e-10,1e-10,1e-10),j.visible=!1),j.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(H).dot(this.eye)<0?j.tag==="fwd"?j.visible=!1:j.scale.x*=-1:j.tag==="bwd"&&(j.visible=!1)),j.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(H).dot(this.eye)<0?j.tag==="fwd"?j.visible=!1:j.scale.y*=-1:j.tag==="bwd"&&(j.visible=!1)),j.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(H).dot(this.eye)<0?j.tag==="fwd"?j.visible=!1:j.scale.z*=-1:j.tag==="bwd"&&(j.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(H),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(H).invert()),j.name.search("E")!==-1&&j.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),j.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),j.quaternion.copy(this.tempQuaternion)),j.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),j.quaternion.copy(this.tempQuaternion)),j.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),j.quaternion.copy(this.tempQuaternion))),j.visible=j.visible&&(j.name.indexOf("X")===-1||this.showX),j.visible=j.visible&&(j.name.indexOf("Y")===-1||this.showY),j.visible=j.visible&&(j.name.indexOf("Z")===-1||this.showZ),j.visible=j.visible&&(j.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),j.material.tempOpacity=j.material.tempOpacity||j.material.opacity,j.material.tempColor=j.material.tempColor||j.material.color.clone(),j.material.color.copy(j.material.tempColor),j.material.opacity=j.material.tempOpacity,this.enabled?this.axis&&(j.name===this.axis?(j.material.opacity=1,j.material.color.lerp(new ze(1,1,1),.5)):this.axis.split("").some(function(ee){return j.name===ee})?(j.material.opacity=1,j.material.color.lerp(new ze(1,1,1),.5)):(j.material.opacity*=.25,j.material.color.lerp(new ze(1,1,1),.5))):(j.material.opacity*=.5,j.material.color.lerp(new ze(1,1,1),.5))}super.updateMatrixWorld()});const e=new wr({depthTest:!1,depthWrite:!1,transparent:!0,side:bi,fog:!1,toneMapped:!1}),n=new ai({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=e.clone();i.opacity=.15;const r=e.clone();r.opacity=.33;const s=e.clone();s.color.set(16711680);const o=e.clone();o.color.set(65280);const a=e.clone();a.color.set(255);const l=e.clone();l.opacity=.25;const c=l.clone();c.color.set(16776960);const u=l.clone();u.color.set(65535);const f=l.clone();f.color.set(16711935),e.clone().color.set(16776960);const d=n.clone();d.color.set(16711680);const p=n.clone();p.color.set(65280);const m=n.clone();m.color.set(255);const A=n.clone();A.color.set(65535);const v=n.clone();v.color.set(16711935);const y=n.clone();y.color.set(16776960);const x=n.clone();x.color.set(7895160);const w=y.clone();w.opacity=.25;const E=new xi(0,.05,.2,12,1,!1),S=new Ar(.125,.125,.125),M=new ht;M.setAttribute("position",new et([0,0,0,1,0,0],3));const b=(Q,H)=>{const V=new ht,J=[];for(let j=0;j<=64*H;++j)J.push(0,Math.cos(j/32*Math.PI)*Q,Math.sin(j/32*Math.PI)*Q);return V.setAttribute("position",new et(J,3)),V},B=()=>{const Q=new ht;return Q.setAttribute("position",new et([0,0,0,1,1,1],3)),Q},T={X:[[new $e(E,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new $e(E,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new Rt(M,d)]],Y:[[new $e(E,o),[0,1,0],null,null,"fwd"],[new $e(E,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new Rt(M,p),null,[0,0,Math.PI/2]]],Z:[[new $e(E,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new $e(E,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new Rt(M,m),null,[0,-Math.PI/2,0]]],XYZ:[[new $e(new xs(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new $e(new Nr(.295,.295),c.clone()),[.15,.15,0]],[new Rt(M,y),[.18,.3,0],null,[.125,1,1]],[new Rt(M,y),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new $e(new Nr(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new Rt(M,A),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new Rt(M,A),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new $e(new Nr(.295,.295),f.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new Rt(M,v),[.18,0,.3],null,[.125,1,1]],[new Rt(M,v),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},k={X:[[new $e(new xi(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new $e(new xi(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new $e(new xi(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new $e(new xs(.2,0),i)]],XY:[[new $e(new Nr(.4,.4),i),[.2,.2,0]]],YZ:[[new $e(new Nr(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new $e(new Nr(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},D={START:[[new $e(new xs(.01,2),r),null,null,null,"helper"]],END:[[new $e(new xs(.01,2),r),null,null,null,"helper"]],DELTA:[[new Rt(B(),r),null,null,null,"helper"]],X:[[new Rt(M,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Rt(M,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Rt(M,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},N={X:[[new Rt(b(1,.5),d)],[new $e(new xs(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new Rt(b(1,.5),p),null,[0,0,-Math.PI/2]],[new $e(new xs(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new Rt(b(1,.5),m),null,[0,Math.PI/2,0]],[new $e(new xs(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new Rt(b(1.25,1),w),null,[0,Math.PI/2,0]],[new $e(new xi(.03,0,.15,4,1,!1),w),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new $e(new xi(.03,0,.15,4,1,!1),w),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new $e(new xi(.03,0,.15,4,1,!1),w),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new $e(new xi(.03,0,.15,4,1,!1),w),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new Rt(b(1,1),x),null,[0,Math.PI/2,0]]]},O={AXIS:[[new Rt(M,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Y={X:[[new $e(new el(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new $e(new el(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new $e(new el(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new $e(new el(1.25,.1,2,24),i)]],XYZE:[[new $e(new xf(.7,10,8),i)]]},q={X:[[new $e(S,s),[.8,0,0],[0,0,-Math.PI/2]],[new Rt(M,d),null,null,[.8,1,1]]],Y:[[new $e(S,o),[0,.8,0]],[new Rt(M,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new $e(S,a),[0,0,.8],[Math.PI/2,0,0]],[new Rt(M,m),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new $e(S,c),[.85,.85,0],null,[2,2,.2]],[new Rt(M,y),[.855,.98,0],null,[.125,1,1]],[new Rt(M,y),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new $e(S,u),[0,.85,.85],null,[.2,2,2]],[new Rt(M,A),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new Rt(M,A),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new $e(S,f),[.85,0,.85],null,[2,.2,2]],[new Rt(M,v),[.855,0,.98],null,[.125,1,1]],[new Rt(M,v),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new $e(new Ar(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new $e(new Ar(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new $e(new Ar(.125,.125,.125),l.clone()),[0,0,1.1]]]},K={X:[[new $e(new xi(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new $e(new xi(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new $e(new xi(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new $e(S,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new $e(S,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new $e(S,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new $e(new Ar(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new $e(new Ar(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new $e(new Ar(.2,.2,.2),i),[0,0,1.1]]]},z={X:[[new Rt(M,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Rt(M,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Rt(M,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},U=Q=>{const H=new It;for(let V in Q)for(let J=Q[V].length;J--;){const j=Q[V][J][0].clone(),re=Q[V][J][1],ee=Q[V][J][2],ae=Q[V][J][3],ce=Q[V][J][4];j.name=V,j.tag=ce,re&&j.position.set(re[0],re[1],re[2]),ee&&j.rotation.set(ee[0],ee[1],ee[2]),ae&&j.scale.set(ae[0],ae[1],ae[2]),j.updateMatrix();const ge=j.geometry.clone();ge.applyMatrix4(j.matrix),j.geometry=ge,j.renderOrder=1/0,j.position.set(0,0,0),j.rotation.set(0,0,0),j.scale.set(1,1,1),H.add(j)}return H};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=U(T)),this.add(this.gizmo.rotate=U(N)),this.add(this.gizmo.scale=U(q)),this.add(this.picker.translate=U(k)),this.add(this.picker.rotate=U(Y)),this.add(this.picker.scale=U(K)),this.add(this.helper.translate=U(D)),this.add(this.helper.rotate=U(O)),this.add(this.helper.scale=U(z)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class Qde extends $e{constructor(){super(new Nr(1e5,1e5,2,2),new wr({visible:!1,wireframe:!0,side:bi,transparent:!0,opacity:.1,toneMapped:!1})),L(this,"isTransformControlsPlane",!0),L(this,"type","TransformControlsPlane"),L(this,"unitX",new F(1,0,0)),L(this,"unitY",new F(0,1,0)),L(this,"unitZ",new F(0,0,1)),L(this,"tempVector",new F),L(this,"dirVector",new F),L(this,"alignVector",new F),L(this,"tempMatrix",new Ne),L(this,"identityQuaternion",new St),L(this,"cameraQuaternion",new St),L(this,"worldPosition",new F),L(this,"worldQuaternion",new St),L(this,"eye",new F),L(this,"axis",null),L(this,"mode","translate"),L(this,"space","world"),L(this,"updateMatrixWorld",()=>{let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),this.unitX.set(1,0,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}class Hde extends Cr{constructor(e,n){super(),L(this,"camera",void 0),L(this,"domElement",void 0),L(this,"isLocked",!1),L(this,"minPolarAngle",0),L(this,"maxPolarAngle",Math.PI),L(this,"changeEvent",{type:"change"}),L(this,"lockEvent",{type:"lock"}),L(this,"unlockEvent",{type:"unlock"}),L(this,"euler",new xr(0,0,0,"YXZ")),L(this,"PI_2",Math.PI/2),L(this,"vec",new F),L(this,"onMouseMove",i=>{if(!this.domElement||this.isLocked===!1)return;const r=i.movementX||i.mozMovementX||i.webkitMovementX||0,s=i.movementY||i.mozMovementY||i.webkitMovementY||0;this.euler.setFromQuaternion(this.camera.quaternion),this.euler.y-=r*.002,this.euler.x-=s*.002,this.euler.x=Math.max(this.PI_2-this.maxPolarAngle,Math.min(this.PI_2-this.minPolarAngle,this.euler.x)),this.camera.quaternion.setFromEuler(this.euler),this.dispatchEvent(this.changeEvent)}),L(this,"onPointerlockChange",()=>{!this.domElement||(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(this.lockEvent),this.isLocked=!0):(this.dispatchEvent(this.unlockEvent),this.isLocked=!1))}),L(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),L(this,"connect",i=>{this.domElement=i||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),L(this,"disconnect",()=>{!this.domElement||(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),L(this,"dispose",()=>{this.disconnect()}),L(this,"getObject",()=>this.camera),L(this,"direction",new F(0,0,-1)),L(this,"getDirection",i=>i.copy(this.direction).applyQuaternion(this.camera.quaternion)),L(this,"moveForward",i=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.vec.crossVectors(this.camera.up,this.vec),this.camera.position.addScaledVector(this.vec,i)}),L(this,"moveRight",i=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(this.vec,i)}),L(this,"lock",()=>{!this.domElement||this.domElement.requestPointerLock()}),L(this,"unlock",()=>{!this.domElement||this.domElement.ownerDocument.exitPointerLock()}),this.domElement=n,this.camera=e,this.domElement&&this.connect(this.domElement)}}class Vde extends Cr{constructor(e){super(),L(this,"object",void 0),L(this,"changeEvent",{type:"change"}),L(this,"EPS",1e-6),L(this,"enabled",!0),L(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),L(this,"screenOrientation",0),L(this,"alphaOffset",0),L(this,"onDeviceOrientationChangeEvent",n=>{this.deviceOrientation=n}),L(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),L(this,"zee",new F(0,0,1)),L(this,"euler",new xr),L(this,"q0",new St),L(this,"q1",new St(-Math.sqrt(.5),0,0,Math.sqrt(.5))),L(this,"setObjectQuaternion",(n,i,r,s,o)=>{this.euler.set(r,i,-s,"YXZ"),n.setFromEuler(this.euler),n.multiply(this.q1),n.multiply(this.q0.setFromAxisAngle(this.zee,-o))}),L(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(n=>{n=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(n=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",n)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),L(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),L(this,"lastQuaternion",new St),L(this,"update",()=>{if(this.enabled===!1)return;const n=this.deviceOrientation;if(n){const i=n.alpha?ut.degToRad(n.alpha)+this.alphaOffset:0,r=n.beta?ut.degToRad(n.beta):0,s=n.gamma?ut.degToRad(n.gamma):0,o=this.screenOrientation?ut.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,i,r,s,o),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),L(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}}class Wde extends Cr{constructor(e,n){super(),L(this,"enabled",!0),L(this,"screen",{left:0,top:0,width:0,height:0}),L(this,"rotateSpeed",1),L(this,"zoomSpeed",1.2),L(this,"panSpeed",.3),L(this,"noRotate",!1),L(this,"noZoom",!1),L(this,"noPan",!1),L(this,"staticMoving",!1),L(this,"dynamicDampingFactor",.2),L(this,"minDistance",0),L(this,"maxDistance",1/0),L(this,"keys",["KeyA","KeyS","KeyD"]),L(this,"mouseButtons",{LEFT:eo.ROTATE,MIDDLE:eo.DOLLY,RIGHT:eo.PAN}),L(this,"object",void 0),L(this,"domElement",void 0),L(this,"cursorZoom",!1),L(this,"target",new F),L(this,"mousePosition",new Ae),L(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),L(this,"EPS",1e-6),L(this,"lastZoom",1),L(this,"lastPosition",new F),L(this,"cursorVector",new F),L(this,"targetVector",new F),L(this,"_state",this.STATE.NONE),L(this,"_keyState",this.STATE.NONE),L(this,"_eye",new F),L(this,"_movePrev",new Ae),L(this,"_moveCurr",new Ae),L(this,"_lastAxis",new F),L(this,"_lastAngle",0),L(this,"_zoomStart",new Ae),L(this,"_zoomEnd",new Ae),L(this,"_touchZoomDistanceStart",0),L(this,"_touchZoomDistanceEnd",0),L(this,"_panStart",new Ae),L(this,"_panEnd",new Ae),L(this,"target0",void 0),L(this,"position0",void 0),L(this,"up0",void 0),L(this,"zoom0",void 0),L(this,"changeEvent",{type:"change"}),L(this,"startEvent",{type:"start"}),L(this,"endEvent",{type:"end"}),L(this,"onScreenVector",new Ae),L(this,"getMouseOnScreen",(i,r)=>(this.onScreenVector.set((i-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),this.onScreenVector)),L(this,"onCircleVector",new Ae),L(this,"getMouseOnCircle",(i,r)=>(this.onCircleVector.set((i-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),this.onCircleVector)),L(this,"axis",new F),L(this,"quaternion",new St),L(this,"eyeDirection",new F),L(this,"objectUpDirection",new F),L(this,"objectSidewaysDirection",new F),L(this,"moveDirection",new F),L(this,"angle",0),L(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),L(this,"zoomCamera",()=>{let i;if(this._state===this.STATE.TOUCH_ZOOM_PAN)i=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(i):this.object.isOrthographicCamera?(this.object.zoom/=i,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(i=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(i-1)>this.EPS&&i>0&&(this.object.isPerspectiveCamera?(i>1&&this._eye.length()>=this.maxDistance-this.EPS&&(i=1),this._eye.multiplyScalar(i)):this.object.isOrthographicCamera?(i>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(i=1),this.object.zoom/=i):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let r=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(r,this.target,i)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),L(this,"mouseChange",new Ae),L(this,"objectUp",new F),L(this,"pan",new F),L(this,"panCamera",()=>{if(!!this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const i=this.object,r=(i.right-i.left)/this.object.zoom,s=(i.top-i.bottom)/this.object.zoom;this.mouseChange.x*=r,this.mouseChange.y*=s}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),L(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),L(this,"handleResize",()=>{if(!this.domElement)return;const i=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=i.left+window.pageXOffset-r.clientLeft,this.screen.top=i.top+window.pageYOffset-r.clientTop,this.screen.width=i.width,this.screen.height=i.height}),L(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),L(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),L(this,"keydown",i=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(i.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:i.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:i.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),L(this,"onPointerDown",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseDown(i);break}}),L(this,"onPointerMove",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseMove(i);break}}),L(this,"onPointerUp",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),L(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),L(this,"onMouseDown",i=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(i.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break;default:this._state=this.STATE.NONE}const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):r===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):r===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),L(this,"onMouseMove",i=>{if(this.enabled===!1)return;const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY))):r===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY)):r===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY))}),L(this,"onMouseUp",()=>{!this.domElement||this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),L(this,"mousewheel",i=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.mousePosition.x=i.offsetX/this.screen.width*2-1,this.mousePosition.y=-(i.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),L(this,"touchstart",i=>{if(this.enabled!==!1){switch(i.preventDefault(),i.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(o,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),L(this,"touchmove",i=>{if(this.enabled!==!1)switch(i.preventDefault(),i.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY));break;default:const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(o,a));break}}),L(this,"touchend",i=>{if(this.enabled!==!1){switch(i.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),L(this,"contextmenu",i=>{this.enabled!==!1&&i.preventDefault()}),L(this,"connect",i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),L(this,"dispose",()=>{!this.domElement||(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,n!==void 0&&this.connect(n),this.update()}}const iL=(t,e)=>(t%e+e)%e;class Iz extends Cr{constructor(e,n){super(),L(this,"object",void 0),L(this,"domElement",void 0),L(this,"enabled",!0),L(this,"target",new F),L(this,"minDistance",0),L(this,"maxDistance",1/0),L(this,"minZoom",0),L(this,"maxZoom",1/0),L(this,"minPolarAngle",0),L(this,"maxPolarAngle",Math.PI),L(this,"minAzimuthAngle",-1/0),L(this,"maxAzimuthAngle",1/0),L(this,"enableDamping",!1),L(this,"dampingFactor",.05),L(this,"enableZoom",!0),L(this,"zoomSpeed",1),L(this,"enableRotate",!0),L(this,"rotateSpeed",1),L(this,"enablePan",!0),L(this,"panSpeed",1),L(this,"screenSpacePanning",!0),L(this,"keyPanSpeed",7),L(this,"autoRotate",!1),L(this,"autoRotateSpeed",2),L(this,"reverseOrbit",!1),L(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),L(this,"mouseButtons",{LEFT:eo.ROTATE,MIDDLE:eo.DOLLY,RIGHT:eo.PAN}),L(this,"touches",{ONE:qa.ROTATE,TWO:qa.DOLLY_PAN}),L(this,"target0",void 0),L(this,"position0",void 0),L(this,"zoom0",void 0),L(this,"_domElementKeyEvents",null),L(this,"getPolarAngle",void 0),L(this,"getAzimuthalAngle",void 0),L(this,"setPolarAngle",void 0),L(this,"setAzimuthalAngle",void 0),L(this,"getDistance",void 0),L(this,"listenToKeyEvents",void 0),L(this,"saveState",void 0),L(this,"reset",void 0),L(this,"update",void 0),L(this,"connect",void 0),L(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof dn?this.object.zoom:1,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ie=>{let _e=iL(ie,2*Math.PI),Ce=u.phi;Ce<0&&(Ce+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let ke=Math.abs(_e-Ce);2*Math.PI-ke<ke&&(_e<Ce?_e+=2*Math.PI:Ce+=2*Math.PI),f.phi=_e-Ce,i.update()},this.setAzimuthalAngle=ie=>{let _e=iL(ie,2*Math.PI),Ce=u.theta;Ce<0&&(Ce+=2*Math.PI),_e<0&&(_e+=2*Math.PI);let ke=Math.abs(_e-Ce);2*Math.PI-ke<ke&&(_e<Ce?_e+=2*Math.PI:Ce+=2*Math.PI),f.theta=_e-Ce,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",ne),this._domElementKeyEvents=ie},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof dn?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof dn&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const ie=new F,_e=new St().setFromUnitVectors(e.up,new F(0,1,0)),Ce=_e.clone().invert(),ke=new F,tt=new St,se=2*Math.PI;return function(){const Qe=i.object.position;ie.copy(Qe).sub(i.target),ie.applyQuaternion(_e),u.setFromVector3(ie),i.autoRotate&&l===a.NONE&&D(T()),i.enableDamping?(u.theta+=f.theta*i.dampingFactor,u.phi+=f.phi*i.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Ee=i.minAzimuthAngle,We=i.maxAzimuthAngle;return isFinite(Ee)&&isFinite(We)&&(Ee<-Math.PI?Ee+=se:Ee>Math.PI&&(Ee-=se),We<-Math.PI?We+=se:We>Math.PI&&(We-=se),Ee<=We?u.theta=Math.max(Ee,Math.min(We,u.theta)):u.theta=u.theta>(Ee+We)/2?Math.max(Ee,u.theta):Math.min(We,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(i.minDistance,Math.min(i.maxDistance,u.radius)),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),ie.setFromSpherical(u),ie.applyQuaternion(Ce),Qe.copy(i.target).add(ie),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),d.set(0,0,0)),h=1,p||ke.distanceToSquared(i.object.position)>c||8*(1-tt.dot(i.object.quaternion))>c?(i.dispatchEvent(r),ke.copy(i.object.position),tt.copy(i.object.quaternion),p=!1,!0):!1}})(),this.connect=ie=>{ie===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=ie,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ge),i.domElement.addEventListener("pointerdown",qe),i.domElement.addEventListener("pointercancel",Ve),i.domElement.addEventListener("wheel",W)},this.dispose=()=>{var ie,_e,Ce,ke,tt,se;(ie=i.domElement)===null||ie===void 0||ie.removeEventListener("contextmenu",Ge),(_e=i.domElement)===null||_e===void 0||_e.removeEventListener("pointerdown",qe),(Ce=i.domElement)===null||Ce===void 0||Ce.removeEventListener("pointercancel",Ve),(ke=i.domElement)===null||ke===void 0||ke.removeEventListener("wheel",W),(tt=i.domElement)===null||tt===void 0||tt.ownerDocument.removeEventListener("pointermove",ye),(se=i.domElement)===null||se===void 0||se.ownerDocument.removeEventListener("pointerup",Oe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ne)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new Dm,f=new Dm;let h=1;const d=new F;let p=!1;const m=new Ae,A=new Ae,v=new Ae,y=new Ae,x=new Ae,w=new Ae,E=new Ae,S=new Ae,M=new Ae,b=[],B={};function T(){return 2*Math.PI/60/60*i.autoRotateSpeed}function k(){return Math.pow(.95,i.zoomSpeed)}function D(ie){i.reverseOrbit?f.theta+=ie:f.theta-=ie}function N(ie){i.reverseOrbit?f.phi+=ie:f.phi-=ie}const O=(()=>{const ie=new F;return function(Ce,ke){ie.setFromMatrixColumn(ke,0),ie.multiplyScalar(-Ce),d.add(ie)}})(),Y=(()=>{const ie=new F;return function(Ce,ke){i.screenSpacePanning===!0?ie.setFromMatrixColumn(ke,1):(ie.setFromMatrixColumn(ke,0),ie.crossVectors(i.object.up,ie)),ie.multiplyScalar(Ce),d.add(ie)}})(),q=(()=>{const ie=new F;return function(Ce,ke){const tt=i.domElement;if(tt&&i.object instanceof dn&&i.object.isPerspectiveCamera){const se=i.object.position;ie.copy(se).sub(i.target);let Je=ie.length();Je*=Math.tan(i.object.fov/2*Math.PI/180),O(2*Ce*Je/tt.clientHeight,i.object.matrix),Y(2*ke*Je/tt.clientHeight,i.object.matrix)}else tt&&i.object instanceof Is&&i.object.isOrthographicCamera?(O(Ce*(i.object.right-i.object.left)/i.object.zoom/tt.clientWidth,i.object.matrix),Y(ke*(i.object.top-i.object.bottom)/i.object.zoom/tt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function K(ie){i.object instanceof dn&&i.object.isPerspectiveCamera?h/=ie:i.object instanceof Is&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*ie)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(ie){i.object instanceof dn&&i.object.isPerspectiveCamera?h*=ie:i.object instanceof Is&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/ie)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function U(ie){m.set(ie.clientX,ie.clientY)}function Q(ie){E.set(ie.clientX,ie.clientY)}function H(ie){y.set(ie.clientX,ie.clientY)}function V(ie){A.set(ie.clientX,ie.clientY),v.subVectors(A,m).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(D(2*Math.PI*v.x/_e.clientHeight),N(2*Math.PI*v.y/_e.clientHeight)),m.copy(A),i.update()}function J(ie){S.set(ie.clientX,ie.clientY),M.subVectors(S,E),M.y>0?K(k()):M.y<0&&z(k()),E.copy(S),i.update()}function j(ie){x.set(ie.clientX,ie.clientY),w.subVectors(x,y).multiplyScalar(i.panSpeed),q(w.x,w.y),y.copy(x),i.update()}function re(ie){ie.deltaY<0?z(k()):ie.deltaY>0&&K(k()),i.update()}function ee(ie){let _e=!1;switch(ie.code){case i.keys.UP:q(0,i.keyPanSpeed),_e=!0;break;case i.keys.BOTTOM:q(0,-i.keyPanSpeed),_e=!0;break;case i.keys.LEFT:q(i.keyPanSpeed,0),_e=!0;break;case i.keys.RIGHT:q(-i.keyPanSpeed,0),_e=!0;break}_e&&(ie.preventDefault(),i.update())}function ae(){if(b.length==1)m.set(b[0].pageX,b[0].pageY);else{const ie=.5*(b[0].pageX+b[1].pageX),_e=.5*(b[0].pageY+b[1].pageY);m.set(ie,_e)}}function ce(){if(b.length==1)y.set(b[0].pageX,b[0].pageY);else{const ie=.5*(b[0].pageX+b[1].pageX),_e=.5*(b[0].pageY+b[1].pageY);y.set(ie,_e)}}function ge(){const ie=b[0].pageX-b[1].pageX,_e=b[0].pageY-b[1].pageY,Ce=Math.sqrt(ie*ie+_e*_e);E.set(0,Ce)}function xe(){i.enableZoom&&ge(),i.enablePan&&ce()}function Se(){i.enableZoom&&ge(),i.enableRotate&&ae()}function oe(ie){if(b.length==1)A.set(ie.pageX,ie.pageY);else{const Ce=je(ie),ke=.5*(ie.pageX+Ce.x),tt=.5*(ie.pageY+Ce.y);A.set(ke,tt)}v.subVectors(A,m).multiplyScalar(i.rotateSpeed);const _e=i.domElement;_e&&(D(2*Math.PI*v.x/_e.clientHeight),N(2*Math.PI*v.y/_e.clientHeight)),m.copy(A)}function he(ie){if(b.length==1)x.set(ie.pageX,ie.pageY);else{const _e=je(ie),Ce=.5*(ie.pageX+_e.x),ke=.5*(ie.pageY+_e.y);x.set(Ce,ke)}w.subVectors(x,y).multiplyScalar(i.panSpeed),q(w.x,w.y),y.copy(x)}function Re(ie){const _e=je(ie),Ce=ie.pageX-_e.x,ke=ie.pageY-_e.y,tt=Math.sqrt(Ce*Ce+ke*ke);S.set(0,tt),M.set(0,Math.pow(S.y/E.y,i.zoomSpeed)),K(M.y),E.copy(S)}function Ie(ie){i.enableZoom&&Re(ie),i.enablePan&&he(ie)}function Te(ie){i.enableZoom&&Re(ie),i.enableRotate&&oe(ie)}function qe(ie){if(i.enabled!==!1){if(b.length===0){var _e,Ce;(_e=i.domElement)===null||_e===void 0||_e.ownerDocument.addEventListener("pointermove",ye),(Ce=i.domElement)===null||Ce===void 0||Ce.ownerDocument.addEventListener("pointerup",Oe)}be(ie),ie.pointerType==="touch"?ue(ie):Pe(ie)}}function ye(ie){i.enabled!==!1&&(ie.pointerType==="touch"?ve(ie):X(ie))}function Oe(ie){if(De(ie),b.length===0){var _e,Ce,ke;(_e=i.domElement)===null||_e===void 0||_e.releasePointerCapture(ie.pointerId),(Ce=i.domElement)===null||Ce===void 0||Ce.ownerDocument.removeEventListener("pointermove",ye),(ke=i.domElement)===null||ke===void 0||ke.ownerDocument.removeEventListener("pointerup",Oe)}i.dispatchEvent(o),l=a.NONE}function Ve(ie){De(ie)}function Pe(ie){let _e;switch(ie.button){case 0:_e=i.mouseButtons.LEFT;break;case 1:_e=i.mouseButtons.MIDDLE;break;case 2:_e=i.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case eo.DOLLY:if(i.enableZoom===!1)return;Q(ie),l=a.DOLLY;break;case eo.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(i.enablePan===!1)return;H(ie),l=a.PAN}else{if(i.enableRotate===!1)return;U(ie),l=a.ROTATE}break;case eo.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(i.enableRotate===!1)return;U(ie),l=a.ROTATE}else{if(i.enablePan===!1)return;H(ie),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function X(ie){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;V(ie);break;case a.DOLLY:if(i.enableZoom===!1)return;J(ie);break;case a.PAN:if(i.enablePan===!1)return;j(ie);break}}function W(ie){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ie.preventDefault(),i.dispatchEvent(s),re(ie),i.dispatchEvent(o))}function ne(ie){i.enabled===!1||i.enablePan===!1||ee(ie)}function ue(ie){switch(me(ie),b.length){case 1:switch(i.touches.ONE){case qa.ROTATE:if(i.enableRotate===!1)return;ae(),l=a.TOUCH_ROTATE;break;case qa.PAN:if(i.enablePan===!1)return;ce(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case qa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;xe(),l=a.TOUCH_DOLLY_PAN;break;case qa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Se(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function ve(ie){switch(me(ie),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;oe(ie),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;he(ie),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ie(ie),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Te(ie),i.update();break;default:l=a.NONE}}function Ge(ie){i.enabled!==!1&&ie.preventDefault()}function be(ie){b.push(ie)}function De(ie){delete B[ie.pointerId];for(let _e=0;_e<b.length;_e++)if(b[_e].pointerId==ie.pointerId){b.splice(_e,1);return}}function me(ie){let _e=B[ie.pointerId];_e===void 0&&(_e=new Ae,B[ie.pointerId]=_e),_e.set(ie.pageX,ie.pageY)}function je(ie){const _e=ie.pointerId===b[0].pointerId?b[1]:b[0];return B[_e.pointerId]}n!==void 0&&this.connect(n),this.update()}}class jde extends Iz{constructor(e,n){super(e,n),this.screenSpacePanning=!1,this.mouseButtons.LEFT=eo.PAN,this.mouseButtons.RIGHT=eo.ROTATE,this.touches.ONE=qa.PAN,this.touches.TWO=qa.DOLLY_ROTATE}}const At={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},gn={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},Ut={x:0,y:0},vs={camera:new Ne,gizmos:new Ne},Cn={type:"change"},Eo={type:"start"},Ys={type:"end"};class qde extends Cr{constructor(e,n=null,i=null){super(),L(this,"camera",void 0),L(this,"domElement",void 0),L(this,"scene",void 0),L(this,"mouseActions",void 0),L(this,"_mouseOp",void 0),L(this,"_v2_1",void 0),L(this,"_v3_1",void 0),L(this,"_v3_2",void 0),L(this,"_m4_1",void 0),L(this,"_m4_2",void 0),L(this,"_quat",void 0),L(this,"_translationMatrix",void 0),L(this,"_rotationMatrix",void 0),L(this,"_scaleMatrix",void 0),L(this,"_rotationAxis",void 0),L(this,"_cameraMatrixState",void 0),L(this,"_cameraProjectionState",void 0),L(this,"_fovState",void 0),L(this,"_upState",void 0),L(this,"_zoomState",void 0),L(this,"_nearPos",void 0),L(this,"_farPos",void 0),L(this,"_gizmoMatrixState",void 0),L(this,"_up0",void 0),L(this,"_zoom0",void 0),L(this,"_fov0",void 0),L(this,"_initialNear",void 0),L(this,"_nearPos0",void 0),L(this,"_initialFar",void 0),L(this,"_farPos0",void 0),L(this,"_cameraMatrixState0",void 0),L(this,"_gizmoMatrixState0",void 0),L(this,"_button",void 0),L(this,"_touchStart",void 0),L(this,"_touchCurrent",void 0),L(this,"_input",void 0),L(this,"_switchSensibility",void 0),L(this,"_startFingerDistance",void 0),L(this,"_currentFingerDistance",void 0),L(this,"_startFingerRotation",void 0),L(this,"_currentFingerRotation",void 0),L(this,"_devPxRatio",void 0),L(this,"_downValid",void 0),L(this,"_nclicks",void 0),L(this,"_downEvents",void 0),L(this,"_clickStart",void 0),L(this,"_maxDownTime",void 0),L(this,"_maxInterval",void 0),L(this,"_posThreshold",void 0),L(this,"_movementThreshold",void 0),L(this,"_currentCursorPosition",void 0),L(this,"_startCursorPosition",void 0),L(this,"_grid",void 0),L(this,"_gridPosition",void 0),L(this,"_gizmos",void 0),L(this,"_curvePts",void 0),L(this,"_timeStart",void 0),L(this,"_animationId",void 0),L(this,"focusAnimationTime",void 0),L(this,"_timePrev",void 0),L(this,"_timeCurrent",void 0),L(this,"_anglePrev",void 0),L(this,"_angleCurrent",void 0),L(this,"_cursorPosPrev",void 0),L(this,"_cursorPosCurr",void 0),L(this,"_wPrev",void 0),L(this,"_wCurr",void 0),L(this,"adjustNearFar",void 0),L(this,"scaleFactor",void 0),L(this,"dampingFactor",void 0),L(this,"wMax",void 0),L(this,"enableAnimations",void 0),L(this,"enableGrid",void 0),L(this,"cursorZoom",void 0),L(this,"minFov",void 0),L(this,"maxFov",void 0),L(this,"enabled",void 0),L(this,"enablePan",void 0),L(this,"enableRotate",void 0),L(this,"enableZoom",void 0),L(this,"minDistance",void 0),L(this,"maxDistance",void 0),L(this,"minZoom",void 0),L(this,"maxZoom",void 0),L(this,"target",void 0),L(this,"_currentTarget",void 0),L(this,"_tbRadius",void 0),L(this,"_state",void 0),L(this,"onWindowResize",()=>{const r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c)}const s=this._tbRadius/r,a=new zu(0,0,s,s).getPoints(this._curvePts),l=new ht().setFromPoints(a);for(const c in this._gizmos.children){const u=this._gizmos.children[c];u.geometry=l}this.dispatchEvent(Cn)}),L(this,"onContextMenu",r=>{if(!!this.enabled){for(let s=0;s<this.mouseActions.length;s++)if(this.mouseActions[s].mouse==2){r.preventDefault();break}}}),L(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=gn.NONE}),L(this,"onPointerDown",r=>{if(r.button==0&&r.isPrimary?(this._downValid=!0,this._downEvents.push(r)):this._downValid=!1,r.pointerType=="touch"&&this._input!=gn.CURSOR)switch(this._touchStart.push(r),this._touchCurrent.push(r),this._input){case gn.NONE:this._input=gn.ONE_FINGER,this.onSinglePanStart(r,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case gn.ONE_FINGER:case gn.ONE_FINGER_SWITCHED:this._input=gn.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case gn.TWO_FINGER:this._input=gn.MULT_FINGER,this.onTriplePanStart();break}else if(r.pointerType!="touch"&&this._input==gn.NONE){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT"),this._mouseOp=this.getOpFromAction(r.button,s),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=gn.CURSOR,this._button=r.button,this.onSinglePanStart(r,this._mouseOp))}}),L(this,"onPointerMove",r=>{if(r.pointerType=="touch"&&this._input!=gn.CURSOR)switch(this._input){case gn.ONE_FINGER:this.updateTouchEvent(r),this.onSinglePanMove(r,At.ROTATE);break;case gn.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],r)*this._devPxRatio>=this._switchSensibility){this._input=gn.ONE_FINGER,this.updateTouchEvent(r),this.onSinglePanStart(r,"ROTATE");break}break;case gn.TWO_FINGER:this.updateTouchEvent(r),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case gn.MULT_FINGER:this.updateTouchEvent(r),this.onTriplePanMove();break}else if(r.pointerType!="touch"&&this._input==gn.CURSOR){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT");const o=this.getOpStateFromAction(this._button,s);o&&this.onSinglePanMove(r,o)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],r)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),L(this,"onPointerUp",r=>{if(r.pointerType=="touch"&&this._input!=gn.CURSOR){const s=this._touchCurrent.length;for(let o=0;o<s;o++)if(this._touchCurrent[o].pointerId==r.pointerId){this._touchCurrent.splice(o,1),this._touchStart.splice(o,1);break}switch(this._input){case gn.ONE_FINGER:case gn.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=gn.NONE,this.onSinglePanEnd();break;case gn.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=gn.ONE_FINGER_SWITCHED;break;case gn.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=gn.NONE,this.onTriplePanEnd());break}}else r.pointerType!="touch"&&this._input==gn.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=gn.NONE,this.onSinglePanEnd(),this._button=-1);if(r.isPrimary)if(this._downValid)if(r.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const o=r.timeStamp-this._clickStart,a=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;o<=this._maxInterval&&a<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(r)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),L(this,"onWheel",r=>{var s;if(this.enabled&&this.enableZoom&&this.domElement){let u=null;r.ctrlKey||r.metaKey?u="CTRL":r.shiftKey&&(u="SHIFT");const f=this.getOpFromAction("WHEEL",u);if(f){r.preventDefault(),this.dispatchEvent(Eo);const h=125;let d=r.deltaY/h,p=1;switch(d>0?p=1/this.scaleFactor:d<0&&(p=this.scaleFactor),f){case"ZOOM":if(this.updateTbState(At.SCALE,!0),d>0?p=1/Math.pow(this.scaleFactor,d):d<0&&(p=Math.pow(this.scaleFactor,-d)),this.cursorZoom&&this.enablePan){var o,a;let m;if(((o=this.camera)===null||o===void 0?void 0:o.type)==="OrthographicCamera"){var l;m=(l=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))===null||l===void 0?void 0:l.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)}if(((a=this.camera)===null||a===void 0?void 0:a.type)==="PerspectiveCamera"){var c;m=(c=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))===null||c===void 0?void 0:c.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)}m!==void 0&&this.applyTransformMatrix(this.applyScale(p,m))}else this.applyTransformMatrix(this.applyScale(p,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(At.IDLE,!1),this.dispatchEvent(Cn),this.dispatchEvent(Ys);break;case"FOV":if(((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"){this.updateTbState(At.FOV,!0),r.deltaX!=0&&(d=r.deltaX/h,p=1,d>0?p=1/Math.pow(this.scaleFactor,d):d<0&&(p=Math.pow(this.scaleFactor,-d))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const m=this._v3_1.distanceTo(this._gizmos.position);let A=m/p;A=ut.clamp(A,this.minDistance,this.maxDistance);const v=m*Math.tan(ut.DEG2RAD*this.camera.fov*.5);let y=ut.RAD2DEG*(Math.atan(v/A)*2);y>this.maxFov?y=this.maxFov:y<this.minFov&&(y=this.minFov);const x=v/Math.tan(ut.DEG2RAD*(y/2));p=m/x,this.setFov(y),this.applyTransformMatrix(this.applyScale(p,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(At.IDLE,!1),this.dispatchEvent(Cn),this.dispatchEvent(Ys);break}}}}),L(this,"onSinglePanStart",(r,s)=>{var o;if(this.enabled&&this.domElement)switch(this.dispatchEvent(Eo),this.setCenter(r.clientX,r.clientY),s){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Cn)),this.camera){this.updateTbState(At.PAN,!0);const a=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(Cn))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(At.ROTATE,!0);const a=this.unprojectOnTbSurface(this.camera,Ut.x,Ut.y,this.domElement,this._tbRadius);a!==void 0&&this._startCursorPosition.copy(a),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(Cn);break;case"FOV":if(!this.enableZoom)return;((o=this.camera)===null||o===void 0?void 0:o.type)==="PerspectiveCamera"&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Cn)),this.updateTbState(At.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Cn)),this.updateTbState(At.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),L(this,"onSinglePanMove",(r,s)=>{var o;if(this.enabled&&this.domElement){const a=s!=this._state;switch(this.setCenter(r.clientX,r.clientY),s){case At.PAN:if(this.enablePan&&this.camera)if(a){this.dispatchEvent(Ys),this.dispatchEvent(Eo),this.updateTbState(s,!0);const l=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement);l!==void 0&&this._startCursorPosition.copy(l),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const l=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement);l!==void 0&&this._currentCursorPosition.copy(l),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case At.ROTATE:if(this.enableRotate&&this.camera)if(a){this.dispatchEvent(Ys),this.dispatchEvent(Eo),this.updateTbState(s,!0);const l=this.unprojectOnTbSurface(this.camera,Ut.x,Ut.y,this.domElement,this._tbRadius);l!==void 0&&this._startCursorPosition.copy(l),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const l=this.unprojectOnTbSurface(this.camera,Ut.x,Ut.y,this.domElement,this._tbRadius);l!==void 0&&this._currentCursorPosition.copy(l);const c=this._startCursorPosition.distanceTo(this._currentCursorPosition),u=this._startCursorPosition.angleTo(this._currentCursorPosition),f=Math.max(c/this._tbRadius,u);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),f)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=f,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case At.SCALE:if(this.enableZoom)if(a)this.dispatchEvent(Ys),this.dispatchEvent(Eo),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5);const c=this._currentCursorPosition.y-this._startCursorPosition.y;let u=1;c<0?u=1/Math.pow(this.scaleFactor,-c*8):c>0&&(u=Math.pow(this.scaleFactor,c*8)),this.applyTransformMatrix(this.applyScale(u,this._gizmos.position))}break;case At.FOV:if(this.enableZoom&&((o=this.camera)===null||o===void 0?void 0:o.type)==="PerspectiveCamera")if(a)this.dispatchEvent(Ys),this.dispatchEvent(Eo),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5);const c=this._currentCursorPosition.y-this._startCursorPosition.y;let u=1;c<0?u=1/Math.pow(this.scaleFactor,-c*8):c>0&&(u=Math.pow(this.scaleFactor,c*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const f=this._v3_1.distanceTo(this._gizmos.position);let h=f/u;h=ut.clamp(h,this.minDistance,this.maxDistance);const d=f*Math.tan(ut.DEG2RAD*this._fovState*.5);let p=ut.RAD2DEG*(Math.atan(d/h)*2);p=ut.clamp(p,this.minFov,this.maxFov);const m=d/Math.tan(ut.DEG2RAD*(p/2));u=f/m,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(p),this.applyTransformMatrix(this.applyScale(u,this._v3_2,!1));const A=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(m/f);this._m4_1.makeTranslation(A.x,A.y,A.z)}break}this.dispatchEvent(Cn)}}),L(this,"onSinglePanEnd",()=>{if(this._state==At.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const s=Math.abs((this._wPrev+this._wCurr)/2),o=this;this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(At.ANIMATION_ROTATE,!0);const l=o.calculateRotationAxis(o._cursorPosPrev,o._cursorPosCurr);o.onRotationAnim(a,l,Math.min(s,o.wMax))})}else this.updateTbState(At.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Cn);else this.updateTbState(At.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Cn)}else(this._state==At.PAN||this._state==At.IDLE)&&(this.updateTbState(At.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(Cn));this.dispatchEvent(Ys)}),L(this,"onDoubleTap",r=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(Eo),this.setCenter(r.clientX,r.clientY);const s=this.unprojectOnObj(this.getCursorNDC(Ut.x,Ut.y,this.domElement),this.camera);if(s&&this.enableAnimations){const o=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(At.ANIMATION_FOCUS,!0),o.onFocusAnim(a,s,o._cameraMatrixState,o._gizmoMatrixState)})}else s&&!this.enableAnimations&&(this.updateTbState(At.FOCUS,!0),this.focus(s,this.scaleFactor),this.updateTbState(At.IDLE,!1),this.dispatchEvent(Cn))}this.dispatchEvent(Ys)}),L(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(Eo),this.updateTbState(At.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const r=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement,!0);r!==void 0&&this._startCursorPosition.copy(r),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),L(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=At.PAN&&(this.updateTbState(At.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const r=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement,!0);r!==void 0&&this._currentCursorPosition.copy(r),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(Cn)}}),L(this,"onDoublePanEnd",()=>{this.updateTbState(At.IDLE,!1),this.dispatchEvent(Ys)}),L(this,"onRotateStart",()=>{if(this.enabled&&this.enableRotate){var r;this.dispatchEvent(Eo),this.updateTbState(At.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(r=this.camera)===null||r===void 0||r.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0)}}),L(this,"onRotateMove",()=>{if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let s;if(this._state!=At.ZROTATE&&(this.updateTbState(At.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),!this.enablePan)s=new F().setFromMatrixPosition(this._gizmoMatrixState);else if(this.camera){var r;this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),s=(r=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement))===null||r===void 0?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)}const o=ut.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);s!==void 0&&this.applyTransformMatrix(this.zRotate(s,o)),this.dispatchEvent(Cn)}}),L(this,"onRotateEnd",()=>{this.updateTbState(At.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ys)}),L(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(Eo),this.updateTbState(At.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),L(this,"onPinchMove",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const l=12;this._state!=At.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(At.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),l*this._devPxRatio);const c=this._currentFingerDistance/this._startFingerDistance;let u;if(!this.enablePan)u=this._gizmos.position;else{var r,s;if(((r=this.camera)===null||r===void 0?void 0:r.type)==="OrthographicCamera"){var o;u=(o=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement))===null||o===void 0?void 0:o.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)}else if(((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"){var a;u=(a=this.unprojectOnTbPlane(this.camera,Ut.x,Ut.y,this.domElement))===null||a===void 0?void 0:a.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)}}u!==void 0&&this.applyTransformMatrix(this.applyScale(c,u)),this.dispatchEvent(Cn)}}),L(this,"onPinchEnd",()=>{this.updateTbState(At.IDLE,!1),this.dispatchEvent(Ys)}),L(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(Eo),this.updateTbState(At.SCALE,!0);let r=0,s=0;const o=this._touchCurrent.length;for(let a=0;a<o;a++)r+=this._touchCurrent[a].clientX,s+=this._touchCurrent[a].clientY;this.setCenter(r/o,s/o),this._startCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),L(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let r=0,s=0;const o=this._touchCurrent.length;for(let A=0;A<o;A++)r+=this._touchCurrent[A].clientX,s+=this._touchCurrent[A].clientY;this.setCenter(r/o,s/o);const a=8;this._currentCursorPosition.setY(this.getCursorNDC(Ut.x,Ut.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*a):l>0&&(c=Math.pow(this.scaleFactor,l*a)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let f=u/c;f=ut.clamp(f,this.minDistance,this.maxDistance);const h=u*Math.tan(ut.DEG2RAD*this._fovState*.5);let d=ut.RAD2DEG*(Math.atan(h/f)*2);d=ut.clamp(d,this.minFov,this.maxFov);const p=h/Math.tan(ut.DEG2RAD*(d/2));c=u/p,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const m=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(p/u);this._m4_1.makeTranslation(m.x,m.y,m.z),this.dispatchEvent(Cn)}}),L(this,"onTriplePanEnd",()=>{this.updateTbState(At.IDLE,!1),this.dispatchEvent(Ys)}),L(this,"setCenter",(r,s)=>{Ut.x=r,Ut.y=s}),L(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),L(this,"setMouseAction",(r,s,o=null)=>{const a=["PAN","ROTATE","ZOOM","FOV"],l=[0,1,2,"WHEEL"],c=["CTRL","SHIFT",null];let u;if(!a.includes(r)||!l.includes(s)||!c.includes(o)||s=="WHEEL"&&r!="ZOOM"&&r!="FOV")return!1;switch(r){case"PAN":u=At.PAN;break;case"ROTATE":u=At.ROTATE;break;case"ZOOM":u=At.SCALE;break;case"FOV":u=At.FOV;break}const f={operation:r,mouse:s,key:o,state:u};for(let h=0;h<this.mouseActions.length;h++)if(this.mouseActions[h].mouse==f.mouse&&this.mouseActions[h].key==f.key)return this.mouseActions.splice(h,1,f),!0;return this.mouseActions.push(f),!0}),L(this,"getOpFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.operation;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.operation}return null}),L(this,"getOpStateFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.state;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.state}return null}),L(this,"getAngle",(r,s)=>Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX)*180/Math.PI),L(this,"updateTouchEvent",r=>{for(let s=0;s<this._touchCurrent.length;s++)if(this._touchCurrent[s].pointerId==r.pointerId){this._touchCurrent.splice(s,1,r);break}}),L(this,"calculateAngularSpeed",(r,s,o,a)=>{const l=s-r,c=(a-o)/1e3;return c==0?0:l/c}),L(this,"calculatePointersDistance",(r,s)=>Math.sqrt(Math.pow(s.clientX-r.clientX,2)+Math.pow(s.clientY-r.clientY,2))),L(this,"calculateRotationAxis",(r,s)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(r,s).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),L(this,"calculateTbRadius",r=>{const o=r.position.distanceTo(this._gizmos.position);if(r.type=="PerspectiveCamera"){const a=ut.DEG2RAD*r.fov*.5,l=Math.atan(r.aspect*Math.tan(a));return Math.tan(Math.min(a,l))*o*.67}else if(r.type=="OrthographicCamera")return Math.min(r.top,r.right)*.67}),L(this,"focus",(r,s,o=1)=>{if(this.camera){const a=r.clone();a.sub(this._gizmos.position).multiplyScalar(o),this._translationMatrix.makeTranslation(a.x,a.y,a.z);const l=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const c=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(s,this._gizmos.position)),this._gizmoMatrixState.copy(l),this._cameraMatrixState.copy(c)}}),L(this,"drawGrid",()=>{if(this.scene){var r,s;let l,c,u,f;if(((r=this.camera)===null||r===void 0?void 0:r.type)==="OrthographicCamera"){const h=this.camera.right-this.camera.left,d=this.camera.bottom-this.camera.top;u=Math.max(h,d),f=u/20,l=u/this.camera.zoom*3,c=l/f*this.camera.zoom}else if(((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"){const h=this.camera.position.distanceTo(this._gizmos.position),d=ut.DEG2RAD*this.camera.fov*.5,p=Math.atan(this.camera.aspect*Math.tan(d));u=Math.tan(Math.max(d,p))*h*2,f=u/20,l=u*3,c=l/f}this._grid==null&&this.camera&&(this._grid=new jU(l,c,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),L(this,"connect",r=>{r===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),L(this,"dispose",()=>{var r,s,o,a,l;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(r=this.domElement)===null||r===void 0||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)===null||s===void 0||s.removeEventListener("pointercancel",this.onPointerCancel),(o=this.domElement)===null||o===void 0||o.removeEventListener("wheel",this.onWheel),(a=this.domElement)===null||a===void 0||a.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(l=this.scene)===null||l===void 0||l.remove(this._gizmos),this.disposeGrid()}),L(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),L(this,"easeOutCubic",r=>1-Math.pow(1-r,3)),L(this,"activateGizmos",r=>{for(const s of this._gizmos.children)s.material.setValues({opacity:r?1:.6})}),L(this,"getCursorNDC",(r,s,o)=>{const a=o.getBoundingClientRect();return this._v2_1.setX((r-a.left)/a.width*2-1),this._v2_1.setY((a.bottom-s)/a.height*2-1),this._v2_1.clone()}),L(this,"getCursorPosition",(r,s,o)=>{var a;return this._v2_1.copy(this.getCursorNDC(r,s,o)),((a=this.camera)===null||a===void 0?void 0:a.type)==="OrthographicCamera"&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone()}),L(this,"setCamera",r=>{if(r){r.lookAt(this.target),r.updateMatrix(),(r==null?void 0:r.type)=="PerspectiveCamera"&&(this._fov0=r.fov,this._fovState=r.fov),this._cameraMatrixState0.copy(r.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(r.projectionMatrix),this._zoom0=r.zoom,this._zoomState=this._zoom0,this._initialNear=r.near,this._nearPos0=r.position.distanceTo(this.target)-r.near,this._nearPos=this._initialNear,this._initialFar=r.far,this._farPos0=r.position.distanceTo(this.target)-r.far,this._farPos=this._initialFar,this._up0.copy(r.up),this._upState.copy(r.up),this.camera=r,this.camera.updateProjectionMatrix();const s=this.calculateTbRadius(r);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius)}}),L(this,"makeGizmos",(r,s)=>{const a=new zu(0,0,s,s).getPoints(this._curvePts),l=new ht().setFromPoints(a),c=new ai({color:16744576,fog:!1,transparent:!0,opacity:.6}),u=new ai({color:8454016,fog:!1,transparent:!0,opacity:.6}),f=new ai({color:8421631,fog:!1,transparent:!0,opacity:.6}),h=new Rt(l,c),d=new Rt(l,u),p=new Rt(l,f),m=Math.PI*.5;if(h.rotation.x=m,d.rotation.y=m,this._gizmoMatrixState0.identity().setPosition(r),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const A=1/this.camera.zoom;this._scaleMatrix.makeScale(A,A,A),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(r.x,r.y,r.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(h),this._gizmos.add(d),this._gizmos.add(p)}),L(this,"onFocusAnim",(r,s,o,a)=>{if(this._timeStart==-1&&(this._timeStart=r),this._state==At.ANIMATION_FOCUS){const c=(r-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(a),c>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,this.scaleFactor),this._timeStart=-1,this.updateTbState(At.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Cn);else{const u=this.easeOutCubic(c),f=1-u+this.scaleFactor*u;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,f,u),this.dispatchEvent(Cn);const h=this;this._animationId=window.requestAnimationFrame(function(d){h.onFocusAnim(d,s,o,a.clone())})}}else this._animationId=-1,this._timeStart=-1}),L(this,"onRotationAnim",(r,s,o)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=r),this._state==At.ANIMATION_ROTATE){const a=(r-this._timeStart)/1e3;if(o+-this.dampingFactor*a>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(a,2)+o*a+0,this.applyTransformMatrix(this.rotate(s,this._angleCurrent)),this.dispatchEvent(Cn);const c=this;this._animationId=window.requestAnimationFrame(function(u){c.onRotationAnim(u,s,o)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(At.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Cn)}else this._animationId=-1,this._timeStart=-1,this._state!=At.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(Cn))}),L(this,"pan",(r,s,o=!1)=>{if(this.camera){const a=r.clone().sub(s);if(this.camera.type==="OrthographicCamera"&&a.multiplyScalar(1/this.camera.zoom),this.camera.type==="PerspectiveCamera"&&o){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const l=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);a.multiplyScalar(1/l)}this._v3_1.set(a.x,a.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return vs}),L(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera.type==="PerspectiveCamera"&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const r=this.calculateTbRadius(this.camera);r!==void 0&&(this._tbRadius=r),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(At.IDLE,!1),this.dispatchEvent(Cn)}}),L(this,"rotate",(r,s)=>{const o=this._gizmos.position;return this._translationMatrix.makeTranslation(-o.x,-o.y,-o.z),this._rotationMatrix.makeRotationAxis(r,-s),this._m4_1.makeTranslation(o.x,o.y,o.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),vs}),L(this,"copyState",()=>{if(this.camera){var r;const s=JSON.stringify(((r=this.camera)===null||r===void 0?void 0:r.type)==="OrthographicCamera"?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(s)}}),L(this,"pasteState",()=>{const r=this;navigator.clipboard.readText().then(function(o){r.setStateFromJSON(o)})}),L(this,"saveState",()=>{!this.camera||(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera.type==="PerspectiveCamera"&&(this._fov0=this.camera.fov))}),L(this,"applyScale",(r,s,o=!0)=>{if(!this.camera)return;const a=s.clone();let l=1/r;if(this.camera.type==="OrthographicCamera"){this.camera.zoom=this._zoomState,this.camera.zoom*=r,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,l=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,l=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(l,l,l),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),a.sub(this._v3_1);const c=a.clone().multiplyScalar(l);return a.sub(c),this._m4_1.makeTranslation(a.x,a.y,a.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),vs}if(this.camera.type==="PerspectiveCamera"){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let c=this._v3_1.distanceTo(a),u=c-c*l;const f=c-u;f<this.minDistance?(l=this.minDistance/c,u=c-c*l):f>this.maxDistance&&(l=this.maxDistance/c,u=c-c*l);let h=a.clone().sub(this._v3_1).normalize().multiplyScalar(u);if(this._m4_1.makeTranslation(h.x,h.y,h.z),o){const d=this._v3_2;c=d.distanceTo(a),u=c-c*l,h=a.clone().sub(this._v3_2).normalize().multiplyScalar(u),this._translationMatrix.makeTranslation(d.x,d.y,d.z),this._scaleMatrix.makeScale(l,l,l),this._m4_2.makeTranslation(h.x,h.y,h.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-d.x,-d.y,-d.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return vs}}),L(this,"setFov",r=>{var s;((s=this.camera)===null||s===void 0?void 0:s.type)==="PerspectiveCamera"&&(this.camera.fov=ut.clamp(r,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),L(this,"setTarget",(r,s,o)=>{if(this.camera){this.target.set(r,s,o),this._gizmos.position.set(r,s,o);const a=this.calculateTbRadius(this.camera);a!==void 0&&(this._tbRadius=a),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),L(this,"zRotate",(r,s)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,s),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._m4_1.makeTranslation(r.x,r.y,r.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(r),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,s),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),vs)),L(this,"unprojectOnObj",(r,s)=>{if(!this.scene)return null;const o=new Kd;o.near=s.near,o.far=s.far,o.setFromCamera(r,s);const a=o.intersectObjects(this.scene.children,!0);for(let l=0;l<a.length;l++)if(a[l].object.uuid!=this._gizmos.uuid&&a[l].face)return a[l].point.clone();return null}),L(this,"unprojectOnTbSurface",(r,s,o,a,l)=>{if(r.type=="OrthographicCamera"){this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const c=Math.pow(this._v2_1.x,2),u=Math.pow(this._v2_1.y,2),f=Math.pow(this._tbRadius,2);return c+u<=f*.5?this._v3_1.setZ(Math.sqrt(f-(c+u))):this._v3_1.setZ(f*.5/Math.sqrt(c+u)),this._v3_1}if(r.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=r.position.distanceTo(this._gizmos.position),f=Math.pow(l,2),h=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return c.set(this._v3_1.x,this._v3_1.y,l),c;const p=h/d,m=u;let A=Math.pow(p,2)+1,v=2*p*m,y=Math.pow(m,2)-f,x=Math.pow(v,2)-4*A*y;if(x>=0&&(this._v2_1.setX((-v-Math.sqrt(x))/(2*A)),this._v2_1.setY(p*this._v2_1.x+m),ut.RAD2DEG*this._v2_1.angle()>=45)){const S=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(S),c.z+=u,c}A=p,v=m,y=-f*.5,x=Math.pow(v,2)-4*A*y,this._v2_1.setX((-v-Math.sqrt(x))/(2*A)),this._v2_1.setY(p*this._v2_1.x+m);const w=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(w),c.z+=u,c}}),L(this,"unprojectOnTbPlane",(r,s,o,a,l=!1)=>{if(r.type=="OrthographicCamera")return this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(r.type=="PerspectiveCamera"){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=this._v3_1.z,f=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let h;if(l?h=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):h=r.position.distanceTo(this._gizmos.position),f==0)return c.set(0,0,0),c;const d=u/f,p=h,m=-p/d,A=Math.sqrt(Math.pow(p,2)+Math.pow(m,2));return c.multiplyScalar(A),c.z=0,c}}),L(this,"updateMatrixState",()=>{!this.camera||(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera.type==="OrthographicCamera"&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera.type==="PerspectiveCamera"&&(this._fovState=this.camera.fov))}),L(this,"updateTbState",(r,s)=>{this._state=r,s&&this.updateMatrixState()}),L(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const s=this.calculateTbRadius(this.camera);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(!!this.camera){if(this.camera.type==="OrthographicCamera"&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const s=ut.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(s/this.camera.zoom,this._gizmos.position,!0))}if(this.camera.type==="PerspectiveCamera"){const s=this.camera.position.distanceTo(this._gizmos.position);if(s>this.maxDistance+1e-6||s<this.minDistance-1e-6){const l=ut.clamp(s,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(l/s,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=ut.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const o=this._tbRadius,a=this.calculateTbRadius(this.camera);if(a!==void 0&&(this._tbRadius=a),o<this._tbRadius-1e-6||o>this._tbRadius+1e-6){const l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,c=this._tbRadius/l,f=new zu(0,0,c,c).getPoints(this._curvePts),h=new ht().setFromPoints(f);for(const d in this._gizmos.children){const p=this._gizmos.children[d];p.geometry=h}}}this.camera.lookAt(this._gizmos.position)}}),L(this,"setStateFromJSON",r=>{const s=JSON.parse(r);if(s.arcballState&&this.camera){this._cameraMatrixState.fromArray(s.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(s.arcballState.cameraUp),this.camera.near=s.arcballState.cameraNear,this.camera.far=s.arcballState.cameraFar,this.camera.zoom=s.arcballState.cameraZoom,this.camera.type==="PerspectiveCamera"&&(this.camera.fov=s.arcballState.cameraFov),this._gizmoMatrixState.fromArray(s.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const o=this.calculateTbRadius(this.camera);o!==void 0&&(this._tbRadius=o);const a=new Ne().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(a),this.camera.lookAt(this._gizmos.position),this.updateTbState(At.IDLE,!1),this.dispatchEvent(Cn)}}),this.camera=null,this.domElement=n,this.scene=i,this.mouseActions=[],this._mouseOp=null,this._v2_1=new Ae,this._v3_1=new F,this._v3_2=new F,this._m4_1=new Ne,this._m4_2=new Ne,this._quat=new St,this._translationMatrix=new Ne,this._rotationMatrix=new Ne,this._scaleMatrix=new Ne,this._rotationAxis=new F,this._cameraMatrixState=new Ne,this._cameraProjectionState=new Ne,this._fovState=1,this._upState=new F,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Ne,this._up0=new F,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Ne,this._gizmoMatrixState0=new Ne,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=gn.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new F,this._startCursorPosition=new F,this._grid=null,this._gridPosition=new F,this._gizmos=new ts,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new F,this._cursorPosCurr=new F,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new F(0,0,0),this._currentTarget=new F(0,0,0),this._tbRadius=1,this._state=At.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if(e!=null&&e.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==At.ROTATE||this._state==At.ZROTATE||this._state==At.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e!=null&&e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==At.SCALE||this._state==At.FOCUS||this._state==At.ANIMATION_FOCUS)&&this.camera){const n=this.calculateTbRadius(this.camera);if(n!==void 0&&(this._tbRadius=n),this.adjustNearFar){const i=this.camera.position.distanceTo(this._gizmos.position),r=new Sn;r.setFromObject(this._gizmos);const s=new zi;r.getBoundingSphere(s);const o=Math.max(this._nearPos0,s.radius+s.center.length()),a=i-this._initialNear,l=Math.min(o,a);this.camera.near=i-l;const c=Math.min(this._farPos0,-s.radius+s.center.length()),u=i-this._initialFar,f=Math.min(c,u);this.camera.far=i-f,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(Cn)}setTransformationMatrices(e=null,n=null){e?vs.camera?vs.camera.copy(e):vs.camera=e.clone():vs.camera=null,n?vs.gizmos?vs.gizmos.copy(n):vs.gizmos=n.clone():vs.gizmos=null}}function rL(t){t.preventDefault()}class Yde extends Cr{constructor(e,n){super(),L(this,"object",void 0),L(this,"domElement",null),L(this,"movementSpeed",1),L(this,"rollSpeed",.005),L(this,"dragToLook",!1),L(this,"autoForward",!1),L(this,"changeEvent",{type:"change"}),L(this,"EPS",1e-6),L(this,"tmpQuaternion",new St),L(this,"mouseStatus",0),L(this,"movementSpeedMultiplier",1),L(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),L(this,"moveVector",new F(0,0,0)),L(this,"rotationVector",new F(0,0,0)),L(this,"keydown",i=>{if(!i.altKey){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),L(this,"keyup",i=>{switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),L(this,"pointerdown",i=>{if(this.dragToLook)this.mouseStatus++;else{switch(i.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),L(this,"pointermove",i=>{if(!this.dragToLook||this.mouseStatus>0){const r=this.getContainerDimensions(),s=r.size[0]/2,o=r.size[1]/2;this.moveState.yawLeft=-(i.pageX-r.offset[0]-s)/s,this.moveState.pitchDown=(i.pageY-r.offset[1]-o)/o,this.updateRotationVector()}}),L(this,"pointerup",i=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(i.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),L(this,"lastQuaternion",new St),L(this,"lastPosition",new F),L(this,"update",i=>{const r=i*this.movementSpeed,s=i*this.rollSpeed;this.object.translateX(this.moveVector.x*r),this.object.translateY(this.moveVector.y*r),this.object.translateZ(this.moveVector.z*r),this.tmpQuaternion.set(this.rotationVector.x*s,this.rotationVector.y*s,this.rotationVector.z*s,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),L(this,"updateMovementVector",()=>{const i=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-i+this.moveState.back}),L(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),L(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),L(this,"connect",i=>{this.domElement=i,i&&!(i instanceof Document)&&i.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",rL),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),L(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",rL),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=e,n!==void 0&&this.connect(n),this.updateMovementVector(),this.updateRotationVector()}}class fx{constructor(){L(this,"enabled",!0),L(this,"needsSwap",!0),L(this,"clear",!1),L(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,i,r,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class Xde{constructor(e){L(this,"camera",new Is(-1,1,1,-1,0,1)),L(this,"geometry",new Nr(2,2)),L(this,"mesh",void 0),this.mesh=new $e(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}class dC extends fx{constructor(e,n="tDiffuse"){super(),L(this,"textureID",void 0),L(this,"uniforms",void 0),L(this,"material",void 0),L(this,"fsQuad",void 0),this.textureID=n,e instanceof $n?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=Mc.clone(e.uniforms),this.material=new $n({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Xde(this.material)}render(e,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const sL={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};class oL extends fx{constructor(e,n){super(),L(this,"scene",void 0),L(this,"camera",void 0),L(this,"inverse",void 0),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,i){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class Jde extends fx{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Kde{constructor(e,n){if(L(this,"renderer",void 0),L(this,"_pixelRatio",void 0),L(this,"_width",void 0),L(this,"_height",void 0),L(this,"renderTarget1",void 0),L(this,"renderTarget2",void 0),L(this,"writeBuffer",void 0),L(this,"readBuffer",void 0),L(this,"renderToScreen",void 0),L(this,"passes",[]),L(this,"copyPass",void 0),L(this,"clock",void 0),this.renderer=e,n===void 0){const i={minFilter:Wt,magFilter:Wt,format:Fn},r=e.getSize(new Ae);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,n=new kn(this._width*this._pixelRatio,this._height*this._pixelRatio,i),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,sL===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),dC===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new dC(sL),this.clock=new Gy}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let i=!1;const r=this.passes.length;for(let s=0;s<r;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}oL!==void 0&&(o instanceof oL?i=!0:o instanceof Jde&&(i=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new Ae);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}class $de extends fx{constructor(e,n,i,r,s=0){super(),L(this,"scene",void 0),L(this,"camera",void 0),L(this,"overrideMaterial",void 0),L(this,"clearColor",void 0),L(this,"clearAlpha",void 0),L(this,"clearDepth",!1),L(this,"_oldClearColor",new ze),this.scene=e,this.camera=n,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,n,i){let r=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}class CI extends Gi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new i0e(n)}),this.register(function(n){return new u0e(n)}),this.register(function(n){return new f0e(n)}),this.register(function(n){return new s0e(n)}),this.register(function(n){return new o0e(n)}),this.register(function(n){return new a0e(n)}),this.register(function(n){return new l0e(n)}),this.register(function(n){return new n0e(n)}),this.register(function(n){return new c0e(n)}),this.register(function(n){return new r0e(n)}),this.register(function(n){return new e0e(n)}),this.register(function(n){return new h0e(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Ts.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ui(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={};if(typeof e=="string")s=e;else if(Ts.decodeText(new Uint8Array(e,0,4))===Tz){try{o[Zt.KHR_BINARY_GLTF]=new d0e(e)}catch(f){r&&r(f);return}s=o[Zt.KHR_BINARY_GLTF].content}else s=Ts.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new C0e(l,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](c);a[f.name]=f,o[f.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const f=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(f){case Zt.KHR_MATERIALS_UNLIT:o[f]=new t0e;break;case Zt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new g0e;break;case Zt.KHR_DRACO_MESH_COMPRESSION:o[f]=new p0e(l,this.dracoLoader);break;case Zt.KHR_TEXTURE_TRANSFORM:o[f]=new m0e;break;case Zt.KHR_MESH_QUANTIZATION:o[f]=new A0e;break;default:h.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function Zde(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Zt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class e0e{constructor(e){this.parser=e,this.name=Zt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new ze(16777215);l.color!==void 0&&u.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Oy(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Pm(u),c.distance=f;break;case"spot":c=new ky(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class t0e{constructor(){this.name=Zt.KHR_MATERIALS_UNLIT}getMaterialType(){return wr}extendParams(e,n,i){const r=[];e.color=new ze(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Nt))}return Promise.all(r)}}class n0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class i0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ae(a,a)}return Promise.all(s)}}class r0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class s0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new ze(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Nt)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class o0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class a0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new ze(a[0],a[1],a[2]),Promise.all(s)}}class l0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class c0e{constructor(e){this.parser=e,this.name=Zt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ea}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new ze(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,Nt)),Promise.all(s)}}class u0e{constructor(e){this.parser=e,this.name=Zt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class f0e{constructor(e){this.parser=e,this.name=Zt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class h0e{constructor(e){this.name=Zt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}else return null}}const Tz="glTF",op=12,aL={JSON:1313821514,BIN:5130562};class d0e{constructor(e){this.name=Zt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,op);if(this.header={magic:Ts.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Tz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-op,r=new DataView(e,op);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===aL.JSON){const l=new Uint8Array(e,op+s,o);this.content=Ts.decodeText(l)}else if(a===aL.BIN){const l=op+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class p0e{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Zt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=mC[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=mC[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],d=Nm[h.componentType];c[f]=d.name,l[f]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(h){for(const d in h.attributes){const p=h.attributes[d],m=l[d];m!==void 0&&(p.normalized=m)}f(h)},a,c)})})}}class m0e{constructor(){this.name=Zt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return n.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class pC extends Ic{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new ze().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class g0e{constructor(){this.name=Zt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return pC}extendParams(e,n,i){const r=n.extensions[this.name];e.color=new ze(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Nt)),e.emissive=new ze(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new ze(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,Nt))}return Promise.all(s)}createMaterial(e){const n=new pC(e);return n.fog=!0,n.color=e.color,n.map=e.map===void 0?null:e.map,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=e.aoMap===void 0?null:e.aoMap,n.aoMapIntensity=1,n.emissive=e.emissive,n.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,n.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,n.bumpMap=e.bumpMap===void 0?null:e.bumpMap,n.bumpScale=1,n.normalMap=e.normalMap===void 0?null:e.normalMap,n.normalMapType=pl,e.normalScale&&(n.normalScale=e.normalScale),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=e.specularMap===void 0?null:e.specularMap,n.specular=e.specular,n.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,n.glossiness=e.glossiness,n.alphaMap=null,n.envMap=e.envMap===void 0?null:e.envMap,n.envMapIntensity=1,n.refractionRatio=.98,n}}class A0e{constructor(){this.name=Zt.KHR_MESH_QUANTIZATION}}class Bz extends Xd{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-n,f=(i-n)/u,h=f*f,d=h*f,p=e*c,m=p-c,A=-2*d+3*h,v=d-h,y=1-A,x=v-h+f;for(let w=0;w!==a;w++){const E=o[m+w+a],S=o[m+w+l]*u,M=o[p+w+a],b=o[p+w]*u;s[w]=y*E+x*S+A*M+v*b}return s}}const v0e=new St;class _0e extends Bz{interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return v0e.fromArray(s).normalize().toArray(s),s}}const za={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Nm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lL={9728:vn,9729:Wt,9984:ym,9985:Ey,9986:xm,9987:wa},cL={33071:Fi,33648:bd,10497:Rs},uL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ql={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},y0e={CUBICSPLINE:void 0,LINEAR:nf,STEP:Sd},yE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function x0e(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Ic({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Qo})),t.DefaultMaterial}function ap(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function hu(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function w0e(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(i){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(h)}if(r){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return i&&(t.morphAttributes.position=u),r&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function E0e(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function b0e(t){const e=t.extensions&&t.extensions[Zt.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+fL(e.attributes):n=t.indices+":"+fL(t.attributes)+":"+t.mode,n}function fL(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function gC(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function S0e(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class C0e{constructor(e={},n={}){var i,r;this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new Zde,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const s=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=typeof navigator<"u"&&((i=navigator.userAgent)===null||i===void 0?void 0:i.indexOf("Firefox"))>-1,a=typeof navigator<"u"&&o?(r=navigator.userAgent)===null||r===void 0?void 0:r.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||s||o&&a<98?this.textureLoader=new Jd(this.options.manager):this.textureLoader=new NU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ui(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};ap(s,a,r),hu(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this.loadNode(n);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Zt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Ts.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=uL[r.type],c=Nm[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,A;if(d&&d!==f){const v=Math.floor(h/d),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let x=n.cache.get(y);x||(m=new c(a,v*d,r.count*d/u),x=new sg(m,d/u),n.cache.add(y,x)),A=new ns(x,l,h%d/u,p)}else a===null?m=new c(r.count*l):m=new c(a,h,r.count*l),A=new bt(m,l,p);if(r.sparse!==void 0){const v=uL.SCALAR,y=Nm[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,E=new y(o[1],x,r.sparse.count*v),S=new c(o[2],w,r.sparse.count*l);a!==null&&(A=new bt(A.array.slice(),A.itemSize,A.normalized));for(let M=0,b=E.length;M<b;M++){const B=E[M];if(A.setX(B,S[M*l]),l>=2&&A.setY(B,S[M*l+1]),l>=3&&A.setZ(B,S[M*l+2]),l>=4&&A.setW(B,S[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=lL[h.magFilter]||Wt,u.minFilter=lL[h.minFilter]||wa,u.wrapS=cL[h.wrapS]||Rs,u.wrapT=cL[h.wrapT]||Rs,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let p=h;n.isImageBitmapLoader===!0&&(p=function(m){const A=new bn(m);A.needsUpdate=!0,h(A)}),n.load(Ts.resolveURL(f,s.path),p,void 0,d)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||S0e(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(i.texCoord!==void 0&&i.texCoord!=0&&!(n==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+n+" not yet supported."),s.extensions[Zt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Zt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Zt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new og,mi.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ai,mi.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.setAttribute("uv2",n.attributes.uv),e.material=i}getMaterialType(){return Ic}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Zt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=r[Zt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else if(l[Zt.KHR_MATERIALS_UNLIT]){const f=r[Zt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new ze(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",f.baseColorTexture,Nt)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=bi);const u=s.alphaMode||yE.OPAQUE;if(u===yE.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===yE.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==wr&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ae(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==wr&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==wr&&(a.emissive=new ze().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==wr&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,Nt)),Promise.all(c).then(function(){let f;return o===pC?f=r[Zt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):f=new o(a),s.name&&(f.name=s.name),hu(f,s),n.associations.set(f,{materials:e}),s.extensions&&ap(r,f,s),f})}createUniqueName(e){const n=qt.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Zt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return hL(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=b0e(c),f=r[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[Zt.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=hL(new ht,c,n),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?x0e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],A=o[d];let v;const y=c[d];if(A.mode===za.TRIANGLES||A.mode===za.TRIANGLE_STRIP||A.mode===za.TRIANGLE_FAN||A.mode===void 0)v=s.isSkinnedMesh===!0?new Ry(m,y):new $e(m,y),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),A.mode===za.TRIANGLE_STRIP?v.geometry=dL(v.geometry,$8):A.mode===za.TRIANGLE_FAN&&(v.geometry=dL(v.geometry,u3));else if(A.mode===za.LINES)v=new fo(m,y);else if(A.mode===za.LINE_STRIP)v=new Rt(m,y);else if(A.mode===za.LINE_LOOP)v=new x3(m,y);else if(A.mode===za.POINTS)v=new w3(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(v.geometry.morphAttributes).length>0&&E0e(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),hu(v,s),A.extensions&&ap(r,v,A),n.assignFinalMaterial(v),f.push(v)}for(let d=0,p=f.length;d<p;d++)n.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return f[0];const h=new ts;n.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new dn(ut.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Is(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),hu(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i={joints:n.joints};return n.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",n.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const f=i.channels[c],h=i.samplers[f.sampler],d=f.target,p=d.node,m=i.parameters!==void 0?i.parameters[h.input]:h.input,A=i.parameters!==void 0?i.parameters[h.output]:h.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",A)),a.push(h),l.push(d)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2],d=c[3],p=c[4],m=[];for(let v=0,y=u.length;v<y;v++){const x=u[v],w=f[v],E=h[v],S=d[v],M=p[v];if(x===void 0)continue;x.updateMatrix();let b;switch(Ql[M.path]){case Ql.weights:b=rf;break;case Ql.rotation:b=cl;break;case Ql.position:case Ql.scale:default:b=sf;break}const B=x.name?x.name:x.uuid,T=S.interpolation!==void 0?y0e[S.interpolation]:nf,k=[];Ql[M.path]===Ql.weights?x.traverse(function(N){N.morphTargetInfluences&&k.push(N.name?N.name:N.uuid)}):k.push(B);let D=E.array;if(E.normalized){const N=gC(D.constructor),O=new Float32Array(D.length);for(let Y=0,q=D.length;Y<q;Y++)O[Y]=D[Y]*N;D=O}for(let N=0,O=k.length;N<O;N++){const Y=new b(k[N]+"."+Ql[M.path],w.array,D,T);S.interpolation==="CUBICSPLINE"&&(Y.createInterpolant=function(K){const z=this instanceof cl?_0e:Bz;return new z(this.times,this.values,this.getValueSize()/3,K)},Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(Y)}}const A=i.name?i.name:"animation_"+e;return new of(A,void 0,m)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this.extensions,r=this,s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new Md:a.length>1?l=new ts:a.length===1?l=a[0]:l=new It,l!==a[0])for(let c=0,u=a.length;c<u;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),hu(l,s),s.extensions&&ap(i,l,s),s.matrix!==void 0){const c=new Ne;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const n=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new ts;r.name&&(o.name=s.createUniqueName(r.name)),hu(o,r),r.extensions&&ap(i,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(Rz(a[c],o,n,s));return Promise.all(l).then(function(){const c=u=>{const f=new Map;for(const[h,d]of s.associations)(h instanceof mi||h instanceof bn)&&f.set(h,d);return u.traverse(h=>{const d=s.associations.get(h);d!=null&&f.set(h,d)}),f};return s.associations=c(o),o})}}function Rz(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then(function(s){if(r.skin===void 0)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const l=[];for(let c=0,u=o.joints.length;c<u;c++)l.push(i.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let f=0,h=a.length;f<h;f++){const d=a[f];if(d){c.push(d);const p=new Ne;o.inverseBindMatrices!==void 0&&p.fromArray(o.inverseBindMatrices.array,f*16),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}l.bind(new Wd(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let l=0,c=a.length;l<c;l++){const u=a[l];o.push(Rz(u,s,n,i))}}return Promise.all(o)})}function M0e(t,e,n){const i=e.attributes,r=new Sn;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new F(l[0],l[1],l[2]),new F(c[0],c[1],c[2])),a.normalized){const u=gC(Nm[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new F,l=new F;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const m=gC(Nm[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new zi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function hL(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=mC[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return hu(t,e),M0e(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?w0e(t,e.targets,n):t})}function dL(t,e){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(e===u3)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s}class I0e extends ht{constructor(e,n,i,r){super();const s=[],o=[],a=[],l=new F,c=new Ne;c.makeRotationFromEuler(i),c.setPosition(n);const u=new Ne;u.copy(c).invert(),f(),this.setAttribute("position",new et(s,3)),this.setAttribute("normal",new et(o,3)),this.setAttribute("uv",new et(a,2));function f(){let m,A=[];const v=new F,y=new F;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const x=e.geometry,w=x.attributes.position,E=x.attributes.normal;if(x.index!==null){const S=x.index;for(m=0;m<S.count;m++)v.fromBufferAttribute(w,S.getX(m)),y.fromBufferAttribute(E,S.getX(m)),h(A,v,y)}else for(m=0;m<w.count;m++)v.fromBufferAttribute(w,m),y.fromBufferAttribute(E,m),h(A,v,y);for(A=d(A,l.set(1,0,0)),A=d(A,l.set(-1,0,0)),A=d(A,l.set(0,1,0)),A=d(A,l.set(0,-1,0)),A=d(A,l.set(0,0,1)),A=d(A,l.set(0,0,-1)),m=0;m<A.length;m++){const S=A[m];a.push(.5+S.position.x/r.x,.5+S.position.y/r.y),S.position.applyMatrix4(c),s.push(S.position.x,S.position.y,S.position.z),o.push(S.normal.x,S.normal.y,S.normal.z)}}function h(m,A,v){A.applyMatrix4(e.matrixWorld),A.applyMatrix4(u),v.transformDirection(e.matrixWorld),m.push(new pL(A.clone(),v.clone()))}function d(m,A){const v=[],y=.5*Math.abs(r.dot(A));for(let x=0;x<m.length;x+=3){let w,E,S,M=0,b,B,T,k;const D=m[x+0].position.dot(A)-y,N=m[x+1].position.dot(A)-y,O=m[x+2].position.dot(A)-y;switch(w=D>0,E=N>0,S=O>0,M=(w?1:0)+(E?1:0)+(S?1:0),M){case 0:{v.push(m[x]),v.push(m[x+1]),v.push(m[x+2]);break}case 1:{if(w&&(b=m[x+1],B=m[x+2],T=p(m[x],b,A,y),k=p(m[x],B,A,y)),E){b=m[x],B=m[x+2],T=p(m[x+1],b,A,y),k=p(m[x+1],B,A,y),v.push(T),v.push(B.clone()),v.push(b.clone()),v.push(B.clone()),v.push(T.clone()),v.push(k);break}S&&(b=m[x],B=m[x+1],T=p(m[x+2],b,A,y),k=p(m[x+2],B,A,y)),v.push(b.clone()),v.push(B.clone()),v.push(T),v.push(k),v.push(T.clone()),v.push(B.clone());break}case 2:{w||(b=m[x].clone(),B=p(b,m[x+1],A,y),T=p(b,m[x+2],A,y),v.push(b),v.push(B),v.push(T)),E||(b=m[x+1].clone(),B=p(b,m[x+2],A,y),T=p(b,m[x],A,y),v.push(b),v.push(B),v.push(T)),S||(b=m[x+2].clone(),B=p(b,m[x],A,y),T=p(b,m[x+1],A,y),v.push(b),v.push(B),v.push(T));break}}}return v}function p(m,A,v,y){const x=m.position.dot(v)-y,w=A.position.dot(v)-y,E=x/(x-w);return new pL(new F(m.position.x+E*(A.position.x-m.position.x),m.position.y+E*(A.position.y-m.position.y),m.position.z+E*(A.position.z-m.position.z)),new F(m.normal.x+E*(A.normal.x-m.normal.x),m.normal.y+E*(A.normal.y-m.normal.y),m.normal.z+E*(A.normal.z-m.normal.z)))}}}class pL{constructor(e,n){this.position=e,this.normal=n}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class T0e extends qd{constructor(e,n){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...f}=n,h=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(h,{...f,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a}),this.type="TextGeometry"}}const B0e={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},R0e={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},P0e={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},D0e=(()=>{const t=new ng,e=new F,n=new F,i=new F,r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,u=new F,f=new F,h=new F,d=new F,p=new F;class m{constructor(v,y,x){this.camera=v,this.scene=y,this.startPoint=new F,this.endPoint=new F,this.collection=[],this.deep=x||Number.MAX_VALUE}select(v,y){return this.startPoint=v||this.startPoint,this.endPoint=y||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(t,this.scene),this.collection}updateFrustum(v,y){if(v=v||this.startPoint,y=y||this.endPoint,v.x===y.x&&(y.x+=Number.EPSILON),v.y===y.y&&(y.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){n.copy(v),n.x=Math.min(v.x,y.x),n.y=Math.max(v.y,y.y),y.x=Math.max(v.x,y.x),y.y=Math.min(v.y,y.y),i.setFromMatrixPosition(this.camera.matrixWorld),r.copy(n),s.set(y.x,n.y,0),o.copy(y),a.set(n.x,y.y,0),r.unproject(this.camera),s.unproject(this.camera),o.unproject(this.camera),a.unproject(this.camera),h.copy(r).sub(i),d.copy(s).sub(i),p.copy(o).sub(i),h.normalize(),d.normalize(),p.normalize(),h.multiplyScalar(this.deep),d.multiplyScalar(this.deep),p.multiplyScalar(this.deep),h.add(i),d.add(i),p.add(i);var x=t.planes;x[0].setFromCoplanarPoints(i,r,s),x[1].setFromCoplanarPoints(i,s,o),x[2].setFromCoplanarPoints(o,a,i),x[3].setFromCoplanarPoints(a,r,i),x[4].setFromCoplanarPoints(s,o,a),x[5].setFromCoplanarPoints(p,d,h),x[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const w=Math.min(v.x,y.x),E=Math.max(v.y,y.y),S=Math.max(v.x,y.x),M=Math.min(v.y,y.y);r.set(w,E,-1),s.set(S,E,-1),o.set(S,M,-1),a.set(w,M,-1),l.set(w,E,1),c.set(S,E,1),u.set(S,M,1),f.set(w,M,1),r.unproject(this.camera),s.unproject(this.camera),o.unproject(this.camera),a.unproject(this.camera),l.unproject(this.camera),c.unproject(this.camera),u.unproject(this.camera),f.unproject(this.camera);var x=t.planes;x[0].setFromCoplanarPoints(r,l,c),x[1].setFromCoplanarPoints(s,c,u),x[2].setFromCoplanarPoints(u,f,a),x[3].setFromCoplanarPoints(f,l,r),x[4].setFromCoplanarPoints(s,o,a),x[5].setFromCoplanarPoints(u,c,l),x[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(v,y){if((y.isMesh||y.isLine||y.isPoints)&&y.material!==void 0&&(y.geometry.boundingSphere===null&&y.geometry.computeBoundingSphere(),e.copy(y.geometry.boundingSphere.center),e.applyMatrix4(y.matrixWorld),v.containsPoint(e)&&this.collection.push(y)),y.children.length>0)for(let x=0;x<y.children.length;x++)this.searchChildInFrustum(v,y.children[x])}}return m})();function Pz(t,e,n){const i=n.length-t-1;if(e>=n[i])return i-1;if(e<=n[t])return t;let r=t,s=i,o=Math.floor((r+s)/2);for(;e<n[o]||e>=n[o+1];)e<n[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function L0e(t,e,n,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=n;++a){s[a]=e-i[t+1-a],o[a]=i[t+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],f=s[a-c],h=r[c]/(u+f);r[c]=l+u*h,l=f*h}r[a]=l}return r}function F0e(t,e,n,i){const r=Pz(t,i,e),s=L0e(r,i,t,e),o=new Pt(0,0,0,0);for(let a=0;a<=t;++a){const l=n[r-t+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function k0e(t,e,n,i,r){const s=[];for(let h=0;h<=n;++h)s[h]=0;const o=[];for(let h=0;h<=i;++h)o[h]=s.slice(0);const a=[];for(let h=0;h<=n;++h)a[h]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let h=1;h<=n;++h){l[h]=e-r[t+1-h],c[h]=r[t+h]-e;let d=0;for(let p=0;p<h;++p){const m=c[p+1],A=l[h-p];a[h][p]=m+A;const v=a[p][h-1]/a[h][p];a[p][h]=d+m*v,d=A*v}a[h][h]=d}for(let h=0;h<=n;++h)o[0][h]=a[h][n];for(let h=0;h<=n;++h){let d=0,p=1;const m=[];for(let A=0;A<=n;++A)m[A]=s.slice(0);m[0][0]=1;for(let A=1;A<=i;++A){let v=0;const y=h-A,x=n-A;h>=A&&(m[p][0]=m[d][0]/a[x+1][y],v=m[p][0]*a[y][x]);const w=y>=-1?1:-y,E=h-1<=x?A-1:n-h;for(let S=w;S<=E;++S)m[p][S]=(m[d][S]-m[d][S-1])/a[x+1][y+S],v+=m[p][S]*a[y+S][x];h<=x&&(m[p][A]=-m[d][A-1]/a[x+1][h],v+=m[p][A]*a[h][x]),o[A][h]=v;var u=d;d=p,p=u}}var f=n;for(let h=1;h<=i;++h){for(let d=0;d<=n;++d)o[h][d]*=f;f*=n-h}return o}function O0e(t,e,n,i,r){const s=r<t?r:t,o=[],a=Pz(t,i,e),l=k0e(a,i,t,s,e),c=[];for(let f=0;f<n.length;++f){var u=n[f].clone();const h=u.w;u.x*=h,u.y*=h,u.z*=h,c[f]=u}for(let f=0;f<=s;++f){var u=c[a-t].clone().multiplyScalar(l[f][0]);for(let d=1;d<=t;++d)u.add(c[a-t+d].clone().multiplyScalar(l[f][d]));o[f]=u}for(let f=s+1;f<=r+1;++f)o[f]=new Pt(0,0,0);return o}function U0e(t,e){let n=1;for(let r=2;r<=t;++r)n*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=t-e;++r)i*=r;return n/i}function N0e(t){const e=t.length,n=[],i=[];for(let s=0;s<e;++s){const o=t[s];n[s]=new F(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=n[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(U0e(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function z0e(t,e,n,i,r){const s=O0e(t,e,n,i,r);return N0e(s)}class mL extends ho{constructor(e,n,i,r,s){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new Pt(a.x,a.y,a.z,a.w)}}getPoint(e,n){const i=n||new F,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=F0e(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,n){const i=n||new F,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=z0e(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let $t,ri,Kr;class MI extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=this,o=s.path===""?Ts.extractUrlBase(e):s.path,a=new Ui(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,n){if(j0e(e))$t=new W0e().parse(e);else{const r=kz(e);if(!q0e(r))throw new Error("THREE.FBXLoader: Unknown format.");if(AL(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+AL(r));$t=new V0e().parse(r)}const i=new Jd(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new G0e(i,this.manager).parse($t)}}class G0e{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){ri=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),r=this.parseDeformers(),s=new Q0e().parse(r);return this.parseScene(r,s,i),Kr}parseConnections(){const e=new Map;return"Connections"in $t&&$t.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},n={};if("Video"in $t.Objects){const i=$t.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);n[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];n[r]!==void 0?e[i]=n[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const n=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof n=="string")return"data:"+s+";base64,"+n;{const o=new Uint8Array(n);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const n=new Map;if("Texture"in $t.Objects){const i=$t.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);n.set(parseInt(r),s)}}return n}parseTexture(e,n){const i=this.loadTexture(e,n);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?Rs:Fi,i.wrapT=a===0?Rs:Fi,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,n){let i;const r=this.textureLoader.path,s=ri.get(e.id).children;s!==void 0&&s.length>0&&n[s[0].ID]!==void 0&&(i=n[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new bn):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new bn):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const n=new Map;if("Material"in $t.Objects){const i=$t.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&n.set(parseInt(r),s)}}return n}parseMaterial(e,n){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!ri.has(i))return null;const o=this.parseParameters(e,n,i);let a;switch(s.toLowerCase()){case"phong":a=new ad;break;case"lambert":a=new L3;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new ad;break}return a.setValues(o),a.name=r,a}parseParameters(e,n,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new ze().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new ze().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new ze().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new ze().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new ze().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new ze().fromArray(e.SpecularColor.value));const s=this;return ri.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(n,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(n,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(n,o.ID),r.map!==void 0&&(r.map.encoding=Nt);break;case"DisplacementColor":r.displacementMap=s.getTexture(n,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(n,o.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=Nt);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(n,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(n,o.ID),r.envMap!==void 0&&(r.envMap.mapping=ef,r.envMap.encoding=Nt);break;case"SpecularColor":r.specularMap=s.getTexture(n,o.ID),r.specularMap!==void 0&&(r.specularMap.encoding=Nt);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(n,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,n){return"LayeredTexture"in $t.Objects&&n in $t.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=ri.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in $t.Objects){const i=$t.Objects.Deformer;for(const r in i){const s=i[r],o=ri.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[r]=a}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const i=[];return e.children.forEach(function(r){const s=n[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Ne().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,n){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=n[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=ri.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,n,i){Kr=new ts;const r=this.parseModels(e.skeletons,n,i),s=$t.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),ri.get(l.ID).parents.forEach(function(f){const h=r.get(f.ID);h!==void 0&&h.add(l)}),l.parent===null&&Kr.add(l)}),this.bindSkeleton(e.skeletons,n,r),this.createAmbientLight(),Kr.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=Lz(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new H0e().parse();Kr.children.length===1&&Kr.children[0].isGroup&&(Kr.children[0].animations=a,Kr=Kr.children[0]),Kr.animations=a}parseModels(e,n,i){const r=new Map,s=$t.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=ri.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,n,i);break;case"NurbsCurve":u=this.createCurve(c,n);break;case"LimbNode":case"Root":u=new Md;break;case"Null":default:u=new ts;break}u.name=l.attrName?qt.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,n,i,r){let s=null;return e.parents.forEach(function(o){for(const a in n){const l=n[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const f=s;s=new Md,s.matrixWorld.copy(c.transformLink),s.name=r?qt.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let n,i;if(e.children.forEach(function(r){const s=$t.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)n=new It;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const f=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:n=new dn(u,c,s,o),f!==null&&n.setFocalLength(f);break;case 1:n=new Is(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),n=new It;break}}return n}createLight(e){let n,i;if(e.children.forEach(function(r){const s=$t.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)n=new It;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new ze().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:n=new Pm(s,o,a,l);break;case 1:n=new Oy(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=ut.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=ut.degToRad(i.OuterAngle.value),u=Math.max(u,1)),n=new ky(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),n=new Pm(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){n.has(l.ID)&&(s=n.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new ad({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new Ry(s,o),r.normalizeSkinWeights()):r=new $e(s,o),r}createCurve(e,n){const i=e.children.reduce(function(s,o){return n.has(o.ID)&&(s=n.get(o.ID)),s},null),r=new ai({color:3342591,linewidth:1});return new Rt(i,r)}getTransformData(e,n){const i={};"InheritType"in n&&(i.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?i.eulerOrder=Fz(n.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in n&&(i.translation=n.Lcl_Translation.value),"PreRotation"in n&&(i.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(i.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(i.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(i.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(i.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(i.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(i.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(i.rotationPivot=n.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,n){"LookAtProperty"in n&&ri.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=$t.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Kr.add(e.target)):e.lookAt(new F().fromArray(o))}}})}bindSkeleton(e,n,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];ri.get(parseInt(o.ID)).parents.forEach(function(l){if(n.has(l.ID)){const c=l.ID;ri.get(c).parents.forEach(function(f){i.has(f.ID)&&i.get(f.ID).bind(new Wd(o.bones),r[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in $t.Objects){const n=$t.Objects.Pose;for(const i in n)if(n[i].attrType==="BindPose"&&n[i].NbPoseNodes>0){const r=n[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Ne().fromArray(s.Matrix.a)}):e[r.Node]=new Ne().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in $t&&"AmbientColor"in $t.GlobalSettings){const e=$t.GlobalSettings.AmbientColor.value,n=e[0],i=e[1],r=e[2];if(n!==0||i!==0||r!==0){const s=new ze(n,i,r);Kr.add(new G3(s,1))}}}}class Q0e{parse(e){const n=new Map;if("Geometry"in $t.Objects){const i=$t.Objects.Geometry;for(const r in i){const s=ri.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);n.set(parseInt(r),o)}}return n}parseGeometry(e,n,i){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,i);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,i){const r=i.skeletons,s=[],o=e.parents.map(function(f){return $t.Objects.Model[f.ID]});if(o.length===0)return;const a=e.children.reduce(function(f,h){return r[h.ID]!==void 0&&(f=r[h.ID]),f},null);e.children.forEach(function(f){i.morphTargets[f.ID]!==void 0&&s.push(i.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Fz(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=Lz(c);return this.genGeometry(n,a,s,u)}genGeometry(e,n,i,r){const s=new ht;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,n),a=this.genBuffers(o),l=new et(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new et(a.colors,3)),n&&(s.setAttribute("skinIndex",new Cy(a.weightsIndices,4)),s.setAttribute("skinWeight",new et(a.vertexWeights,4)),s.FBX_Deformer=n),a.normal.length>0){const c=new yr().getNormalMatrix(r),u=new et(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let f="uv"+(u+1).toString();u===0&&(f="uv"),s.setAttribute(f,new et(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,h){f!==c&&(s.addGroup(u,h-u,c),c=f,u=h)}),s.groups.length>0){const f=s.groups[s.groups.length-1],h=f.start+f.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,n){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},n!==null&&(i.skeleton=n,n.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],f=[];const h=this;return e.vertexIndices.forEach(function(d,p){let m,A=!1;d<0&&(d=d^-1,A=!0);let v=[],y=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const x=FA(p,i,d,e.color);l.push(x[0],x[1],x[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(x){y.push(x.weight),v.push(x.id)}),y.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const x=[0,0,0,0],w=[0,0,0,0];y.forEach(function(E,S){let M=E,b=v[S];w.forEach(function(B,T,k){if(M>B){k[T]=M,M=B;const D=x[T];x[T]=b,b=D}})}),v=x,y=w}for(;y.length<4;)y.push(0),v.push(0);for(let x=0;x<4;++x)u.push(y[x]),f.push(v[x])}if(e.normal){const x=FA(p,i,d,e.normal);a.push(x[0],x[1],x[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=FA(p,i,d,e.material)[0]),e.uv&&e.uv.forEach(function(x,w){const E=FA(p,i,d,x);c[w]===void 0&&(c[w]=[]),c[w].push(E[0]),c[w].push(E[1])}),r++,A&&(h.genFace(n,e,o,m,a,l,c,u,f,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],f=[])}),n}genFace(e,n,i,r,s,o,a,l,c,u){for(let f=2;f<u;f++)e.vertex.push(n.vertexPositions[i[0]]),e.vertex.push(n.vertexPositions[i[1]]),e.vertex.push(n.vertexPositions[i[2]]),e.vertex.push(n.vertexPositions[i[(f-1)*3]]),e.vertex.push(n.vertexPositions[i[(f-1)*3+1]]),e.vertex.push(n.vertexPositions[i[(f-1)*3+2]]),e.vertex.push(n.vertexPositions[i[f*3]]),e.vertex.push(n.vertexPositions[i[f*3+1]]),e.vertex.push(n.vertexPositions[i[f*3+2]]),n.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(f-1)*4]),e.vertexWeights.push(l[(f-1)*4+1]),e.vertexWeights.push(l[(f-1)*4+2]),e.vertexWeights.push(l[(f-1)*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(f-1)*4]),e.weightsIndices.push(c[(f-1)*4+1]),e.weightsIndices.push(c[(f-1)*4+2]),e.weightsIndices.push(c[(f-1)*4+3]),e.weightsIndices.push(c[f*4]),e.weightsIndices.push(c[f*4+1]),e.weightsIndices.push(c[f*4+2]),e.weightsIndices.push(c[f*4+3])),n.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),n.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),n.uv&&n.uv.forEach(function(h,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(f-1)*2]),e.uvs[d].push(a[d][(f-1)*2+1]),e.uvs[d].push(a[d][f*2]),e.uvs[d].push(a[d][f*2+1])})}addMorphTargets(e,n,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=$t.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,n,l,r,a.name)})})}genMorphGeometry(e,n,i,r,s){const o=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let p=0;p<l.length;p++){const m=l[p]*3;u[m]=a[p*3],u[m+1]=a[p*3+1],u[m+2]=a[p*3+2]}const f={vertexIndices:o,vertexPositions:u},h=this.genBuffers(f),d=new et(h.vertex,3);d.name=s||i.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:n,referenceType:i}}parseUVs(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:n,referenceType:i}}parseVertexColors(e){const n=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:n,referenceType:i}}parseMaterialIndices(e){const n=e.MappingInformationType,i=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:n,referenceType:i}}parseNurbsGeometry(e){if(mL===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new ht;const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ht;const i=n-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,h=o.length;f<h;f+=4)s.push(new Pt().fromArray(o,f));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let f=0;f<i;++f)s.push(s[f])}const u=new mL(i,r,s,a,l).getPoints(s.length*12);return new ht().setFromPoints(u)}}class H0e{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const i in n){const r=n[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if($t.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=$t.Objects.AnimationCurveNode,n=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};n.set(s.id,s)}}return n}parseAnimationCurves(e){const n=$t.Objects.AnimationCurve;for(const i in n){const r={id:n[i].id,times:n[i].KeyTime.a.map(Y0e),values:n[i].KeyValueFloat.a},s=ri.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const n=$t.Objects.AnimationLayer,i=new Map;for(const r in n){const s=[],o=ri.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=ri.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(f!==void 0){const h=$t.Objects.Model[f.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:h.attrName?qt.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Kr.traverse(function(p){p.ID===h.id&&(d.transform=p.matrix,p.userData.transformData&&(d.eulerOrder=p.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Ne),"PreRotation"in h&&(d.preRotation=h.PreRotation.value),"PostRotation"in h&&(d.postRotation=h.PostRotation.value),s[c]=d}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=ri.get(l.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID,h=ri.get(f).parents[0].ID,d=ri.get(h).parents[0].ID,p=ri.get(d).parents[0].ID,m=$t.Objects.Model[p],A={modelName:m.attrName?qt.sanitizeNodeName(m.attrName):"",morphName:$t.Objects.Deformer[f].attrName};s[c]=A}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const n=$t.Objects.AnimationStack,i={};for(const r in n){const s=ri.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:n[r].attrName,layer:o}}return i}addClip(e){let n=[];const i=this;return e.layer.forEach(function(r){n=n.concat(i.generateTracks(r))}),new of(e.name,-1,n)}generateTracks(e){const n=[];let i=new F,r=new St,s=new F;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new xr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,i,r){const s=this.getTimesForAllAxes(n),o=this.getKeyframeTrackValues(s,n,i);return new sf(e+"."+r,s,o)}generateRotationTrack(e,n,i,r,s,o){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(ut.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(ut.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(ut.degToRad));const a=this.getTimesForAllAxes(n),l=this.getKeyframeTrackValues(a,n,i);r!==void 0&&(r=r.map(ut.degToRad),r.push(o),r=new xr().fromArray(r),r=new St().setFromEuler(r)),s!==void 0&&(s=s.map(ut.degToRad),s.push(o),s=new xr().fromArray(s),s=new St().setFromEuler(s).invert());const c=new St,u=new xr,f=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(f,h/3*4);return new cl(e+".quaternion",a,f)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,i=n.values.map(function(s){return s/100}),r=Kr.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new rf(e.modelName+".morphTargetInfluences["+r+"]",n.times,i)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(i,r){return i-r}),n.length>1){let i=1,r=n[0];for(let s=1;s<n.length;s++){const o=n[s];o!==r&&(n[i]=o,r=o,i++)}n=n.slice(0,i)}return n}getKeyframeTrackValues(e,n,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(n.x&&(o=n.x.times.indexOf(c)),n.y&&(a=n.y.times.indexOf(c)),n.z&&(l=n.z.times.indexOf(c)),o!==-1){const u=n.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=n.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=n.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let n=1;n<e.values.length;n++){const i=e.values[n-1],r=e.values[n]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[n-1],f=(e.times[n]-c)/o;let h=c+f;const d=[],p=[];for(;h<e.times[n];)d.push(h),h+=f,p.push(l),l+=a;e.times=vL(e.times,n,d),e.values=vL(e.values,n,p)}}}}class V0e{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new Dz,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(n.currentIndent-1)+"}}");l?n.parseNodeBegin(r,l):c?n.parseNodeProperty(r,c,i[++s]):u?n.popStack():r.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,n){const i=n[1].trim().replace(/^"/,"").replace(/"$/,""),r=n[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:n,name:i,type:r}}parseNodeProperty(e,n,i){let r=n[1].replace(/^"/,"").replace(/"$/,"").trim(),s=n[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,u],J0e(s,f),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=wE(s))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=wE(n.a))}parseNodeSpecialProperty(e,n,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=wE(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class W0e{parse(e){const n=new gL(e);n.skip(23);const i=n.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new Dz;for(;!this.endOfContent(n);){const s=this.parseNode(n,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const i={},r=n>=7500?e.getUint64():e.getUint32(),s=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,n);h!==null&&this.parseSubNode(a,i,h)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),f!==""&&(i.attrType=f),a!==""&&(i.name=a),i}parseSubNode(e,n,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(n[i.name]=i,i.a=r):n[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),n.connections===void 0&&(n.connections=[]),n.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){n[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],n[r]={type:s,type2:o,flag:a,value:l}}else n[i.name]===void 0?typeof i.id=="number"?(n[i.name]={},n[i.name][i.id]=i):n[i.name]=i:i.name==="PoseNode"?(Array.isArray(n[i.name])||(n[i.name]=[n[i.name]]),n[i.name].push(i)):n[i.name][i.id]===void 0&&(n[i.name][i.id]=i)}parseProperty(e){const n=e.getString(1);let i;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(n){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=Pde(new Uint8Array(e.getArrayBuffer(o))),l=new gL(a.buffer);switch(n){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class gL{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let i=0;i<e;i++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let i=0;i<e;i++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=[];for(let r=0;r<e;r++)n[r]=this.getUint8();const i=n.indexOf(0);return i>=0&&(n=n.slice(0,i)),Ts.decodeText(new Uint8Array(n))}}class Dz{add(e,n){this[e]=n}}function j0e(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===kz(t,0,e.length)}function q0e(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(r){const s=t[r-1];return t=t.slice(n+r),n++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function AL(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Y0e(t){return t/46186158e3}const X0e=[];function FA(t,e,n,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=t;break;case"ByPolygon":r=e;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return K0e(X0e,i.buffer,s,o)}const xE=new xr,yh=new F;function Lz(t){const e=new Ne,n=new Ne,i=new Ne,r=new Ne,s=new Ne,o=new Ne,a=new Ne,l=new Ne,c=new Ne,u=new Ne,f=new Ne,h=new Ne,d=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(yh.fromArray(t.translation)),t.preRotation){const T=t.preRotation.map(ut.degToRad);T.push(t.eulerOrder),n.makeRotationFromEuler(xE.fromArray(T))}if(t.rotation){const T=t.rotation.map(ut.degToRad);T.push(t.eulerOrder),i.makeRotationFromEuler(xE.fromArray(T))}if(t.postRotation){const T=t.postRotation.map(ut.degToRad);T.push(t.eulerOrder),r.makeRotationFromEuler(xE.fromArray(T)),r.invert()}t.scale&&s.scale(yh.fromArray(t.scale)),t.scalingOffset&&a.setPosition(yh.fromArray(t.scalingOffset)),t.scalingPivot&&o.setPosition(yh.fromArray(t.scalingPivot)),t.rotationOffset&&l.setPosition(yh.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(yh.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(f.copy(t.parentMatrix),u.copy(t.parentMatrixWorld));const p=n.clone().multiply(i).multiply(r),m=new Ne;m.extractRotation(u);const A=new Ne;A.copyPosition(u);const v=A.clone().invert().multiply(u),y=m.clone().invert().multiply(v),x=s,w=new Ne;if(d===0)w.copy(m).multiply(p).multiply(y).multiply(x);else if(d===1)w.copy(m).multiply(y).multiply(p).multiply(x);else{const k=new Ne().scale(new F().setFromMatrixScale(f)).clone().invert(),D=y.clone().multiply(k);w.copy(m).multiply(p).multiply(D).multiply(x)}const E=c.clone().invert(),S=o.clone().invert();let M=e.clone().multiply(l).multiply(c).multiply(n).multiply(i).multiply(r).multiply(E).multiply(a).multiply(o).multiply(s).multiply(S);const b=new Ne().copyPosition(M),B=u.clone().multiply(b);return h.copyPosition(B),M=h.clone().multiply(w),M.premultiply(u.invert()),M}function Fz(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function wE(t){return t.split(",").map(function(n){return parseFloat(n)})}function kz(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),Ts.decodeText(new Uint8Array(t,e,n))}function J0e(t,e){for(let n=0,i=t.length,r=e.length;n<r;n++,i++)t[i]=e[n]}function K0e(t,e,n,i){for(let r=n,s=0;r<i;r++,s++)t[s]=e[r];return t}function vL(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))}class $0e extends Gi{constructor(e){super(e)}load(e,n,i,r){const s=new Ui(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);n&&n(l)},i,r)}parse(e){return new II(e)}}class II{constructor(e){L(this,"data",void 0),this.data=e}generateShapes(e,n=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=Z0e(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}L(II,"isFont",void 0);L(II,"type",void 0);function Z0e(t,e,n,i){const r=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const f=r[u];if(f===`
`)l=0,c-=o*i.lineHeight;else{const h=epe(f,s,l,c,n);h&&(l+=h.offsetX+i.letterSpacing,a.push(h.path))}}return a}function epe(t,e,n,i,r){const s=r.glyphs[t]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");return}const o=new qU;let a,l,c,u,f,h,d,p;if(s.o){const m=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let A=0,v=m.length;A<v;)switch(m[A++]){case"m":a=parseInt(m[A++])*e+n,l=parseInt(m[A++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(m[A++])*e+n,l=parseInt(m[A++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(m[A++])*e+n,u=parseInt(m[A++])*e+i,f=parseInt(m[A++])*e+n,h=parseInt(m[A++])*e+i,o.quadraticCurveTo(f,h,c,u);break;case"b":c=parseInt(m[A++])*e+n,u=parseInt(m[A++])*e+i,f=parseInt(m[A++])*e+n,h=parseInt(m[A++])*e+i,d=parseInt(m[A++])*e+n,p=parseInt(m[A++])*e+i,o.bezierCurveTo(f,h,d,p,c,u);break}}return{offsetX:s.ha*e,path:o}}class tpe{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const n=this.workerCreator();n.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=n}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,n){const i=this.workersResolve[e];if(i&&i(n),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,n){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,n)):this.queue.push({resolve:i,msg:e,transfer:n})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Oz=0,npe=2,ipe=0,rpe=0,spe=2,ope=0,ape=0,lpe=1,Uz=2,cpe=1,upe=64,Nz=0,zz=9,TI=15,Gz=16,BI=22,Qz=37,RI=43,Hz=76,Vz=83,Wz=97,jz=100,qz=103,Yz=109;class fpe{constructor(){this.vkFormat=Nz,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=Oz,this.levels=[],this.dataFormatDescriptor=[{vendorId:rpe,descriptorType:ipe,descriptorBlockSize:0,versionNumber:spe,colorModel:ope,colorPrimaries:cpe,transferFunction:Uz,flags:ape,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class lp{constructor(e,n,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+n,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),n=this._dataView.getUint32(this._offset+4,this._littleEndian),i=e+2**32*n;return this._offset+=8,i}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,n=0){const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==n&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const kr=[171,75,84,88,32,50,48,187,13,10,26,10];function _L(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Buffer.from(t).toString("utf8")}function hpe(t){const e=new Uint8Array(t.buffer,t.byteOffset,kr.length);if(e[0]!==kr[0]||e[1]!==kr[1]||e[2]!==kr[2]||e[3]!==kr[3]||e[4]!==kr[4]||e[5]!==kr[5]||e[6]!==kr[6]||e[7]!==kr[7]||e[8]!==kr[8]||e[9]!==kr[9]||e[10]!==kr[10]||e[11]!==kr[11])throw new Error("Missing KTX 2.0 identifier.");const n=new fpe,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new lp(t,kr.length,i,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();const s=r._nextUint32();n.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),f=r._nextUint64(),h=s*3*8,d=new lp(t,kr.length+i,h,!0);for(let Q=0;Q<s;Q++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new lp(t,o,a,!0),m={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},A=6,v=4,y=(m.descriptorBlockSize/4-A)/v;for(let Q=0;Q<y;Q++){const H={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};H.channelType&upe?(H.sampleLower=p._nextInt32(),H.sampleUpper=p._nextInt32()):(H.sampleLower=p._nextUint32(),H.sampleUpper=p._nextUint32()),m.samples[Q]=H}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(m);const x=new lp(t,l,c,!0);for(;x._offset<c;){const Q=x._nextUint32(),H=x._scan(Q),V=_L(H),J=x._scan(Q-H.byteLength);n.keyValue[V]=V.match(/^ktx/i)?_L(J):J,x._offset%4&&x._skip(4-x._offset%4)}if(f<=0)return n;const w=new lp(t,u,f,!0),E=w._nextUint16(),S=w._nextUint16(),M=w._nextUint32(),b=w._nextUint32(),B=w._nextUint32(),T=w._nextUint32(),k=[];for(let Q=0;Q<s;Q++)k.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});const D=u+w._offset,N=D+M,O=N+b,Y=O+B,q=new Uint8Array(t.buffer,t.byteOffset+D,M),K=new Uint8Array(t.buffer,t.byteOffset+N,b),z=new Uint8Array(t.buffer,t.byteOffset+O,B),U=new Uint8Array(t.buffer,t.byteOffset+Y,T);return n.globalData={endpointCount:E,selectorCount:S,imageDescs:k,endpointsData:q,selectorsData:K,tablesData:z,extendedData:U},n}let EE,Ga,AC;const bE={env:{emscripten_notify_memory_growth:function(t){AC=new Uint8Array(Ga.exports.memory.buffer)}}};class dpe{init(){return EE||(EE=typeof fetch<"u"?fetch("data:application/wasm;base64,"+yL).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,bE)).then(this._init):WebAssembly.instantiate(Buffer.from(yL,"base64"),bE).then(this._init),EE)}_init(e){Ga=e.instance,bE.env.emscripten_notify_memory_growth(0)}decode(e,n=0){if(!Ga)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=Ga.exports.malloc(i);AC.set(e,r),n=n||Number(Ga.exports.ZSTD_findDecompressedSize(r,i));const s=Ga.exports.malloc(n),o=Ga.exports.ZSTD_decompress(s,n,r,i),a=AC.slice(s,s+o);return Ga.exports.free(r),Ga.exports.free(s),a}}const yL="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",SE=new WeakMap;let CE=0,ME;class oo extends Gi{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new tpe,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const e=new Ui(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const n=e.loadAsync("basis_transcoder.js"),i=new Ui(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const r=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,r]).then(([s,o])=>{const a=oo.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(oo.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(oo.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(oo.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=o,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),CE>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),CE++}return this.transcoderPending}load(e,n,i,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new Ui(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(SE.has(o))return SE.get(o).promise.then(n).catch(r);this._createTexture(o).then(a=>n?n(a):null).catch(r)},i,r)}_createTextureFrom(e){const{mipmaps:n,width:i,height:r,format:s,type:o,error:a,dfdTransferFn:l,dfdFlags:c}=e;if(o==="error")return Promise.reject(a);const u=new E3(n,i,r,s,er);return u.minFilter=n.length===1?Wt:wa,u.magFilter=Wt,u.generateMipmaps=!1,u.needsUpdate=!0,u.encoding=l===Uz?Nt:Ps,u.premultiplyAlpha=!!(c&lpe),u}_createTexture(e,n={}){const i=hpe(new Uint8Array(e));if(i.vkFormat!==Nz)return mpe(i);const r=n,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e])).then(o=>this._createTextureFrom(o.data));return SE.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),CE--,this}}oo.BasisFormat={ETC1S:0,UASTC_4x4:1};oo.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};oo.EngineFormat={RGBAFormat:Fn,RGBA_ASTC_4x4_Format:E_,RGBA_BPTC_Format:b_,RGBA_ETC2_EAC_Format:w_,RGBA_PVRTC_4BPPV1_Format:y_,RGBA_S3TC_DXT5_Format:Gp,RGB_ETC1_Format:l3,RGB_ETC2_Format:x_,RGB_PVRTC_4BPPV1_Format:__,RGB_S3TC_DXT1_Format:zp};oo.BasisWorker=function(){let t,e,n;const i=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(d){const p=d.data;switch(p.type){case"init":t=p.config,o(p.transcoderBinary);break;case"transcode":e.then(()=>{try{const{width:m,height:A,hasAlpha:v,mipmaps:y,format:x,dfdTransferFn:w,dfdFlags:E}=a(p.buffer),S=[];for(let M=0;M<y.length;++M)S.push(y[M].data.buffer);self.postMessage({type:"transcode",id:p.id,width:m,height:A,hasAlpha:v,mipmaps:y,format:x,dfdTransferFn:w,dfdFlags:E},S)}catch(m){console.error(m),self.postMessage({type:"error",id:p.id,error:m.message})}});break}});function o(d){e=new Promise(p=>{n={wasmBinary:d,onRuntimeInitialized:p},BASIS(n)}).then(()=>{n.initializeBasis(),n.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(d){const p=new n.KTX2File(new Uint8Array(d));function m(){p.close(),p.delete()}if(!p.isValid())throw m(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const A=p.isUASTC()?s.UASTC_4x4:s.ETC1S,v=p.getWidth(),y=p.getHeight(),x=p.getLevels(),w=p.getHasAlpha(),E=p.getDFDTransferFunc(),S=p.getDFDFlags(),{transcoderFormat:M,engineFormat:b}=f(A,v,y,w);if(!v||!y||!x)throw m(),new Error("THREE.KTX2Loader:	Invalid texture");if(!p.startTranscoding())throw m(),new Error("THREE.KTX2Loader: .startTranscoding failed");const B=[];for(let T=0;T<x;T++){const k=p.getImageLevelInfo(T,0,0),D=k.origWidth,N=k.origHeight,O=new Uint8Array(p.getImageTranscodedSizeInBytes(T,0,0,M));if(!p.transcodeImage(O,T,0,0,M,0,-1,-1))throw m(),new Error("THREE.KTX2Loader: .transcodeImage failed.");B.push({data:O,width:D,height:N})}return m(),{width:v,height:y,hasAlpha:w,mipmaps:B,format:b,dfdTransferFn:E,dfdFlags:S}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(d,p){return d.priorityETC1S-p.priorityETC1S}),u=l.sort(function(d,p){return d.priorityUASTC-p.priorityUASTC});function f(d,p,m,A){let v,y;const x=d===s.ETC1S?c:u;for(let w=0;w<x.length;w++){const E=x[w];if(!!t[E.if]&&!!E.basisFormat.includes(d)&&!(A&&E.transcoderFormat.length<2)&&!(E.needsPowerOfTwo&&!(h(p)&&h(m))))return v=E.transcoderFormat[A?1:0],y=E.engineFormat[A?1:0],{transcoderFormat:v,engineFormat:y}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),v=r.RGBA32,y=i.RGBAFormat,{transcoderFormat:v,engineFormat:y}}function h(d){return d<=2?!0:(d&d-1)===0&&d!==0}};const xL={[Yz]:Fn,[Wz]:Fn,[Qz]:Fn,[RI]:Fn,[qz]:Eu,[Vz]:Eu,[Gz]:Eu,[BI]:Eu,[jz]:wu,[Hz]:wu,[TI]:wu,[zz]:wu},IE={[Yz]:Qn,[Wz]:pi,[Qz]:er,[RI]:er,[qz]:Qn,[Vz]:pi,[Gz]:er,[BI]:er,[jz]:Qn,[Hz]:pi,[TI]:er,[zz]:er},ppe={[RI]:Nt,[BI]:Nt,[TI]:Nt};async function mpe(t){const{vkFormat:e,pixelWidth:n,pixelHeight:i,pixelDepth:r}=t;if(xL[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const s=t.levels[0];let o,a;if(t.supercompressionScheme===Oz)o=s.levelData;else if(t.supercompressionScheme===npe)ME||(ME=new Promise(async c=>{const u=new dpe;await u.init(),c(u)})),o=(await ME).decode(s.levelData,s.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");IE[e]===Qn?a=new Float32Array(o.buffer,o.byteOffset,o.byteLength/Float32Array.BYTES_PER_ELEMENT):IE[e]===pi?a=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/Uint16Array.BYTES_PER_ELEMENT):a=o;const l=r===0?new Oo(a,n,i):new Zm(a,n,i,r);return l.type=IE[e],l.format=xL[e],l.encoding=ppe[e]||Ps,l.needsUpdate=!0,Promise.resolve(l)}class gpe extends LU{constructor(e){super(e),this.type=pi}parse(e){const a=function(x,w){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(w||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(w||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(w||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(w||""))}return-1},f=`
`,h=function(x,w,E){w=w||1024;let M=x.pos,b=-1,B=0,T="",k=String.fromCharCode.apply(null,new Uint16Array(x.subarray(M,M+128)));for(;0>(b=k.indexOf(f))&&B<w&&M<x.byteLength;)T+=k,B+=k.length,M+=128,k+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(M,M+128)));return-1<b?(E!==!1&&(x.pos+=B+b+1),T+k.slice(0,b)):!1},d=function(x){const w=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,S=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,M=/^\s*FORMAT=(\S+)\s*$/,b=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,B={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let T,k;if(x.pos>=x.byteLength||!(T=h(x)))return a(1,"no header found");if(!(k=T.match(w)))return a(3,"bad initial token");for(B.valid|=1,B.programtype=k[1],B.string+=T+`
`;T=h(x),T!==!1;){if(B.string+=T+`
`,T.charAt(0)==="#"){B.comments+=T+`
`;continue}if((k=T.match(E))&&(B.gamma=parseFloat(k[1])),(k=T.match(S))&&(B.exposure=parseFloat(k[1])),(k=T.match(M))&&(B.valid|=2,B.format=k[1]),(k=T.match(b))&&(B.valid|=4,B.height=parseInt(k[1],10),B.width=parseInt(k[2],10)),B.valid&2&&B.valid&4)break}return B.valid&2?B.valid&4?B:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(x,w,E){const S=w;if(S<8||S>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(S!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const M=new Uint8Array(4*w*E);if(!M.length)return a(4,"unable to allocate buffer space");let b=0,B=0;const T=4*S,k=new Uint8Array(4),D=new Uint8Array(T);let N=E;for(;N>0&&B<x.byteLength;){if(B+4>x.byteLength)return a(1);if(k[0]=x[B++],k[1]=x[B++],k[2]=x[B++],k[3]=x[B++],k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=S)return a(3,"bad rgbe scanline format");let O=0,Y;for(;O<T&&B<x.byteLength;){Y=x[B++];const K=Y>128;if(K&&(Y-=128),Y===0||O+Y>T)return a(3,"bad scanline data");if(K){const z=x[B++];for(let U=0;U<Y;U++)D[O++]=z}else D.set(x.subarray(B,B+Y),O),O+=Y,B+=Y}const q=S;for(let K=0;K<q;K++){let z=0;M[b]=D[K+z],z+=S,M[b+1]=D[K+z],z+=S,M[b+2]=D[K+z],z+=S,M[b+3]=D[K+z],b+=4}N--}return M},m=function(x,w,E,S){const M=x[w+3],b=Math.pow(2,M-128)/255;E[S+0]=x[w+0]*b,E[S+1]=x[w+1]*b,E[S+2]=x[w+2]*b,E[S+3]=1},A=function(x,w,E,S){const M=x[w+3],b=Math.pow(2,M-128)/255;E[S+0]=bp.toHalfFloat(Math.min(x[w+0]*b,65504)),E[S+1]=bp.toHalfFloat(Math.min(x[w+1]*b,65504)),E[S+2]=bp.toHalfFloat(Math.min(x[w+2]*b,65504)),E[S+3]=bp.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const y=d(v);if(y!==-1){const x=y.width,w=y.height,E=p(v.subarray(v.pos),x,w);if(E!==-1){let S,M,b;switch(this.type){case Qn:b=E.length/4;const B=new Float32Array(b*4);for(let k=0;k<b;k++)m(E,k*4,B,k*4);S=B,M=Qn;break;case pi:b=E.length/4;const T=new Uint16Array(b*4);for(let k=0;k<b;k++)A(E,k*4,T,k*4);S=T,M=pi;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:w,data:S,header:y.string,gamma:y.gamma,exposure:y.exposure,type:M}}}return null}setDataType(e){return this.type=e,this}load(e,n,i,r){function s(o,a){switch(o.type){case Qn:case pi:o.encoding=Ps,o.minFilter=Wt,o.magFilter=Wt,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,i,r)}}const TE=new WeakMap;class Ape extends Gi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new Ui(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(TE.has(e)){const l=TE.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),TE.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new ht;e.index&&n.setIndex(new bt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;n.setAttribute(s,new bt(o,a))}return n}_loadLibrary(e,n){const i=new Ui(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=vpe.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function vpe(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,d=new f.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const p=n(f,h,d,c),m=p.attributes.map(A=>A.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{f.destroy(d),f.destroy(h)}});break}};function n(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,d;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,d=a.DecodeBufferToMesh(l,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const m={index:null,attributes:[]};for(const A in u){const v=self[f[A]];let y,x;if(c.useUniqueIDs)x=u[A],y=a.GetAttributeByUniqueId(h,x);else{if(x=a.GetAttributeId(h,o[u[A]]),x===-1)continue;y=a.GetAttribute(h,x)}m.attributes.push(r(o,a,h,A,v,y))}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,h)),o.destroy(h),m}function i(o,a,l){const u=l.num_faces()*3,f=u*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const d=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:d,itemSize:1}}function r(o,a,l,c,u,f){const h=f.num_components(),p=l.num_points()*h,m=p*u.BYTES_PER_ELEMENT,A=s(o,u),v=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,f,A,m,v);const y=new u(o.HEAPF32.buffer,v,p).slice();return o._free(v),{name:c,array:y,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const wL=new Sn,kA=new F;class PI extends zy{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new et(e,3)),this.setAttribute("uv",new et(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,i=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),i.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new M_(n,6,1);return this.setAttribute("instanceStart",new ns(i,3,0)),this.setAttribute("instanceEnd",new ns(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new M_(n,6,1);return this.setAttribute("instanceColorStart",new ns(i,3,0)),this.setAttribute("instanceColorEnd",new ns(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new D3(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sn);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),wL.setFromBufferAttribute(n),this.boundingBox.union(wL))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)kA.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(kA)),kA.fromBufferAttribute(n,s),r=Math.max(r,i.distanceToSquared(kA));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Xz extends PI{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setColors(i),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}Ke.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ae(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};zr.line={uniforms:Mc.merge([Ke.common,Ke.fog,Ke.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class hx extends $n{constructor(e){super({type:"LineMaterial",uniforms:Mc.clone(zr.line.uniforms),vertexShader:zr.line.vertexShader,fragmentShader:zr.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(n){Boolean(n)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(n){Boolean(n)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const EL=new F,bL=new F,Yi=new Pt,Xi=new Pt,ta=new Pt,BE=new F,RE=new Ne,gr=new Uo,SL=new F,OA=new Sn,UA=new zi,na=new Pt;let da,vC,Jz,Gu;function CL(t,e,n){return na.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),na.multiplyScalar(1/na.w),na.x=Gu/n.width,na.y=Gu/n.height,na.applyMatrix4(t.projectionMatrixInverse),na.multiplyScalar(1/na.w),Math.abs(Math.max(na.x,na.y))}function _pe(t,e){for(let n=0,i=vC.count;n<i;n++){gr.start.fromBufferAttribute(vC,n),gr.end.fromBufferAttribute(Jz,n);const r=new F,s=new F;da.distanceSqToSegment(gr.start,gr.end,s,r),s.distanceTo(r)<Gu*.5&&e.push({point:s,pointOnLine:r,distance:da.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function ype(t,e,n){const i=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;da.at(1,ta),ta.w=1,ta.applyMatrix4(e.matrixWorldInverse),ta.applyMatrix4(i),ta.multiplyScalar(1/ta.w),ta.x*=s.x/2,ta.y*=s.y/2,ta.z=0,BE.copy(ta),RE.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,h=l.count;f<h;f++){if(Yi.fromBufferAttribute(l,f),Xi.fromBufferAttribute(c,f),Yi.w=1,Xi.w=1,Yi.applyMatrix4(RE),Xi.applyMatrix4(RE),Yi.z>u&&Xi.z>u)continue;if(Yi.z>u){const y=Yi.z-Xi.z,x=(Yi.z-u)/y;Yi.lerp(Xi,x)}else if(Xi.z>u){const y=Xi.z-Yi.z,x=(Xi.z-u)/y;Xi.lerp(Yi,x)}Yi.applyMatrix4(i),Xi.applyMatrix4(i),Yi.multiplyScalar(1/Yi.w),Xi.multiplyScalar(1/Xi.w),Yi.x*=s.x/2,Yi.y*=s.y/2,Xi.x*=s.x/2,Xi.y*=s.y/2,gr.start.copy(Yi),gr.start.z=0,gr.end.copy(Xi),gr.end.z=0;const p=gr.closestPointToPointParameter(BE,!0);gr.at(p,SL);const m=ut.lerp(Yi.z,Xi.z,p),A=m>=-1&&m<=1,v=BE.distanceTo(SL)<Gu*.5;if(A&&v){gr.start.fromBufferAttribute(l,f),gr.end.fromBufferAttribute(c,f),gr.start.applyMatrix4(o),gr.end.applyMatrix4(o);const y=new F,x=new F;da.distanceSqToSegment(gr.start,gr.end,x,y),n.push({point:x,pointOnLine:y,distance:da.origin.distanceTo(x),object:t,face:null,faceIndex:f,uv:null,uv2:null})}}}class xpe extends $e{constructor(e=new PI,n=new hx({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)EL.fromBufferAttribute(n,o),bL.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+EL.distanceTo(bL);const s=new M_(r,2,1);return e.setAttribute("instanceDistanceStart",new ns(s,1,0)),e.setAttribute("instanceDistanceEnd",new ns(s,1,1)),this}raycast(e,n){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;da=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Gu=l.linewidth+s,vC=a.attributes.instanceStart,Jz=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),UA.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Gu*.5;else{const f=Math.max(r.near,UA.distanceToPoint(da.origin));c=CL(r,f,l.resolution)}if(UA.radius+=c,da.intersectsSphere(UA)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),OA.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Gu*.5;else{const f=Math.max(r.near,OA.distanceToPoint(da.origin));u=CL(r,f,l.resolution)}OA.expandByScalar(u),da.intersectsBox(OA)!==!1&&(i?_pe(this,n):ype(this,r,n))}}class Kz extends xpe{constructor(e=new Xz,n=new hx({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let NA;const PE=()=>{if(NA)return NA;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let p=0;p<f.length;++p){const m=f.charCodeAt(p);h[p]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}let d=0;for(let p=0;p<f.length;++p)h[d++]=h[p]<60?i[h[p]]:(h[p]-60)*64+h[++p];return h.buffer.slice(0,d)}function l(f,h,d,p,m,A){const v=s.exports.sbrk,y=d+3&-4,x=v(y*p),w=v(m.length),E=new Uint8Array(s.exports.memory.buffer);E.set(m,w);const S=f(x,d,p,w,m.length);if(S===0&&A&&A(x,y,p),h.set(E.subarray(x,x+d*p)),v(x-v(0)),S!==0)throw new Error(`Malformed buffer data: ${S}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return NA={ready:o,supported:!0,decodeVertexBuffer(f,h,d,p,m){l(s.exports.meshopt_decodeVertexBuffer,f,h,d,p,s.exports[c[m]])},decodeIndexBuffer(f,h,d,p){l(s.exports.meshopt_decodeIndexBuffer,f,h,d,p)},decodeIndexSequence(f,h,d,p){l(s.exports.meshopt_decodeIndexSequence,f,h,d,p)},decodeGltfBuffer(f,h,d,p,m,A){l(s.exports[u[m]],f,h,d,p,s.exports[c[A]])}},NA};function wpe(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Object.is(t[n[i]],e[n[i]]))return!1;return!0}const $z=R.exports.createContext([]);function Epe({box:t,multiple:e,children:n,onChange:i,border:r="1px solid #55aaff",backgroundColor:s="rgba(75, 160, 255, 0.1)",filter:o=l=>l,...a}){const{setEvents:l,camera:c,raycaster:u,gl:f,controls:h,size:d,get:p}=Me(),[m,A]=R.exports.useState(!1),[v,y]=R.exports.useReducer((S,{object:M,shift:b})=>M===void 0?[]:Array.isArray(M)?M:b?S.includes(M)?S.filter(B=>B!==M):[M,...S]:S[0]===M?[]:[M],[]);R.exports.useEffect(()=>void(i==null?void 0:i(v)),[v]);const x=R.exports.useCallback(S=>{S.stopPropagation(),y({object:o([S.object])[0],shift:e&&S.shiftKey})},[]),w=R.exports.useCallback(S=>!m&&y({}),[m]),E=R.exports.useRef(null);return R.exports.useEffect(()=>{if(!t||!e)return;const S=new D0e(c,E.current),M=document.createElement("div");M.style.pointerEvents="none",M.style.border=r,M.style.backgroundColor=s,M.style.position="fixed";const b=new Ae,B=new Ae,T=new Ae,k=p().events.enabled,D=h==null?void 0:h.enabled;let N=!1;function O(V,J){const{offsetX:j,offsetY:re}=V,{width:ee,height:ae}=d;J.set(j/ee*2-1,-(re/ae)*2+1)}function Y(V){var J;h&&(h.enabled=!1),l({enabled:!1}),N=!0,(J=f.domElement.parentElement)==null||J.appendChild(M),M.style.left=`${V.clientX}px`,M.style.top=`${V.clientY}px`,M.style.width="0px",M.style.height="0px",b.x=V.clientX,b.y=V.clientY}function q(V){T.x=Math.max(b.x,V.clientX),T.y=Math.max(b.y,V.clientY),B.x=Math.min(b.x,V.clientX),B.y=Math.min(b.y,V.clientY),M.style.left=`${B.x}px`,M.style.top=`${B.y}px`,M.style.width=`${T.x-B.x}px`,M.style.height=`${T.y-B.y}px`}function K(){if(N){var V;h&&(h.enabled=D),l({enabled:k}),N=!1,(V=M.parentElement)==null||V.removeChild(M)}}function z(V){V.shiftKey&&(Y(V),O(V,S.startPoint))}let U=[];function Q(V){if(N){q(V),O(V,S.endPoint);const J=S.select().sort(j=>j.uuid).filter(j=>j.isMesh);wpe(J,U)||(U=J,y({object:o(J)}))}}function H(V){N&&K()}return document.addEventListener("pointerdown",z,{passive:!0}),document.addEventListener("pointermove",Q,{passive:!0,capture:!0}),document.addEventListener("pointerup",H,{passive:!0}),()=>{document.removeEventListener("pointerdown",z),document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",H)}},[d,u,c,h,f]),R.exports.createElement("group",cf({ref:E,onClick:x,onPointerOver:()=>A(!0),onPointerOut:()=>A(!1),onPointerMissed:w},a),R.exports.createElement($z.Provider,{value:v},n))}function bpe(){return R.exports.useContext($z)}const Zz=R.exports.forwardRef(function({follow:e=!0,lockX:n=!1,lockY:i=!1,lockZ:r=!1,...s},o){const a=R.exports.useRef();return Ct(({camera:l})=>{if(!e||!a.current)return;const c=a.current.rotation.clone();a.current.quaternion.copy(l.quaternion),n&&(a.current.rotation.x=c.x),i&&(a.current.rotation.y=c.y),r&&(a.current.rotation.z=c.z)}),$("group",{ref:jn([a,o]),...s})}),Ec=R.exports.forwardRef(function({points:e,color:n="black",vertexColors:i,linewidth:r,lineWidth:s,dashed:o,...a},l){const c=Me(d=>d.size),[u]=R.exports.useState(()=>new Kz),[f]=R.exports.useState(()=>new hx),h=R.exports.useMemo(()=>{const d=new Xz,p=e.map(m=>{const A=Array.isArray(m);return m instanceof F?[m.x,m.y,m.z]:m instanceof Ae?[m.x,m.y,0]:A&&m.length===3?[m[0],m[1],m[2]]:A&&m.length===2?[m[0],m[1],0]:m});if(d.setPositions(p.flat()),i){const m=i.map(A=>A instanceof ze?A.toArray():A);d.setColors(m.flat())}return d},[e,i]);return R.exports.useLayoutEffect(()=>{u.computeLineDistances()},[e,u]),R.exports.useLayoutEffect(()=>{o?f.defines.USE_DASH="":delete f.defines.USE_DASH,f.needsUpdate=!0},[o,f]),R.exports.useEffect(()=>()=>h.dispose(),[h]),it("primitive",{object:u,ref:l,...a,children:[$("primitive",{object:h,attach:"geometry"}),$("primitive",{object:f,attach:"material",color:n,vertexColors:Boolean(i),resolution:[c.width,c.height],linewidth:r!=null?r:s,dashed:o,...a})]})}),Spe=new F,Cpe=R.exports.forwardRef(function({start:e=[0,0,0],end:n=[0,0,0],mid:i,segments:r=20,...s},o){const a=R.exports.useRef(null),[l]=R.exports.useState(()=>new Dy(void 0,void 0,void 0)),c=R.exports.useCallback((f,h,d,p=20)=>(f instanceof F?l.v0.copy(f):l.v0.set(...f),h instanceof F?l.v2.copy(h):l.v2.set(...h),d instanceof F?l.v1.copy(d):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(Spe.set(0,l.v0.y-l.v2.y,0))),l.getPoints(p)),[]);R.exports.useLayoutEffect(()=>{a.current.setPoints=(f,h,d)=>{const p=c(f,h,d);a.current.geometry&&a.current.geometry.setPositions(p.map(m=>m.toArray()).flat())}},[]);const u=R.exports.useMemo(()=>c(e,n,i,r),[e,n,i,r]);return $(Ec,{ref:jn([a,o]),points:u,...s})}),Mpe=R.exports.forwardRef(function({start:e,end:n,midA:i,midB:r,segments:s=20,...o},a){const l=R.exports.useMemo(()=>{const c=e instanceof F?e:new F(...e),u=n instanceof F?n:new F(...n),f=i instanceof F?i:new F(...i),h=r instanceof F?r:new F(...r);return new I3(c,f,h,u).getPoints(s)},[e,n,i,r,s]);return $(Ec,{ref:a,points:l,...o})}),Ipe=R.exports.forwardRef(function({points:e,closed:n=!1,curveType:i="centripetal",tension:r=.5,segments:s=20,vertexColors:o,...a},l){const c=R.exports.useMemo(()=>{const h=e.map(d=>d instanceof F?d:new F(...d));return new C3(h,n,i,r)},[e,n,i,r]),u=R.exports.useMemo(()=>c.getPoints(s),[c,s]),f=R.exports.useMemo(()=>{if(!o||o.length<2)return;if(o.length===s+1)return o;const h=o.map(m=>m instanceof ze?m:new ze(...m));n&&h.push(h[0].clone());const d=[h[0]],p=s/(h.length-1);for(let m=1;m<s;m++){const A=m%p/p,v=Math.floor(m/p);d.push(h[v].clone().lerp(h[v+1],A))}return d.push(h[h.length-1]),d},[o,s]);return $(Ec,{ref:l,points:u,vertexColors:f,...a})}),Tpe=R.exports.forwardRef(({url:t,distance:e=1,loop:n=!0,autoplay:i,...r},s)=>{const o=R.exports.useRef(),a=Me(({camera:u})=>u),[l]=R.exports.useState(()=>new GU),c=Mi(zU,t);return R.exports.useEffect(()=>{const u=o.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(n),i&&!u.isPlaying&&u.play())},[c,a,e,n]),R.exports.useEffect(()=>{const u=o.current;return a.add(l),()=>{a.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),$("positionalAudio",{ref:jn([o,s]),args:[l],...r})});function DI(){var t=0,e=[],n,i=0,r=0;function s(v,y){var x=DI();function w(){var E=t>0?v:y;if(m(E))try{var S=E(n);S===x&&p();var M=h(S);M?M.call(S,x.resolve,x.reject):x.resolve(S)}catch(b){x.reject(b)}else x[t>0?"resolve":"reject"](n)}return e.push(w),t&&c(),x}var o=d(function(v){r||l(1,v)}),a=d(function(v){r||l(-1,v)});function l(v,y){r++;var x=0;try{y===A&&p();var w=v>0&&h(y);w?w.call(y,d(function(E){x++,l(1,E)}),d(function(E){x++,l(-1,E)})):(t=v,n=y,c())}catch(E){!t&&!x&&l(-1,E)}}function c(){i||(setTimeout(u,0),i=1)}function u(){var v=e;i=0,e=[],v.forEach(f)}function f(v){v()}function h(v){var y=v&&(m(v)||typeof v=="object")&&v.then;return m(y)&&y}function d(v){var y=0;return function(){for(var x=[],w=arguments.length;w--;)x[w]=arguments[w];y++||v.apply(this,x)}}function p(){throw new TypeError("Chaining cycle detected")}var m=function(v){return typeof v=="function"},A={then:s,resolve:o,reject:a};return A}function e9(){var t,e,n=new Promise(function(i,r){t=i,e=r});return{then:n.then.bind(n),resolve:t,reject:e}}DI.all=e9.all=function(t){var e=0,n=[],i=fl();return t.length===0?i.resolve([]):t.forEach(function(r,s){var o=fl();o.resolve(r),o.then(function(a){e++,n[s]=a,e===t.length&&i.resolve(n)},i.reject)}),i};var fl=typeof Promise=="function"?e9:DI;function Bpe(){var t=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!t[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(d){if(d instanceof Error)throw d}),h=t[h.id].value),h}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:f,getTransferables:u},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function n(r,s){var o,a=r.id,l=r.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=t[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var h=t[a].getTransferables&&t[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(d){console.error(d),s(d)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function Rpe(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=fl.all(n).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var t9=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return t9=function(){return t},t},Ppe=0,Dpe=0,DE=!1,Xp=Object.create(null),Jp=Object.create(null),_C=Object.create(null);function n0(t){if((!t||typeof t.init!="function")&&!DE)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId;if(!t9())return Rpe(t);r==null&&(r="#default");var s="workerModule"+ ++Ppe,o=t.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(DE=!0,c=n0({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+Fv(c)+`
)}`}),DE=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=ML(r,"registerModule",l.workerModuleData);var f=function(){a=null,Jp[r].delete(f)};(Jp[r]||(Jp[r]=new Set)).add(f)}return a.then(function(h){var d=h.isCallable;if(d)return ML(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Fv(n),getTransferables:i&&Fv(i)},l}function Lpe(t){Jp[t]&&Jp[t].forEach(function(e){e()}),Xp[t]&&(Xp[t].terminate(),delete Xp[t])}function Fv(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Fpe(t){var e=Xp[t];if(!e){var n=Fv(Bpe);e=Xp[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=_C[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete _C[s],o(r)}}return e}function ML(t,e,n){var i=fl(),r=++Dpe;return _C[r]=function(s){s.success?i.resolve(s.result):i.reject(new Error("Error in worker "+e+" call: "+s.error))},Fpe(t).postMessage({messageId:r,action:e,data:n}),i}var kpe=n0({name:"Thenable",dependencies:[fl],init:function(t){return t}});function n9(){var t=function(e){function n(U,Q,H,V,J,j,re,ee){var ae=1-re;ee.x=ae*ae*U+2*ae*re*H+re*re*J,ee.y=ae*ae*Q+2*ae*re*V+re*re*j}function i(U,Q,H,V,J,j,re,ee,ae,ce){var ge=1-ae;ce.x=ge*ge*ge*U+3*ge*ge*ae*H+3*ge*ae*ae*J+ae*ae*ae*re,ce.y=ge*ge*ge*Q+3*ge*ge*ae*V+3*ge*ae*ae*j+ae*ae*ae*ee}function r(U,Q){for(var H=/([MLQCZ])([^MLQCZ]*)/g,V,J,j,re,ee;V=H.exec(U);){var ae=V[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ce){return parseFloat(ce)});switch(V[1]){case"M":re=J=ae[0],ee=j=ae[1];break;case"L":(ae[0]!==re||ae[1]!==ee)&&Q("L",re,ee,re=ae[0],ee=ae[1]);break;case"Q":{Q("Q",re,ee,re=ae[2],ee=ae[3],ae[0],ae[1]);break}case"C":{Q("C",re,ee,re=ae[4],ee=ae[5],ae[0],ae[1],ae[2],ae[3]);break}case"Z":(re!==J||ee!==j)&&Q("L",re,ee,J,j);break}}}function s(U,Q,H){H===void 0&&(H=16);var V={x:0,y:0};r(U,function(J,j,re,ee,ae,ce,ge,xe,Se){switch(J){case"L":Q(j,re,ee,ae);break;case"Q":{for(var oe=j,he=re,Re=1;Re<H;Re++)n(j,re,ce,ge,ee,ae,Re/(H-1),V),Q(oe,he,V.x,V.y),oe=V.x,he=V.y;break}case"C":{for(var Ie=j,Te=re,qe=1;qe<H;qe++)i(j,re,ce,ge,xe,Se,ee,ae,qe/(H-1),V),Q(Ie,Te,V.x,V.y),Ie=V.x,Te=V.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(U,Q){var H=U.getContext?U.getContext("webgl",c):U,V=l.get(H);if(!V){let ge=function(Ie){var Te=j[Ie];if(!Te&&(Te=j[Ie]=H.getExtension(Ie),!Te))throw new Error(Ie+" not supported");return Te},xe=function(Ie,Te){var qe=H.createShader(Te);return H.shaderSource(qe,Ie),H.compileShader(qe),qe},Se=function(Ie,Te,qe,ye){if(!re[Ie]){var Oe={},Ve={},Pe=H.createProgram();H.attachShader(Pe,xe(Te,H.VERTEX_SHADER)),H.attachShader(Pe,xe(qe,H.FRAGMENT_SHADER)),H.linkProgram(Pe),re[Ie]={program:Pe,transaction:function(W){H.useProgram(Pe),W({setUniform:function(ue,ve){for(var Ge=[],be=arguments.length-2;be-- >0;)Ge[be]=arguments[be+2];var De=Ve[ve]||(Ve[ve]=H.getUniformLocation(Pe,ve));H["uniform"+ue].apply(H,[De].concat(Ge))},setAttribute:function(ue,ve,Ge,be,De){var me=Oe[ue];me||(me=Oe[ue]={buf:H.createBuffer(),loc:H.getAttribLocation(Pe,ue),data:null}),H.bindBuffer(H.ARRAY_BUFFER,me.buf),H.vertexAttribPointer(me.loc,ve,H.FLOAT,!1,0,0),H.enableVertexAttribArray(me.loc),J?H.vertexAttribDivisor(me.loc,be):ge("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(me.loc,be),De!==me.data&&(H.bufferData(H.ARRAY_BUFFER,De,Ge),me.data=De)}})}}}re[Ie].transaction(ye)},oe=function(Ie,Te){ae++;try{H.activeTexture(H.TEXTURE0+ae);var qe=ee[Ie];qe||(qe=ee[Ie]=H.createTexture(),H.bindTexture(H.TEXTURE_2D,qe),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST)),H.bindTexture(H.TEXTURE_2D,qe),Te(qe,ae)}finally{ae--}},he=function(Ie,Te,qe){var ye=H.createFramebuffer();ce.push(ye),H.bindFramebuffer(H.FRAMEBUFFER,ye),H.activeTexture(H.TEXTURE0+Te),H.bindTexture(H.TEXTURE_2D,Ie),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Ie,0);try{qe(ye)}finally{H.deleteFramebuffer(ye),H.bindFramebuffer(H.FRAMEBUFFER,ce[--ce.length-1]||null)}},Re=function(){j={},re={},ee={},ae=-1,ce.length=0};var J=typeof WebGL2RenderingContext<"u"&&H instanceof WebGL2RenderingContext,j={},re={},ee={},ae=-1,ce=[];H.canvas.addEventListener("webglcontextlost",function(Ie){Re(),Ie.preventDefault()},!1),l.set(H,V={gl:H,isWebGL2:J,getExtension:ge,withProgram:Se,withTexture:oe,withTextureFramebuffer:he,handleContextLoss:Re})}Q(V)}function f(U,Q,H,V,J,j,re,ee){re===void 0&&(re=15),ee===void 0&&(ee=null),u(U,function(ae){var ce=ae.gl,ge=ae.withProgram,xe=ae.withTexture;xe("copy",function(Se,oe){ce.texImage2D(ce.TEXTURE_2D,0,ce.RGBA,J,j,0,ce.RGBA,ce.UNSIGNED_BYTE,Q),ge("copy",o,a,function(he){var Re=he.setUniform,Ie=he.setAttribute;Ie("aUV",2,ce.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Re("1i","image",oe),ce.bindFramebuffer(ce.FRAMEBUFFER,ee||null),ce.disable(ce.BLEND),ce.colorMask(re&8,re&4,re&2,re&1),ce.viewport(H,V,J,j),ce.scissor(H,V,J,j),ce.drawArrays(ce.TRIANGLES,0,3)})})})}function h(U,Q,H){var V=U.width,J=U.height;u(U,function(j){var re=j.gl,ee=new Uint8Array(V*J*4);re.readPixels(0,0,V,J,re.RGBA,re.UNSIGNED_BYTE,ee),U.width=Q,U.height=H,f(re,ee,0,0,V,J)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function p(U,Q,H,V,J,j){j===void 0&&(j=1);var re=new Uint8Array(U*Q),ee=V[2]-V[0],ae=V[3]-V[1],ce=[];s(H,function(Ie,Te,qe,ye){ce.push({x1:Ie,y1:Te,x2:qe,y2:ye,minX:Math.min(Ie,qe),minY:Math.min(Te,ye),maxX:Math.max(Ie,qe),maxY:Math.max(Te,ye)})}),ce.sort(function(Ie,Te){return Ie.maxX-Te.maxX});for(var ge=0;ge<U;ge++)for(var xe=0;xe<Q;xe++){var Se=he(V[0]+ee*(ge+.5)/U,V[1]+ae*(xe+.5)/Q),oe=Math.pow(1-Math.abs(Se)/J,j)/2;Se<0&&(oe=1-oe),oe=Math.max(0,Math.min(255,Math.round(oe*255))),re[xe*U+ge]=oe}return re;function he(Ie,Te){for(var qe=1/0,ye=1/0,Oe=ce.length;Oe--;){var Ve=ce[Oe];if(Ve.maxX+ye<=Ie)break;if(Ie+ye>Ve.minX&&Te-ye<Ve.maxY&&Te+ye>Ve.minY){var Pe=v(Ie,Te,Ve.x1,Ve.y1,Ve.x2,Ve.y2);Pe<qe&&(qe=Pe,ye=Math.sqrt(qe))}}return Re(Ie,Te)&&(ye=-ye),ye}function Re(Ie,Te){for(var qe=0,ye=ce.length;ye--;){var Oe=ce[ye];if(Oe.maxX<=Ie)break;var Ve=Oe.y1>Te!=Oe.y2>Te&&Ie<(Oe.x2-Oe.x1)*(Te-Oe.y1)/(Oe.y2-Oe.y1)+Oe.x1;Ve&&(qe+=Oe.y1<Oe.y2?1:-1)}return qe!==0}}function m(U,Q,H,V,J,j,re,ee,ae,ce){j===void 0&&(j=1),ee===void 0&&(ee=0),ae===void 0&&(ae=0),ce===void 0&&(ce=0),A(U,Q,H,V,J,j,re,null,ee,ae,ce)}function A(U,Q,H,V,J,j,re,ee,ae,ce,ge){j===void 0&&(j=1),ae===void 0&&(ae=0),ce===void 0&&(ce=0),ge===void 0&&(ge=0);for(var xe=p(U,Q,H,V,J,j),Se=new Uint8Array(xe.length*4),oe=0;oe<xe.length;oe++)Se[oe*4+ge]=xe[oe];f(re,Se,ae,ce,U,Q,1<<3-ge,ee)}function v(U,Q,H,V,J,j){var re=J-H,ee=j-V,ae=re*re+ee*ee,ce=ae?Math.max(0,Math.min(1,((U-H)*re+(Q-V)*ee)/ae)):0,ge=U-(H+ce*re),xe=Q-(V+ce*ee);return ge*ge+xe*xe}var y=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:m,generateIntoFramebuffer:A}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",E="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",S=new Float32Array([0,0,2,0,0,2]),M=null,b=!1,B={},T=new WeakMap;function k(U){if(!b&&!Y(U))throw new Error("WebGL generation not supported")}function D(U,Q,H,V,J,j,re){if(j===void 0&&(j=1),re===void 0&&(re=null),!re&&(re=M,!re)){var ee=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ee)throw new Error("OffscreenCanvas or DOM canvas not supported");re=M=ee.getContext("webgl",{depth:!1})}k(re);var ae=new Uint8Array(U*Q*4);u(re,function(Se){var oe=Se.gl,he=Se.withTexture,Re=Se.withTextureFramebuffer;he("readable",function(Ie,Te){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,U,Q,0,oe.RGBA,oe.UNSIGNED_BYTE,null),Re(Ie,Te,function(qe){O(U,Q,H,V,J,j,oe,qe,0,0,0),oe.readPixels(0,0,U,Q,oe.RGBA,oe.UNSIGNED_BYTE,ae)})})});for(var ce=new Uint8Array(U*Q),ge=0,xe=0;ge<ae.length;ge+=4)ce[xe++]=ae[ge];return ce}function N(U,Q,H,V,J,j,re,ee,ae,ce){j===void 0&&(j=1),ee===void 0&&(ee=0),ae===void 0&&(ae=0),ce===void 0&&(ce=0),O(U,Q,H,V,J,j,re,null,ee,ae,ce)}function O(U,Q,H,V,J,j,re,ee,ae,ce,ge){j===void 0&&(j=1),ae===void 0&&(ae=0),ce===void 0&&(ce=0),ge===void 0&&(ge=0),k(re);var xe=[];s(H,function(Se,oe,he,Re){xe.push(Se,oe,he,Re)}),xe=new Float32Array(xe),u(re,function(Se){var oe=Se.gl,he=Se.isWebGL2,Re=Se.getExtension,Ie=Se.withProgram,Te=Se.withTexture,qe=Se.withTextureFramebuffer,ye=Se.handleContextLoss;if(Te("rawDistances",function(Oe,Ve){(U!==Oe._lastWidth||Q!==Oe._lastHeight)&&oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,Oe._lastWidth=U,Oe._lastHeight=Q,0,oe.RGBA,oe.UNSIGNED_BYTE,null),Ie("main",x,w,function(Pe){var X=Pe.setAttribute,W=Pe.setUniform,ne=!he&&Re("ANGLE_instanced_arrays"),ue=!he&&Re("EXT_blend_minmax");X("aUV",2,oe.STATIC_DRAW,0,S),X("aLineSegment",4,oe.DYNAMIC_DRAW,1,xe),W.apply(void 0,["4f","uGlyphBounds"].concat(V)),W("1f","uMaxDistance",J),W("1f","uExponent",j),qe(Oe,Ve,function(ve){oe.enable(oe.BLEND),oe.colorMask(!0,!0,!0,!0),oe.viewport(0,0,U,Q),oe.scissor(0,0,U,Q),oe.blendFunc(oe.ONE,oe.ONE),oe.blendEquationSeparate(oe.FUNC_ADD,he?oe.MAX:ue.MAX_EXT),oe.clear(oe.COLOR_BUFFER_BIT),he?oe.drawArraysInstanced(oe.TRIANGLES,0,3,xe.length/4):ne.drawArraysInstancedANGLE(oe.TRIANGLES,0,3,xe.length/4)})}),Ie("post",o,E,function(Pe){Pe.setAttribute("aUV",2,oe.STATIC_DRAW,0,S),Pe.setUniform("1i","tex",Ve),oe.bindFramebuffer(oe.FRAMEBUFFER,ee),oe.disable(oe.BLEND),oe.colorMask(ge===0,ge===1,ge===2,ge===3),oe.viewport(ae,ce,U,Q),oe.scissor(ae,ce,U,Q),oe.drawArrays(oe.TRIANGLES,0,3)})}),oe.isContextLost())throw ye(),new Error("webgl context lost")})}function Y(U){var Q=!U||U===M?B:U.canvas||U,H=T.get(Q);if(H===void 0){b=!0;var V=null;try{var J=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],j=D(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,U);H=j&&J.length===j.length&&j.every(function(re,ee){return re===J[ee]}),H||(V="bad trial run results",console.info(J,j))}catch(re){H=!1,V=re.message}V&&console.warn("WebGL SDF generation not supported:",V),b=!1,T.set(Q,H)}return H}var q=Object.freeze({__proto__:null,generate:D,generateIntoCanvas:N,generateIntoFramebuffer:O,isSupported:Y});function K(U,Q,H,V,J,j){J===void 0&&(J=Math.max(V[2]-V[0],V[3]-V[1])/2),j===void 0&&(j=1);try{return D.apply(q,arguments)}catch(re){return console.info("WebGL SDF generation failed, falling back to JS",re),p.apply(y,arguments)}}function z(U,Q,H,V,J,j,re,ee,ae,ce){J===void 0&&(J=Math.max(V[2]-V[0],V[3]-V[1])/2),j===void 0&&(j=1),ee===void 0&&(ee=0),ae===void 0&&(ae=0),ce===void 0&&(ce=0);try{return N.apply(q,arguments)}catch(ge){return console.info("WebGL SDF generation failed, falling back to JS",ge),m.apply(y,arguments)}}return e.forEachPathCommand=r,e.generate=K,e.generateIntoCanvas=z,e.javascript=y,e.pathToLineSegments=s,e.webgl=q,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function Ope(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(n).forEach(function(ye,Oe){i[ye]=1<<Oe+1,r[i[ye]]=ye}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function f(){if(!u){u=new Map;var ye=function(Ve){if(n.hasOwnProperty(Ve)){var Pe=0;n[Ve].split(",").forEach(function(X){var W=X.split("+"),ne=W[0],ue=W[1];ne=parseInt(ne,36),ue=ue?parseInt(ue,36):0,u.set(Pe+=ne,i[Ve]);for(var ve=0;ve<ue;ve++)u.set(++Pe,i[Ve])})}};for(var Oe in n)ye(Oe)}}function h(ye){return f(),u.get(ye.codePointAt(0))||i.L}function d(ye){return r[h(ye)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(ye,Oe){var Ve=36,Pe=0,X=new Map,W=Oe&&new Map,ne;return ye.split(",").forEach(function ue(ve){if(ve.indexOf("+")!==-1)for(var Ge=+ve;Ge--;)ue(ne);else{ne=ve;var be=ve.split(">"),De=be[0],me=be[1];De=String.fromCodePoint(Pe+=parseInt(De,Ve)),me=String.fromCodePoint(Pe+=parseInt(me,Ve)),X.set(De,me),Oe&&W.set(me,De)}}),{map:X,reverseMap:W}}var A,v,y;function x(){if(!A){var ye=m(p.pairs,!0),Oe=ye.map,Ve=ye.reverseMap;A=Oe,v=Ve,y=m(p.canonical,!1).map}}function w(ye){return x(),A.get(ye)||null}function E(ye){return x(),v.get(ye)||null}function S(ye){return x(),y.get(ye)||null}var M=i.L,b=i.R,B=i.EN,T=i.ES,k=i.ET,D=i.AN,N=i.CS,O=i.B,Y=i.S,q=i.ON,K=i.BN,z=i.NSM,U=i.AL,Q=i.LRO,H=i.RLO,V=i.LRE,J=i.RLE,j=i.PDF,re=i.LRI,ee=i.RLI,ae=i.FSI,ce=i.PDI;function ge(ye,Oe){for(var Ve=125,Pe=new Uint32Array(ye.length),X=0;X<ye.length;X++)Pe[X]=h(ye[X]);var W=new Map;function ne(li,Ti){var yn=Pe[li];Pe[li]=Ti,W.set(yn,W.get(yn)-1),yn&a&&W.set(a,W.get(a)-1),W.set(Ti,(W.get(Ti)||0)+1),Ti&a&&W.set(a,(W.get(a)||0)+1)}for(var ue=new Uint8Array(ye.length),ve=new Map,Ge=[],be=null,De=0;De<ye.length;De++)be||Ge.push(be={start:De,end:ye.length-1,level:Oe==="rtl"?1:Oe==="ltr"?0:kf(De,!1)}),Pe[De]&O&&(be.end=De,be=null);for(var me=J|V|H|Q|s|ce|j|O,je=function(li){return li+(li&1?1:2)},ie=function(li){return li+(li&1?2:1)},_e=0;_e<Ge.length;_e++){be=Ge[_e];var Ce=[{_level:be.level,_override:0,_isolate:0}],ke=void 0,tt=0,se=0,Je=0;W.clear();for(var Qe=be.start;Qe<=be.end;Qe++){var Ee=Pe[Qe];if(ke=Ce[Ce.length-1],W.set(Ee,(W.get(Ee)||0)+1),Ee&a&&W.set(a,(W.get(a)||0)+1),Ee&me)if(Ee&(J|V)){ue[Qe]=ke._level;var We=(Ee===J?ie:je)(ke._level);We<=Ve&&!tt&&!se?Ce.push({_level:We,_override:0,_isolate:0}):tt||se++}else if(Ee&(H|Q)){ue[Qe]=ke._level;var ft=(Ee===H?ie:je)(ke._level);ft<=Ve&&!tt&&!se?Ce.push({_level:ft,_override:Ee&H?b:M,_isolate:0}):tt||se++}else if(Ee&s){Ee&ae&&(Ee=kf(Qe+1,!0)===1?ee:re),ue[Qe]=ke._level,ke._override&&ne(Qe,ke._override);var Tt=(Ee===ee?ie:je)(ke._level);Tt<=Ve&&tt===0&&se===0?(Je++,Ce.push({_level:Tt,_override:0,_isolate:1,_isolInitIndex:Qe})):tt++}else if(Ee&ce){if(tt>0)tt--;else if(Je>0){for(se=0;!Ce[Ce.length-1]._isolate;)Ce.pop();var cn=Ce[Ce.length-1]._isolInitIndex;cn!=null&&(ve.set(cn,Qe),ve.set(Qe,cn)),Ce.pop(),Je--}ke=Ce[Ce.length-1],ue[Qe]=ke._level,ke._override&&ne(Qe,ke._override)}else Ee&j?(tt===0&&(se>0?se--:!ke._isolate&&Ce.length>1&&(Ce.pop(),ke=Ce[Ce.length-1])),ue[Qe]=ke._level):Ee&O&&(ue[Qe]=be.level);else ue[Qe]=ke._level,ke._override&&Ee!==K&&ne(Qe,ke._override)}for(var Yt=[],gt=null,un=be.start;un<=be.end;un++){var pn=Pe[un];if(!(pn&l)){var fn=ue[un],qn=pn&s,Mr=pn===ce;gt&&fn===gt._level?(gt._end=un,gt._endsWithIsolInit=qn):Yt.push(gt={_start:un,_end:un,_level:fn,_startsWithPDI:Mr,_endsWithIsolInit:qn})}}for(var Zn=[],On=0;On<Yt.length;On++){var Ai=Yt[On];if(!Ai._startsWithPDI||Ai._startsWithPDI&&!ve.has(Ai._start)){for(var Z=[gt=Ai],de=void 0;gt&&gt._endsWithIsolInit&&(de=ve.get(gt._end))!=null;)for(var Le=On+1;Le<Yt.length;Le++)if(Yt[Le]._start===de){Z.push(gt=Yt[Le]);break}for(var pe=[],Ue=0;Ue<Z.length;Ue++)for(var mt=Z[Ue],xt=mt._start;xt<=mt._end;xt++)pe.push(xt);for(var kt=ue[pe[0]],Mt=be.level,Xt=pe[0]-1;Xt>=0;Xt--)if(!(Pe[Xt]&l)){Mt=ue[Xt];break}var Qt=pe[pe.length-1],Jt=ue[Qt],_n=be.level;if(!(Pe[Qt]&s)){for(var Wr=Qt+1;Wr<=be.end;Wr++)if(!(Pe[Wr]&l)){_n=ue[Wr];break}}Zn.push({_seqIndices:pe,_sosType:Math.max(Mt,kt)%2?b:M,_eosType:Math.max(_n,Jt)%2?b:M})}}for(var ks=0;ks<Zn.length;ks++){var Os=Zn[ks],st=Os._seqIndices,Ot=Os._sosType,Us=Os._eosType;if(W.get(z))for(var mn=0;mn<st.length;mn++){var Hi=st[mn];if(Pe[Hi]&z){for(var rr=Ot,Vi=mn-1;Vi>=0;Vi--)if(!(Pe[st[Vi]]&l)){rr=Pe[st[Vi]];break}ne(Hi,rr&(s|ce)?q:rr)}}if(W.get(B))for(var Wi=0;Wi<st.length;Wi++){var Bt=st[Wi];if(Pe[Bt]&B)for(var Ht=Wi-1;Ht>=-1;Ht--){var Ir=Ht===-1?Ot:Pe[st[Ht]];if(Ir&o){Ir===U&&ne(Bt,D);break}}}if(W.get(U))for(var nn=0;nn<st.length;nn++){var ei=st[nn];Pe[ei]&U&&ne(ei,b)}if(W.get(T)||W.get(N))for(var Tr=1;Tr<st.length-1;Tr++){var ls=st[Tr];if(Pe[ls]&(T|N)){for(var ti=0,Al=0,Tf=Tr-1;Tf>=0&&(ti=Pe[st[Tf]],!!(ti&l));Tf--);for(var Bf=Tr+1;Bf<st.length&&(Al=Pe[st[Bf]],!!(Al&l));Bf++);ti===Al&&(Pe[ls]===T?ti===B:ti&(B|D))&&ne(ls,ti)}}if(W.get(B))for(var Wo=0;Wo<st.length;Wo++){var Ig=st[Wo];if(Pe[Ig]&B){for(var sr=Wo-1;sr>=0&&Pe[st[sr]]&(k|l);sr--)ne(st[sr],B);for(var Rf=Wo+1;Rf<st.length&&Pe[st[Rf]]&(k|l);Rf++)ne(st[Rf],B)}}if(W.get(k)||W.get(T)||W.get(N))for(var Pc=0;Pc<st.length;Pc++){var Tg=st[Pc];if(Pe[Tg]&(k|T|N)){ne(Tg,q);for(var ba=Pc-1;ba>=0&&Pe[st[ba]]&l;ba--)ne(st[ba],q);for(var Sa=Pc+1;Sa<st.length&&Pe[st[Sa]]&l;Sa++)ne(st[Sa],q)}}if(W.get(B))for(var Ca=0,Dc=Ot;Ca<st.length;Ca++){var Bg=st[Ca],l0=Pe[Bg];l0&B?Dc===M&&ne(Bg,M):l0&o&&(Dc=l0)}if(W.get(a)){var Ma=b|B|D,Pf=Ma|M,jo=[];{for(var vl=[],qo=0;qo<st.length;qo++)if(Pe[st[qo]]&a){var jt=ye[st[qo]],c0=void 0;if(w(jt)!==null)if(vl.length<63)vl.push({char:jt,seqIndex:qo});else break;else if((c0=E(jt))!==null)for(var Ia=vl.length-1;Ia>=0;Ia--){var Df=vl[Ia].char;if(Df===c0||Df===E(S(jt))||w(S(Df))===jt){jo.push([vl[Ia].seqIndex,qo]),vl.length=Ia;break}}}jo.sort(function(li,Ti){return li[0]-Ti[0]})}for(var u0=0;u0<jo.length;u0++){for(var Rg=jo[u0],Rn=Rg[0],_l=Rg[1],Pg=!1,Br=0,f0=Rn+1;f0<_l;f0++){var yl=st[f0];if(Pe[yl]&Pf){Pg=!0;var cs=Pe[yl]&Ma?b:M;if(cs===Xo(yl)){Br=cs;break}}}if(Pg&&!Br){Br=Ot;for(var h0=Rn-1;h0>=0;h0--){var Lf=st[h0];if(Pe[Lf]&Pf){var us=Pe[Lf]&Ma?b:M;us!==Xo(Lf)?Br=us:Br=Xo(Lf);break}}}if(Br){if(Pe[st[Rn]]=Pe[st[_l]]=Br,Br!==Xo(st[Rn])){for(var Rr=Rn+1;Rr<st.length;Rr++)if(!(Pe[st[Rr]]&l)){h(ye[st[Rr]])&z&&(Pe[st[Rr]]=Br);break}}if(Br!==Xo(st[_l])){for(var Yo=_l+1;Yo<st.length;Yo++)if(!(Pe[st[Yo]]&l)){h(ye[st[Yo]])&z&&(Pe[st[Yo]]=Br);break}}}}for(var Ns=0;Ns<st.length;Ns++)if(Pe[st[Ns]]&a){for(var d0=Ns,p0=Ns,jr=Ot,Lc=Ns-1;Lc>=0;Lc--)if(Pe[st[Lc]]&l)d0=Lc;else{jr=Pe[st[Lc]]&Ma?b:M;break}for(var Fc=Us,kc=Ns+1;kc<st.length;kc++)if(Pe[st[kc]]&(a|l))p0=kc;else{Fc=Pe[st[kc]]&Ma?b:M;break}for(var or=d0;or<=p0;or++)Pe[st[or]]=jr===Fc?jr:Xo(st[or]);Ns=p0}}}for(var Ii=be.start;Ii<=be.end;Ii++){var Ff=ue[Ii],po=Pe[Ii];if(Ff&1?po&(M|B|D)&&ue[Ii]++:po&b?ue[Ii]++:po&(D|B)&&(ue[Ii]+=2),po&l&&(ue[Ii]=Ii===0?be.level:ue[Ii-1]),Ii===be.end||h(ye[Ii])&(Y|O))for(var xl=Ii;xl>=0&&h(ye[xl])&c;xl--)ue[xl]=be.level}}return{levels:ue,paragraphs:Ge};function kf(li,Ti){for(var yn=li;yn<ye.length;yn++){var vi=Pe[yn];if(vi&(b|U))return 1;if(vi&(O|M)||Ti&&vi===ce)return 0;if(vi&s){var mo=Dg(yn);yn=mo===-1?ye.length:mo}}return 0}function Dg(li){for(var Ti=1,yn=li+1;yn<ye.length;yn++){var vi=Pe[yn];if(vi&O)break;if(vi&ce){if(--Ti===0)return yn}else vi&s&&Ti++}return-1}function Xo(li){return ue[li]&1?b:M}}var xe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Se;function oe(){if(!Se){var ye=m(xe,!0),Oe=ye.map,Ve=ye.reverseMap;Ve.forEach(function(Pe,X){Oe.set(X,Pe)}),Se=Oe}}function he(ye){return oe(),Se.get(ye)||null}function Re(ye,Oe,Ve,Pe){var X=ye.length;Ve=Math.max(0,Ve==null?0:+Ve),Pe=Math.min(X-1,Pe==null?X-1:+Pe);for(var W=new Map,ne=Ve;ne<=Pe;ne++)if(Oe[ne]&1){var ue=he(ye[ne]);ue!==null&&W.set(ne,ue)}return W}function Ie(ye,Oe,Ve,Pe){var X=ye.length;Ve=Math.max(0,Ve==null?0:+Ve),Pe=Math.min(X-1,Pe==null?X-1:+Pe);var W=[];return Oe.paragraphs.forEach(function(ne){var ue=Math.max(Ve,ne.start),ve=Math.min(Pe,ne.end);if(ue<ve){for(var Ge=Oe.levels.slice(ue,ve+1),be=ve;be>=ue&&h(ye[be])&c;be--)Ge[be]=ne.level;for(var De=ne.level,me=1/0,je=0;je<Ge.length;je++){var ie=Ge[je];ie>De&&(De=ie),ie<me&&(me=ie|1)}for(var _e=De;_e>=me;_e--)for(var Ce=0;Ce<Ge.length;Ce++)if(Ge[Ce]>=_e){for(var ke=Ce;Ce+1<Ge.length&&Ge[Ce+1]>=_e;)Ce++;Ce>ke&&W.push([ke+Ve,Ce+Ve])}}}),W}function Te(ye,Oe,Ve,Pe){var X=qe(ye,Oe,Ve,Pe),W=[].concat(ye);return X.forEach(function(ne,ue){W[ue]=(Oe.levels[ne]&1?he(ye[ne]):null)||ye[ne]}),W.join("")}function qe(ye,Oe,Ve,Pe){for(var X=Ie(ye,Oe,Ve,Pe),W=[],ne=0;ne<ye.length;ne++)W[ne]=ne;return X.forEach(function(ue){for(var ve=ue[0],Ge=ue[1],be=W.slice(ve,Ge+1),De=be.length;De--;)W[Ge-De]=be[De]}),W}return e.closingToOpeningBracket=E,e.getBidiCharType=h,e.getBidiCharTypeName=d,e.getCanonicalBracket=S,e.getEmbeddingLevels=ge,e.getMirroredCharacter=he,e.getMirroredCharactersMap=Re,e.getReorderSegments=Ie,e.getReorderedIndices=qe,e.getReorderedString=Te,e.openingToClosingBracket=w,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const i9=/\bvoid\s+main\s*\(\s*\)\s*{/g;function yC(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(i,r){let s=vt[r];return s?yC(s):i}return t.replace(e,n)}const Ki=[];for(let t=0;t<256;t++)Ki[t]=(t<16?"0":"")+t.toString(16);function Upe(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ki[t&255]+Ki[t>>8&255]+Ki[t>>16&255]+Ki[t>>24&255]+"-"+Ki[e&255]+Ki[e>>8&255]+"-"+Ki[e>>16&15|64]+Ki[e>>24&255]+"-"+Ki[n&63|128]+Ki[n>>8&255]+"-"+Ki[n>>16&255]+Ki[n>>24&255]+Ki[i&255]+Ki[i>>8&255]+Ki[i>>16&255]+Ki[i>>24&255]).toUpperCase()}const nu=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let i=arguments[e];if(i)for(let r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},Npe=Date.now(),IL=new WeakMap,TL=new Map;let zpe=1e10;function xC(t,e){const n=Vpe(e);let i=IL.get(t);if(i||IL.set(t,i=Object.create(null)),i[n])return new i[n];const r=`_onBeforeCompile${n}`,s=function(c){t.onBeforeCompile.call(this,c);const u=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let f=TL[u];if(!f){const h=Gpe(c,e,n);f=TL[u]=h}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,nu(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-Npe}}),this[r]&&this[r](c)},o=function(){return a(e.chained?t:t.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:zpe++}),u.uuid=Upe(),u.uniforms=nu({},c.uniforms,e.uniforms),u.defines=nu({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=nu({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(nu(this.extensions,c.extensions),nu(this.defines,c.defines),nu(this.uniforms,Mc.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=xC(t.isDerivedMaterial?t.getDepthMaterial():new ig({depthPacking:f3}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=xC(t.isDerivedMaterial?t.getDistanceMaterial():new Iy,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return i[n]=o,new o}function Gpe({vertexShader:t,fragmentShader:e},n,i){let{vertexDefs:r,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:f,customRewriter:h,timeUniform:d}=n;if(r=r||"",s=s||"",o=o||"",l=l||"",c=c||"",u=u||"",(a||h)&&(t=yC(t)),(f||h)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=yC(e)),h){let p=h({vertexShader:t,fragmentShader:e});t=p.vertexShader,e=p.fragmentShader}if(f){let p=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(p.push(m),"")),u=`${f}
${p.join(`
`)}
${u}`}if(d){const p=`
uniform float ${d};
`;r=p+r,l=p+l}return a&&(t=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${t}
`,r=`${r}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,s=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${s}
`,t=t.replace(/\b(position|normal|uv)\b/g,(p,m,A,v)=>/\battribute\s+vec[23]\s+$/.test(v.substr(0,A))?m:`troika_${m}_${i}`)),t=BL(t,i,r,s,o),e=BL(e,i,l,c,u),{vertexShader:t,fragmentShader:e}}function BL(t,e,n,i,r){return(i||r||n)&&(t=t.replace(i9,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),t}function Qpe(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Hpe=0;const RL=new Map;function Vpe(t){const e=JSON.stringify(t,Qpe);let n=RL.get(e);return n==null&&RL.set(e,n=++Hpe),n}function Wpe(t,e,n){const{defaultFontURL:i}=n,r=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(v,y){function x(){const w=E=>{console.error(`Failure loading font ${v}${v===i?"":"; trying fallback"}`,E),v!==i&&(v=i,x())};try{const E=new XMLHttpRequest;E.open("get",v,!0),E.responseType="arraybuffer",E.onload=function(){if(E.status>=400)w(new Error(E.statusText));else if(E.status>0)try{const S=t(E.response);y(S)}catch(S){w(S)}},E.onerror=w,E.send()}catch(E){w(E)}}x()}function c(v,y){v||(v=i);let x=r[v];x?x.pending?x.pending.push(y):y(x):(r[v]={pending:[y]},l(v,w=>{let E=r[v].pending;r[v]=w,E.forEach(S=>S(w))}))}function u({text:v="",font:y=i,sdfGlyphSize:x=64,fontSize:w=1,letterSpacing:E=0,lineHeight:S="normal",maxWidth:M=s,direction:b,textAlign:B="left",textIndent:T=0,whiteSpace:k="normal",overflowWrap:D="normal",anchorX:N=0,anchorY:O=0,includeCaretPositions:Y=!1,chunkedBoundsSize:q=8192,colorRanges:K=null},z,U=!1){const Q=p(),H={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),w=+w,E=+E,M=+M,S=S||"normal",T=+T,c(y,V=>{const J=isFinite(M);let j=null,re=null,ee=null,ae=null,ce=null,ge=null,xe=null,Se=0,oe=0,he=k!=="nowrap";const{ascender:Re,descender:Ie,unitsPerEm:Te}=V;H.fontLoad=p()-Q;const qe=p(),ye=w/Te;S==="normal"&&(S=(Re-Ie)/Te),S=S*w;const Oe=(S-(Re-Ie)*ye)/2,Ve=-(Re*ye+Oe),Pe=Math.min(S,(Re-Ie)*ye),X=(Re+Ie)/2*ye-Pe/2;let W=T,ne=new m;const ue=[ne];V.forEachGlyph(v,w,E,(be,De,me)=>{const je=v.charAt(me),ie=be.advanceWidth*ye,_e=ne.count;let Ce;if("isEmpty"in be||(be.isWhitespace=!!je&&/\s/.test(je),be.canBreakAfter=!!je&&a.test(je),be.isEmpty=be.xMin===be.xMax||be.yMin===be.yMax||o.test(je)),!be.isWhitespace&&!be.isEmpty&&oe++,he&&J&&!be.isWhitespace&&De+ie+W>M&&_e){if(ne.glyphAt(_e-1).glyphObj.canBreakAfter)Ce=new m,W=-De;else for(let tt=_e;tt--;)if(tt===0&&D==="break-word"){Ce=new m,W=-De;break}else if(ne.glyphAt(tt).glyphObj.canBreakAfter){Ce=ne.splitAt(tt+1);const se=Ce.glyphAt(0).x;W-=se;for(let Je=Ce.count;Je--;)Ce.glyphAt(Je).x-=se;break}Ce&&(ne.isSoftWrapped=!0,ne=Ce,ue.push(ne),Se=M)}let ke=ne.glyphAt(ne.count);ke.glyphObj=be,ke.x=De+W,ke.width=ie,ke.charIndex=me,je===`
`&&(ne=new m,ue.push(ne),W=-(De+ie+E*w)+T)}),ue.forEach(be=>{for(let De=be.count;De--;){let{glyphObj:me,x:je,width:ie}=be.glyphAt(De);if(!me.isWhitespace){be.width=je+ie,be.width>Se&&(Se=be.width);return}}});let ve=0,Ge=0;if(N&&(typeof N=="number"?ve=-N:typeof N=="string"&&(ve=-Se*(N==="left"?0:N==="center"?.5:N==="right"?1:h(N)))),O){if(typeof O=="number")Ge=-O;else if(typeof O=="string"){let be=ue.length*S;Ge=O==="top"?0:O==="top-baseline"?-Ve:O==="middle"?be/2:O==="bottom"?be:O==="bottom-baseline"?be-Oe+Ie*ye:h(O)*be}}if(!U){const be=e.getEmbeddingLevels(v,b);j=new Uint16Array(oe),re=new Float32Array(oe*2),ee={},ge=[s,s,-s,-s],xe=[];let De=Ve;Y&&(ce=new Float32Array(v.length*3)),K&&(ae=new Uint8Array(oe*3));let me=0,je=-1,ie=-1,_e,Ce;if(ue.forEach((ke,tt)=>{let{count:se,width:Je}=ke;if(se>0){let Qe=0;for(let Yt=se;Yt--&&ke.glyphAt(Yt).glyphObj.isWhitespace;)Qe++;let Ee=0,We=0;if(B==="center")Ee=(Se-Je)/2;else if(B==="right")Ee=Se-Je;else if(B==="justify"&&ke.isSoftWrapped){let Yt=0;for(let gt=se-Qe;gt--;)ke.glyphAt(gt).glyphObj.isWhitespace&&Yt++;We=(Se-Je)/Yt}if(We||Ee){let Yt=0;for(let gt=0;gt<se;gt++){let un=ke.glyphAt(gt);const pn=un.glyphObj;un.x+=Ee+Yt,We!==0&&pn.isWhitespace&&gt<se-Qe&&(Yt+=We,un.width+=We)}}const ft=e.getReorderSegments(v,be,ke.glyphAt(0).charIndex,ke.glyphAt(ke.count-1).charIndex);for(let Yt=0;Yt<ft.length;Yt++){const[gt,un]=ft[Yt];let pn=1/0,fn=-1/0;for(let qn=0;qn<se;qn++)if(ke.glyphAt(qn).charIndex>=gt){let Mr=qn,Zn=qn;for(;Zn<se;Zn++){let On=ke.glyphAt(Zn);if(On.charIndex>un)break;Zn<se-Qe&&(pn=Math.min(pn,On.x),fn=Math.max(fn,On.x+On.width))}for(let On=Mr;On<Zn;On++){const Ai=ke.glyphAt(On);Ai.x=fn-(Ai.x+Ai.width-pn)}break}}let Tt;const cn=Yt=>Tt=Yt;for(let Yt=0;Yt<se;Yt++){let gt=ke.glyphAt(Yt);Tt=gt.glyphObj;const un=Tt.index,pn=be.levels[gt.charIndex]&1;if(pn){const fn=e.getMirroredCharacter(v[gt.charIndex]);fn&&V.forEachGlyph(fn,0,0,cn)}if(Y){const{charIndex:fn}=gt,qn=gt.x+ve,Mr=gt.x+gt.width+ve;ce[fn*3]=pn?Mr:qn,ce[fn*3+1]=pn?qn:Mr,ce[fn*3+2]=De+X+Ge;const Zn=fn-je;Zn>1&&d(ce,je,Zn),je=fn}if(K){const{charIndex:fn}=gt;for(;fn>ie;)ie++,K.hasOwnProperty(ie)&&(Ce=K[ie])}if(!Tt.isWhitespace&&!Tt.isEmpty){const fn=me++;ee[un]||(ee[un]={path:Tt.path,pathBounds:[Tt.xMin,Tt.yMin,Tt.xMax,Tt.yMax]});const qn=gt.x+ve,Mr=De+Ge;re[fn*2]=qn,re[fn*2+1]=Mr;const Zn=qn+Tt.xMin*ye,On=Mr+Tt.yMin*ye,Ai=qn+Tt.xMax*ye,Z=Mr+Tt.yMax*ye;Zn<ge[0]&&(ge[0]=Zn),On<ge[1]&&(ge[1]=On),Ai>ge[2]&&(ge[2]=Ai),Z>ge[3]&&(ge[3]=Z),fn%q===0&&(_e={start:fn,end:fn,rect:[s,s,-s,-s]},xe.push(_e)),_e.end++;const de=_e.rect;if(Zn<de[0]&&(de[0]=Zn),On<de[1]&&(de[1]=On),Ai>de[2]&&(de[2]=Ai),Z>de[3]&&(de[3]=Z),j[fn]=un,K){const Le=fn*3;ae[Le]=Ce>>16&255,ae[Le+1]=Ce>>8&255,ae[Le+2]=Ce&255}}}}De-=S}),ce){const ke=v.length-je;ke>1&&d(ce,je,ke)}}H.typesetting=p()-qe,z({glyphIds:j,glyphPositions:re,glyphData:ee,caretPositions:ce,caretHeight:Pe,glyphColors:ae,chunkedBounds:xe,fontSize:w,unitsPerEm:Te,ascender:Re*ye,descender:Ie*ye,lineHeight:S,topBaseline:Ve,blockBounds:[ve,Ge-ue.length*S,ve+Se,Ge],visibleBounds:ge,timings:H})})}function f(v,y){u(v,x=>{const[w,E,S,M]=x.blockBounds;y({width:S-w,height:M-E})},{metricsOnly:!0})}function h(v){let y=v.match(/^([\d.]+)%$/),x=y?parseFloat(y[1]):NaN;return isNaN(x)?0:x/100}function d(v,y,x){const w=v[y*3],E=v[y*3+1],S=v[y*3+2],M=(E-w)/x;for(let b=0;b<x;b++){const B=(y+b)*3;v[B]=w+M*b,v[B+1]=w+M*(b+1),v[B+2]=S}}function p(){return(self.performance||Date).now()}function m(){this.data=[]}const A=["glyphObj","x","width","charIndex"];return m.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/A.length)},glyphAt(v){let y=m.flyweight;return y.data=this.data,y.index=v,y},splitAt(v){let y=new m;return y.data=this.data.splice(v*A.length),y}},m.flyweight=A.reduce((v,y,x,w)=>(Object.defineProperty(v,y,{get(){return this.data[this.index*A.length+x]},set(E){this.data[this.index*A.length+x]=E}}),v),{data:null,index:0}),{typeset:u,measure:f,loadFont:c}}const Tu=()=>(self.performance||Date).now(),dx=n9();let PL;function jpe(t,e,n,i,r,s,o,a,l,c,u=!0){return u?qpe(t,e,n,i,r,s,o,a,l,c).then(null,f=>(PL||(console.warn("WebGL SDF generation failed, falling back to JS",f),PL=!0),DL(t,e,n,i,r,s,o,a,l,c))):DL(t,e,n,i,r,s,o,a,l,c)}const qpe=function(){const t=[];let n=0;function i(){const r=Tu();for(;t.length&&Tu()-r<5;)t.shift()();n=t.length?setTimeout(i,0):0}return(...r)=>{const s=fl();return t.push(()=>{const o=Tu();try{dx.webgl.generateIntoCanvas(...r),s.resolve({timing:Tu()-o})}catch(a){s.reject(a)}}),n||(n=setTimeout(i,0)),s}}(),DL=function(){const n={};let i=0;return function(r,s,o,a,l,c,u,f,h,d){const p="TroikaTextSDFGenerator_JS_"+i++%4;let m=n[p];return m||(m=n[p]={workerModule:n0({name:p,workerId:p,dependencies:[n9,Tu],init(A,v){const y=A().javascript.generate;return function(...x){const w=v();return{textureData:y(...x),timing:v()-w}}},getTransferables(A){return[A.textureData.buffer]}}),requests:0,idleTimer:null}),m.requests++,clearTimeout(m.idleTimer),m.workerModule(r,s,o,a,l,c).then(({textureData:A,timing:v})=>{const y=Tu(),x=new Uint8Array(A.length*4);for(let w=0;w<A.length;w++)x[w*4+d]=A[w];return dx.webglUtils.renderImageData(u,x,f,h,r,s,1<<3-d),v+=Tu()-y,--m.requests===0&&(m.idleTimer=setTimeout(()=>{Lpe(p)},2e3)),{timing:v}})}}();function Ype(t){t._warm||(dx.webgl.isSupported(t),t._warm=!0)}const Xpe=dx.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Jpe(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:r,_offset:a},f={},h=0;h<l;h++){var d=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var p=o.readUint(r,s);s+=4;var m=o.readUint(r,s);s+=4,f[d]={offset:p,length:m}}for(h=0;h<c.length;h++){var A=c[h];f[A]&&(u[A.trim()]=e[A.trim()].parse(r,f[A].offset,f[A].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var h=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,f==s)return h}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(r,s),s+=4;var h=c.readUshort(r,s);s+=2;var d=c.readUshort(r,s);s+=2;var p=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,f+h),u.featureList=e._lctf.readFeatureList(r,f+d),u.lookupList=e._lctf.readLookupList(r,f+p,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=a.readUshort(r,s);s+=2;var d=e._lctf.readLookupTable(r,l+h,o);c.push(d)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var f=c.ltype,h=0;h<u;h++){var d=a.readUshort(r,s);s+=2;var p=o(r,f,l+d,c);c.tabs.push(p)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)(r>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(r,s)),s+=2}if(l==2){var h=o.readUshort(r,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2;var d=e._lctf.readFeatureTable(r,a+h);d.tag=f.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(r,s+2*f));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(r,s,4);s+=4;var h=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(r,a+h)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,l.default=e._lctf.readLangSysTable(r,a+c);var u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(r,a+d)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(r,s,f);var h=[];for(u=0;u<f.length-1;u++)h.push(e.CFF.readDict(r,s+f[u],s+f[u+1]));s+=f[f.length-1];var d=h[0],p=[];s=e.CFF.readIndex(r,s,p);var m=[];for(u=0;u<p.length-1;u++)m.push(a.readASCII(r,s+p[u],p[u+1]-p[u]));if(s+=p[p.length-1],e.CFF.readSubrs(r,s,d),d.CharStrings){s=d.CharStrings,p=[],s=e.CFF.readIndex(r,s,p);var A=[];for(u=0;u<p.length-1;u++)A.push(a.readBytes(r,s+p[u],p[u+1]-p[u]));d.CharStrings=A}if(d.ROS){s=d.FDArray;var v=[];for(s=e.CFF.readIndex(r,s,v),d.FDArray=[],u=0;u<v.length-1;u++){var y=e.CFF.readDict(r,s+v[u],s+v[u+1]);e.CFF._readFDict(r,y,m),d.FDArray.push(y)}s+=v[v.length-1],s=d.FDSelect,d.FDSelect=[];var x=r[s];if(s++,x!=3)throw x;var w=a.readUshort(r,s);for(s+=2,u=0;u<w+1;u++)d.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,m),d},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(r,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(r,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(r,s),s+=2;var h=0;for(c==1?(h=r[s],s++):(h=a.readUshort(r,s),s+=2),u=0;u<=h;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,f=null,h=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(h=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=a.readInt(r,s+1)/65535,u=5),o.val=h!=null?h:"o"+f,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,d=null,p=null;u<=20&&(d=u,h=1),u==12&&(d=100*u+f,h=2),u!=19&&u!=20||(d=u,h=2),21<=u&&u<=27&&(d=u,h=1),u==28&&(p=l.readShort(r,s+1),h=3),29<=u&&u<=31&&(d=u,h=1),32<=u&&u<=246&&(p=u-139,h=1),247<=u&&u<=250&&(p=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(p=256*-(u-251)-f-108,h=2),u==255&&(p=l.readInt(r,s+1)/65535,h=5),c.push(p!=null?p:"o"+d),s+=h}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var h=1,d=null,p=null;if(u==28&&(p=a.readShort(r,s+1),h=3),u==29&&(p=a.readInt(r,s+1),h=5),32<=u&&u<=246&&(p=u-139,h=1),247<=u&&u<=250&&(p=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(p=256*-(u-251)-f-108,h=2),u==255)throw p=a.readInt(r,s+1)/65535,h=5,"unknown number";if(u==30){var m=[];for(h=1;;){var A=r[s+h];h++;var v=A>>4,y=15&A;if(v!=15&&m.push(v),y!=15&&m.push(y),y==15)break}for(var x="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],E=0;E<m.length;E++)x+=w[m[E]];p=parseFloat(x)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(l[d]=c.length==1?c[0]:c,c=[]):c.push(p),s+=h}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var h=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var p=a.readUint(r,s);s+=4;var m="p"+h+"e"+d,A=u.indexOf(p);if(A==-1){var v;A=l.tables.length,u.push(p);var y=a.readUshort(r,p);y==0?v=e.cmap.parse0(r,p):y==4?v=e.cmap.parse4(r,p):y==6?v=e.cmap.parse6(r,p):y==12?v=e.cmap.parse12(r,p):console.debug("unknown format: "+y,h,d,p),l.tables.push(v)}if(l[m]!=null)throw"multiple tables for one platform+encoding";l[m]=A}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var f=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(r,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(r,u+0),h=o.readUint(r,u+4),d=o.readUint(r,u+8);a.groups.push([f,h,d])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var d=a[l];if(l++,c.flags.push(d),(8&d)!=0){var p=a[l];l++;for(var m=0;m<p;m++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<h;u++){var A=(2&c.flags[u])!=0,v=(16&c.flags[u])!=0;A?(c.xs.push(v?a[l]:-a[l]),l++):v?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)A=(4&c.flags[u])!=0,v=(32&c.flags[u])!=0,A?(c.ys.push(v?a[l]:-a[l]),l++):v?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var y=0,x=0;for(u=0;u<h;u++)y+=c.xs[u],x+=c.ys[u],c.xs[u]=y,c.ys[u]=x}else{var w;c.parts=[];do{w=o.readUshort(a,l),l+=2;var E={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(E),E.glyphIndex=o.readUshort(a,l),l+=2,1&w){var S=o.readShort(a,l);l+=2;var M=o.readShort(a,l);l+=2}else S=o.readInt8(a,l),l++,M=o.readInt8(a,l),l++;2&w?(E.m.tx=S,E.m.ty=M):(E.p1=S,E.p2=M),8&w?(E.m.a=E.m.d=o.readF2dot14(a,l),l+=2):64&w?(E.m.a=o.readF2dot14(a,l),l+=2,E.m.d=o.readF2dot14(a,l),l+=2):128&w&&(E.m.a=o.readF2dot14(a,l),l+=2,E.m.b=o.readF2dot14(a,l),l+=2,E.m.c=o.readF2dot14(a,l),l+=2,E.m.d=o.readF2dot14(a,l),l+=2)}while(32&w);if(256&w){var b=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<b;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,f+c)}if(s==1&&u.fmt==1){var h=l.readUshort(r,o);o+=2;var d=e._lctf.numOfOnes(h);h!=0&&(u.pos=e.GPOS.readValueRecord(r,o,h))}else if(s==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(r,o),o+=2;var p=l.readUshort(r,o);o+=2,d=e._lctf.numOfOnes(h);var m=e._lctf.numOfOnes(p);if(u.fmt==1){u.pairsets=[];var A=l.readUshort(r,o);o+=2;for(var v=0;v<A;v++){var y=c+l.readUshort(r,o);o+=2;var x=l.readUshort(r,y);y+=2;for(var w=[],E=0;E<x;E++){var S=l.readUshort(r,y);y+=2,h!=0&&(D=e.GPOS.readValueRecord(r,y,h),y+=2*d),p!=0&&(N=e.GPOS.readValueRecord(r,y,p),y+=2*m),w.push({gid2:S,val1:D,val2:N})}u.pairsets.push(w)}}if(u.fmt==2){var M=l.readUshort(r,o);o+=2;var b=l.readUshort(r,o);o+=2;var B=l.readUshort(r,o);o+=2;var T=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+M),u.classDef2=e._lctf.readClassDef(r,c+b),u.matrix=[],v=0;v<B;v++){var k=[];for(E=0;E<T;E++){var D=null,N=null;h!=0&&(D=e.GPOS.readValueRecord(r,o,h),o+=2*d),p!=0&&(N=e.GPOS.readValueRecord(r,o,p),o+=2*m),k.push({val1:D,val2:N})}u.matrix.push(k)}}}else{if(s==9&&u.fmt==1){var O=l.readUshort(r,o);o+=2;var Y=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=O;else if(a.ltype!=O)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+Y)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var h=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,h),o+=2*u.newg.length}}else if(s==4){u.vals=[],h=l.readUshort(r,o),o+=2;for(var d=0;d<h;d++){var p=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+p))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var m=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+m),u.scset=[];var A=l.readUshort(r,o);for(o+=2,d=0;d<A;d++){var v=l.readUshort(r,o);o+=2,u.scset.push(v==0?null:e.GSUB.readSubClassSet(r,c+v))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){h=l.readUshort(r,o),o+=2;for(var y=[],x=0;x<h;x++)y.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*x)));o+=2*h,d==0&&(u.backCvg=y),d==1&&(u.inptCvg=y),d==2&&(u.ahedCvg=y)}h=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,h)}}else{if(s==7&&u.fmt==1){var w=l.readUshort(r,o);o+=2;var E=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=w;else if(a.ltype!=w)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+E)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var f=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+f))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+f))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+f))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,f=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){s+=2,o=l.readUshort(r,s),s+=2;var d=l.readUshort(r,s);s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(r,s,f)}return f},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(r,s),s+=4;var h=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(r,s);s+=2;var h=a.readUshort(r,s);s+=2;var d=a.readShort(r,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(h),p.vals.push(d),l=f}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var h=0;h<f;h++)c.push(l.readUshort(r,s+(h<<1))<<1);if(u==1)for(h=0;h<f;h++)c.push(l.readUint(r,s+(h<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,d=0;d<c;d++){var p=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var w,E=f[v],S=h+12*c+x;if(p==0)w=a.readUnicode(r,S,y/2);else if(p==3&&m==0)w=a.readUnicode(r,S,y/2);else if(m==0)w=a.readASCII(r,S,y);else if(m==1)w=a.readUnicode(r,S,y/2);else if(m==3)w=a.readUnicode(r,S,y/2);else{if(p!=1)throw"unknown encoding "+m+", platformID: "+p;w=a.readASCII(r,S,y),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var M="p"+p+","+A.toString(16);l[M]==null&&(l[M]={}),l[M][E!==void 0?E:v]=w,l[M]._lang=A}for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==1033)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==0)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==3084)return l[b];for(var b in l)if(l[b].postScriptName!=null)return l[b];for(var b in l){u=b;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,h=1&r.flags[c],d=1&r.flags[u],p=1&r.flags[f],m=r.xs[c],A=r.ys[c];if(c==a)if(h){if(!d){e.U.P.moveTo(s,m,A);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else d?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+m)/2,(r.ys[u]+A)/2);h?d&&e.U.P.lineTo(s,m,A):p?e.U.P.qcurveTo(s,m,A,r.xs[f],r.ys[f]):e.U.P.qcurveTo(s,m,A,(m+r.xs[f])/2,(A+r.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],d=l.crds[f+1];o.crds.push(h*u.a+d*u.b+u.tx),o.crds.push(h*u.c+d*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(r,s,o){var a=0,l=!1;if(r.GPOS)for(var c=r.GPOS,u=c.lookupList,f=c.featureList,h=[],d=0;d<f.length;d++){var p=f[d];if(p.tag=="kern"){l=!0;for(var m=0;m<p.tab.length;m++)if(!h[p.tab[m]]){h[p.tab[m]]=!0;for(var A=u[p.tab[m]],v=0;v<A.tabs.length;v++)if(A.tabs[v]!=null){var y,x=A.tabs[v];if((!x.coverage||(y=e._lctf.coverageIndex(x.coverage,s))!=-1)&&A.ltype!=1){if(A.ltype==2){var w;if(x.fmt==1){var E=x.pairsets[y];for(d=0;d<E.length;d++)E[d].gid2==o&&(w=E[d])}else if(x.fmt==2){var S=e.U._getGlyphClass(s,x.classDef1),M=e.U._getGlyphClass(o,x.classDef2);w=x.matrix[S][M]}w&&w.val1&&w.val1[2]&&(a+=w.val1[2]),w&&w.val2&&w.val2[0]&&(a+=w.val2[0])}}}}}}if(r.kern&&!l){var b=r.kern.glyph1.indexOf(s);if(b!=-1){var B=r.kern.rval[b].glyph2.indexOf(o);B!=-1&&(a+=r.kern.rval[b].vals[B])}}return a},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,r[s]))!=-1){if(o.ltype==1)r[s],f.fmt==1?r[s]=r[s]+f.delta:r[s]=f.newg[u];else if(o.ltype==4)for(var h=f.vals[u],d=0;d<h.length;d++){var p=h[d],m=p.chain.length;if(!(m>l)){for(var A=!0,v=0,y=0;y<m;y++){for(;r[s+v+(1+y)]==-1;)v++;p.chain[y]!=r[s+v+(1+y)]&&(A=!1)}if(A){for(r[s]=p.nglyph,y=0;y<m+v;y++)r[s+y+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var x=e._lctf.getInterval(f.cDef,r[s]),w=f.cDef[x+2],E=f.scset[w],S=0;S<E.length;S++){var M=E[S],b=M.input;if(!(b.length>l)){for(A=!0,y=0;y<b.length;y++){var B=e._lctf.getInterval(f.cDef,r[s+1+y]);if(x==-1&&f.cDef[B+2]!=b[y]){A=!1;break}}if(A){var T=M.substLookupRecords;for(d=0;d<T.length;d+=2)T[d],T[d+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(r,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(r,f.inptCvg,s)||!e.U._glsCovered(r,f.ahedCvg,s+f.inptCvg.length))continue;var k=f.lookupRec;for(S=0;S<k.length;S+=2){x=k[S];var D=a[k[S+1]];e.U._applySubs(r,s+x,D,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,h=e.U.glyphToPath(r,u),d=0;d<h.crds.length;d+=2)a.crds.push(h.crds[d]+l),a.crds.push(h.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<h.cmds.length;d++)a.cmds.push(h.cmds[d]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open,p=0,m=s.x,A=s.y,v=0,y=0,x=0,w=0,E=0,S=0,M=0,b=0,B=0,T=0,k={val:0,size:0};p<r.length;){e.CFF.getCharString(r,p,k);var D=k.val;if(p+=k.size,D=="o1"||D=="o18")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(D=="o3"||D=="o23")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(D=="o4")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),d&&e.U.P.closePath(l),A+=c.pop(),e.U.P.moveTo(l,m,A),d=!0;else if(D=="o5")for(;c.length>0;)m+=c.shift(),A+=c.shift(),e.U.P.lineTo(l,m,A);else if(D=="o6"||D=="o7")for(var N=c.length,O=D=="o6",Y=0;Y<N;Y++){var q=c.shift();O?m+=q:A+=q,O=!O,e.U.P.lineTo(l,m,A)}else if(D=="o8"||D=="o24"){N=c.length;for(var K=0;K+6<=N;)v=m+c.shift(),y=A+c.shift(),x=v+c.shift(),w=y+c.shift(),m=x+c.shift(),A=w+c.shift(),e.U.P.curveTo(l,v,y,x,w,m,A),K+=6;D=="o24"&&(m+=c.shift(),A+=c.shift(),e.U.P.lineTo(l,m,A))}else{if(D=="o11")break;if(D=="o1234"||D=="o1235"||D=="o1236"||D=="o1237")D=="o1234"&&(y=A,x=(v=m+c.shift())+c.shift(),T=w=y+c.shift(),S=w,b=A,m=(M=(E=(B=x+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,v,y,x,w,B,T),e.U.P.curveTo(l,E,S,M,b,m,A)),D=="o1235"&&(v=m+c.shift(),y=A+c.shift(),x=v+c.shift(),w=y+c.shift(),B=x+c.shift(),T=w+c.shift(),E=B+c.shift(),S=T+c.shift(),M=E+c.shift(),b=S+c.shift(),m=M+c.shift(),A=b+c.shift(),c.shift(),e.U.P.curveTo(l,v,y,x,w,B,T),e.U.P.curveTo(l,E,S,M,b,m,A)),D=="o1236"&&(v=m+c.shift(),y=A+c.shift(),x=v+c.shift(),T=w=y+c.shift(),S=w,M=(E=(B=x+c.shift())+c.shift())+c.shift(),b=S+c.shift(),m=M+c.shift(),e.U.P.curveTo(l,v,y,x,w,B,T),e.U.P.curveTo(l,E,S,M,b,m,A)),D=="o1237"&&(v=m+c.shift(),y=A+c.shift(),x=v+c.shift(),w=y+c.shift(),B=x+c.shift(),T=w+c.shift(),E=B+c.shift(),S=T+c.shift(),M=E+c.shift(),b=S+c.shift(),Math.abs(M-m)>Math.abs(b-A)?m=M+c.shift():A=b+c.shift(),e.U.P.curveTo(l,v,y,x,w,B,T),e.U.P.curveTo(l,E,S,M,b,m,A));else if(D=="o14"){if(c.length>0&&!f&&(h=c.shift()+o.nominalWidthX,f=!0),c.length==4){var z=c.shift(),U=c.shift(),Q=c.shift(),H=c.shift(),V=e.CFF.glyphBySE(o,Q),J=e.CFF.glyphBySE(o,H);e.U._drawCFF(o.CharStrings[V],s,o,a,l),s.x=z,s.y=U,e.U._drawCFF(o.CharStrings[J],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(D=="o19"||D=="o20")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,p+=u+7>>3;else if(D=="o21")c.length>2&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),A+=c.pop(),m+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,m,A),d=!0;else if(D=="o22")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),m+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,m,A),d=!0;else if(D=="o25"){for(;c.length>6;)m+=c.shift(),A+=c.shift(),e.U.P.lineTo(l,m,A);v=m+c.shift(),y=A+c.shift(),x=v+c.shift(),w=y+c.shift(),m=x+c.shift(),A=w+c.shift(),e.U.P.curveTo(l,v,y,x,w,m,A)}else if(D=="o26")for(c.length%2&&(m+=c.shift());c.length>0;)v=m,y=A+c.shift(),m=x=v+c.shift(),A=(w=y+c.shift())+c.shift(),e.U.P.curveTo(l,v,y,x,w,m,A);else if(D=="o27")for(c.length%2&&(A+=c.shift());c.length>0;)y=A,x=(v=m+c.shift())+c.shift(),w=y+c.shift(),m=x+c.shift(),A=w,e.U.P.curveTo(l,v,y,x,w,m,A);else if(D=="o10"||D=="o29"){var j=D=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var re=c.pop(),ee=j.Subrs[re+j.Bias];s.x=m,s.y=A,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d,e.U._drawCFF(ee,s,o,a,l),m=s.x,A=s.y,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open}}else if(D=="o30"||D=="o31"){var ae=c.length,ce=(K=0,D=="o31");for(K+=ae-(N=-3&ae);K<N;)ce?(y=A,x=(v=m+c.shift())+c.shift(),A=(w=y+c.shift())+c.shift(),N-K==5?(m=x+c.shift(),K++):m=x,ce=!1):(v=m,y=A+c.shift(),x=v+c.shift(),w=y+c.shift(),m=x+c.shift(),N-K==5?(A=w+c.shift(),K++):A=w,ce=!0),e.U.P.curveTo(l,v,y,x,w,m,A),K+=4}else{if((D+"").charAt(0)=="o")throw console.debug("Unknown operation: "+D,r),D;c.push(D)}}}s.x=m,s.y=A,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Kpe(){return function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(D,N){for(var O=new n(31),Y=0;Y<31;++Y)O[Y]=N+=1<<D[Y-1];var q=new i(O[30]);for(Y=1;Y<30;++Y)for(var K=O[Y];K<O[Y+1];++K)q[K]=K-O[Y]<<5|Y;return[O,q]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],h=new n(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(D,N,O){for(var Y=D.length,q=0,K=new n(N);q<Y;++q)++K[D[q]-1];var z,U=new n(N);for(q=0;q<N;++q)U[q]=U[q-1]+K[q-1]<<1;if(O){z=new n(1<<N);var Q=15-N;for(q=0;q<Y;++q)if(D[q])for(var H=q<<4|D[q],V=N-D[q],J=U[D[q]-1]++<<V,j=J|(1<<V)-1;J<=j;++J)z[h[J]>>>Q]=H}else for(z=new n(Y),q=0;q<Y;++q)D[q]&&(z[q]=h[U[D[q]-1]++]>>>15-D[q]);return z},A=new e(288);for(d=0;d<144;++d)A[d]=8;for(d=144;d<256;++d)A[d]=9;for(d=256;d<280;++d)A[d]=7;for(d=280;d<288;++d)A[d]=8;var v=new e(32);for(d=0;d<32;++d)v[d]=5;var y=m(A,9,1),x=m(v,5,1),w=function(D){for(var N=D[0],O=1;O<D.length;++O)D[O]>N&&(N=D[O]);return N},E=function(D,N,O){var Y=N/8|0;return(D[Y]|D[Y+1]<<8)>>(7&N)&O},S=function(D,N){var O=N/8|0;return(D[O]|D[O+1]<<8|D[O+2]<<16)>>(7&N)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],b=function(D,N,O){var Y=new Error(N||M[D]);if(Y.code=D,Error.captureStackTrace&&Error.captureStackTrace(Y,b),!O)throw Y;return Y},B=function(D,N,O){var Y=D.length;if(!Y||O&&!O.l&&Y<5)return N||new e(0);var q=!N||O,K=!O||O.i;O||(O={}),N||(N=new e(3*Y));var z,U=function(ke){var tt=N.length;if(ke>tt){var se=new e(Math.max(2*tt,ke));se.set(N),N=se}},Q=O.f||0,H=O.p||0,V=O.b||0,J=O.l,j=O.d,re=O.m,ee=O.n,ae=8*Y;do{if(!J){O.f=Q=E(D,H,1);var ce=E(D,H+1,3);if(H+=3,!ce){var ge=D[(Ve=((z=H)/8|0)+(7&z&&1)+4)-4]|D[Ve-3]<<8,xe=Ve+ge;if(xe>Y){K&&b(0);break}q&&U(V+ge),N.set(D.subarray(Ve,xe),V),O.b=V+=ge,O.p=H=8*xe;continue}if(ce==1)J=y,j=x,re=9,ee=5;else if(ce==2){var Se=E(D,H,31)+257,oe=E(D,H+10,15)+4,he=Se+E(D,H+5,31)+1;H+=14;for(var Re=new e(he),Ie=new e(19),Te=0;Te<oe;++Te)Ie[o[Te]]=E(D,H+3*Te,7);H+=3*oe;var qe=w(Ie),ye=(1<<qe)-1,Oe=m(Ie,qe,1);for(Te=0;Te<he;){var Ve,Pe=Oe[E(D,H,ye)];if(H+=15&Pe,(Ve=Pe>>>4)<16)Re[Te++]=Ve;else{var X=0,W=0;for(Ve==16?(W=3+E(D,H,3),H+=2,X=Re[Te-1]):Ve==17?(W=3+E(D,H,7),H+=3):Ve==18&&(W=11+E(D,H,127),H+=7);W--;)Re[Te++]=X}}var ne=Re.subarray(0,Se),ue=Re.subarray(Se);re=w(ne),ee=w(ue),J=m(ne,re,1),j=m(ue,ee,1)}else b(1);if(H>ae){K&&b(0);break}}q&&U(V+131072);for(var ve=(1<<re)-1,Ge=(1<<ee)-1,be=H;;be=H){var De=(X=J[S(D,H)&ve])>>>4;if((H+=15&X)>ae){K&&b(0);break}if(X||b(2),De<256)N[V++]=De;else{if(De==256){be=H,J=null;break}var me=De-254;if(De>264){var je=r[Te=De-257];me=E(D,H,(1<<je)-1)+c[Te],H+=je}var ie=j[S(D,H)&Ge],_e=ie>>>4;if(ie||b(3),H+=15&ie,ue=f[_e],_e>3&&(je=s[_e],ue+=S(D,H)&(1<<je)-1,H+=je),H>ae){K&&b(0);break}q&&U(V+131072);for(var Ce=V+me;V<Ce;V+=4)N[V]=N[V-ue],N[V+1]=N[V+1-ue],N[V+2]=N[V+2-ue],N[V+3]=N[V+3-ue];V=Ce}}O.l=J,O.p=be,O.b=V,J&&(Q=1,O.m=re,O.d=j,O.n=ee)}while(!Q);return V==N.length?N:function(ke,tt,se){(tt==null||tt<0)&&(tt=0),(se==null||se>ke.length)&&(se=ke.length);var Je=new(ke instanceof n?n:ke instanceof i?i:e)(se-tt);return Je.set(ke.subarray(tt,se)),Je}(N,0,V)},T=new e(0),k=typeof TextDecoder<"u"&&new TextDecoder;try{k.decode(T,{stream:!0})}catch{}return t.convert_streams=function(D){var N=new DataView(D),O=0;function Y(){var Se=N.getUint16(O);return O+=2,Se}function q(){var Se=N.getUint32(O);return O+=4,Se}function K(Se){ge.setUint16(xe,Se),xe+=2}function z(Se){ge.setUint32(xe,Se),xe+=4}for(var U={signature:q(),flavor:q(),length:q(),numTables:Y(),reserved:Y(),totalSfntSize:q(),majorVersion:Y(),minorVersion:Y(),metaOffset:q(),metaLength:q(),metaOrigLength:q(),privOffset:q(),privLength:q()},Q=0;Math.pow(2,Q)<=U.numTables;)Q++;Q--;for(var H=16*Math.pow(2,Q),V=16*U.numTables-H,J=12,j=[],re=0;re<U.numTables;re++)j.push({tag:q(),offset:q(),compLength:q(),origLength:q(),origChecksum:q()}),J+=16;var ee,ae=new Uint8Array(12+16*j.length+j.reduce(function(Se,oe){return Se+oe.origLength+4},0)),ce=ae.buffer,ge=new DataView(ce),xe=0;return z(U.flavor),K(U.numTables),K(H),K(Q),K(V),j.forEach(function(Se){z(Se.tag),z(Se.origChecksum),z(J),z(Se.origLength),Se.outOffset=J,(J+=Se.origLength)%4!=0&&(J+=4-J%4)}),j.forEach(function(Se){var oe,he=D.slice(Se.offset,Se.offset+Se.compLength);if(Se.compLength!=Se.origLength){var Re=new Uint8Array(Se.origLength);oe=new Uint8Array(he,2),B(oe,Re)}else Re=new Uint8Array(he);ae.set(Re,Se.outOffset);var Ie=0;(J=Se.outOffset+Se.origLength)%4!=0&&(Ie=4-J%4),ae.set(new Uint8Array(Ie).buffer,Se.outOffset+Se.origLength),ee=J+Ie}),ce.slice(0,ee)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function $pe(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function f(w){if(!u){const E={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let S in i){let M=0;i[S].split(",").forEach(b=>{let[B,T]=b.split("+");B=parseInt(B,36),T=T?parseInt(T,36):0,u.set(M+=B,E[S]);for(let k=T;k--;)u.set(++M,E[S])})}}return u.get(w)||c}const h=1,d=2,p=3,m=4,A=[null,"isol","init","fina","medi"];function v(w){const E=new Uint8Array(w.length);let S=c,M=h,b=-1;for(let B=0;B<w.length;B++){const T=w.codePointAt(B);let k=f(T)|0,D=h;k&a||(S&(r|o|l)?k&(s|o|l)?(D=p,(M===h||M===p)&&E[b]++):k&(r|c)&&(M===d||M===m)&&E[b]--:S&(s|c)&&(M===d||M===m)&&E[b]--,M=E[B]=D,S=k,b=B,T>65535&&B++)}return E}function y(w,E){const S=[];for(let b=0;b<E.length;b++){const B=E.codePointAt(b);B>65535&&b++,S.push(t.U.codeToGlyph(w,B))}const M=w.GSUB;if(M){const{lookupList:b,featureList:B}=M;let T;const k=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,D=[];B.forEach(N=>{if(k.test(N.tag))for(let O=0;O<N.tab.length;O++){if(D[N.tab[O]])continue;D[N.tab[O]]=!0;const Y=b[N.tab[O]],q=/^(isol|init|fina|medi)$/.test(N.tag);q&&!T&&(T=v(E));for(let K=0;K<S.length;K++)(!T||!q||A[T[K]]===N.tag)&&t.U._applySubs(S,K,Y,b)}})}return S}function x(w){const E=Object.create(null),S={unitsPerEm:w.head.unitsPerEm,ascender:w.hhea.ascender,descender:w.hhea.descender,forEachGlyph(M,b,B,T){let k=0;const D=1/S.unitsPerEm*b,N=y(w,M);let O=0,Y=-1;return N.forEach((q,K)=>{if(q!==-1){let z=E[q];if(!z){const{cmds:U,crds:Q}=t.U.glyphToPath(w,q);let H="",V=0;for(let ae=0,ce=U.length;ae<ce;ae++){const ge=n[U[ae]];H+=U[ae];for(let xe=1;xe<=ge;xe++)H+=(xe>1?",":"")+Q[V++]}let J,j,re,ee;if(Q.length){J=j=1/0,re=ee=-1/0;for(let ae=0,ce=Q.length;ae<ce;ae+=2){let ge=Q[ae],xe=Q[ae+1];ge<J&&(J=ge),xe<j&&(j=xe),ge>re&&(re=ge),xe>ee&&(ee=xe)}}else J=re=j=ee=0;z=E[q]={index:q,advanceWidth:w.hmtx.aWidth[q],xMin:J,yMin:j,xMax:re,yMax:ee,path:H,pathCommandCount:U.length}}Y!==-1&&(k+=t.U.getPairAdjustment(w,Y,q)*D),T.call(null,z,k,O),z.advanceWidth&&(k+=z.advanceWidth*D),B&&(k+=B*b),Y=q}O+=M.codePointAt(O)>65535?2:1}),k}};return S}return function(E){const S=new Uint8Array(E,0,4),M=t._bin.readASCII(S,0,4);if(M==="wOFF")E=e(E);else if(M==="wOF2")throw new Error("woff2 fonts not supported");return x(t.parse(E)[0])}}const Zpe=n0({name:"Typr Font Parser",dependencies:[Jpe,Kpe,$pe],init(t,e,n){const i=t(),r=e();return n(i,r)}}),Kh={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},eme=new ze;function xh(){return(self.performance||Date).now()}const LL=Object.create(null);function r9(t,e){t=ime({},t);const n=xh();if(t.font=rme(t.font||Kh.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Kh.sdfGlyphSize,t.colorRanges!=null){let f={};for(let h in t.colorRanges)if(t.colorRanges.hasOwnProperty(h)){let d=t.colorRanges[h];typeof d!="number"&&(d=eme.set(d).getHex()),f[h]=d}t.colorRanges=f}Object.freeze(t);const{textureWidth:i,sdfExponent:r}=Kh,{sdfGlyphSize:s}=t,o=i/s*4;let a=LL[s];if(!a){const f=document.createElement("canvas");f.width=i,f.height=s*256/o,a=LL[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new bn(f,void 0,void 0,void 0,Wt,Wt),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,tme(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(t.font);u||a.glyphsByFont.set(t.font,u=new Map),ome(t).then(f=>{const{glyphIds:h,glyphPositions:d,fontSize:p,unitsPerEm:m,timings:A}=f,v=[],y=new Float32Array(h.length*4),x=p/m;let w=0,E=0;const S=xh();h.forEach((k,D)=>{let N=u.get(k);if(!N){const{path:K,pathBounds:z}=f.glyphData[k],U=Math.max(z[2]-z[0],z[3]-z[1])/s*(Kh.sdfMargin*s+.5),Q=a.glyphCount++,H=[z[0]-U,z[1]-U,z[2]+U,z[3]+U];u.set(k,N={path:K,atlasIndex:Q,sdfViewBox:H}),v.push(N)}const{sdfViewBox:O}=N,Y=d[E++],q=d[E++];y[w++]=Y+O[0]*x,y[w++]=q+O[1]*x,y[w++]=Y+O[2]*x,y[w++]=q+O[3]*x,h[D]=N.atlasIndex}),A.quads=(A.quads||0)+(xh()-S);const M=xh();A.sdf={};const b=c.height,B=Math.ceil(a.glyphCount/o),T=Math.pow(2,Math.ceil(Math.log2(B*s)));T>b&&(console.info(`Increasing SDF texture size ${b}->${T}`),Xpe(c,i,T),l.dispose()),fl.all(v.map(k=>s9(k,a,t.gpuAccelerateSDF).then(({timing:D})=>{A.sdf[k.atlasIndex]=D}))).then(()=>{v.length&&!a.contextLost&&(o9(a),l.needsUpdate=!0),A.sdfTotal=xh()-M,A.total=xh()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:s,sdfExponent:r,glyphBounds:y,glyphAtlasIndices:h,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),f.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[k,D,N,O]=f.blockBounds;return[N-k,O-D]}}))})}),fl.all([]).then(()=>{a.contextLost||Ype(c)})}function s9({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Kh,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),f=u%(a/i)*i,h=Math.floor(u/(a/i))*i,d=e%4;return jpe(i,i,t,n,c,l,r,f,h,d,o)}function tme(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const i=[];t.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(s9(s,t,!0))})}),fl.all(i).then(()=>{o9(t),t.sdfTexture.needsUpdate=!0})})}function nme({font:t,characters:e,sdfGlyphSize:n},i){let r=Array.isArray(e)?e.join(`
`):""+e;r9({font:t,sdfGlyphSize:n,text:r},i)}function ime(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let zA;function rme(t){return zA||(zA=typeof document>"u"?{}:document.createElement("a")),zA.href=t,zA.href}function o9(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),n.image={width:i,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const sme=n0({name:"Typesetter",dependencies:[Kh,Zpe,Wpe,Ope],init(t,e,n,i){const{defaultFontURL:r}=t;return n(e,i(),{defaultFontURL:r})}}),ome=n0({name:"Typesetter",dependencies:[sme,kpe],init(t,e){return function(n){const i=new e;return t.typeset(n,i.resolve),i}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),ame=(()=>{const t={};function e(l){let c=t[l];if(!c){const u=new I_(1,1,l,l),f=u.clone(),h=u.attributes,d=f.attributes,p=new ht,m=h.uv.count;for(let A=0;A<m;A++)d.position.array[A*3]*=-1,d.normal.array[A*3+2]*=-1;["position","normal","uv"].forEach(A=>{p.setAttribute(A,new et([...h[A].array,...d[A].array],h[A].itemSize))}),p.setIndex([...u.index.array,...f.index.array.map(A=>A+m)]),p.translate(.5,.5,0),c=t[l]=p}return c}const n="aTroikaGlyphBounds",i="aTroikaGlyphIndex",r="aTroikaGlyphColor";class s extends zy{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new zi,this.boundingBox=new Sn}computeBoundingSphere(){}computeBoundingBox(){}setSide(c){const u=this.getIndex().count;this.setDrawRange(c===Er?u/2:0,c===bi?u:u/2)}set detail(c){if(c!==this._detail){this._detail=c,(typeof c!="number"||c<1)&&(c=1);let u=e(c);["position","normal","uv"].forEach(f=>{this.attributes[f]=u.attributes[f].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(c){c!==this._curveRadius&&(this._curveRadius=c,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(c,u,f,h,d){o(this,n,c,4),o(this,i,u,1),o(this,r,d,3),this._blockBounds=f,this._chunkedBounds=h,a(this,u.length),this._updateBounds()}_updateBounds(){const c=this._blockBounds;if(c){const{curveRadius:u,boundingBox:f}=this;if(u){const{PI:h,floor:d,min:p,max:m,sin:A,cos:v}=Math,y=h/2,x=h*2,w=Math.abs(u),E=c[0]/w,S=c[2]/w,M=d((E+y)/x)!==d((S+y)/x)?-w:p(A(E)*w,A(S)*w),b=d((E-y)/x)!==d((S-y)/x)?w:m(A(E)*w,A(S)*w),B=d((E+h)/x)!==d((S+h)/x)?w*2:m(w-v(E)*w,w-v(S)*w);f.min.set(M,c[1],u<0?-B:0),f.max.set(b,c[3],u<0?0:B)}else f.min.set(c[0],c[1],0),f.max.set(c[2],c[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(c){let u=this.getAttribute(i).count,f=this._chunkedBounds;if(f)for(let h=f.length;h--;){u=f[h].end;let d=f[h].rect;if(d[1]<c.w&&d[3]>c.y&&d[0]<c.z&&d[2]>c.x)break}a(this,u)}}s.prototype.setAttribute||(s.prototype.setAttribute=function(l,c){return this.attributes[l]=c,this});function o(l,c,u,f){const h=l.getAttribute(c);u?h&&h.array.length===u.length?(h.array.set(u),h.needsUpdate=!0):(l.setAttribute(c,new xc(u,f)),delete l._maxInstanceCount,l.dispose()):h&&l.deleteAttribute(c)}function a(l,c){l[l.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=c}return s})(),lme=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,cme=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,ume=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,fme=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function hme(t){const e=xC(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ae},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Pt(0,0,0,0)},uTroikaClipRect:{value:new Pt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ae},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ze},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new yr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:lme,vertexTransform:cme,fragmentDefs:ume,fragmentColorTransform:fme,customRewriter({vertexShader:n,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(i9,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const dme=(()=>{const t=new wr({color:16777215,side:bi,transparent:!0}),e=8421504,n=new Ne,i=new F,r=new F,s=[],o=new F,a="+x+y";function l(v){return Array.isArray(v)?v[0]:v}let c=()=>{const v=new $e(new I_(1,1),t);return c=()=>v,v},u=()=>{const v=new $e(new I_(1,1,32,1),t);return u=()=>v,v};const f={type:"syncstart"},h={type:"synccomplete"},d=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],p=d.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class m extends $e{constructor(){const y=new ame;super(y,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=a,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(y){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(y):(this._isSyncing=!0,this.dispatchEvent(f),r9({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},x=>{this._isSyncing=!1,this._textRenderInfo=x,this.geometry.updateGlyphs(x.glyphBounds,x.glyphAtlasIndices,x.blockBounds,x.chunkedBounds,x.glyphColors);const w=this._queuedSyncs;w&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{w.forEach(E=>E&&E())})),this.dispatchEvent(h),y&&y()})))}onBeforeRender(y,x,w,E,S,M){this.sync(),S.isTroikaTextMaterial&&this._prepareForRender(S),S._hadOwnSide=S.hasOwnProperty("side"),this.geometry.setSide(S._actualSide=S.side),S.side=Qo}onAfterRender(y,x,w,E,S,M){S._hadOwnSide?S.side=S._actualSide:delete S.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let y=this._derivedMaterial;const x=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=t.clone());if((!y||y.baseMaterial!==x)&&(y=this._derivedMaterial=hme(x),x.addEventListener("dispose",function w(){x.removeEventListener("dispose",w),y.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let w=y._outlineMtl;return w||(w=y._outlineMtl=Object.create(y,{id:{value:y.id+.1}}),w.isTextOutlineMaterial=!0,w.depthWrite=!1,w.map=null,y.addEventListener("dispose",function E(){y.removeEventListener("dispose",E),w.dispose()})),[w,y]}else return y}set material(y){y&&y.isTroikaTextMaterial?(this._derivedMaterial=y,this._baseMaterial=y.baseMaterial):this._baseMaterial=y}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(y){this.geometry.detail=y}get curveRadius(){return this.geometry.curveRadius}set curveRadius(y){this.geometry.curveRadius=y}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(y){const x=y.isTextOutlineMaterial,w=y.uniforms,E=this.textRenderInfo;if(E){const{sdfTexture:b,blockBounds:B}=E;w.uTroikaSDFTexture.value=b,w.uTroikaSDFTextureSize.value.set(b.image.width,b.image.height),w.uTroikaSDFGlyphSize.value=E.sdfGlyphSize,w.uTroikaSDFExponent.value=E.sdfExponent,w.uTroikaTotalBounds.value.fromArray(B),w.uTroikaUseGlyphColors.value=!x&&!!E.glyphColors;let T=0,k=0,D=0,N,O,Y,q=0,K=0;if(x){let{outlineWidth:U,outlineOffsetX:Q,outlineOffsetY:H,outlineBlur:V,outlineOpacity:J}=this;T=this._parsePercent(U)||0,k=Math.max(0,this._parsePercent(V)||0),N=J,q=this._parsePercent(Q)||0,K=this._parsePercent(H)||0}else D=Math.max(0,this._parsePercent(this.strokeWidth)||0),D&&(Y=this.strokeColor,w.uTroikaStrokeColor.value.set(Y==null?e:Y),O=this.strokeOpacity,O==null&&(O=1)),N=this.fillOpacity;w.uTroikaDistanceOffset.value=T,w.uTroikaPositionOffset.value.set(q,K),w.uTroikaBlurRadius.value=k,w.uTroikaStrokeWidth.value=D,w.uTroikaStrokeOpacity.value=O,w.uTroikaFillOpacity.value=N==null?1:N,w.uTroikaCurveRadius.value=this.curveRadius||0;let z=this.clipRect;if(z&&Array.isArray(z)&&z.length===4)w.uTroikaClipRect.value.fromArray(z);else{const U=(this.fontSize||.1)*100;w.uTroikaClipRect.value.set(B[0]-U,B[1]-U,B[2]+U,B[3]+U)}this.geometry.applyClipRect(w.uTroikaClipRect.value)}w.uTroikaSDFDebug.value=!!this.debugSDF,y.polygonOffset=!!this.depthOffset,y.polygonOffsetFactor=y.polygonOffsetUnits=this.depthOffset||0;const S=x?this.outlineColor||0:this.color;if(S==null)delete y.color;else{const b=y.hasOwnProperty("color")?y.color:y.color=new ze;(S!==b._input||typeof S=="object")&&b.set(b._input=S)}let M=this.orientation||a;if(M!==y._orientation){let b=w.uTroikaOrient.value;M=M.replace(/[^-+xyz]/g,"");let B=M!==a&&M.match(/^([-+])([xyz])([-+])([xyz])$/);if(B){let[,T,k,D,N]=B;i.set(0,0,0)[k]=T==="-"?1:-1,r.set(0,0,0)[N]=D==="-"?-1:1,n.lookAt(o,i.cross(r),r),b.setFromMatrix4(n)}else b.identity();y._orientation=M}}_parsePercent(y){if(typeof y=="string"){let x=y.match(/^(-?[\d.]+)%$/),w=x?parseFloat(x[1]):NaN;y=(isNaN(w)?0:w/100)*this.fontSize}return y}localPositionToTextCoords(y,x=new Ae){x.copy(y);const w=this.curveRadius;return w&&(x.x=Math.atan2(y.x,Math.abs(w)-Math.abs(y.z))*Math.abs(w)),x}worldPositionToTextCoords(y,x=new Ae){return i.copy(y),this.localPositionToTextCoords(this.worldToLocal(i),x)}raycast(y,x){const{textRenderInfo:w,curveRadius:E}=this;if(w){const S=w.blockBounds,M=E?u():c(),b=M.geometry,{position:B,uv:T}=b.attributes;for(let k=0;k<T.count;k++){let D=S[0]+T.getX(k)*(S[2]-S[0]);const N=S[1]+T.getY(k)*(S[3]-S[1]);let O=0;E&&(O=E-Math.cos(D/E)*E,D=Math.sin(D/E)*E),B.setXYZ(k,D,N,O)}b.boundingSphere=this.geometry.boundingSphere,b.boundingBox=this.geometry.boundingBox,M.matrixWorld=this.matrixWorld,M.material.side=this.material.side,s.length=0,M.raycast(y,s);for(let k=0;k<s.length;k++)s[k].object=this,x.push(s[k])}}copy(y){const x=this.geometry;return super.copy(y),this.geometry=x,p.forEach(w=>{this[w]=y[w]}),this}clone(){return new this.constructor().copy(this)}}d.forEach(v=>{const y="_private_"+v;Object.defineProperty(m.prototype,v,{get(){return this[y]},set(x){x!==this[y]&&(this[y]=x,this._needsSync=!0)}})});let A=!1;return Object.defineProperty(m.prototype,"anchor",{get(){return this._deprecated_anchor},set(v){this._deprecated_anchor=v,A||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),A=!0),Array.isArray(v)?(this.anchorX=`${(+v[0]||0)*100}%`,this.anchorY=`${(+v[1]||0)*100}%`):this.anchorX=this.anchorY=0}}),m})(),pme=R.exports.forwardRef(({anchorX:t="center",anchorY:e="middle",font:n,children:i,characters:r,onSync:s,...o},a)=>{const l=Me(({invalidate:h})=>h),[c]=R.exports.useState(()=>new dme),[u,f]=R.exports.useMemo(()=>{const h=[];let d="";return R.exports.Children.forEach(i,p=>{typeof p=="string"||typeof p=="number"?d+=p:h.push(p)}),[h,d]},[i]);return Sf(()=>new Promise(h=>nme({font:n,characters:r},h)),["troika-text",n,r]),R.exports.useLayoutEffect(()=>void c.sync(()=>{l(),s&&s(c)})),R.exports.useEffect(()=>()=>c.dispose(),[c]),$("primitive",{object:c,ref:a,font:n,text:f,anchorX:t,anchorY:e,...o,children:u})}),mme=["string","number"],gme=t=>{let e="";const n=[];return R.exports.Children.forEach(t,i=>{mme.includes(typeof i)?e+=i+"":n.push(i)}),[e,...n]},Ame=R.exports.forwardRef(({font:t,letterSpacing:e=0,lineHeight:n=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,children:f,...h},d)=>{R.exports.useMemo(()=>Vr({RenamedTextGeometry:T0e}),[]);const p=Sf(async()=>{let x=typeof t=="string"?await(await fetch(t)).json():t;return new $0e().parse(x)},[t]),m=R.exports.useMemo(()=>({font:p,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:n}),[p,i,r,s,o,a,l,u,e,n]),[A,...v]=R.exports.useMemo(()=>gme(f),[f]),y=R.exports.useMemo(()=>[A,m],[A,m]);return it("mesh",{...h,ref:d,children:[$("renamedTextGeometry",{args:y}),v]})}),vme=()=>{try{var t=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&t.getContext("webgl2"))}catch{return!1}},_me=R.exports.forwardRef(({children:t,multisamping:e=8,renderIndex:n=1,disableRender:i,disableGamma:r,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:c,type:u,...f},h)=>{R.exports.useMemo(()=>Vr({EffectComposer:Kde,RenderPass:$de,ShaderPass:dC}),[]);const d=R.exports.useRef(),{scene:p,camera:m,gl:A,size:v,viewport:y}=Me(),[x]=R.exports.useState(()=>{const E=new kn(v.width,v.height,{type:u||pi,format:Fn,encoding:c||A.outputEncoding,depthBuffer:o,stencilBuffer:a,anisotropy:l});return E.samples=e,E});R.exports.useEffect(()=>{var E,S;(E=d.current)==null||E.setSize(v.width,v.height),(S=d.current)==null||S.setPixelRatio(y.dpr)},[A,v,y.dpr]),Ct(()=>{var E;i||(E=d.current)==null||E.render()},n);const w=[];return s||w.push($("renderPass",{attach:`passes-${w.length}`,args:[p,m]},"renderpass")),r||w.push($("shaderPass",{attach:`passes-${w.length}`,args:[B0e]},"gammapass")),R.exports.Children.forEach(t,E=>{E&&w.push(R.exports.cloneElement(E,{key:w.length,attach:`passes-${w.length}`}))}),$("effectComposer",{ref:jn([h,d]),args:[A,x],...f,children:w})});function yme({stops:t,colors:e,size:n=1024,...i}){const r=Me(o=>o.gl),s=R.exports.useMemo(()=>{const o=document.createElement("canvas"),a=o.getContext("2d");o.width=16,o.height=n;const l=a.createLinearGradient(0,0,0,n);let c=t.length;for(;c--;)l.addColorStop(t[c],e[c]);a.fillStyle=l,a.fillRect(0,0,16,n);const u=new bn(o);return u.needsUpdate=!0,u},[t]);return R.exports.useEffect(()=>()=>void s.dispose(),[s]),$("primitive",{object:s,attach:"map",encoding:r.outputEncoding,...i})}function i0(t,e,n,i){const r=class extends $n{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[c,u])=>{const f=Mc.clone({[c]:{value:u}});return{...l,...f}},{}),vertexShader:e,fragmentShader:n,...o}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),i&&i(this)}};return r.key=ut.generateUUID(),r}const zm=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function If(t,e){const n=Me(r=>r.gl),i=Mi(Jd,zm(t)?Object.values(t):t);if(R.exports.useLayoutEffect(()=>{e==null||e(i)},[e]),R.exports.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(n.initTexture)},[n,i]),zm(t)){const r=Object.keys(t),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}If.preload=t=>Mi.preload(Jd,t);If.clear=t=>Mi.clear(Jd,t);const xme=i0({color:new ze("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),a9=R.exports.forwardRef(({children:t,color:e,segments:n=1,scale:i=1,zoom:r=1,grayscale:s=0,opacity:o=1,texture:a,toneMapped:l,transparent:c,...u},f)=>{Vr({ImageMaterial:xme});const h=Me(m=>m.gl),d=Array.isArray(i)?[i[0],i[1]]:[i,i],p=[a.image.width,a.image.height];return it("mesh",{ref:f,scale:Array.isArray(i)?[...i,1]:i,...u,children:[$("planeGeometry",{args:[1,1,n,n]}),$("imageMaterial",{color:e,map:a,"map-encoding":h.outputEncoding,zoom:r,grayscale:s,opacity:o,scale:d,imageBounds:p,toneMapped:l,transparent:c}),t]})}),wme=R.exports.forwardRef(({url:t,...e},n)=>{const i=If(t);return $(a9,{...e,texture:i,ref:n})}),Eme=R.exports.forwardRef(({url:t,...e},n)=>$(a9,{...e,ref:n})),bme=R.exports.forwardRef((t,e)=>{if(t.url)return $(wme,{...t,ref:e});if(t.texture)return $(Eme,{...t,ref:e});throw new Error("<Image /> requires a url or texture")});function Sme({userData:t,children:e,geometry:n,threshold:i=15,color:r="black",...s}){const o=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{const a=o.current.parent;if(a){const l=n||a.geometry;(l!==o.current.userData.currentGeom||i!==o.current.userData.currentThreshold)&&(o.current.userData.currentGeom=l,o.current.userData.currentThreshold=i,o.current.geometry=new P3(l,i))}}),$("lineSegments",{ref:o,raycast:()=>null,...s,children:e||$("lineBasicMaterial",{color:r})})}function Cme(t,e){const n=new Ne,i=new Ho,r=new zi,s=new F,o=this.geometry;if(r.copy(o.boundingSphere),r.applyMatrix4(this.matrixWorld),t.ray.intersectSphere(r,s)===!1)return;n.copy(this.matrixWorld).invert(),i.copy(t.ray).applyMatrix4(n);const a=new F,l=new F,c=new F,u=this instanceof fo?2:1,f=o.index,h=o.attributes;if(f!==null){const d=f.array,p=h.position.array,m=h.width.array;for(let A=0,v=d.length-1;A<v;A+=u){const y=d[A],x=d[A+1];a.fromArray(p,3*y),l.fromArray(p,3*x);const w=m[Math.floor(A/3)]!=null?m[Math.floor(A/3)]:1,E=t.params.Line.threshold+this.material.lineWidth*w/2,S=E*E;if(i.distanceSqToSegment(a,l,s,c)>S)continue;s.applyMatrix4(this.matrixWorld);const M=t.ray.origin.distanceTo(s);M<t.near||M>t.far||(e.push({distance:M,point:c.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this}),A=v)}}}function LE(t,e,n,i,r){let s;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,n.set)n.set(t,i);else for(s=0;s<t.length;s++)n[s+i]=t[s];return n}class l9 extends ht{constructor(){super(),this.type="MeshLine",this.isMeshLine=!0,this.positions=[],this.raycast=Cme,this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this._points=[],this._geom=null,this.widthCallback=null,this.matrixWorld=new Ne,Object.defineProperties(this,{geometry:{enumerable:!0,get(){return this}},geom:{enumerable:!0,get(){return this._geom},set(e){this.setGeometry(e,this.widthCallback)}},points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setGeometry(e,n){this._geometry=e,e instanceof ht?this.setPoints(e.getAttribute("position").array,n):this.setPoints(e,n)}setPoints(e,n){if(e instanceof Float32Array||e instanceof Array){if(this._points=e,this.widthCallback=n,this.positions=[],this.counters=[],e.length&&e[0]instanceof F)for(var i=0;i<e.length;i++){const s=e[i];var r=i/e.length;this.positions.push(s.x,s.y,s.z),this.positions.push(s.x,s.y,s.z),this.counters.push(r),this.counters.push(r)}else for(i=0;i<e.length;i+=3)r=i/e.length,this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r);this.process()}else console.error("ERROR: The BufferArray of points is not instancied correctly.")}compareV3(e,n){const i=6*e,r=6*n;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const n=6*e;return[this.positions[n],this.positions[n+1],this.positions[n+2]]}process(){const e=this.positions.length/6;let n,i;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],i=this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),n=this.widthCallback?this.widthCallback(r/(e-1)):1,this.width.push(n),this.width.push(n),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=2*r;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}i=this.compareV3(e-1,0)?this.copyV3(1):this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new bt(new Float32Array(this.positions),3),previous:new bt(new Float32Array(this.previous),3),next:new bt(new Float32Array(this.next),3),side:new bt(new Float32Array(this.side),1),width:new bt(new Float32Array(this.width),1),uv:new bt(new Float32Array(this.uvs),2),index:new bt(new Uint16Array(this.indices_array),1),counters:new bt(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:n,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;LE(r,0,s,0,a),LE(r,6,r,0,a-6),r[a-6]=e,r[a-5]=n,r[a-4]=i,r[a-3]=e,r[a-2]=n,r[a-1]=i,LE(r,6,o,0,a-6),o[a-6]=e,o[a-5]=n,o[a-4]=i,o[a-3]=e,o[a-2]=n,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}vt.meshline_vert=["","#include <common>","",vt.logdepthbuf_pars_vertex,vt.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","	 vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float w = lineWidth * width;","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec4 normal = vec4( -dir.y, dir.x, 0., 1. );","    normal.xy *= .5 * w;","    normal *= projectionMatrix;","    if( sizeAttenuation == 0. ) {","        normal.xy *= finalPosition.w;","        normal.xy /= ( vec4( resolution, 0., 1. ) * projectionMatrix ).xy;","    }","","    finalPosition.xy += normal.xy * side;","","    gl_Position = finalPosition;","",vt.logdepthbuf_vertex,vt.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",vt.fog_vertex,"}"].join(`
`),vt.meshline_frag=["",vt.fog_pars_fragment,vt.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",vt.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",vt.fog_fragment,"}"].join(`
`);class c9 extends $n{constructor(e){super({uniforms:Object.assign({},Ke.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new ze(16777215)},opacity:{value:1},resolution:{value:new Ae(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new Ae(1,1)}}),vertexShader:vt.meshline_vert,fragmentShader:vt.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(n){this.uniforms.lineWidth.value=n}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(n){this.uniforms.map.value=n}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(n){this.uniforms.useMap.value=n}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(n){this.uniforms.alphaMap.value=n}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(n){this.uniforms.useAlphaMap.value=n}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(n){this.uniforms.color.value=n}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(n){this.uniforms.resolution.value.copy(n)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(n){this.uniforms.sizeAttenuation.value=n}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(n){this.uniforms.dashArray.value=n,this.useDash=n!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(n){this.uniforms.dashOffset.value=n}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(n){this.uniforms.dashRatio.value=n}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(n){this.uniforms.useDash.value=n}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(n){this.uniforms.visibility.value=n}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(n){this.uniforms.alphaTest.value=n}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(n){this.uniforms.repeat.value.copy(n)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray.copy(e.dashArray),this.dashOffset.copy(e.dashOffset),this.dashRatio.copy(e.dashRatio),this.useDash=e.useDash,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const u9={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},Mme=(t,e=1)=>(t.set(t.subarray(e)),t.fill(-1/0,-e),t);function f9(t,e){const{length:n,local:i,decay:r,interval:s,stride:o}={...u9,...e},a=R.exports.useRef(),[l]=R.exports.useState(()=>new F);R.exports.useLayoutEffect(()=>{t&&(a.current=Float32Array.from({length:n*10*3},(f,h)=>t.position.getComponent(h%3)))},[n,t]);const c=R.exports.useRef(new F),u=R.exports.useRef(0);return Ct(()=>{if(!!t&&!!a.current){if(u.current===0){let f;i?f=t.position:(t.getWorldPosition(l),f=l);const h=1*r;for(let d=0;d<h;d++)f.distanceTo(c.current)<o||(Mme(a.current,3),a.current.set(f.toArray(),a.current.length-3));c.current.copy(f)}u.current++,u.current=u.current%s}}),a}const Ime=R.exports.forwardRef((t,e)=>{const{children:n}=t,{width:i,length:r,decay:s,local:o,stride:a,interval:l}={...u9,...t},{color:c="hotpink",attenuation:u,target:f}=t,h=Me(x=>x.size),d=R.exports.useRef(null),[p,m]=R.exports.useState(null),A=f9(p,{length:r,decay:s,local:o,stride:a,interval:l});R.exports.useEffect(()=>{const x=(f==null?void 0:f.current)||d.current.children.find(w=>w instanceof It);x&&m(x)},[A,f]);const v=R.exports.useMemo(()=>new l9,[]),y=R.exports.useMemo(()=>{var x;const w=new c9({lineWidth:.1*i,color:c,sizeAttenuation:1,resolution:new Ae(h.width,h.height)});let E;if(n)if(Array.isArray(n))E=n.find(S=>{const M=S;return typeof M.type=="string"&&M.type==="meshLineMaterial"});else{const S=n;typeof S.type=="string"&&S.type==="meshLineMaterial"&&(E=S)}return typeof((x=E)==null?void 0:x.props)=="object"&&w.setValues(E.props),w},[i,c,h,n]);return R.exports.useEffect(()=>{y.uniforms.resolution.value.set(h.width,h.height)},[h]),Ct(()=>{!A.current||v.setPoints(A.current,u)}),it("group",{children:[$("mesh",{ref:e,geometry:v,material:y}),$("group",{ref:d,children:n})]})});function h9(t,e=16,n,i,r){const[s,o]=R.exports.useState(()=>{const a=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new xc(Float32Array.from(a),16)});return R.exports.useEffect(()=>{if(typeof t.current>"u")return;const a=new Ude(t.current);i&&a.setWeightAttribute(i),a.build();const l=new F,c=new F,u=new ze,f=new It;t.current.updateMatrixWorld(!0);for(let h=0;h<e;h++)a.sample(l,c,u),typeof n=="function"?n({dummy:f,sampledMesh:t.current,position:l,normal:c,color:u},h):f.position.copy(l),f.updateMatrix(),r!=null&&r.current&&r.current.setMatrixAt(h,f.matrix),f.matrix.toArray(s.array,h*16);r!=null&&r.current&&(r.current.instanceMatrix.needsUpdate=!0),s.needsUpdate=!0,o(s.clone())},[t,r,i,e,n]),s}function Tme({children:t,weight:e,transform:n,instances:i,mesh:r,count:s=16,...o}){const a=R.exports.useRef(null),l=R.exports.useRef(null),c=R.exports.useRef(null);return R.exports.useEffect(()=>{var u,f;l.current=(u=i==null?void 0:i.current)!==null&&u!==void 0?u:a.current.children.find(h=>h.hasOwnProperty("instanceMatrix")),c.current=(f=r==null?void 0:r.current)!==null&&f!==void 0?f:a.current.children.find(h=>h.type==="Mesh")},[t,r==null?void 0:r.current,i==null?void 0:i.current]),h9(c,s,n,e,l),$("group",{ref:a,...o,children:t})}const Bme=({compute:t,name:e,...n})=>{const[i]=R.exports.useState(()=>new bt(new Float32Array(0),1)),r=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{if(r.current){var s;const o=(s=r.current.parent)!==null&&s!==void 0?s:r.current.__r3f.parent,a=t(o);r.current.copy(a)}},[t]),$("primitive",{ref:r,object:i,attach:`attributes-${e}`,...n})};var Rme=1/0,Pme=9007199254740991,Dme="[object Arguments]",Lme="[object Function]",Fme="[object GeneratorFunction]",kme="[object Symbol]",Ome=typeof He=="object"&&He&&He.Object===Object&&He,Ume=typeof self=="object"&&self&&self.Object===Object&&self,Nme=Ome||Ume||Function("return this")();function zme(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Gme(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Qme(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var LI=Object.prototype,Hme=LI.hasOwnProperty,FI=LI.toString,FL=Nme.Symbol,Vme=LI.propertyIsEnumerable,kL=FL?FL.isConcatSpreadable:void 0,OL=Math.max;function d9(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=Yme),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?d9(a,e-1,n,i,r):Qme(r,a):i||(r[r.length]=a)}return r}function Wme(t,e){return t=Object(t),jme(t,e,function(n,i){return i in t})}function jme(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=t[o];n(a,o)&&(s[o]=a)}return s}function qme(t,e){return e=OL(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,r=OL(n.length-e,0),s=Array(r);++i<r;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=s,zme(t,this,o)}}function Yme(t){return Kme(t)||Jme(t)||!!(kL&&t&&t[kL])}function Xme(t){if(typeof t=="string"||ige(t))return t;var e=t+"";return e=="0"&&1/t==-Rme?"-0":e}function Jme(t){return Zme(t)&&Hme.call(t,"callee")&&(!Vme.call(t,"callee")||FI.call(t)==Dme)}var Kme=Array.isArray;function $me(t){return t!=null&&tge(t.length)&&!ege(t)}function Zme(t){return p9(t)&&$me(t)}function ege(t){var e=nge(t)?FI.call(t):"";return e==Lme||e==Fme}function tge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Pme}function nge(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function p9(t){return!!t&&typeof t=="object"}function ige(t){return typeof t=="symbol"||p9(t)&&FI.call(t)==kme}var rge=qme(function(t,e){return t==null?{}:Wme(t,Gme(d9(e,1),Xme))}),m9=rge;function UL(t,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData"],deep:n,inject:i,castShadow:r,receiveShadow:s}){let o=m9(t,e);return n&&(o.geometry&&n!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&n!=="geometriesOnly"&&(o.material=o.material.clone())),i&&(typeof i=="function"?o={...o,children:i(t)}:R.exports.isValidElement(i)?o={...o,children:i}:o={...o,...i}),t.type==="Mesh"&&(r&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const wC=R.exports.forwardRef(({object:t,children:e,deep:n,castShadow:i,receiveShadow:r,inject:s,keys:o,...a},l)=>{const c={keys:o,deep:n,inject:s,castShadow:i,receiveShadow:r};if(Array.isArray(t))return it("group",{...a,ref:l,children:[t.map(d=>$(wC,{object:d,...c},d.uuid)),e]});const{children:u,...f}=UL(t,c),h=t.type[0].toLowerCase()+t.type.slice(1);return it(h,{...f,...a,ref:l,children:[(t==null?void 0:t.children).map(d=>{let p={},m=d.type[0].toLowerCase()+d.type.slice(1);return m==="group"||m==="object3D"?(m=wC,p={object:d,...c}):p=UL(d,c),$(m,{...p},d.uuid)}),e,u]})}),kI=R.exports.createContext(null),sge=R.exports.forwardRef(({resolution:t=28,maxPolyCount:e=1e4,enableUvs:n=!1,enableColors:i=!1,children:r,...s},o)=>{const a=R.exports.useRef(null),l=R.exports.useMemo(()=>new Mz(t,null,n,i,e),[t,e,n,i]),c=R.exports.useMemo(()=>({getParent:()=>a}),[]);return Ct(()=>{l.reset()},-1),R.exports.createElement(R.exports.Fragment,null,R.exports.createElement("primitive",cf({object:l,ref:jn([a,o])},s),R.exports.createElement(kI.Provider,{value:c},r)))}),oge=R.exports.forwardRef(({strength:t=.5,subtract:e=12,color:n,...i},r)=>{const{getParent:s}=R.exports.useContext(kI),o=R.exports.useMemo(()=>s(),[s]),a=R.exports.useRef(),l=new F;return Ct(c=>{!o.current||!a.current||(a.current.getWorldPosition(l),o.current.addBall(.5+l.x*.5,.5+l.y*.5,.5+l.z*.5,t,e,n))}),$("group",{ref:jn([r,a]),...i})}),age=R.exports.forwardRef(({planeType:t="x",strength:e=.5,subtract:n=12,...i},r)=>{const{getParent:s}=R.exports.useContext(kI),o=R.exports.useMemo(()=>s(),[s]),a=R.exports.useRef(),l=R.exports.useMemo(()=>t==="x"?"addPlaneX":t==="y"?"addPlaneY":"addPlaneZ",[t]);return Ct(()=>{!o.current||!a.current||o.current[l](e,n)}),$("group",{ref:jn([r,a]),...i})});function lge(t){return Array.isArray(t)}function FE(t=[0,0,0]){return lge(t)?t:t instanceof F||t instanceof xr?[t.x,t.y,t.z]:[t,t,t]}function cge({debug:t,mesh:e,children:n,position:i,rotation:r,scale:s,...o}){const a=R.exports.useRef(null),l=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{const c=(e==null?void 0:e.current)||a.current.parent,u=a.current;if(!(c instanceof $e))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const f={position:new F,rotation:new xr,scale:new F(1,1,1)};if(c){Ss(f,{position:i,scale:s});const h=c.matrixWorld.clone();if(c.matrixWorld.identity(),!r||typeof r=="number"){const d=new It;d.position.copy(f.position),d.lookAt(c.position),typeof r=="number"&&d.rotateZ(r),Ss(f,{rotation:d.rotation})}else Ss(f,{rotation:r});return u.geometry=new I0e(c,f.position,f.rotation,f.scale),l.current&&Ss(l.current,f),c.matrixWorld=h,()=>{u.geometry.dispose()}}},[e,...FE(i),...FE(s),...FE(r)]),it("mesh",{ref:a,children:[n||$("meshStandardMaterial",{transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10,...o}),t&&it("mesh",{ref:l,children:[$("boxGeometry",{}),$("meshNormalMaterial",{wireframe:!0}),$("axesHelper",{})]})]})}const g9=R.exports.forwardRef(({makeDefault:t,...e},n)=>{const i=Me(({set:a})=>a),r=Me(({camera:a})=>a),s=Me(({size:a})=>a),o=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{e.manual||o.current.updateProjectionMatrix()},[s,e]),R.exports.useLayoutEffect(()=>{o.current.updateProjectionMatrix()}),R.exports.useLayoutEffect(()=>{if(t){const a=r;return i(()=>({camera:o.current})),()=>i(()=>({camera:a}))}},[o,t,i]),$("orthographicCamera",{left:s.width/-2,right:s.width/2,top:s.height/2,bottom:s.height/-2,ref:jn([o,n]),...e})}),uge=R.exports.forwardRef(({makeDefault:t,...e},n)=>{const i=Me(({set:a})=>a),r=Me(({camera:a})=>a),s=Me(({size:a})=>a),o=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{e.manual||(o.current.aspect=s.width/s.height)},[s,e]),R.exports.useLayoutEffect(()=>{o.current.updateProjectionMatrix()}),R.exports.useLayoutEffect(()=>{if(t){const a=r;return i(()=>({camera:o.current})),()=>i(()=>({camera:a}))}},[o,t,i]),$("perspectiveCamera",{ref:jn([o,n]),...e})});function fge({children:t,fog:e,frames:n=1/0,resolution:i=256,near:r=.1,far:s=1e3,envMap:o,...a}){const l=R.exports.useRef(),[c,u]=R.exports.useState(null),f=Me(({scene:v})=>v),h=Me(({gl:v})=>v),d=R.exports.useMemo(()=>{const v=new tg(i);return v.texture.encoding=h.outputEncoding,v.texture.type=pi,v},[i]);let p=0,m,A;return Ct(()=>{c&&l.current&&(n===1/0||p<n)&&(l.current.visible=!1,m=f.fog,A=f.background,f.background=o||A,f.fog=e||m,c.update(h,f),f.fog=m,f.background=A,l.current.visible=!0,p++)}),it("group",{...a,children:[$("cubeCamera",{ref:u,args:[r,s,d]}),$("group",{ref:l,children:t(d.texture)})]})}const hge=R.exports.forwardRef((t,e)=>{const{camera:n,onChange:i,makeDefault:r,...s}=t,o=Me(h=>h.camera),a=Me(h=>h.invalidate),l=Me(h=>h.get),c=Me(h=>h.set),u=n||o,[f]=R.exports.useState(()=>new Vde(u));return R.exports.useEffect(()=>{const h=d=>{a(),i&&i(d)};return f==null||f.addEventListener==null||f.addEventListener("change",h),()=>f==null||f.removeEventListener==null?void 0:f.removeEventListener("change",h)},[i,f,a]),Ct(()=>f==null?void 0:f.update(),-1),R.exports.useEffect(()=>{const h=f;return h==null||h.connect(),()=>h==null?void 0:h.dispose()},[f]),R.exports.useEffect(()=>{if(r){const h=l().controls;return c({controls:f}),()=>c({controls:h})}},[r,f]),f?$("primitive",{ref:e,object:f,...s}):null}),dge=R.exports.forwardRef(({domElement:t,...e},n)=>{const{onChange:i,makeDefault:r,...s}=e,o=Me(p=>p.invalidate),a=Me(p=>p.camera),l=Me(p=>p.gl),c=Me(p=>p.events),u=Me(p=>p.get),f=Me(p=>p.set),h=t||c.connected||l.domElement,d=R.exports.useMemo(()=>new Yde(a),[a]);return R.exports.useEffect(()=>(d.connect(h),()=>void d.dispose()),[h,d,o]),R.exports.useEffect(()=>{const p=m=>{o(),i&&i(m)};return d.addEventListener==null||d.addEventListener("change",p),()=>d.removeEventListener==null?void 0:d.removeEventListener("change",p)},[i,o]),R.exports.useEffect(()=>{if(r){const p=u().controls;return f({controls:d}),()=>f({controls:p})}},[r,d]),Ct((p,m)=>d.update(m)),$("primitive",{ref:n,object:d,args:[a,h],...s})}),pge=R.exports.forwardRef((t={enableDamping:!0},e)=>{const{domElement:n,camera:i,makeDefault:r,onChange:s,onStart:o,onEnd:a,...l}=t,c=Me(y=>y.invalidate),u=Me(y=>y.camera),f=Me(y=>y.gl),h=Me(y=>y.events),d=Me(y=>y.set),p=Me(y=>y.get),m=n||h.connected||f.domElement,A=i||u,v=R.exports.useMemo(()=>new jde(A),[A]);return R.exports.useEffect(()=>{v.connect(m);const y=x=>{c(),s&&s(x)};return v.addEventListener("change",y),o&&v.addEventListener("start",o),a&&v.addEventListener("end",a),()=>{v.dispose(),v.removeEventListener("change",y),o&&v.removeEventListener("start",o),a&&v.removeEventListener("end",a)}},[s,o,a,v,c,m]),R.exports.useEffect(()=>{if(r){const y=p().controls;return d({controls:v}),()=>d({controls:y})}},[r,v]),Ct(()=>v.update(),-1),$("primitive",{ref:e,object:v,enableDamping:!0,...l})}),mge=R.exports.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const u=Me(w=>w.invalidate),f=Me(w=>w.camera),h=Me(w=>w.gl),d=Me(w=>w.events),p=Me(w=>w.set),m=Me(w=>w.get),A=Me(w=>w.performance),v=e||f,y=i||d.connected||h.domElement,x=R.exports.useMemo(()=>new Iz(v),[v]);return Ct(()=>{x.enabled&&x.update()},-1),R.exports.useEffect(()=>(x.connect(y),()=>void x.dispose()),[y,n,x,u]),R.exports.useEffect(()=>{const w=E=>{u(),n&&A.regress(),s&&s(E)};return x.addEventListener("change",w),o&&x.addEventListener("start",o),a&&x.addEventListener("end",a),()=>{o&&x.removeEventListener("start",o),a&&x.removeEventListener("end",a),x.removeEventListener("change",w)}},[s,o,a,x,u]),R.exports.useEffect(()=>{if(t){const w=m().controls;return p({controls:x}),()=>p({controls:w})}},[t,x]),$("primitive",{ref:c,object:x,enableDamping:r,...l})}),gge=R.exports.forwardRef(({makeDefault:t,camera:e,domElement:n,regress:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const{invalidate:c,camera:u,gl:f,events:h,set:d,get:p,performance:m,viewport:A}=Me(),v=e||u,y=n||h.connected||f.domElement,x=R.exports.useMemo(()=>new Wde(v),[v]);return Ct(()=>{x.enabled&&x.update()},-1),R.exports.useEffect(()=>(x.connect(y),()=>void x.dispose()),[y,i,x,c]),R.exports.useEffect(()=>{const w=E=>{c(),i&&m.regress(),r&&r(E)};return x.addEventListener("change",w),s&&x.addEventListener("start",s),o&&x.addEventListener("end",o),()=>{s&&x.removeEventListener("start",s),o&&x.removeEventListener("end",o),x.removeEventListener("change",w)}},[r,s,o,x,c]),R.exports.useEffect(()=>{x.handleResize()},[A]),R.exports.useEffect(()=>{if(t){const w=p().controls;return d({controls:x}),()=>d({controls:w})}},[t,x]),$("primitive",{ref:l,object:x,...a})}),Age=R.exports.forwardRef(({camera:t,makeDefault:e,regress:n,domElement:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const c=Me(x=>x.invalidate),u=Me(x=>x.camera),f=Me(x=>x.gl),h=Me(x=>x.events),d=Me(x=>x.set),p=Me(x=>x.get),m=Me(x=>x.performance),A=t||u,v=i||h.connected||f.domElement,y=R.exports.useMemo(()=>new qde(A),[A]);return Ct(()=>{y.enabled&&y.update()},-1),R.exports.useEffect(()=>(y.connect(v),()=>void y.dispose()),[v,n,y,c]),R.exports.useEffect(()=>{const x=w=>{c(),n&&m.regress(),r&&r(w)};return y.addEventListener("change",x),s&&y.addEventListener("start",s),o&&y.addEventListener("end",o),()=>{y.removeEventListener("change",x),s&&y.removeEventListener("start",s),o&&y.removeEventListener("end",o)}},[r,s,o]),R.exports.useEffect(()=>{if(e){const x=p().controls;return d({controls:y}),()=>d({controls:x})}},[e,y]),$("primitive",{ref:l,object:y,...a})});var vge=200,OI="__lodash_hash_undefined__",_ge=1/0,A9=9007199254740991,yge="[object Arguments]",xge="[object Function]",wge="[object GeneratorFunction]",Ege="[object Symbol]",bge=/[\\^$.*+?()[\]{}|]/g,Sge=/^\[object .+?Constructor\]$/,Cge=/^(?:0|[1-9]\d*)$/,Mge=typeof He=="object"&&He&&He.Object===Object&&He,Ige=typeof self=="object"&&self&&self.Object===Object&&self,UI=Mge||Ige||Function("return this")();function Tge(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Bge(t,e){var n=t?t.length:0;return!!n&&Dge(t,e,0)>-1}function Rge(t,e,n){for(var i=-1,r=t?t.length:0;++i<r;)if(n(e,t[i]))return!0;return!1}function v9(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function NI(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Pge(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function Dge(t,e,n){if(e!==e)return Pge(t,Lge,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function Lge(t){return t!==t}function Fge(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function kge(t){return function(e){return t(e)}}function Oge(t,e){return t.has(e)}function Uge(t,e){return t==null?void 0:t[e]}function Nge(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function _9(t,e){return function(n){return t(e(n))}}var zge=Array.prototype,Gge=Function.prototype,px=Object.prototype,kE=UI["__core-js_shared__"],NL=function(){var t=/[^.]+$/.exec(kE&&kE.keys&&kE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),y9=Gge.toString,r0=px.hasOwnProperty,zI=px.toString,Qge=RegExp("^"+y9.call(r0).replace(bge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zL=UI.Symbol,Hge=_9(Object.getPrototypeOf,Object),Vge=px.propertyIsEnumerable,Wge=zge.splice,GL=zL?zL.isConcatSpreadable:void 0,EC=Object.getOwnPropertySymbols,QL=Math.max,jge=w9(UI,"Map"),Gm=w9(Object,"create");function hf(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qge(){this.__data__=Gm?Gm(null):{}}function Yge(t){return this.has(t)&&delete this.__data__[t]}function Xge(t){var e=this.__data__;if(Gm){var n=e[t];return n===OI?void 0:n}return r0.call(e,t)?e[t]:void 0}function Jge(t){var e=this.__data__;return Gm?e[t]!==void 0:r0.call(e,t)}function Kge(t,e){var n=this.__data__;return n[t]=Gm&&e===void 0?OI:e,this}hf.prototype.clear=qge;hf.prototype.delete=Yge;hf.prototype.get=Xge;hf.prototype.has=Jge;hf.prototype.set=Kge;function s0(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function $ge(){this.__data__=[]}function Zge(t){var e=this.__data__,n=mx(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Wge.call(e,n,1),!0}function e1e(t){var e=this.__data__,n=mx(e,t);return n<0?void 0:e[n][1]}function t1e(t){return mx(this.__data__,t)>-1}function n1e(t,e){var n=this.__data__,i=mx(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}s0.prototype.clear=$ge;s0.prototype.delete=Zge;s0.prototype.get=e1e;s0.prototype.has=t1e;s0.prototype.set=n1e;function o0(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function i1e(){this.__data__={hash:new hf,map:new(jge||s0),string:new hf}}function r1e(t){return gx(this,t).delete(t)}function s1e(t){return gx(this,t).get(t)}function o1e(t){return gx(this,t).has(t)}function a1e(t,e){return gx(this,t).set(t,e),this}o0.prototype.clear=i1e;o0.prototype.delete=r1e;o0.prototype.get=s1e;o0.prototype.has=o1e;o0.prototype.set=a1e;function O_(t){var e=-1,n=t?t.length:0;for(this.__data__=new o0;++e<n;)this.add(t[e])}function l1e(t){return this.__data__.set(t,OI),this}function c1e(t){return this.__data__.has(t)}O_.prototype.add=O_.prototype.push=l1e;O_.prototype.has=c1e;function u1e(t,e){var n=GI(t)||E9(t)?Fge(t.length,String):[],i=n.length,r=!!i;for(var s in t)(e||r0.call(t,s))&&!(r&&(s=="length"||w1e(s,i)))&&n.push(s);return n}function mx(t,e){for(var n=t.length;n--;)if(T1e(t[n][0],e))return n;return-1}function f1e(t,e,n,i){var r=-1,s=Bge,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=v9(e,kge(n))),i?(s=Rge,o=!1):e.length>=vge&&(s=Oge,o=!1,e=new O_(e));e:for(;++r<a;){var u=t[r],f=n?n(u):u;if(u=i||u!==0?u:0,o&&f===f){for(var h=c;h--;)if(e[h]===f)continue e;l.push(u)}else s(e,f,i)||l.push(u)}return l}function x9(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=x1e),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?x9(a,e-1,n,i,r):NI(r,a):i||(r[r.length]=a)}return r}function h1e(t,e,n){var i=e(t);return GI(t)?i:NI(i,n(t))}function d1e(t){if(!QI(t)||b1e(t))return!1;var e=S9(t)||Nge(t)?Qge:Sge;return e.test(I1e(t))}function p1e(t){if(!QI(t))return C1e(t);var e=S1e(t),n=[];for(var i in t)i=="constructor"&&(e||!r0.call(t,i))||n.push(i);return n}function m1e(t,e){return t=Object(t),g1e(t,e,function(n,i){return i in t})}function g1e(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=t[o];n(a,o)&&(s[o]=a)}return s}function A1e(t,e){return e=QL(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,r=QL(n.length-e,0),s=Array(r);++i<r;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=s,Tge(t,this,o)}}function v1e(t){return h1e(t,D1e,y1e)}function gx(t,e){var n=t.__data__;return E1e(e)?n[typeof e=="string"?"string":"hash"]:n.map}function w9(t,e){var n=Uge(t,e);return d1e(n)?n:void 0}var _1e=EC?_9(EC,Object):M9,y1e=EC?function(t){for(var e=[];t;)NI(e,_1e(t)),t=Hge(t);return e}:M9;function x1e(t){return GI(t)||E9(t)||!!(GL&&t&&t[GL])}function w1e(t,e){return e=e==null?A9:e,!!e&&(typeof t=="number"||Cge.test(t))&&t>-1&&t%1==0&&t<e}function E1e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function b1e(t){return!!NL&&NL in t}function S1e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||px;return t===n}function C1e(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}function M1e(t){if(typeof t=="string"||P1e(t))return t;var e=t+"";return e=="0"&&1/t==-_ge?"-0":e}function I1e(t){if(t!=null){try{return y9.call(t)}catch{}try{return t+""}catch{}}return""}function T1e(t,e){return t===e||t!==t&&e!==e}function E9(t){return B1e(t)&&r0.call(t,"callee")&&(!Vge.call(t,"callee")||zI.call(t)==yge)}var GI=Array.isArray;function b9(t){return t!=null&&R1e(t.length)&&!S9(t)}function B1e(t){return C9(t)&&b9(t)}function S9(t){var e=QI(t)?zI.call(t):"";return e==xge||e==wge}function R1e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=A9}function QI(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function C9(t){return!!t&&typeof t=="object"}function P1e(t){return typeof t=="symbol"||C9(t)&&zI.call(t)==Ege}function D1e(t){return b9(t)?u1e(t,!0):p1e(t)}var L1e=A1e(function(t,e){return t==null?{}:(e=v9(x9(e,1),M1e),m1e(t,f1e(v1e(t),e)))});function M9(){return[]}var F1e=L1e;const k1e=R.exports.forwardRef(({children:t,domElement:e,onChange:n,onMouseDown:i,onMouseUp:r,onObjectChange:s,object:o,makeDefault:a,...l},c)=>{const u=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],{camera:f,...h}=l,d=m9(h,u),p=F1e(h,u),m=Me(T=>T.controls),A=Me(T=>T.gl),v=Me(T=>T.events),y=Me(T=>T.camera),x=Me(T=>T.invalidate),w=Me(T=>T.get),E=Me(T=>T.set),S=f||y,M=e||v.connected||A.domElement,b=R.exports.useMemo(()=>new zde(S,M),[S,M]),B=R.exports.useRef();return R.exports.useLayoutEffect(()=>(o?b.attach(o instanceof It?o:o.current):B.current instanceof It&&b.attach(B.current),()=>void b.detach()),[o,t,b]),R.exports.useEffect(()=>{if(m){const T=k=>m.enabled=!k.value;return b.addEventListener("dragging-changed",T),()=>b.removeEventListener("dragging-changed",T)}},[b,m]),R.exports.useEffect(()=>{const T=k=>{x(),n&&n(k)};return b==null||b.addEventListener==null||b.addEventListener("change",T),i&&(b==null||b.addEventListener==null||b.addEventListener("mouseDown",i)),r&&(b==null||b.addEventListener==null||b.addEventListener("mouseUp",r)),s&&(b==null||b.addEventListener==null||b.addEventListener("objectChange",s)),()=>{b==null||b.removeEventListener==null||b.removeEventListener("change",T),i&&(b==null||b.removeEventListener==null||b.removeEventListener("mouseDown",i)),r&&(b==null||b.removeEventListener==null||b.removeEventListener("mouseUp",r)),s&&(b==null||b.removeEventListener==null||b.removeEventListener("objectChange",s))}},[n,i,r,s,b,x]),R.exports.useEffect(()=>{if(a){const T=w().controls;return E({controls:b}),()=>E({controls:T})}},[a,b]),b?it(Sr,{children:[$("primitive",{ref:c,object:b,...d}),$("group",{ref:B,...p,children:t})]}):null}),O1e=R.exports.forwardRef(({domElement:t,selector:e,onChange:n,onLock:i,onUnlock:r,enabled:s=!0,makeDefault:o,...a},l)=>{const{camera:c,...u}=a,f=Me(E=>E.setEvents),h=Me(E=>E.gl),d=Me(E=>E.camera),p=Me(E=>E.invalidate),m=Me(E=>E.events),A=Me(E=>E.get),v=Me(E=>E.set),y=c||d,x=t||m.connected||h.domElement,[w]=R.exports.useState(()=>new Hde(y));return R.exports.useEffect(()=>{if(s){w.connect(x);const E=A().events.compute;return f({compute(S,M){const b=M.size.width/2,B=M.size.height/2;M.pointer.set(b/M.size.width*2-1,-(B/M.size.height)*2+1),M.raycaster.setFromCamera(M.pointer,M.camera)}}),()=>{w.disconnect(),f({compute:E})}}},[s,w]),R.exports.useEffect(()=>{const E=b=>{p(),n&&n(b)};w.addEventListener("change",E),i&&w.addEventListener("lock",i),r&&w.addEventListener("unlock",r);const S=()=>w.lock(),M=e?Array.from(document.querySelectorAll(e)):[document];return M.forEach(b=>b&&b.addEventListener("click",S)),()=>{w.removeEventListener("change",E),i&&w.addEventListener("lock",i),r&&w.addEventListener("unlock",r),M.forEach(b=>b?b.removeEventListener("click",S):void 0)}},[n,i,r,e,w,p]),R.exports.useEffect(()=>{if(o){const E=A().controls;return v({controls:w}),()=>v({controls:E})}},[o,w]),$("primitive",{ref:l,object:w,...u})}),U1e=R.exports.forwardRef(({domElement:t,makeDefault:e,...n},i)=>{const r=Me(f=>f.camera),s=Me(f=>f.gl),o=Me(f=>f.events),a=Me(f=>f.get),l=Me(f=>f.set),c=t||o.connected||s.domElement,[u]=R.exports.useState(()=>new Nde(r,c));return R.exports.useEffect(()=>{if(e){const f=a().controls;return l({controls:u}),()=>l({controls:f})}},[e,u]),Ct((f,h)=>{u.update(h)},-1),u?$("primitive",{ref:i,object:u,...n}):null});function I9(t,e){const n=Me(r=>r.pointer),[i]=R.exports.useState(()=>{const r=new Kd;return e&&Ss(r,e,{}),function(s,o){r.setFromCamera(n,t instanceof yf?t:t.current);const a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}const T9=R.exports.createContext({}),Ax=()=>R.exports.useContext(T9),N1e=2*Math.PI,HL=new It,VL=new Ne,[wh,OE]=[new St,new St],WL=new F,jL=new F,z1e=t=>"minPolarAngle"in t,G1e=({alignment:t="bottom-right",margin:e=[80,80],renderPriority:n=0,autoClear:i=!0,onUpdate:r,onTarget:s,children:o})=>{const a=Me(({size:D})=>D),l=Me(({camera:D})=>D),c=Me(({controls:D})=>D),u=Me(({gl:D})=>D),f=Me(({scene:D})=>D),h=Me(({invalidate:D})=>D),d=R.exports.useRef(),p=R.exports.useRef(),m=R.exports.useRef(null),[A]=R.exports.useState(()=>new ml),v=R.exports.useRef(!1),y=R.exports.useRef(0),x=R.exports.useRef(new F(0,0,0)),w=R.exports.useRef(new F(0,0,0));R.exports.useEffect(()=>{w.current.copy(l.up)},[l]);const E=R.exports.useCallback(D=>{v.current=!0,(c||s)&&(x.current=(c==null?void 0:c.target)||(s==null?void 0:s())),y.current=l.position.distanceTo(WL),wh.copy(l.quaternion),jL.copy(D).multiplyScalar(y.current).add(WL),HL.lookAt(jL),OE.copy(HL.quaternion),h()},[c,l,s,h]);R.exports.useEffect(()=>(f.background&&(d.current=f.background,f.background=null,A.background=d.current),()=>{d.current&&(f.background=d.current)}),[]),Ct((D,N)=>{if(m.current&&p.current){var O;if(v.current)if(wh.angleTo(OE)<.01)v.current=!1,z1e(c)&&l.up.copy(w.current);else{const Y=N*N1e;wh.rotateTowards(OE,Y),l.position.set(0,0,1).applyQuaternion(wh).multiplyScalar(y.current).add(x.current),l.up.set(0,1,0).applyQuaternion(wh).normalize(),l.quaternion.copy(wh),r?r():c&&c.update(),h()}VL.copy(l.matrix).invert(),(O=p.current)==null||O.quaternion.setFromRotationMatrix(VL),i&&(u.autoClear=!1),u.clearDepth(),u.render(A,m.current)}},n);const S=I9(m),M=R.exports.useMemo(()=>({tweenCamera:E,raycast:S}),[E]),[b,B]=e,T=t.endsWith("-center")?0:t.endsWith("-left")?-a.width/2+b:a.width/2-b,k=t.startsWith("center-")?0:t.startsWith("top-")?a.height/2-B:-a.height/2+B;return e0(it(T9.Provider,{value:M,children:[$(g9,{ref:m,position:[0,0,200]}),$("group",{ref:p,position:[T,k,0],children:o})]}),A)},Cp={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},Q1e=["Right","Left","Top","Bottom","Front","Back"],B9=t=>new F(...t).multiplyScalar(.38),H1e=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(B9),V1e=[.25,.25,.25],R9=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(B9),W1e=R9.map(t=>t.toArray().map(e=>e==0?.5:.25)),j1e=({hover:t,index:e,font:n="20px Inter var, Arial, sans-serif",faces:i=Q1e,color:r=Cp.bg,hoverColor:s=Cp.hover,textColor:o=Cp.text,strokeColor:a=Cp.stroke,opacity:l=1})=>{const c=Me(f=>f.gl),u=R.exports.useMemo(()=>{const f=document.createElement("canvas");f.width=128,f.height=128;const h=f.getContext("2d");return h.fillStyle=r,h.fillRect(0,0,f.width,f.height),h.strokeStyle=a,h.strokeRect(0,0,f.width,f.height),h.font=n,h.textAlign="center",h.fillStyle=o,h.fillText(i[e].toUpperCase(),64,76),new b3(f)},[e,i,n,r,o,a]);return $("meshLambertMaterial",{map:u,"map-encoding":c.outputEncoding,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:t?s:"white",transparent:!0,opacity:l})},q1e=t=>{const{tweenCamera:e,raycast:n}=Ax(),[i,r]=R.exports.useState(null),s=l=>{l.stopPropagation(),r(null)},o=l=>{l.stopPropagation(),e(l.face.normal)};return it("mesh",{raycast:n,onPointerOut:s,onPointerMove:l=>{l.stopPropagation(),r(Math.floor(l.faceIndex/2))},onClick:t.onClick||o,children:[[...Array(6)].map((l,c)=>$(j1e,{index:c,hover:i===c,...t},c)),$("boxGeometry",{})]})},qL=({onClick:t,dimensions:e,position:n,hoverColor:i=Cp.hover})=>{const{tweenCamera:r,raycast:s}=Ax(),[o,a]=R.exports.useState(!1);return it("mesh",{scale:1.01,position:n,raycast:s,onPointerOver:f=>{f.stopPropagation(),a(!0)},onPointerOut:f=>{f.stopPropagation(),a(!1)},onClick:t||(f=>{f.stopPropagation(),r(n)}),children:[$("meshBasicMaterial",{color:o?i:"white",transparent:!0,opacity:.6,visible:o}),$("boxGeometry",{args:e})]})},Y1e=t=>it("group",{scale:[60,60,60],children:[$(q1e,{...t}),R9.map((e,n)=>$(qL,{position:e,dimensions:W1e[n],...t},n)),H1e.map((e,n)=>$(qL,{position:e,dimensions:V1e,...t},n)),$("ambientLight",{intensity:.5}),$("pointLight",{position:[10,10,10],intensity:.5})]});function UE({scale:t=[.8,.05,.05],color:e,rotation:n}){return $("group",{rotation:n,children:it("mesh",{position:[.4,0,0],children:[$("boxGeometry",{args:t}),$("meshBasicMaterial",{color:e,toneMapped:!1})]})})}function Eh({onClick:t,font:e,disabled:n,arcStyle:i,label:r,labelColor:s,axisHeadScale:o=1,...a}){const l=Me(m=>m.gl),c=R.exports.useMemo(()=>{const m=document.createElement("canvas");m.width=64,m.height=64;const A=m.getContext("2d");return A.beginPath(),A.arc(32,32,16,0,2*Math.PI),A.closePath(),A.fillStyle=i,A.fill(),r&&(A.font=e,A.textAlign="center",A.fillStyle=s,A.fillText(r,32,41)),new b3(m)},[i,r,s,e]),[u,f]=R.exports.useState(!1),h=(r?1:.75)*(u?1.2:1)*o;return $("sprite",{scale:h,onPointerOver:n?void 0:m=>{m.stopPropagation(),f(!0)},onPointerOut:n?void 0:t||(m=>{m.stopPropagation(),f(!1)}),...a,children:$("spriteMaterial",{map:c,"map-encoding":l.outputEncoding,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1})})}const X1e=({hideNegativeAxes:t,hideAxisHeads:e,disabled:n,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[f,h,d]=r,{tweenCamera:p,raycast:m}=Ax(),A={font:i,disabled:n,labelColor:l,raycast:m,onClick:c,axisHeadScale:s,onPointerDown:n?void 0:v=>{p(v.object.position),v.stopPropagation()}};return it("group",{scale:40,...u,children:[$(UE,{color:f,rotation:[0,0,0],scale:o}),$(UE,{color:h,rotation:[0,0,Math.PI/2],scale:o}),$(UE,{color:d,rotation:[0,-Math.PI/2,0],scale:o}),!e&&it(Sr,{children:[$(Eh,{arcStyle:f,position:[1,0,0],label:a[0],...A}),$(Eh,{arcStyle:h,position:[0,1,0],label:a[1],...A}),$(Eh,{arcStyle:d,position:[0,0,1],label:a[2],...A}),!t&&it(Sr,{children:[$(Eh,{arcStyle:f,position:[-1,0,0],...A}),$(Eh,{arcStyle:h,position:[0,-1,0],...A}),$(Eh,{arcStyle:d,position:[0,0,-1],...A})]})]}),$("ambientLight",{intensity:.5}),$("pointLight",{position:[10,10,10],intensity:.5})]})};function P9(t,{path:e}){const[n]=Mi(Fy,[t],i=>i.setPath(e));return n}P9.preload=(t,{path:e})=>Mi.preload(Fy,[t],n=>n.setPath(e));function HI(t){return Mi(MI,t)}HI.preload=t=>Mi.preload(MI,t);HI.clear=t=>Mi.clear(MI,t);let GA=null;function D9(t,e,n){return i=>{n&&n(i),t&&(GA||(GA=new Ape),GA.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(GA)),e&&i.setMeshoptDecoder(typeof PE=="function"?PE():PE)}}function VI(t,e=!0,n=!0,i){return Mi(CI,t,D9(e,n,i))}VI.preload=(t,e=!0,n=!0,i)=>Mi.preload(CI,t,D9(e,n,i));VI.clear=t=>Mi.clear(CI,t);const L9="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function WI(t,e=`${L9}/basis/`){const n=Me(r=>r.gl),i=Mi(oo,zm(t)?Object.values(t):t,r=>{r.detectSupport(n),r.setTranscoderPath(e)});if(R.exports.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(n.initTexture)},[n,i]),zm(t)){const r=Object.keys(t),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}WI.preload=(t,e=`${L9}/basis/`)=>Mi.preload(oo,t,n=>{n.setTranscoderPath(e)});WI.clear=t=>Mi.clear(oo,t);function J1e(t,e){const{unsuspend:n,start:i,crossOrigin:r,muted:s,loop:o,...a}={unsuspend:"canplay",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,...e},l=Me(u=>u.gl),c=Sf(()=>new Promise((u,f)=>{const h=Object.assign(document.createElement("video"),{src:t,crossOrigin:r,loop:o,muted:s,...a}),d=new AU(h);d.encoding=l.outputEncoding,h.addEventListener(n,()=>u(d))}),[t]);return R.exports.useEffect(()=>void(i&&c.image.play()),[c]),c}var F9={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(He,function(){var n=function(){function i(d){return o.appendChild(d.dom),d}function r(d){for(var p=0;p<o.children.length;p++)o.children[p].style.display=p===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),r(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=i(new n.Panel("FPS","#0ff","#002")),f=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=i(new n.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:i,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(f.update(d-a,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:r}};return n.Panel=function(i,r,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,f=48*c,h=3*c,d=2*c,p=3*c,m=15*c,A=74*c,v=30*c,y=document.createElement("canvas");y.width=u,y.height=f,y.style.cssText="width:80px;height:48px";var x=y.getContext("2d");return x.font="bold "+9*c+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=s,x.fillRect(0,0,u,f),x.fillStyle=r,x.fillText(i,h,d),x.fillRect(p,m,A,v),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(p,m,A,v),{dom:y,update:function(w,E){o=Math.min(o,w),a=Math.max(a,w),x.fillStyle=s,x.globalAlpha=1,x.fillRect(0,0,u,m),x.fillStyle=r,x.fillText(l(w)+" "+i+" ("+l(o)+"-"+l(a)+")",h,d),x.drawImage(y,p+c,m,A-c,v,p,m,A-c,v),x.fillRect(p+A-c,m,c,v),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(p+A-c,m,c,l((1-w/E)*v))}}},n})})(F9);const K1e=F9.exports;function YL(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function $1e(t,e=[],n){const[i,r]=R.exports.useState();return R.exports.useLayoutEffect(()=>{const s=t();return r(s),YL(n,s),()=>YL(n,null)},e),i}function Z1e({showPanel:t=0,className:e,parent:n}){const i=$1e(()=>new K1e,[]);return R.exports.useEffect(()=>{if(i){const r=n&&n.current||document.body;i.showPanel(t),r==null||r.appendChild(i.dom),e&&i.dom.classList.add(...e.split(" ").filter(a=>a));const s=$y(()=>i.begin()),o=q3(()=>i.end());return()=>{r==null||r.removeChild(i.dom),s(),o()}}},[n,i,e,t]),null}function jI(t,e,n){const{gl:i,size:r,viewport:s}=Me(),o=typeof t=="number"?t:r.width*s.dpr,a=typeof e=="number"?e:r.height*s.dpr,l=(typeof t=="number"?n:t)||{},{samples:c,...u}=l,f=R.exports.useMemo(()=>{let h;return h=new kn(o,a,{minFilter:Wt,magFilter:Wt,encoding:i.outputEncoding,type:pi,...u}),h.samples=c,h},[]);return R.exports.useLayoutEffect(()=>{f.setSize(o,a),c&&(f.samples=c)},[c,f,o,a]),R.exports.useEffect(()=>()=>f.dispose(),[]),f}function eAe({size:t=256,frames:e=1/0}={}){const n=Me(u=>u.viewport.dpr),{width:i,height:r}=Me(u=>u.size),s=t||i*n,o=t||r*n,a=R.exports.useMemo(()=>{const u=new rg(s,o);return u.format=ko,u.type=_f,{depthTexture:u}},[s,o]);let l=0;const c=jI(s,o,a);return Ct(u=>{(e===1/0||l<e)&&(u.gl.setRenderTarget(c),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(null),l++)}),c.depthTexture}function tAe(t,e,n=1){const i=Me(o=>o.viewport),r=e*(i.aspect>t/e?i.width/t:i.height/e);return[t*(i.aspect>t/e?i.width/t:i.height/e)*n,r*n,1]}function NE(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(c){try{l(i.next(c))}catch(u){s(u)}}function a(c){try{l(i.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof n?u:new n(function(f){f(u)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}const nAe=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function XL(t){return t=t.toLowerCase().replace(/^angle ?\((.+)\)*$/,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const k9=typeof window>"u",ql=(()=>{if(k9)return;const{userAgent:t,platform:e,maxTouchPoints:n}=window.navigator,i=/(iphone|ipod|ipad)/i.test(t),r=e==="iPad"||e==="MacIntel"&&n>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(t)||i||r,isSafari12:/Version\/12.+Safari/.test(t)}})();function iAe(t,e,n){if(!n)return[e];const i=function(c){const u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,f=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,h=c.createShader(35633),d=c.createShader(35632),p=c.createProgram();if(!(d&&h&&p))return;c.shaderSource(h,u),c.shaderSource(d,f),c.compileShader(h),c.compileShader(d),c.attachShader(p,h),c.attachShader(p,d),c.linkProgram(p),c.detachShader(p,h),c.detachShader(p,d),c.deleteShader(h),c.deleteShader(d),c.useProgram(p);const m=c.createBuffer();c.bindBuffer(34962,m),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const A=c.getAttribLocation(p,"aPosition");c.vertexAttribPointer(A,3,5126,!1,0,0),c.enableVertexAttribArray(A),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);const v=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,v),c.deleteProgram(p),c.deleteBuffer(m),v.join("")}(t),r="801621810",s="8016218135",o="80162181161",a=ql!=null&&ql.isIpad?[["a7",o,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["m1",r,15]]:[["a7",o,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15]];let l;return i==="80162181255"?l=a.filter(([,,c])=>c>=14):(l=a.filter(([,c])=>c===i),l.length||(l=a)),l.map(([c])=>`apple ${c} gpu`)}const zE=[],JL=[];function rAe(t,e){if(t===e)return 0;const n=t;t.length>e.length&&(t=e,e=n);let i=t.length,r=e.length;for(;i>0&&t.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let s,o=0;for(;o<i&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(i-=o,r-=o,i===0)return r;let a,l,c=0,u=0,f=0;for(;u<i;)JL[u]=t.charCodeAt(o+u),zE[u]=++u;for(;f<r;)for(s=e.charCodeAt(o+f),a=f++,c=f,u=0;u<i;u++)l=s===JL[u]?a:a+1,a=zE[u],c=zE[u]=a>c?l>c?c+1:l:l>a?a+1:l;return c}function sAe(t){return t!=null}class KL extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const oAe=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:n={},glContext:i,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@4.0.43/dist/benchmarks"}={})=>NE(void 0,void 0,void 0,function*(){const o={};if(k9)return{tier:0,type:"SSR"};const{isIpad:a=!!(ql!=null&&ql.isIpad),isMobile:l=!!(ql!=null&&ql.isMobile),screenSize:c=window.screen,loadBenchmarks:u=E=>NE(void 0,void 0,void 0,function*(){const S=yield fetch(`${s}/${E}`).then(M=>M.json());if(parseInt(S.shift().split(".")[0],10)<4)throw new KL("Detect GPU benchmark data is out of date. Please update to version 4x");return S})}=n;let{renderer:f}=n;const h=(E,S,M,b,B)=>({device:B,fps:b,gpu:M,isMobile:l,tier:E,type:S});let d,p="";if(f)f=XL(f),d=[f];else{const E=i||function(M,b=!1){const B={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:b,powerPreference:"high-performance",stencil:!1};M&&delete B.powerPreference;const T=window.document.createElement("canvas"),k=T.getContext("webgl",B)||T.getContext("experimental-webgl",B);return k!=null?k:void 0}(ql==null?void 0:ql.isSafari12,r);if(!E)return h(0,"WEBGL_UNSUPPORTED");const S=E.getExtension("WEBGL_debug_renderer_info");if(S&&(f=E.getParameter(S.UNMASKED_RENDERER_WEBGL)),!f)return h(1,"FALLBACK");p=f,f=XL(f),d=function(M,b,B){return b==="apple gpu"?iAe(M,b,B):[b]}(E,f,l)}const m=(yield Promise.all(d.map(function(E){var S;return NE(this,void 0,void 0,function*(){const M=(V=>{const J=l?["adreno","apple","mali-t","mali","nvidia","powervr"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const j of J)if(V.includes(j))return j})(E);if(!M)return;const b=`${l?"m":"d"}-${M}${a?"-ipad":""}.json`,B=o[b]=(S=o[b])!==null&&S!==void 0?S:u(b);let T;try{T=yield B}catch(V){if(V instanceof KL)throw V;return}const k=function(V){var J;const j=(V=V.replace(/\([^)]+\)/,"")).match(/\d+/)||V.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(J=j==null?void 0:j.join("").replace(/\W|amd/g,""))!==null&&J!==void 0?J:""}(E);let D=T.filter(([,V])=>V===k);D.length||(D=T.filter(([V])=>V.includes(E)));const N=D.length;if(N===0)return;let O,[Y,,,q]=N>1?D.map(V=>[V,rAe(E,V[0])]).sort(([,V],[,J])=>V-J)[0][0]:D[0],K=Number.MAX_VALUE;const{devicePixelRatio:z}=window,U=c.width*z*c.height*z;for(const V of q){const[J,j]=V,re=J*j,ee=Math.abs(U-re);ee<K&&(K=ee,O=V)}if(!O)return;const[,,Q,H]=O;return[K,Q,Y,H]})}))).filter(sAe).sort(([E=Number.MAX_VALUE,S],[M=Number.MAX_VALUE,b])=>E===M?S-b:E-M);if(!m.length){const E=nAe.find(S=>f.includes(S));return E?h(0,"BLOCKLISTED",E):h(1,"FALLBACK",`${f} (${p})`)}const[,A,v,y]=m[0];if(A===-1)return h(0,"BLOCKLISTED",v,A,y);const x=l?t:e;let w=0;for(let E=0;E<x.length;E++)A>=x[E]&&(w=E);return h(w,"BENCHMARK",v,A,y)}),aAe=t=>Sf(()=>oAe(t),["useDetectGPU"]);function lAe(t,e,...n){const i=R.exports.useRef(),r=Me(s=>s.scene);return R.exports.useEffect(()=>(t&&e&&t!=null&&t.current&&(i.current=new e(t.current,...n),i.current&&r.add(i.current)),!t&&i.current&&r.remove(i.current),()=>{i.current&&r.remove(i.current)}),[r,e,t,...n]),Ct(()=>{var s;(s=i.current)!=null&&s.update&&i.current.update()}),i}const O9=0,cAe=1,U9=2,$L=2,GE=1.25,ZL=1,Qu=6*4+4+4,bC=65535,uAe=Math.pow(2,-24);class QA{constructor(){}}function pa(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function eF(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function tF(t,e){e.set(t)}function nF(t,e,n){let i,r;for(let s=0;s<3;s++){const o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function HA(t,e,n){for(let i=0;i<3;i++){const r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function cp(t){const e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function fAe(t,e){if(!t.index){const n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let r;n>65535?r=new Uint32Array(new i(4*n)):r=new Uint16Array(new i(2*n)),t.setIndex(new bt(r,1));for(let s=0;s<n;s++)r[s]=s}}function hAe(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],n=new Set;for(const r of t.groups)n.add(r.start),n.add(r.start+r.count);const i=Array.from(n.values()).sort((r,s)=>r-s);for(let r=0;r<i.length-1;r++){const s=i[r],o=i[r+1];e.push({offset:s/3,count:(o-s)/3})}return e}function QE(t,e,n,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,f=1/0,h=1/0,d=1/0,p=-1/0,m=-1/0,A=-1/0;const v=r!==null;for(let y=e*6,x=(e+n)*6;y<x;y+=6){const w=t[y+0],E=t[y+1],S=w-E,M=w+E;S<s&&(s=S),M>l&&(l=M),v&&w<f&&(f=w),v&&w>p&&(p=w);const b=t[y+2],B=t[y+3],T=b-B,k=b+B;T<o&&(o=T),k>c&&(c=k),v&&b<h&&(h=b),v&&b>m&&(m=b);const D=t[y+4],N=t[y+5],O=D-N,Y=D+N;O<a&&(a=O),Y>u&&(u=Y),v&&D<d&&(d=D),v&&D>A&&(A=D)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=u,v&&(r[0]=f,r[1]=h,r[2]=d,r[3]=p,r[4]=m,r[5]=A)}function dAe(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let u=e*6,f=(e+n)*6;u<f;u+=6){const h=t[u+0];h<r&&(r=h),h>a&&(a=h);const d=t[u+2];d<s&&(s=d),d>l&&(l=d);const p=t[u+4];p<o&&(o=p),p>c&&(c=p)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function pAe(t,e,n,i,r){let s=n,o=n+i-1;const a=r.pos,l=r.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let u=t[s*3+c];t[s*3+c]=t[o*3+c],t[o*3+c]=u;let f=e[s*6+c*2+0];e[s*6+c*2+0]=e[o*6+c*2+0],e[o*6+c*2+0]=f;let h=e[s*6+c*2+1];e[s*6+c*2+1]=e[o*6+c*2+1],e[o*6+c*2+1]=h}s++,o--}else return s}}const Qa=32,mAe=(t,e)=>t.candidate-e.candidate,Hl=new Array(Qa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),VA=new Float32Array(6);function gAe(t,e,n,i,r,s){let o=-1,a=0;if(s===O9)o=eF(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===cAe)o=eF(t),o!==-1&&(a=AAe(n,i,r,o));else if(s===U9){const l=cp(t);let c=GE*r;const u=i*6,f=(i+r)*6;for(let h=0;h<3;h++){const d=e[h],A=(e[h+3]-d)/Qa;if(r<Qa/4){const v=[...Hl];v.length=r;let y=0;for(let w=u;w<f;w+=6,y++){const E=v[y];E.candidate=n[w+2*h],E.count=0;const{bounds:S,leftCacheBounds:M,rightCacheBounds:b}=E;for(let B=0;B<3;B++)b[B]=1/0,b[B+3]=-1/0,M[B]=1/0,M[B+3]=-1/0,S[B]=1/0,S[B+3]=-1/0;HA(w,n,S)}v.sort(mAe);let x=r;for(let w=0;w<x;w++){const E=v[w];for(;w+1<x&&v[w+1].candidate===E.candidate;)v.splice(w+1,1),x--}for(let w=u;w<f;w+=6){const E=n[w+2*h];for(let S=0;S<x;S++){const M=v[S];E>=M.candidate?HA(w,n,M.rightCacheBounds):(HA(w,n,M.leftCacheBounds),M.count++)}}for(let w=0;w<x;w++){const E=v[w],S=E.count,M=r-E.count,b=E.leftCacheBounds,B=E.rightCacheBounds;let T=0;S!==0&&(T=cp(b)/l);let k=0;M!==0&&(k=cp(B)/l);const D=ZL+GE*(T*S+k*M);D<c&&(o=h,c=D,a=E.candidate)}}else{for(let x=0;x<Qa;x++){const w=Hl[x];w.count=0,w.candidate=d+A+x*A;const E=w.bounds;for(let S=0;S<3;S++)E[S]=1/0,E[S+3]=-1/0}for(let x=u;x<f;x+=6){let S=~~((n[x+2*h]-d)/A);S>=Qa&&(S=Qa-1);const M=Hl[S];M.count++,HA(x,n,M.bounds)}const v=Hl[Qa-1];tF(v.bounds,v.rightCacheBounds);for(let x=Qa-2;x>=0;x--){const w=Hl[x],E=Hl[x+1];nF(w.bounds,E.rightCacheBounds,w.rightCacheBounds)}let y=0;for(let x=0;x<Qa-1;x++){const w=Hl[x],E=w.count,S=w.bounds,b=Hl[x+1].rightCacheBounds;E!==0&&(y===0?tF(S,VA):nF(S,VA,VA)),y+=E;let B=0,T=0;y!==0&&(B=cp(VA)/l);const k=r-y;k!==0&&(T=cp(b)/l);const D=ZL+GE*(B*y+T*k);D<c&&(o=h,c=D,a=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function AAe(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[s*6+i*2];return r/n}function vAe(t,e){const n=t.attributes.position,i=t.index.array,r=i.length/3,s=new Float32Array(r*6),o=n.normalized,a=n.array,l=n.offset||0;let c=3;n.isInterleavedBufferAttribute&&(c=n.data.stride);const u=["getX","getY","getZ"];for(let f=0;f<r;f++){const h=f*3,d=f*6;let p,m,A;o?(p=i[h+0],m=i[h+1],A=i[h+2]):(p=i[h+0]*c+l,m=i[h+1]*c+l,A=i[h+2]*c+l);for(let v=0;v<3;v++){let y,x,w;o?(y=n[u[v]](p),x=n[u[v]](m),w=n[u[v]](A)):(y=a[p+v],x=a[m+v],w=a[A+v]);let E=y;x<E&&(E=x),w<E&&(E=w);let S=y;x>S&&(S=x),w>S&&(S=w);const M=(S-E)/2,b=v*2;s[d+b+0]=E+M,s[d+b+1]=M+(Math.abs(E)+M)*uAe,E<e[v]&&(e[v]=E),S>e[v+3]&&(e[v+3]=S)}}return s}function _Ae(t,e){function n(v){h&&h(v/d)}function i(v,y,x,w=null,E=0){if(!p&&E>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),x<=u||E>=l)return n(y+x),v.offset=y,v.count=x,v;const S=gAe(v.boundingData,w,o,y,x,f);if(S.axis===-1)return n(y+x),v.offset=y,v.count=x,v;const M=pAe(a,o,y,x,S);if(M===y||M===y+x)n(y+x),v.offset=y,v.count=x;else{v.splitAxis=S.axis;const b=new QA,B=y,T=M-y;v.left=b,b.boundingData=new Float32Array(6),QE(o,B,T,b.boundingData,s),i(b,B,T,s,E+1);const k=new QA,D=M,N=x-T;v.right=k,k.boundingData=new Float32Array(6),QE(o,D,N,k.boundingData,s),i(k,D,N,s,E+1)}return v}fAe(t,e);const r=new Float32Array(6),s=new Float32Array(6),o=vAe(t,r),a=t.index.array,l=e.maxDepth,c=e.verbose,u=e.maxLeafTris,f=e.strategy,h=e.onProgress,d=t.index.count/3;let p=!1;const m=[],A=hAe(t);if(A.length===1){const v=A[0],y=new QA;y.boundingData=r,dAe(o,v.offset,v.count,s),i(y,v.offset,v.count,s),m.push(y)}else for(let v of A){const y=new QA;y.boundingData=new Float32Array(6),QE(o,v.offset,v.count,y.boundingData,s),i(y,v.offset,v.count,s),m.push(y)}return m}function yAe(t,e){const n=_Ae(t,e);let i,r,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let u=0;u<n.length;u++){const f=n[u];let h=l(f);const d=new a(Qu*h);i=new Float32Array(d),r=new Uint32Array(d),s=new Uint16Array(d),c(0,f),o.push(d)}return o;function l(u){return u.count?1:1+l(u.left)+l(u.right)}function c(u,f){const h=u/4,d=u/2,p=!!f.count,m=f.boundingData;for(let A=0;A<6;A++)i[h+A]=m[A];if(p){const A=f.offset,v=f.count;return r[h+6]=A,s[d+14]=v,s[d+15]=bC,u+Qu}else{const A=f.left,v=f.right,y=f.splitAxis;let x;if(x=c(u+Qu,A),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[h+6]=x/4,x=c(x,v),r[h+7]=y,x}}}class ya{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][n];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,n){let i=1/0,r=-1/0;for(let s=0,o=n.length;s<o;s++){const a=n[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}ya.prototype.setFromBox=function(){const t=new F;return function(n,i){const r=i.min,s=i.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){t.x=r.x*l+s.x*(1-l),t.y=r.y*c+s.y*(1-c),t.z=r.z*u+s.z*(1-u);const f=n.dot(t);o=Math.min(f,o),a=Math.max(f,a)}this.min=o,this.max=a}}();(function(){const t=new ya;return function(n,i){const r=n.points,s=n.satAxes,o=n.satBounds,a=i.points,l=i.satAxes,c=i.satBounds;for(let u=0;u<3;u++){const f=o[u],h=s[u];if(t.setFromPoints(h,a),f.isSeparated(t))return!1}for(let u=0;u<3;u++){const f=c[u],h=l[u];if(t.setFromPoints(h,r),f.isSeparated(t))return!1}}})();const xAe=function(){const t=new F,e=new F,n=new F;return function(r,s,o){const a=r.start,l=t,c=s.start,u=e;n.subVectors(a,c),t.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const f=n.dot(u),h=u.dot(l),d=u.dot(u),p=n.dot(l),A=l.dot(l)*d-h*h;let v,y;A!==0?v=(f*h-p*d)/A:v=0,y=(f+v*h)/d,o.x=v,o.y=y}}(),qI=function(){const t=new Ae,e=new F,n=new F;return function(r,s,o,a){xAe(r,s,t);let l=t.x,c=t.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),r.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?r.at(0,o):r.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=r.start:u=r.end;let f;c<0?f=s.start:f=s.end;const h=e,d=n;if(r.closestPointToPoint(f,!0,e),s.closestPointToPoint(u,!0,n),h.distanceToSquared(f)<=d.distanceToSquared(u)){o.copy(h),a.copy(f);return}else{o.copy(u),a.copy(d);return}}}}(),wAe=function(){const t=new F,e=new F,n=new Zr,i=new Uo;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:f}=o;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a||(i.start=c,i.end=f,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a)||(i.start=u,i.end=f,i.closestPointToPoint(l,!0,t).distanceTo(l)<=a))return!0;const m=o.getPlane(n);if(Math.abs(m.distanceToPoint(l))<=a){const v=m.projectPoint(l,e);if(o.containsPoint(v))return!0}return!1}}(),EAe=1e-15;function bh(t){return Math.abs(t)<EAe}class hl extends _r{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new F),this.satBounds=new Array(4).fill().map(()=>new ya),this.points=[this.a,this.b,this.c],this.sphere=new zi,this.plane=new Zr,this.needsUpdate=!0}intersectsSphere(e){return wAe(e,this)}update(){const e=this.a,n=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);const c=s[1],u=o[1];c.subVectors(e,n),u.setFromPoints(c,r);const f=s[2],h=o[2];f.subVectors(n,i),h.setFromPoints(f,r);const d=s[3],p=o[3];d.subVectors(i,e),p.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}hl.prototype.closestPointToSegment=function(){const t=new F,e=new F,n=new Uo;return function(r,s=null,o=null){const{start:a,end:l}=r,c=this.points;let u,f=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;n.start.copy(c[h]),n.end.copy(c[d]),qI(n,r,t,e),u=t.distanceToSquared(e),u<f&&(f=u,s&&s.copy(t),o&&o.copy(e))}return this.closestPointToPoint(a,t),u=a.distanceToSquared(t),u<f&&(f=u,s&&s.copy(t),o&&o.copy(a)),this.closestPointToPoint(l,t),u=l.distanceToSquared(t),u<f&&(f=u,s&&s.copy(t),o&&o.copy(l)),Math.sqrt(f)}}();hl.prototype.intersectsTriangle=function(){const t=new hl,e=new Array(3),n=new Array(3),i=new ya,r=new ya,s=new F,o=new F,a=new F,l=new F,c=new Uo,u=new Uo,f=new Uo;return function(d,p=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(t.copy(d),t.update(),d=t);const m=this.plane,A=d.plane;if(Math.abs(m.normal.dot(A.normal))>1-1e-10){const v=this.satBounds,y=this.satAxes;n[0]=d.a,n[1]=d.b,n[2]=d.c;for(let E=0;E<4;E++){const S=v[E],M=y[E];if(i.setFromPoints(M,n),S.isSeparated(i))return!1}const x=d.satBounds,w=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let E=0;E<4;E++){const S=x[E],M=w[E];if(i.setFromPoints(M,e),S.isSeparated(i))return!1}for(let E=0;E<4;E++){const S=y[E];for(let M=0;M<4;M++){const b=w[M];if(s.crossVectors(S,b),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return p&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const v=this.points;let y=!1,x=0;for(let N=0;N<3;N++){const O=v[N],Y=v[(N+1)%3];c.start.copy(O),c.end.copy(Y),c.delta(o);const q=y?u.start:u.end,K=bh(A.distanceToPoint(O));if(bh(A.normal.dot(o))&&K){u.copy(c),x=2;break}if((A.intersectLine(c,q)||K)&&!bh(q.distanceTo(Y))){if(x++,y)break;y=!0}}if(x===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(x!==2)return!1;const w=d.points;let E=!1,S=0;for(let N=0;N<3;N++){const O=w[N],Y=w[(N+1)%3];c.start.copy(O),c.end.copy(Y),c.delta(a);const q=E?f.start:f.end,K=bh(m.distanceToPoint(O));if(bh(m.normal.dot(a))&&K){f.copy(c),S=2;break}if((m.intersectLine(c,q)||K)&&!bh(q.distanceTo(Y))){if(S++,E)break;E=!0}}if(S===1&&this.containsPoint(f.end))return p&&(p.start.copy(f.end),p.end.copy(f.end)),!0;if(S!==2)return!1;if(u.delta(o),f.delta(a),o.dot(a)<0){let N=f.start;f.start=f.end,f.end=N}const M=u.start.dot(o),b=u.end.dot(o),B=f.start.dot(o),T=f.end.dot(o),k=b<B,D=M<T;return M!==T&&B!==b&&k===D?!1:(p&&(l.subVectors(u.start,f.start),l.dot(o)>0?p.start.copy(u.start):p.start.copy(f.start),l.subVectors(u.end,f.end),l.dot(o)<0?p.end.copy(u.end):p.end.copy(f.end)),!0)}}}();hl.prototype.distanceToPoint=function(){const t=new F;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();hl.prototype.distanceToTriangle=function(){const t=new F,e=new F,n=["a","b","c"],i=new Uo,r=new Uo;return function(o,a=null,l=null){const c=a||l?i:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let f=0;f<3;f++){let h;const d=n[f],p=o[d];this.closestPointToPoint(p,t),h=p.distanceToSquared(t),h<u&&(u=h,a&&a.copy(t),l&&l.copy(p));const m=this[d];o.closestPointToPoint(m,t),h=m.distanceToSquared(t),h<u&&(u=h,a&&a.copy(m),l&&l.copy(t))}for(let f=0;f<3;f++){const h=n[f],d=n[(f+1)%3];i.set(this[h],this[d]);for(let p=0;p<3;p++){const m=n[p],A=n[(p+1)%3];r.set(o[m],o[A]),qI(i,r,t,e);const v=t.distanceToSquared(e);v<u&&(u=v,a&&a.copy(t),l&&l.copy(e))}}return Math.sqrt(u)}}();class xa extends Sn{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new Ne,this.invMatrix=new Ne,this.points=new Array(8).fill().map(()=>new F),this.satAxes=new Array(3).fill().map(()=>new F),this.satBounds=new Array(3).fill().map(()=>new ya),this.alignedSatBounds=new Array(3).fill().map(()=>new ya),this.needsUpdate=!1}set(e,n,i){super.set(e,n),this.matrix.copy(i),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}}xa.prototype.update=function(){return function(){const e=this.matrix,n=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let f=0;f<=1;f++){const h=1*c|2*u|4*f,d=r[h];d.x=c?i.x:n.x,d.y=u?i.y:n.y,d.z=f?i.z:n.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=r[0];for(let c=0;c<3;c++){const u=o[c],f=s[c],h=1<<c,d=r[h];u.subVectors(a,d),f.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();xa.prototype.intersectsBox=function(){const t=new ya;return function(n){this.needsUpdate&&this.update();const i=n.min,r=n.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(t.min=i.x,t.max=r.x,a[0].isSeparated(t)||(t.min=i.y,t.max=r.y,a[1].isSeparated(t))||(t.min=i.z,t.max=r.z,a[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(t.setFromBox(c,n),u.isSeparated(t))return!1}return!0}}();xa.prototype.intersectsTriangle=function(){const t=new hl,e=new Array(3),n=new ya,i=new ya,r=new F;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(t.copy(o),t.update(),o=t);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let h=0;h<3;h++){const d=a[h],p=l[h];if(n.setFromPoints(p,e),d.isSeparated(n))return!1}const c=o.satBounds,u=o.satAxes,f=this.points;for(let h=0;h<3;h++){const d=c[h],p=u[h];if(n.setFromPoints(p,f),d.isSeparated(n))return!1}for(let h=0;h<3;h++){const d=l[h];for(let p=0;p<4;p++){const m=u[p];if(r.crossVectors(d,m),n.setFromPoints(r,e),i.setFromPoints(r,f),n.isSeparated(i))return!1}}return!0}}();xa.prototype.closestPointToPoint=function(){return function(e,n){return this.needsUpdate&&this.update(),n.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n}}();xa.prototype.distanceToPoint=function(){const t=new F;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();xa.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new Uo),n=new Array(12).fill().map(()=>new Uo),i=new F,r=new F;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=a*a,f=o.min,h=o.max,d=this.points;let p=1/0;for(let A=0;A<8;A++){const v=d[A];r.copy(v).clamp(f,h);const y=v.distanceToSquared(r);if(y<p&&(p=y,l&&l.copy(v),c&&c.copy(r),y<u))return Math.sqrt(y)}let m=0;for(let A=0;A<3;A++)for(let v=0;v<=1;v++)for(let y=0;y<=1;y++){const x=(A+1)%3,w=(A+2)%3,E=v<<x|y<<w,S=1<<A|v<<x|y<<w,M=d[E],b=d[S];e[m].set(M,b);const T=t[A],k=t[x],D=t[w],N=n[m],O=N.start,Y=N.end;O[T]=f[T],O[k]=v?f[k]:h[k],O[D]=y?f[D]:h[k],Y[T]=h[T],Y[k]=v?f[k]:h[k],Y[D]=y?f[D]:h[k],m++}for(let A=0;A<=1;A++)for(let v=0;v<=1;v++)for(let y=0;y<=1;y++){r.x=A?h.x:f.x,r.y=v?h.y:f.y,r.z=y?h.z:f.z,this.closestPointToPoint(r,i);const x=r.distanceToSquared(i);if(x<p&&(p=x,l&&l.copy(i),c&&c.copy(r),x<u))return Math.sqrt(x)}for(let A=0;A<12;A++){const v=e[A];for(let y=0;y<12;y++){const x=n[y];qI(v,x,i,r);const w=i.distanceToSquared(r);if(w<p&&(p=w,l&&l.copy(i),c&&c.copy(r),w<u))return Math.sqrt(w)}}return Math.sqrt(p)}}();const WA=new F,jA=new F,qA=new F,iF=new Ae,rF=new Ae,sF=new Ae,oF=new F;function bAe(t,e,n,i,r,s){let o;return s===Er?o=t.intersectTriangle(i,n,e,!0,r):o=t.intersectTriangle(e,n,i,s!==bi,r),o===null?null:{distance:t.origin.distanceTo(r),point:r.clone()}}function SAe(t,e,n,i,r,s,o){WA.fromBufferAttribute(e,i),jA.fromBufferAttribute(e,r),qA.fromBufferAttribute(e,s);const a=bAe(t,WA,jA,qA,oF,o);if(a){n&&(iF.fromBufferAttribute(n,i),rF.fromBufferAttribute(n,r),sF.fromBufferAttribute(n,s),a.uv=_r.getUV(oF,WA,jA,qA,iF,rF,sF,new Ae));const l={a:i,b:r,c:s,normal:new F,materialIndex:0};_r.getNormal(WA,jA,qA,l.normal),a.face=l,a.faceIndex=i}return a}function N9(t,e,n,i,r){const s=i*3,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),c=SAe(n,t.attributes.position,t.attributes.uv,o,a,l,e);return c?(c.faceIndex=i,r&&r.push(c),c):null}function CAe(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)N9(t,e,n,o,s)}function MAe(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){const c=N9(t,e,n,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function aF(t,e,n){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far)?null:t}function ua(t,e,n,i){const r=t.a,s=t.b,o=t.c;let a=e,l=e+1,c=e+2;n&&(a=n.getX(e),l=n.getX(e+1),c=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function lF(t,e,n,i,r,s,o){const a=n.index,l=n.attributes.position;for(let c=t,u=e+t;c<u;c++)if(ua(o,c*3,a,l),o.needsUpdate=!0,i(o,c,r,s))return!0;return!1}class z9{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function Ja(t,e){return e[t+15]===65535}function Hu(t,e){return e[t+6]}function Fd(t,e){return e[t+14]}function Qm(t){return t+8}function kd(t,e){return e[t+6]}function G9(t,e){return e[t+7]}const $h=new Sn,U_=new F,IAe=["x","y","z"];function SC(t,e,n,i,r){let s=t*2,o=a0,a=gc,l=Ac;if(Ja(s,a)){const u=Hu(t,l),f=Fd(s,a);CAe(e,n,i,u,f,r)}else{const u=Qm(t);N_(u,o,i,U_)&&SC(u,e,n,i,r);const f=kd(t,l);N_(f,o,i,U_)&&SC(f,e,n,i,r)}}function CC(t,e,n,i){let r=t*2,s=a0,o=gc,a=Ac;if(Ja(r,o)){const c=Hu(t,a),u=Fd(r,o);return MAe(e,n,i,c,u)}else{const c=G9(t,a),u=IAe[c],h=i.direction[u]>=0;let d,p;h?(d=Qm(t),p=kd(t,a)):(d=kd(t,a),p=Qm(t));const A=N_(d,s,i,U_)?CC(d,e,n,i):null;if(A){const x=A.point[u];if(h?x<=s[p+c]:x>=s[p+c+3])return A}const y=N_(p,s,i,U_)?CC(p,e,n,i):null;return A&&y?A.distance<=y.distance?A:y:A||y||null}}const TAe=function(){let t,e;const n=[],i=new z9(()=>new Sn);return function(...o){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);const a=r(...o);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();const l=n.length;return l>0&&(e=n[l-1],t=n[l-2]),a};function r(s,o,a,l,c=null,u=0,f=0){function h(x){let w=x*2,E=gc,S=Ac;for(;!Ja(w,E);)x=Qm(x),w=x*2;return Hu(x,S)}function d(x){let w=x*2,E=gc,S=Ac;for(;!Ja(w,E);)x=kd(x,S),w=x*2;return Hu(x,S)+Fd(w,E)}let p=s*2,m=a0,A=gc,v=Ac;if(Ja(p,A)){const x=Hu(s,v),w=Fd(p,A);return pa(s,m,t),l(x,w,!1,f,u+s,t)}else{const x=Qm(s),w=kd(s,v);let E=x,S=w,M,b,B,T;if(c&&(B=t,T=e,pa(E,m,B),pa(S,m,T),M=c(B),b=c(T),b<M)){E=w,S=x;const K=M;M=b,b=K,B=T}B||(B=t,pa(E,m,B));const k=Ja(E*2,A),D=a(B,k,M,f+1,u+E);let N;if(D===$L){const K=h(E),U=d(E)-K;N=l(K,U,!0,f+1,u+E,B)}else N=D&&r(E,o,a,l,c,u,f+1);if(N)return!0;T=e,pa(S,m,T);const O=Ja(S*2,A),Y=a(T,O,b,f+1,u+S);let q;if(Y===$L){const K=h(S),U=d(S)-K;q=l(K,U,!0,f+1,u+S,T)}else q=Y&&r(S,o,a,l,c,u,f+1);return!!q}}}(),BAe=function(){const t=new hl,e=new hl,n=new Ne,i=new xa,r=new xa;return function s(o,a,l,c,u=null){let f=o*2,h=a0,d=gc,p=Ac;if(u===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),u=i),Ja(f,d)){const A=a,v=A.index,y=A.attributes.position,x=l.index,w=l.attributes.position,E=Hu(o,p),S=Fd(f,d);if(n.copy(c).invert(),l.boundsTree)return pa(o,h,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>r.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(c),b.b.applyMatrix4(c),b.c.applyMatrix4(c),b.needsUpdate=!0;for(let B=E*3,T=(S+E)*3;B<T;B+=3)if(ua(e,B,v,y),e.needsUpdate=!0,b.intersectsTriangle(e))return!0;return!1}});for(let M=E*3,b=S+E*3;M<b;M+=3){ua(t,M,v,y),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let B=0,T=x.count;B<T;B+=3)if(ua(e,B,x,w),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}else{const A=o+8,v=p[o+6];return pa(A,h,$h),!!(u.intersectsBox($h)&&s(A,a,l,c,u)||(pa(v,h,$h),u.intersectsBox($h)&&s(v,a,l,c,u)))}}}();function N_(t,e,n,i){return pa(t,e,$h),n.intersectBox($h,i)}const MC=[];let kv,a0,gc,Ac;function Mp(t){kv&&MC.push(kv),kv=t,a0=new Float32Array(t),gc=new Uint16Array(t),Ac=new Uint32Array(t)}function YA(){kv=null,a0=null,gc=null,Ac=null,MC.length&&Mp(MC.pop())}const HE=Symbol("skip tree generation"),VE=new Sn,WE=new Sn,Sh=new Ne,iu=new xa,up=new xa,fp=new F,XA=new F,RAe=new F,PAe=new F,DAe=new F,cF=new Sn,ia=new z9(()=>new hl);class fd{static serialize(e,n={}){if(n.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),fd.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});n={cloneBuffers:!0,...n};const i=e.geometry,r=e._roots,s=i.getIndex();let o;return n.cloneBuffers?o={roots:r.map(a=>a.slice()),index:s.array.slice()}:o={roots:r,index:s.array},o}static deserialize(e,n,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),fd.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};const{index:r,roots:s}=e,o=new fd(n,{...i,[HE]:!0});if(o._roots=s,i.setIndex){const a=n.getIndex();if(a===null){const l=new bt(e.index,1,!1);n.setIndex(l)}else a.array!==r&&(a.array.set(r),a.needsUpdate=!0)}return o}constructor(e,n={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n=Object.assign({strategy:O9,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[HE]:!1},n),n.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,n[HE]||(this._roots=yAe(e,n),!e.boundingBox&&n.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Sn))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=this.geometry,i=n.index.array,r=n.attributes.position;let s,o,a,l,c=0;const u=this._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,p=!1){const m=h*2;if(a[m+15]===bC){const v=o[h+6],y=a[m+14];let x=1/0,w=1/0,E=1/0,S=-1/0,M=-1/0,b=-1/0;for(let B=3*v,T=3*(v+y);B<T;B++){const k=i[B],D=r.getX(k),N=r.getY(k),O=r.getZ(k);D<x&&(x=D),D>S&&(S=D),N<w&&(w=N),N>M&&(M=N),O<E&&(E=O),O>b&&(b=O)}return l[h+0]!==x||l[h+1]!==w||l[h+2]!==E||l[h+3]!==S||l[h+4]!==M||l[h+5]!==b?(l[h+0]=x,l[h+1]=w,l[h+2]=E,l[h+3]=S,l[h+4]=M,l[h+5]=b,!0):!1}else{const v=h+8,y=o[h+6],x=v+d,w=y+d;let E=p,S=!1,M=!1;e?E||(S=e.has(x),M=e.has(w),E=!S&&!M):(S=!0,M=!0);const b=E||S,B=E||M;let T=!1;b&&(T=f(v,d,E));let k=!1;B&&(k=f(y,d,E));const D=T||k;if(D)for(let N=0;N<3;N++){const O=v+N,Y=y+N,q=l[O],K=l[O+3],z=l[Y],U=l[Y+3];l[h+N]=q<z?q:z,l[h+N+3]=K>U?K:U}return D}}}traverse(e,n=0){const i=this._roots[n],r=new Uint32Array(i),s=new Uint16Array(i);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===bC;if(u){const f=r[a+6],h=s[c+14];e(l,u,new Float32Array(i,a*4,6),f,h)}else{const f=a+Qu/4,h=r[a+6],d=r[a+7];e(l,u,new Float32Array(i,a*4,6),d)||(o(f,l+1),o(h,l+1))}}}raycast(e,n=Qo){const i=this._roots,r=this.geometry,s=[],o=n.isMaterial,a=Array.isArray(n),l=r.groups,c=o?n.side:n;for(let u=0,f=i.length;u<f;u++){const h=a?n[l[u].materialIndex].side:c,d=s.length;if(Mp(i[u]),SC(0,r,h,e,s),YA(),a){const p=l[u].materialIndex;for(let m=d,A=s.length;m<A;m++)s[m].face.materialIndex=p}}return s}raycastFirst(e,n=Qo){const i=this._roots,r=this.geometry,s=n.isMaterial,o=Array.isArray(n);let a=null;const l=r.groups,c=s?n.side:n;for(let u=0,f=i.length;u<f;u++){const h=o?n[l[u].materialIndex].side:c;Mp(i[u]);const d=CC(0,r,h,e);YA(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=l[u].materialIndex))}return a}intersectsGeometry(e,n){const i=this.geometry;let r=!1;for(const s of this._roots)if(Mp(s),r=BAe(0,i,e,n),YA(),r)break;return r}shapecast(e,n,i){const r=this.geometry;if(e instanceof Function){if(n){const h=n;n=(d,p,m,A)=>{const v=p*3;return h(d,v,v+1,v+2,m,A)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:n,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=ia.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:c}=e;if(l&&c){const h=l;l=(d,p,m,A,v)=>h(d,p,m,A,v)?!0:lF(d,p,r,c,m,A,s)}else l||(c?l=(h,d,p,m)=>lF(h,d,r,c,p,m,s):l=(h,d,p)=>p);let u=!1,f=0;for(const h of this._roots){if(Mp(h),u=TAe(0,r,a,l,o,f),YA(),u)break;f+=h.byteLength}return ia.releasePrimitive(s),u}bvhcast(e,n,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,c=e.geometry.attributes.position;Sh.copy(n).invert();const u=ia.getPrimitive(),f=ia.getPrimitive();if(s){let d=function(p,m,A,v,y,x,w,E){for(let S=A,M=A+v;S<M;S++){ua(f,S*3,l,c),f.a.applyMatrix4(n),f.b.applyMatrix4(n),f.c.applyMatrix4(n),f.needsUpdate=!0;for(let b=p,B=p+m;b<B;b++)if(ua(u,b*3,o,a),u.needsUpdate=!0,s(u,f,b,S,y,x,w,E))return!0}return!1};if(r){const p=r;r=function(m,A,v,y,x,w,E,S){return p(m,A,v,y,x,w,E,S)?!0:d(m,A,v,y,x,w,E,S)}}else r=d}e.getBoundingBox(WE),WE.applyMatrix4(n);const h=this.shapecast({intersectsBounds:d=>WE.intersectsBox(d),intersectsRange:(d,p,m,A,v,y)=>(VE.copy(y),VE.applyMatrix4(Sh),e.shapecast({intersectsBounds:x=>VE.intersectsBox(x),intersectsRange:(x,w,E,S,M)=>r(d,p,x,w,A,v,S,M)}))});return ia.releasePrimitive(u),ia.releasePrimitive(f),h}intersectsBox(e,n){return iu.set(e.min,e.max,n),iu.needsUpdate=!0,this.shapecast({intersectsBounds:i=>iu.intersectsBox(i),intersectsTriangle:i=>iu.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:n=>e.intersectsBox(n),intersectsTriangle:n=>n.intersectsSphere(e)})}closestPointToGeometry(e,n,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),iu.set(e.boundingBox.min,e.boundingBox.max,n),iu.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=ia.getPrimitive(),d=ia.getPrimitive();let p=XA,m=RAe,A=null,v=null;r&&(A=PAe,v=DAe);let y=1/0,x=null,w=null;return Sh.copy(n).invert(),up.matrix.copy(Sh),this.shapecast({boundsTraverseOrder:E=>iu.distanceToBox(E),intersectsBounds:(E,S,M)=>M<y&&M<o?(S&&(up.min.copy(E.min),up.max.copy(E.max),up.needsUpdate=!0),!0):!1,intersectsRange:(E,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:M=>up.distanceToBox(M),intersectsBounds:(M,b,B)=>B<y&&B<o,intersectsRange:(M,b)=>{for(let B=M*3,T=(M+b)*3;B<T;B+=3){ua(d,B,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let k=E*3,D=(E+S)*3;k<D;k+=3){ua(h,k,c,l),h.needsUpdate=!0;const N=h.distanceToTriangle(d,p,A);if(N<y&&(m.copy(p),v&&v.copy(A),y=N,x=k/3,w=B/3),N<s)return!0}}}});{const M=f?f.count:u.count;for(let b=0,B=M;b<B;b+=3){ua(d,b,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let T=E*3,k=(E+S)*3;T<k;T+=3){ua(h,T,c,l),h.needsUpdate=!0;const D=h.distanceToTriangle(d,p,A);if(D<y&&(m.copy(p),v&&v.copy(A),y=D,x=T/3,w=b/3),D<s)return!0}}}}}),ia.releasePrimitive(h),ia.releasePrimitive(d),y===1/0?null:(i.point?i.point.copy(m):i.point=m.clone(),i.distance=y,i.faceIndex=x,r&&(r.point?r.point.copy(v):r.point=v.clone(),r.point.applyMatrix4(Sh),m.applyMatrix4(Sh),r.distance=m.sub(r.point).length(),r.faceIndex=w),i)}closestPointToPoint(e,n={},i=0,r=1/0){const s=i*i,o=r*r;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:u=>(fp.copy(e).clamp(u.min,u.max),fp.distanceToSquared(e)),intersectsBounds:(u,f,h)=>h<a&&h<o,intersectsTriangle:(u,f)=>{u.closestPointToPoint(e,fp);const h=e.distanceToSquared(fp);return h<a&&(XA.copy(fp),a=h,l=f),h<s}}),a===1/0)return null;const c=Math.sqrt(a);return n.point?n.point.copy(XA):n.point=XA.clone(),n.distance=c,n.faceIndex=l,n}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{pa(0,new Float32Array(i),cF),e.union(cF)}),e}}const jE=new Ho,uF=new Ne,LAe=$e.prototype.raycast;function FAe(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;uF.copy(this.matrixWorld).invert(),jE.copy(t.ray).applyMatrix4(uF);const n=this.geometry.boundsTree;if(t.firstHitOnly===!0){const i=aF(n.raycastFirst(jE,this.material),this,t);i&&e.push(i)}else{const i=n.raycast(jE,this.material);for(let r=0,s=i.length;r<s;r++){const o=aF(i[r],this,t);o&&e.push(o)}}}else LAe.call(this,t,e)}function kAe(t){return this.boundsTree=new fd(this,t),this.boundsTree}function OAe(){this.boundsTree=null}function UAe(t){switch(t){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function NAe(t){switch(t){case 1:return wu;case 2:return Eu;case 3:return Fn;case 4:return Fn}}function fF(t){switch(t){case 1:return a3;case 2:return by;case 3:return wm;case 4:return wm}}class Q9 extends Oo{constructor(){super(),this.minFilter=vn,this.magFilter=vn,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const n=this.overrideItemSize,i=e.itemSize,r=e.count;if(n!==null){if(i*r%n!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=n,e.count=r*i/n}const s=e.itemSize,o=e.count,a=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT;let u=this._forcedType,f=s;if(u===null)switch(l){case Float32Array:u=Qn;break;case Uint8Array:case Uint16Array:case Uint32Array:u=Es;break;case Int8Array:case Int16Array:case Int32Array:u=Np;break}let h,d,p,m,A=UAe(s);switch(u){case Qn:p=1,d=NAe(s),a&&c===1?(m=l,A+="8",l===Uint8Array?h=er:(h=v_,A+="_SNORM")):(m=Float32Array,A+="32F",h=Qn);break;case Np:A+=c*8+"I",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=fF(s),c===1?(m=Int8Array,h=v_):c===2?(m=Int16Array,h=o3):(m=Int32Array,h=Np);break;case Es:A+=c*8+"UI",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=fF(s),c===1?(m=Uint8Array,h=er):c===2?(m=Uint16Array,h=_f):(m=Uint32Array,h=Es);break}f===3&&(d===Fn||d===wm)&&(f=4);const v=Math.ceil(Math.sqrt(o)),y=f*v*v,x=new m(y);for(let w=0;w<o;w++){const E=f*w;x[E]=e.getX(w)/p,s>=2&&(x[E+1]=e.getY(w)/p),s>=3&&(x[E+2]=e.getZ(w)/p,f===4&&(x[E+3]=1)),s>=4&&(x[E+3]=e.getW(w)/p)}this.internalFormat=A,this.format=d,this.type=h,this.image.width=v,this.image.height=v,this.image.data=x,this.needsUpdate=!0,this.dispose(),e.itemSize=i,e.count=r}}class zAe extends Q9{constructor(){super(),this._forcedType=Es}}class GAe extends Q9{constructor(){super(),this._forcedType=Qn}}function QAe(t,e,n){const i=t._roots;if(i.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const r=i[0],s=new Uint16Array(r),o=new Uint32Array(r),a=new Float32Array(r),l=r.byteLength/Qu,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),f=Math.ceil(Math.sqrt(l)),h=new Uint32Array(2*f*f);for(let d=0;d<l;d++){const p=d*Qu/4,m=p*2,A=p;for(let v=0;v<3;v++)u[8*d+0+v]=a[A+0+v],u[8*d+4+v]=a[A+3+v];if(Ja(m,s)){const v=Fd(m,s),y=Hu(p,o),x=4294901760|v;h[d*2+0]=x,h[d*2+1]=y}else{const v=4*kd(p,o)/Qu,y=G9(p,o);h[d*2+0]=y,h[d*2+1]=v}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=Fn,e.type=Qn,e.internalFormat="RGBA32F",e.minFilter=vn,e.magFilter=vn,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),n.image.data=h,n.image.width=f,n.image.height=f,n.format=by,n.type=Es,n.internalFormat="RG32UI",n.minFilter=vn,n.magFilter=vn,n.generateMipmaps=!1,n.needsUpdate=!0,n.dispose()}class HAe{constructor(){this.autoDispose=!0,this.index=new zAe,this.position=new GAe,this.bvhBounds=new Oo,this.bvhContents=new Oo,this.index.overrideItemSize=3}updateFrom(e){const{geometry:n}=e;QAe(e,this.bvhBounds,this.bvhContents),this.index.updateFrom(n.index),this.position.updateFrom(n.attributes.position)}dispose(){const{index:e,position:n,bvhBounds:i,bvhContents:r}=this;e&&e.dispose(),n&&n.dispose(),i&&i.dispose(),r&&r.dispose()}}const VAe=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};

// Note that a struct cannot be used for the hit record including faceIndices, faceNormal, barycoord,
// side, and dist because on some mobile GPUS (such as Adreno) numbers are afforded less precision specifically
// when in a struct leading to inaccurate hit results. See KhronosGroup/WebGL#3351 for more details.
`,WAe=`

uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}

`;function jAe(t,e){R.exports.useEffect(()=>{if(t.current){t.current.raycast=FAe;const n=t.current.geometry;return n.computeBoundsTree=kAe,n.disposeBoundsTree=OAe,n.computeBoundsTree(e),()=>{n.boundsTree&&n.disposeBoundsTree()}}},[t,e])}function qAe(...t){const e=R.exports.useRef([]);return e.current=t.map(n=>R.exports.useContext(n)),R.exports.useMemo(()=>({children:n})=>t.reduceRight((i,r,s)=>$(r.Provider,{value:e.current[s],children:i}),n),[])}function YAe(t,e){const n=R.exports.useRef(),[i]=R.exports.useState(()=>e?e instanceof It?{current:e}:e:n),[r]=R.exports.useState(()=>new VU(void 0)),s=R.exports.useRef({}),[o]=R.exports.useState(()=>{const a={};return t.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))}})),{ref:i,clips:t,actions:a,names:t.map(l=>l.name),mixer:r}});return Ct((a,l)=>r.update(l)),R.exports.useEffect(()=>{const a=i.current;return()=>{s.current={},Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[t]),o}function XAe(t){const e=R.exports.useRef(null),n=R.exports.useRef(!1),i=R.exports.useRef(!1),r=R.exports.useRef(t);return R.exports.useLayoutEffect(()=>void(r.current=t),[t]),R.exports.useEffect(()=>{const s=e.current;if(s){const o=$y(()=>(n.current=!1,!0)),a=s.onBeforeRender;s.onBeforeRender=()=>n.current=!0;const l=q3(()=>(n.current!==i.current&&(r.current==null||r.current(i.current=n.current)),!0));return()=>{s.onBeforeRender=a,o(),l()}}},[]),e}const JAe=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,KAe=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,$Ae=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,ZAe=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function eve(t,e,n){t.defines.BOX_PROJECTED_ENV_MAP=!0,t.uniforms.envMapPosition={value:e},t.uniforms.envMapSize={value:n},t.vertexShader=`
  varying vec3 vWorldPosition;
  ${t.vertexShader.replace("#include <worldpos_vertex>",JAe)}`,t.fragmentShader=`
    ${KAe}
    ${t.fragmentShader.replace("#include <envmap_physical_pars_fragment>",vt.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${$Ae}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${ZAe}
        `)}`}function tve(t=new F,e=new F){const[n]=R.exports.useState(()=>({position:new F,size:new F}));Ss(n,{position:t,size:e});const i=R.exports.useRef(null),r=R.exports.useMemo(()=>({ref:i,onBeforeCompile:s=>eve(s,n.position,n.size),customProgramCacheKey:()=>JSON.stringify(n.position.toArray())+JSON.stringify(n.size.toArray())}),[...n.position.toArray(),...n.size.toArray()]);return R.exports.useLayoutEffect(()=>void(i.current.needsUpdate=!0),[n]),r}const hF=new Sn,JA=new F,nve=({anchor:t,...e})=>{const n=R.exports.useRef(null),i=R.exports.useRef(null);return R.exports.useEffect(()=>{var r,s;(r=n.current)!=null&&(s=r.parent)!=null&&s.parent&&(i.current=n.current.parent,n.current.parent.parent.add(n.current))},[]),Ct(()=>{i.current&&(hF.setFromObject(i.current),hF.getSize(JA),n.current.position.set(i.current.position.x+JA.x*t[0]/2,i.current.position.y+JA.y*t[1]/2,i.current.position.z+JA.z*t[2]/2))}),$("group",{ref:n,...e})},ive=R.exports.forwardRef(({children:t,curve:e},n)=>{const[i]=R.exports.useState(()=>new ml),[r,s]=R.exports.useState(),o=R.exports.useRef();return R.exports.useEffect(()=>{o.current=new yde(i.children[0]),s(o.current.object3D)},[t]),R.exports.useEffect(()=>{var a;e&&((a=o.current)==null||a.updateCurve(0,e))},[e]),R.exports.useImperativeHandle(n,()=>({moveAlongCurve:a=>{var l;(l=o.current)==null||l.moveAlongCurve(a)}})),it(Sr,{children:[e0(t,i),r&&$("primitive",{object:r})]})});var rve=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class sve extends Ea{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${rve}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const ove=R.exports.forwardRef(({speed:t=1,...e},n)=>{const[i]=R.exports.useState(()=>new sve);return Ct(r=>i&&(i.time=r.clock.getElapsedTime()*t)),$("primitive",{object:i,ref:n,attach:"material",...e})});class ave extends Ic{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const lve=R.exports.forwardRef(({speed:t=1,...e},n)=>{const[i]=R.exports.useState(()=>new ave);return Ct(r=>i&&(i.time=r.clock.getElapsedTime()*t)),$("primitive",{object:i,ref:n,attach:"material",...e})});class cve extends $n{constructor(e=new Ae){super({uniforms:{inputBuffer:new mr(null),depthBuffer:new mr(null),resolution:new mr(new Ae),texelSize:new mr(new Ae),halfTexelSize:new mr(new Ae),kernel:new mr(0),scale:new mr(1),cameraNear:new mr(0),cameraFar:new mr(1),minDepthThreshold:new mr(0),maxDepthThreshold:new mr(1),depthScale:new mr(0),depthToBlurRatioBias:new mr(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <encodings_fragment>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:Aa,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,n){this.uniforms.texelSize.value.set(e,n),this.uniforms.halfTexelSize.value.set(e,n).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class H9{constructor({gl:e,resolution:n,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new kn(n,n,{minFilter:Wt,magFilter:Wt,stencilBuffer:!1,depthBuffer:!1,encoding:e.outputEncoding}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new cve,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Ae(i,r)),this.scene=new ml,this.camera=new yf,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=a>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),f=new ht;f.setAttribute("position",new bt(c,3)),f.setAttribute("uv",new bt(u,2)),this.screen=new $e(f,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,n,i){const r=this.scene,s=this.camera,o=this.renderTargetA,a=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=n.depthTexture;const u=l.kernel;let f=n,h,d,p;for(d=0,p=u.length-1;d<p;++d)h=(d&1)===0?o:a,c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(h),e.render(r,s),f=h;c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}class V9 extends Ic{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var n;(n=e.defines)!=null&&n.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}}Vr({MeshReflectorMaterialImpl:V9});const uve=R.exports.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:n=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:a=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:f,reflectorOffset:h=0,...d},p)=>{const m=Me(({gl:H})=>H),A=Me(({camera:H})=>H),v=Me(({scene:H})=>H);i=Array.isArray(i)?i:[i,i];const y=i[0]+i[1]>0,x=R.exports.useRef(null),[w]=R.exports.useState(()=>new Zr),[E]=R.exports.useState(()=>new F),[S]=R.exports.useState(()=>new F),[M]=R.exports.useState(()=>new F),[b]=R.exports.useState(()=>new Ne),[B]=R.exports.useState(()=>new F(0,0,-1)),[T]=R.exports.useState(()=>new Pt),[k]=R.exports.useState(()=>new F),[D]=R.exports.useState(()=>new F),[N]=R.exports.useState(()=>new Pt),[O]=R.exports.useState(()=>new Ne),[Y]=R.exports.useState(()=>new dn),q=R.exports.useCallback(()=>{var H;const V=x.current.parent||((H=x.current)==null?void 0:H.__r3f.parent);if(!V||(S.setFromMatrixPosition(V.matrixWorld),M.setFromMatrixPosition(A.matrixWorld),b.extractRotation(V.matrixWorld),E.set(0,0,1),E.applyMatrix4(b),S.addScaledVector(E,h),k.subVectors(S,M),k.dot(E)>0))return;k.reflect(E).negate(),k.add(S),b.extractRotation(A.matrixWorld),B.set(0,0,-1),B.applyMatrix4(b),B.add(M),D.subVectors(S,B),D.reflect(E).negate(),D.add(S),Y.position.copy(k),Y.up.set(0,1,0),Y.up.applyMatrix4(b),Y.up.reflect(E),Y.lookAt(D),Y.far=A.far,Y.updateMatrixWorld(),Y.projectionMatrix.copy(A.projectionMatrix),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(Y.projectionMatrix),O.multiply(Y.matrixWorldInverse),O.multiply(V.matrixWorld),w.setFromNormalAndCoplanarPoint(E,S),w.applyMatrix4(Y.matrixWorldInverse),T.set(w.normal.x,w.normal.y,w.normal.z,w.constant);const J=Y.projectionMatrix;N.x=(Math.sign(T.x)+J.elements[8])/J.elements[0],N.y=(Math.sign(T.y)+J.elements[9])/J.elements[5],N.z=-1,N.w=(1+J.elements[10])/J.elements[14],T.multiplyScalar(2/T.dot(N)),J.elements[2]=T.x,J.elements[6]=T.y,J.elements[10]=T.z+1,J.elements[14]=T.w},[A,h]),[K,z,U,Q]=R.exports.useMemo(()=>{const H={minFilter:Wt,magFilter:Wt,encoding:m.outputEncoding,type:pi},V=new kn(n,n,H);V.depthBuffer=!0,V.depthTexture=new rg(n,n),V.depthTexture.format=ko,V.depthTexture.type=_f;const J=new kn(n,n,H),j=new H9({gl:m,resolution:n,width:i[0],height:i[1],minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a}),re={mirror:l,textureMatrix:O,mixBlur:t,tDiffuse:V.texture,tDepth:V.depthTexture,tDiffuseBlur:J.texture,hasBlur:y,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a,distortion:c,distortionMap:f,mixContrast:u,"defines-USE_BLUR":y?"":void 0,"defines-USE_DEPTH":o>0?"":void 0,"defines-USE_DISTORTION":f?"":void 0};return[V,J,j,re]},[m,i,O,n,l,y,t,e,r,s,o,a,c,f,u]);return Ct(()=>{var H;const V=x.current.parent||((H=x.current)==null?void 0:H.__r3f.parent);if(!V)return;V.visible=!1;const J=m.xr.enabled,j=m.shadowMap.autoUpdate;q(),m.xr.enabled=!1,m.shadowMap.autoUpdate=!1,m.setRenderTarget(K),m.state.buffers.depth.setMask(!0),m.autoClear||m.clear(),m.render(v,Y),y&&U.render(m,K,z),m.xr.enabled=J,m.shadowMap.autoUpdate=j,V.visible=!0,m.setRenderTarget(null)}),$("meshReflectorMaterialImpl",{attach:"material",ref:jn([x,p]),...Q,...d},"key"+Q["defines-USE_BLUR"]+Q["defines-USE_DEPTH"]+Q["defines-USE_DISTORTION"])}),fve=i0({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new HAe,color:new ze("white"),resolution:new Ae},`
  #ifndef USE_COLOR
    uniform vec3 color;
  #endif
  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 projectionMatrixInv;
  varying mat4 viewMatrixInv;
  varying vec3 viewDirection;
  varying mat4 vInstanceMatrix;
  varying vec3 vColor;
  
  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      vInstanceMatrix = instanceMatrix;
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #else
      vInstanceMatrix = mat4(1.0);
    #endif

    vColor = color;
    #ifdef USE_INSTANCING_COLOR
      vColor *= instanceColor.rgb;
    #endif
  
    projectionMatrixInv = inverse(projectionMatrix);
    viewMatrixInv = inverse(viewMatrix);
  
    vWorldPosition = (modelMatrix * transformedPosition).xyz;    
    vNormal = (viewMatrixInv * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz;
    viewDirection = normalize(vWorldPosition - cameraPosition);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${VAe}
  ${WAe}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
    
  uniform float aberrationStrength;
  varying mat4 projectionMatrixInv;
  varying mat4 viewMatrixInv;
  varying vec3 viewDirection;  
  varying mat4 vInstanceMatrix;
  varying vec3 vColor;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    mat4 modelMatrixInverse = inverse(modelMatrix * vInstanceMatrix);
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInv * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInv * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), modelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), modelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), modelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB) * vColor;
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), modelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
      finalColor *= vColor;
    #endif
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }`),hve=t=>t&&t.isCubeTexture;function dve({aberrationStrength:t=0,fastChroma:e=!0,envMap:n,...i}){Vr({MeshRefractionMaterial:fve});const r=R.exports.useRef(),{size:s}=Me(),o=R.exports.useMemo(()=>{var a,l;const c={},u=hve(n),h=((a=u?(l=n.image[0])==null?void 0:l.width:n.image.width)!==null&&a!==void 0?a:1024)/4,d=Math.floor(Math.log2(h)),p=Math.pow(2,d),m=3*Math.max(p,16*7),A=4*p;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/m}`,c.CUBEUV_TEXEL_HEIGHT=`${1/A}`,c.CUBEUV_MAX_MIP=`${d}.0`,t>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[t,e]);return R.exports.useLayoutEffect(()=>{var a,l,c;const u=(a=r.current)==null||(l=a.__r3f)==null||(c=l.parent)==null?void 0:c.geometry;u&&r.current.bvh.updateFrom(new fd(u.toNonIndexed(),{lazyGeneration:!1,strategy:U9}))},[]),$("meshRefractionMaterial",{defines:o,ref:r,resolution:[s.width,s.height],aberrationStrength:t,envMap:n,...i},JSON.stringify(o))}class W9 extends og{constructor(e){super(e),this.onBeforeCompile=(n,i)=>{const{isWebGL2:r}=i.capabilities;n.fragmentShader=n.fragmentShader.replace("#include <output_fragment>",`
        ${r?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      `)}}}const pve=R.exports.forwardRef((t,e)=>{const[n]=R.exports.useState(()=>new W9(null));return $("primitive",{...t,object:n,ref:e,attach:"material"})}),mve=({frustum:t=3.75,size:e=.005,near:n=9.5,samples:i=17,rings:r=11}={})=>`#define LIGHT_WORLD_SIZE ${e}
#define LIGHT_FRUSTUM_WIDTH ${t}
#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)
#define NEAR_PLANE ${n}

#define NUM_SAMPLES ${i}
#define NUM_RINGS ${r}
#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES
#define PCF_NUM_SAMPLES NUM_SAMPLES

vec2 poissonDisk[NUM_SAMPLES];

void initPoissonSamples(const in vec2 randomSeed) {
  float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);
  float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);
  float angle = rand(randomSeed) * PI2;
  float radius = INV_NUM_SAMPLES;
  float radiusStep = radius;
  for (int i = 0; i < NUM_SAMPLES; i++) {
    poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);
    radius += radiusStep;
    angle += ANGLE_STEP;
  }
}

float penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}

float findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {
  float searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;
  float blockerDepthSum = 0.0;
  int numBlockers = 0;
  for (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {
    float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));
    if (shadowMapDepth < zReceiver) {
      blockerDepthSum += shadowMapDepth;
      numBlockers++;
    }
  }
  if (numBlockers == 0) return -1.0;
  return blockerDepthSum / float(numBlockers);
}

float PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {
  float sum = 0.0;
  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {
    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));
    if (zReceiver <= depth) sum += 1.0;
  }
  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {
    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));
    if (zReceiver <= depth) sum += 1.0;
  }
  return sum / (2.0 * float(PCF_NUM_SAMPLES));
}

float PCSS(sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  initPoissonSamples(uv);
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);
  if (avgBlockerDepth == -1.0) return 1.0;
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  float filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;
  return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);
}`;let dF=!1;const gve=t=>{if(!dF){dF=!0;let e=vt.shadowmap_pars_fragment;e=e.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+mve({...t})),e=e.replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),vt.shadowmap_pars_fragment=e}};function Qi(t){const e=t+"Geometry";return R.exports.forwardRef(({args:n,children:i,...r},s)=>it("mesh",{ref:s,...r,children:[$(e,{attach:"geometry",args:n}),i]}))}const Ave=Qi("box"),vve=Qi("circle"),_ve=Qi("cone"),yve=Qi("cylinder"),xve=Qi("sphere"),j9=Qi("plane"),wve=Qi("tube"),Eve=Qi("torus"),bve=Qi("torusKnot"),Sve=Qi("tetrahedron"),Cve=Qi("ring"),Mve=Qi("polyhedron"),Ive=Qi("icosahedron"),Tve=Qi("octahedron"),Bve=Qi("dodecahedron"),Rve=Qi("extrude"),Pve=Qi("lathe"),Dve=Qi("capsule"),sa=1e-5;function Lve(t,e,n){const i=new pc,r=n-sa;return i.absarc(sa,sa,sa,-Math.PI/2,-Math.PI,!0),i.absarc(sa,e-r*2,sa,Math.PI,Math.PI/2,!0),i.absarc(t-r*2,e-r*2,sa,Math.PI/2,0,!0),i.absarc(t-r*2,sa,sa,0,-Math.PI/2,!0),i}const Fve=R.exports.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,children:a,...l},c){const u=R.exports.useMemo(()=>Lve(e,n,r),[e,n,r]),f=R.exports.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:o*2,steps:s,bevelSize:r-sa,bevelThickness:r,curveSegments:o}),[i,r,o]),h=R.exports.useRef();return R.exports.useLayoutEffect(()=>{h.current&&h.current.center()},[u,f]),it("mesh",{ref:c,...l,children:[$("extrudeGeometry",{ref:h,args:[u,f]}),a]})});function kve(){const t=new ht,e=new Float32Array([-1,-1,3,-1,-1,3]);return t.setAttribute("position",new bt(e,2)),t}const Ove=R.exports.forwardRef(function({children:e,...n},i){const r=R.exports.useMemo(kve,[]);return $("mesh",{ref:i,geometry:r,frustumCulled:!1,...n,children:e})}),Uve=R.exports.forwardRef(function({children:e,left:n,right:i,top:r,bottom:s,front:o,back:a,onCentered:l,precise:c=!0,...u},f){const h=R.exports.useRef(null),d=R.exports.useRef(null),p=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{d.current.matrixWorld.identity();const m=new Sn().setFromObject(p.current,c),A=new F,v=new zi,y=m.max.x-m.min.x,x=m.max.y-m.min.y,w=m.max.z-m.min.z;m.getCenter(A),m.getBoundingSphere(v);const E=r?x/2:s?-x/2:0,S=n?-y/2:i?y/2:0,M=o?w/2:a?-w/2:0;d.current.position.set(-A.x+S,-A.y+E,-A.z+M),typeof l<"u"&&l({parent:h.current.parent,container:h.current,width:y,height:x,depth:w,boundingBox:m,boundingSphere:v,center:A,verticalAlignment:E,horizontalAlignment:S,depthAlignment:M})},[e]),R.exports.useImperativeHandle(f,()=>h.current,[]),$("group",{ref:h,...u,children:$("group",{ref:d,children:$("group",{ref:p,children:e})})})}),Ch=t=>t&&t.isOrthographicCamera,Nve=t=>t&&t.isBox3,q9=R.exports.createContext(null);function zve({children:t,damping:e=6,fit:n,clip:i,observe:r,margin:s=1.2,eps:o=.01,onFit:a}){const l=R.exports.useRef(null),{camera:c,invalidate:u,size:f,controls:h}=Me(),d=h,p=R.exports.useRef(a);p.current=a;function m(S,M){return Math.abs(S.x-M.x)<o&&Math.abs(S.y-M.y)<o&&Math.abs(S.z-M.z)<o}function A(S,M,b,B){S.x=ut.damp(S.x,M.x,b,B),S.y=ut.damp(S.y,M.y,b,B),S.z=ut.damp(S.z,M.z,b,B)}const[v]=R.exports.useState(()=>({animating:!1,focus:new F,camera:new F,zoom:1})),[y]=R.exports.useState(()=>({focus:new F,camera:new F,zoom:1})),[x]=R.exports.useState(()=>new Sn),w=R.exports.useMemo(()=>{function S(){const M=x.getSize(new F),b=x.getCenter(new F),B=Math.max(M.x,M.y,M.z),T=Ch(c)?B*4:B/(2*Math.atan(Math.PI*c.fov/360)),k=Ch(c)?B*4:T/c.aspect,D=s*Math.max(T,k);return{box:x,size:M,center:b,distance:D}}return{getSize:S,refresh(M){if(Nve(M))x.copy(M);else{const b=M||l.current;b.updateWorldMatrix(!0,!0),x.setFromObject(b)}if(x.isEmpty()){const b=c.position.length()||10;x.setFromCenterAndSize(new F,new F(b,b,b))}if((d==null?void 0:d.constructor.name)==="OrthographicTrackballControls"){const{distance:b}=S(),B=c.position.clone().sub(d.target).normalize().multiplyScalar(b),T=d.target.clone().add(B);c.position.copy(T)}return this},clip(){const{distance:M}=S();return d&&(d.maxDistance=M*10),c.near=M/100,c.far=M*100,c.updateProjectionMatrix(),d&&d.update(),u(),this},fit(){v.camera.copy(c.position),d&&v.focus.copy(d.target);const{center:M,distance:b}=S(),B=M.clone().sub(c.position).normalize().multiplyScalar(b);if(y.camera.copy(M).sub(B),y.focus.copy(M),Ch(c)){v.zoom=c.zoom;let T=0,k=0;const D=[new F(x.min.x,x.min.y,x.min.z),new F(x.min.x,x.max.y,x.min.z),new F(x.min.x,x.min.y,x.max.z),new F(x.min.x,x.max.y,x.max.z),new F(x.max.x,x.max.y,x.max.z),new F(x.max.x,x.max.y,x.min.z),new F(x.max.x,x.min.y,x.max.z),new F(x.max.x,x.min.y,x.min.z)];M.applyMatrix4(c.matrixWorldInverse);for(const Y of D)Y.applyMatrix4(c.matrixWorldInverse),T=Math.max(T,Math.abs(Y.y-M.y)),k=Math.max(k,Math.abs(Y.x-M.x));T*=2,k*=2;const N=(c.top-c.bottom)/T,O=(c.right-c.left)/k;y.zoom=Math.min(N,O)/s,e||(c.zoom=y.zoom,c.updateProjectionMatrix())}return e?v.animating=!0:(c.position.copy(y.camera),c.lookAt(y.focus),d&&(d.target.copy(y.focus),d.update())),p.current&&p.current(this.getSize()),u(),this}}},[x,c,d,s,e,u]);R.exports.useLayoutEffect(()=>{if(d){const S=()=>v.animating=!1;return d.addEventListener("start",S),()=>d.removeEventListener("start",S)}},[d]);const E=R.exports.useRef(0);return R.exports.useLayoutEffect(()=>{(r||E.current++===0)&&(w.refresh(),n&&w.fit(),i&&w.clip())},[f,i,n,r,c,d]),Ct((S,M)=>{if(v.animating){if(A(v.focus,y.focus,e,M),A(v.camera,y.camera,e,M),v.zoom=ut.damp(v.zoom,y.zoom,e,M),c.position.copy(v.camera),Ch(c)&&(c.zoom=v.zoom,c.updateProjectionMatrix()),d?(d.target.copy(v.focus),d.update()):c.lookAt(v.focus),u(),Ch(c)&&!(Math.abs(v.zoom-y.zoom)<o)||!Ch(c)&&!m(v.camera,y.camera)||d&&!m(v.focus,y.focus))return;v.animating=!1}}),R.exports.createElement("group",{ref:l},R.exports.createElement(q9.Provider,{value:w},t))}function Gve(){return R.exports.useContext(q9)}const Qve=R.exports.forwardRef(({intensity:t=1,decay:e,decayRate:n=.65,maxYaw:i=.1,maxPitch:r=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1},c)=>{const u=Me(y=>y.camera),f=Me(y=>y.controls),h=R.exports.useRef(t),d=R.exports.useRef(u.rotation.clone()),[p]=R.exports.useState(()=>new _E),[m]=R.exports.useState(()=>new _E),[A]=R.exports.useState(()=>new _E),v=()=>{(h.current<0||h.current>1)&&(h.current=h.current<0?0:1)};return R.exports.useImperativeHandle(c,()=>({getIntensity:()=>h.current,setIntensity:y=>{h.current=y,v()}}),[]),R.exports.useEffect(()=>{if(f){const y=()=>void(d.current=u.rotation.clone());return f.addEventListener("change",y),y(),()=>void f.removeEventListener("change",y)}},[u,f]),Ct((y,x)=>{const w=Math.pow(h.current,2),E=i*w*p.noise(y.clock.elapsedTime*o,1),S=r*w*m.noise(y.clock.elapsedTime*a,1),M=s*w*A.noise(y.clock.elapsedTime*l,1);u.rotation.set(d.current.x+S,d.current.y+E,d.current.z+M),e&&h.current>0&&(h.current-=n*x,v())}),null}),Hve=R.exports.forwardRef(({children:t,speed:e=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:r=[-.1,.1],...s},o)=>{const a=R.exports.useRef(null),l=R.exports.useRef(Math.random()*1e4);return Ct(c=>{var u,f;const h=l.current+c.clock.getElapsedTime();a.current.rotation.x=Math.cos(h/4*e)/8*n,a.current.rotation.y=Math.sin(h/4*e)/8*n,a.current.rotation.z=Math.sin(h/4*e)/20*n;let d=Math.sin(h/4*e)/10;d=ut.mapLinear(d,-.1,.1,(u=r==null?void 0:r[0])!==null&&u!==void 0?u:-.1,(f=r==null?void 0:r[1])!==null&&f!==void 0?f:.1),a.current.position.y=d*i}),$("group",{...s,children:$("group",{ref:jn([a,o]),children:t})})}),qE={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},Vve="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",Wve=t=>t.current&&t.current.isScene,YI=t=>Wve(t)?t.current:t;function vx({scene:t,background:e=!1,map:n}){const i=Me(r=>r.scene);return R.exports.useLayoutEffect(()=>{if(n){const r=YI(t||i),s=r.background,o=r.environment;return e!=="only"&&(r.environment=n),e&&(r.background=n),()=>{e!=="only"&&(r.environment=o),e&&(r.background=s)}}},[i,t,n,e]),null}function XI({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:i=void 0,extensions:r}){if(n){if(!(n in qE))throw new Error("Preset must be one of: "+Object.keys(qE).join(", "));t=qE[n],e=Vve}const s=Array.isArray(t),a=Mi(s?Fy:gpe,s?[t]:t,c=>{c.setPath(e),r&&r(c)}),l=s?a[0]:a;return l.mapping=s?ll:ef,l.encoding=(i!=null?i:s)?Nt:Ps,l}function JI({background:t=!1,scene:e,...n}){const i=XI(n),r=Me(s=>s.scene);return R.exports.useLayoutEffect(()=>{const s=YI(e||r),o=s.background,a=s.environment;return t!=="only"&&(s.environment=i),t&&(s.background=i),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o)}},[i,t,e,r]),null}function Y9({children:t,near:e=1,far:n=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,scene:a,files:l,path:c,preset:u=void 0,extensions:f}){const h=Me(y=>y.gl),d=Me(y=>y.scene),p=R.exports.useRef(null),[m]=R.exports.useState(()=>new ml),A=R.exports.useMemo(()=>{const y=new tg(i);return y.texture.type=pi,y},[i]);R.exports.useLayoutEffect(()=>{r===1&&p.current.update(h,m);const y=YI(a||d),x=y.background,w=y.environment;return o!=="only"&&(y.environment=A.texture),o&&(y.background=A.texture),()=>{o!=="only"&&(y.environment=w),o&&(y.background=x)}},[t,m,A.texture,a,d,o,r,h]);let v=1;return Ct(()=>{(r===1/0||v<r)&&(p.current.update(h,m),v++)}),$(Sr,{children:e0(it(Sr,{children:[t,$("cubeCamera",{ref:p,args:[e,n,A]}),l||u?$(JI,{background:!0,files:l,preset:u,path:c,extensions:f}):s?$(vx,{background:!0,map:s,extensions:f}):null]}),m)})}function jve(t){var e,n,i,r;const s=XI(t),o=t.map||s;R.exports.useMemo(()=>{Vr({GroundProjectedEnvImpl:Ode})},[]);const a=R.exports.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return it(Sr,{children:[$(vx,{...t,map:o}),$("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c})]})}function X9(t){return t.ground?$(jve,{...t}):t.map?$(vx,{...t}):t.children?$(Y9,{...t}):$(JI,{...t})}const J9=R.exports.forwardRef(({scale:t=10,frames:e=1/0,opacity:n=1,width:i=1,height:r=1,blur:s=1,far:o=10,resolution:a=512,smooth:l=!0,color:c="#000000",depthWrite:u=!1,renderOrder:f,...h},d)=>{const p=Me(T=>T.scene),m=Me(T=>T.gl),A=R.exports.useRef(null);i=i*(Array.isArray(t)?t[0]:t||1),r=r*(Array.isArray(t)?t[1]:t||1);const[v,y,x,w,E,S,M]=R.exports.useMemo(()=>{const T=new kn(a,a),k=new kn(a,a);k.texture.generateMipmaps=T.texture.generateMipmaps=!1;const D=new Nr(i,r).rotateX(Math.PI/2),N=new $e(D),O=new ig;O.depthTest=O.depthWrite=!1,O.onBeforeCompile=K=>{K.uniforms={...K.uniforms,ucolor:{value:new ze(c)}},K.fragmentShader=K.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),K.fragmentShader=K.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Y=new $n(R0e),q=new $n(P0e);return q.depthTest=Y.depthTest=!1,[T,D,O,N,Y,q,k]},[a,i,r,t,c]),b=T=>{w.visible=!0,w.material=E,E.uniforms.tDiffuse.value=v.texture,E.uniforms.h.value=T*1/256,m.setRenderTarget(M),m.render(w,A.current),w.material=S,S.uniforms.tDiffuse.value=M.texture,S.uniforms.v.value=T*1/256,m.setRenderTarget(v),m.render(w,A.current),w.visible=!1};let B=0;return Ct(()=>{if(A.current&&(e===1/0||B<e)){const T=p.background;p.background=null;const k=p.overrideMaterial;p.overrideMaterial=x,m.setRenderTarget(v),m.render(p,A.current),p.overrideMaterial=k,b(s),l&&b(s*.4),m.setRenderTarget(null),p.background=T,B++}}),it("group",{"rotation-x":Math.PI/2,...h,ref:d,children:[$("mesh",{renderOrder:f,geometry:y,scale:[1,-1,1],rotation:[-Math.PI/2,0,0],children:$("meshBasicMaterial",{map:v.texture,"map-encoding":m.outputEncoding,transparent:!0,opacity:n,depthWrite:u})}),$("orthographicCamera",{ref:A,args:[-i/2,i/2,r/2,-r/2,0,o]})]})}),qve={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function Yve({children:t,controls:e,shadows:n=!0,adjustCamera:i=!0,environment:r="city",intensity:s=1,preset:o="rembrandt",shadowBias:a=0,contactShadow:l={blur:2,opacity:.5,position:[0,0,0]},...c}){const u=qve[o],f=Me(x=>x.camera),h=Me(x=>x.controls),d=R.exports.useRef(null),p=R.exports.useRef(null),[{radius:m,width:A,height:v},y]=R.exports.useState({radius:0,width:0,height:0});return R.exports.useLayoutEffect(()=>{d.current.position.set(0,0,0),d.current.updateWorldMatrix(!0,!0);const x=new Sn().setFromObject(p.current),w=new F,E=new zi,S=x.max.y-x.min.y,M=x.max.x-x.min.x;x.getCenter(w),x.getBoundingSphere(E),y({radius:E.radius,width:M,height:S}),d.current.position.set(-w.x,-w.y+S/2,-w.z)},[t]),R.exports.useLayoutEffect(()=>{if(i){const x=m/(v>A?1.5:2.5);f.position.set(0,m*.5,m*2.5),f.near=.1,f.far=Math.max(5e3,m*4),f.lookAt(0,x,0);const w=h||(e==null?void 0:e.current);w&&(w.target.set(0,x,0),w.update())}},[h,m,v,A,i]),it("group",{...c,children:[$("group",{ref:d,children:$("group",{ref:p,children:t})}),l&&$(J9,{scale:m*2,far:m/2,...l}),r&&$(X9,{preset:r}),$("ambientLight",{intensity:s/3}),$("spotLight",{penumbra:1,position:[u.main[0]*m,u.main[1]*m,u.main[2]*m],intensity:s*2,castShadow:n,"shadow-bias":a}),$("pointLight",{position:[u.fill[0]*m,u.fill[1]*m,u.fill[2]*m],intensity:s})]})}const Xve=t=>t===0?0:Math.pow(2,10*t-10);function Jve({children:t,floor:e=.25,segments:n=20,receiveShadow:i,...r}){const s=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{let o=0;const a=n/n/2,l=s.current.attributes.position;for(let c=0;c<n+1;c++)for(let u=0;u<n+1;u++)l.setXYZ(o++,c/n-a+(c===0?-e:0),u/n-a,Xve(c/n));l.needsUpdate=!0,s.current.computeVertexNormals()},[n,e]),$("group",{...r,children:it("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2],children:[$("planeGeometry",{ref:s,args:[1,1,n,n]}),t]})})}const Kve=R.exports.forwardRef(({fog:t=!1,renderOrder:e,depthWrite:n=!1,colorStop:i=0,color:r="black",opacity:s=.5,...o},a)=>{const l=R.exports.useMemo(()=>{const c=document.createElement("canvas");c.width=128,c.height=128;const u=c.getContext("2d"),f=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return f.addColorStop(i,new ze(r).getStyle()),f.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=f,u.fillRect(0,0,c.width,c.height),c},[r,i]);return it("mesh",{renderOrder:e,ref:a,"rotation-x":-Math.PI/2,...o,children:[$("planeGeometry",{}),$("meshBasicMaterial",{transparent:!0,opacity:s,fog:t,depthWrite:n,side:bi,children:$("canvasTexture",{attach:"map",args:[l]})})]})});function $ve(t){return t.isLight}function Zve(t){return!!t.geometry}const KI=R.exports.createContext(null),e_e=i0({color:new ze,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),t_e=i0({},"void main() { gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }","void main() { discard; }"),n_e=R.exports.forwardRef(({children:t,temporal:e,frames:n=40,limit:i=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:f=!0,...h},d)=>{Vr({SoftShadowMaterial:e_e});const p=Me(E=>E.gl),m=Me(E=>E.scene),A=Me(E=>E.camera),v=R.exports.useRef(null),y=R.exports.useRef(null),[x]=R.exports.useState(()=>new r_e(p,m,u));R.exports.useLayoutEffect(()=>{x.configure(v.current)},[]);const w=R.exports.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?r:n),count:0,getMesh:()=>v.current,reset:()=>{x.clear();const E=v.current.material;E.opacity=0,E.alphaTest=0,w.count=0},update:(E=1)=>{const S=v.current.material;w.temporal?(S.opacity=Math.min(o,S.opacity+o/w.blend),S.alphaTest=Math.min(a,S.alphaTest+a/w.blend)):(S.opacity=o,S.alphaTest=a),y.current.visible=!0,x.prepare();for(let M=0;M<E;M++)w.lights.forEach(b=>b.update()),x.update(A,w.blend);y.current.visible=!1,x.finish()}}),[x,A,m,e,n,r,o,a]);return R.exports.useLayoutEffect(()=>{w.reset(),!w.temporal&&w.frames!==1/0&&w.update(w.blend)}),R.exports.useImperativeHandle(d,()=>w,[w]),Ct(()=>{(w.temporal||w.frames===1/0)&&w.count<w.frames&&w.count<i&&(w.update(),w.count++)}),R.exports.createElement("group",h,R.exports.createElement("group",{traverse:()=>null,ref:y},R.exports.createElement(KI.Provider,{value:w},t)),it("mesh",{receiveShadow:!0,ref:v,scale:s,rotation:[-Math.PI/2,0,0],children:[$("planeGeometry",{}),$("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:l,blend:c,map:x.progressiveLightMap2.texture})]}))}),i_e=R.exports.forwardRef(({castShadow:t=!0,bias:e=.001,mapSize:n=512,size:i=5,near:r=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=1,ambient:f=.5,...h},d)=>{const p=R.exports.useRef(null),m=new F(...a).length(),A=R.exports.useContext(KI),v=R.exports.useCallback(()=>{let x;if(p.current)for(let w=0;w<p.current.children.length;w++)if(x=p.current.children[w],Math.random()>f)x.position.set(a[0]+ut.randFloatSpread(l),a[1]+ut.randFloatSpread(l),a[2]+ut.randFloatSpread(l));else{let E=Math.acos(2*Math.random()-1)-Math.PI/2,S=2*Math.PI*Math.random();x.position.set(Math.cos(E)*Math.cos(S)*m,Math.abs(Math.cos(E)*Math.sin(S)*m),Math.sin(E)*m)}},[l,f,m,...a]),y=R.exports.useMemo(()=>({update:v}),[v]);return R.exports.useImperativeHandle(d,()=>y,[y]),R.exports.useLayoutEffect(()=>{const x=p.current;return A&&A.lights.set(x.uuid,y),()=>void A.lights.delete(x.uuid)},[A,y]),$("group",{ref:p,...h,children:Array.from({length:c},(x,w)=>$("directionalLight",{castShadow:t,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:u/c,children:$("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,r,s]})},w))})});class r_e{constructor(e,n,i=1024){this.renderer=e,this.res=i,this.scene=n,this.scene.background=null,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null;const r=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?pi:Qn;this.progressiveLightMap1=new kn(this.res,this.res,{type:r,encoding:e.outputEncoding}),this.progressiveLightMap2=new kn(this.res,this.res,{type:r,encoding:e.outputEncoding}),this.discardMat=new t_e,this.targetMat=new ad({shininess:0}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=s.fragmentShader.replace("#include <clipping_planes_pars_fragment>",`#include <clipping_planes_pars_fragment>
#include <shadowmask_pars_fragment>
`),s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`	uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.lights=[],this.meshes=[],this.scene.traverse(e=>{Zve(e)?this.meshes.push({object:e,material:e.material}):$ve(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1;this.renderer.setRenderTarget(i),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null)}}Vr({MeshReflectorMaterial:V9});const s_e=R.exports.forwardRef(({mixBlur:t=0,mixStrength:e=.5,resolution:n=256,blur:i=[0,0],args:r=[1,1],minDepthThreshold:s=.9,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:c=0,children:u,debug:f=0,distortion:h=1,mixContrast:d=1,distortionMap:p,...m},A)=>{R.exports.useEffect(()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const v=Me(({gl:J})=>J),y=Me(({camera:J})=>J),x=Me(({scene:J})=>J);i=Array.isArray(i)?i:[i,i];const w=i[0]+i[1]>0,E=R.exports.useRef(null),[S]=R.exports.useState(()=>new Zr),[M]=R.exports.useState(()=>new F),[b]=R.exports.useState(()=>new F),[B]=R.exports.useState(()=>new F),[T]=R.exports.useState(()=>new Ne),[k]=R.exports.useState(()=>new F(0,0,-1)),[D]=R.exports.useState(()=>new Pt),[N]=R.exports.useState(()=>new F),[O]=R.exports.useState(()=>new F),[Y]=R.exports.useState(()=>new Pt),[q]=R.exports.useState(()=>new Ne),[K]=R.exports.useState(()=>new dn),z=R.exports.useCallback(()=>{if(b.setFromMatrixPosition(E.current.matrixWorld),B.setFromMatrixPosition(y.matrixWorld),T.extractRotation(E.current.matrixWorld),M.set(0,0,1),M.applyMatrix4(T),N.subVectors(b,B),N.dot(M)>0)return;N.reflect(M).negate(),N.add(b),T.extractRotation(y.matrixWorld),k.set(0,0,-1),k.applyMatrix4(T),k.add(B),O.subVectors(b,k),O.reflect(M).negate(),O.add(b),K.position.copy(N),K.up.set(0,1,0),K.up.applyMatrix4(T),K.up.reflect(M),K.lookAt(O),K.far=y.far,K.updateMatrixWorld(),K.projectionMatrix.copy(y.projectionMatrix),q.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),q.multiply(K.projectionMatrix),q.multiply(K.matrixWorldInverse),q.multiply(E.current.matrixWorld),S.setFromNormalAndCoplanarPoint(M,b),S.applyMatrix4(K.matrixWorldInverse),D.set(S.normal.x,S.normal.y,S.normal.z,S.constant);const J=K.projectionMatrix;Y.x=(Math.sign(D.x)+J.elements[8])/J.elements[0],Y.y=(Math.sign(D.y)+J.elements[9])/J.elements[5],Y.z=-1,Y.w=(1+J.elements[10])/J.elements[14],D.multiplyScalar(2/D.dot(Y)),J.elements[2]=D.x,J.elements[6]=D.y,J.elements[10]=D.z+1,J.elements[14]=D.w},[]),[U,Q,H,V]=R.exports.useMemo(()=>{const J={minFilter:Wt,magFilter:Wt,encoding:v.outputEncoding},j=new kn(n,n,J);j.depthBuffer=!0,j.depthTexture=new rg(n,n),j.depthTexture.format=ko,j.depthTexture.type=_f;const re=new kn(n,n,J),ee=new H9({gl:v,resolution:n,width:i[0],height:i[1],minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l}),ae={mirror:c,textureMatrix:q,mixBlur:t,tDiffuse:j.texture,tDepth:j.depthTexture,tDiffuseBlur:re.texture,hasBlur:w,mixStrength:e,minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l,transparent:!0,debug:f,distortion:h,distortionMap:p,mixContrast:d,"defines-USE_BLUR":w?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":p?"":void 0};return[j,re,ee,ae]},[v,i,q,n,c,w,t,e,s,o,a,l,f,h,p,d]);return Ct(()=>{if(!(E!=null&&E.current))return;E.current.visible=!1;const J=v.xr.enabled,j=v.shadowMap.autoUpdate;z(),v.xr.enabled=!1,v.shadowMap.autoUpdate=!1,v.setRenderTarget(U),v.state.buffers.depth.setMask(!0),v.autoClear||v.clear(),v.render(x,K),w&&H.render(v,U,Q),v.xr.enabled=J,v.shadowMap.autoUpdate=j,E.current.visible=!0,v.setRenderTarget(null)}),it("mesh",{ref:jn([E,A]),...m,children:[$("planeGeometry",{args:r}),u?u("meshReflectorMaterial",V):$("meshReflectorMaterial",{...V})]})});class o_e extends $n{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new F(0,0,0)},lightColor:{value:new ze("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new Ae(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const pF=new F,a_e=R.exports.forwardRef(({opacity:t=1,radiusTop:e,radiusBottom:n,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,...c},u)=>{const f=R.exports.useRef(null),h=Me(v=>v.size),d=Me(v=>v.camera),p=Me(v=>v.viewport.dpr),[m]=R.exports.useState(()=>new o_e);e=e===void 0?.1:e,n=n===void 0?o*7:n,Ct(()=>{m.uniforms.spotPosition.value.copy(f.current.getWorldPosition(pF)),f.current.lookAt(f.current.parent.target.getWorldPosition(pF))});const A=R.exports.useMemo(()=>{const v=new xi(e,n,s,128,64,!0);return v.applyMatrix4(new Ne().makeTranslation(0,-s/2,0)),v.applyMatrix4(new Ne().makeRotationX(-Math.PI/2)),v},[o,s,e,n]);return $("spotLight",{ref:u,angle:o,color:r,distance:s,...c,children:$("mesh",{ref:f,geometry:A,raycast:()=>null,children:$("primitive",{object:m,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":r,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":i,"uniforms-cameraNear-value":d.near,"uniforms-cameraFar-value":d.far,"uniforms-resolution-value":i?[h.width*p,h.height*p]:[0,0]})})})}),l_e=R.exports.forwardRef(({args:t,map:e,toneMapped:n=!1,color:i="white",form:r="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const f=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{!l&&!c.material&&(Ss(f.current.material,{color:i}),f.current.material.color.multiplyScalar(s))},[i,s,l,c.material]),R.exports.useLayoutEffect(()=>{a&&f.current.lookAt(Array.isArray(a)?new F(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,it("mesh",{ref:jn([f,u]),scale:o,...c,children:[r==="circle"?$("ringGeometry",{args:[0,1,64]}):r==="ring"?$("ringGeometry",{args:[.5,1,64]}):r==="rect"?$("planeGeometry",{}):$(r,{args:t}),l||(c.material?null:$("meshBasicMaterial",{toneMapped:n,map:e,side:bi}))]})});function K9(t,e,n=new F){const i=Math.PI*(t-.5),r=2*Math.PI*(e-.5);return n.x=Math.cos(r),n.y=Math.sin(i),n.z=Math.sin(r),n}const c_e=R.exports.forwardRef(({inclination:t=.6,azimuth:e=.1,distance:n=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=K9(t,e),...l},c)=>{const u=R.exports.useMemo(()=>new F().setScalar(n),[n]),[f]=R.exports.useState(()=>new rc);return $("primitive",{object:f,ref:c,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u,...l})});class u_e extends $n{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const f_e=t=>new F().setFromSpherical(new Dm(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),h_e=R.exports.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=R.exports.useRef(),[c,u,f]=R.exports.useMemo(()=>{const d=[],p=[],m=Array.from({length:n},()=>(.5+.5*Math.random())*r),A=new ze;let v=t+e;const y=e/n;for(let x=0;x<n;x++)v-=y*Math.random(),d.push(...f_e(v).toArray()),A.setHSL(x/n,i,.9),p.push(A.r,A.g,A.b);return[new Float32Array(d),new Float32Array(p),new Float32Array(m)]},[n,e,r,t,i]);Ct(d=>l.current&&(l.current.uniforms.time.value=d.clock.getElapsedTime()*o));const[h]=R.exports.useState(()=>new u_e);return it("points",{ref:a,children:[it("bufferGeometry",{children:[$("bufferAttribute",{attach:"attributes-position",args:[c,3]}),$("bufferAttribute",{attach:"attributes-color",args:[u,3]}),$("bufferAttribute",{attach:"attributes-size",args:[f,1]})]}),$("primitive",{ref:l,object:h,attach:"material",blending:g_,"uniforms-fade-value":s,transparent:!0,vertexColors:!0})]})}),d_e="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png";function p_e({opacity:t=.5,speed:e=.4,width:n=10,depth:i=1.5,segments:r=20,texture:s=d_e,color:o="#ffffff",depthTest:a=!0,...l}){const c=Me(d=>d.gl),u=R.exports.useRef(),f=If(s),h=R.exports.useMemo(()=>[...new Array(r)].map((d,p)=>({x:n/2-Math.random()*n,y:n/2-Math.random()*n,scale:.4+Math.sin((p+1)/r*Math.PI)*((.2+Math.random())*10),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*e})),[n,r,e]);return Ct(d=>{var p;return(p=u.current)==null?void 0:p.children.forEach((m,A)=>{m.children[0].rotation.z+=h[A].rotation,m.children[0].scale.setScalar(h[A].scale+(1+Math.sin(d.clock.getElapsedTime()/10))/2*A/10)})}),$("group",{...l,children:$("group",{position:[0,0,r/2*i],ref:u,children:h.map(({x:d,y:p,scale:m,density:A},v)=>$(Zz,{position:[d,p,-v*i],children:$(j9,{scale:m,rotation:[0,0,0],children:$("meshStandardMaterial",{map:f,"map-encoding":c.outputEncoding,transparent:!0,opacity:m/6*A*t,depthTest:a,color:o})})},v))})})}var m_e=`#define GLSLIFY 1
varying vec3 vColor;varying float vOpacity;void main(){float distanceToCenter=distance(gl_PointCoord,vec2(0.5));float strength=0.05/distanceToCenter-0.1;gl_FragColor=vec4(vColor,strength*vOpacity);}`,g_e=`#define GLSLIFY 1
uniform float pixelRatio;uniform float time;attribute float size;attribute float speed;attribute float opacity;attribute vec3 noise;attribute vec3 color;varying vec3 vColor;varying float vOpacity;void main(){vec4 modelPosition=modelMatrix*vec4(position,1.0);modelPosition.y+=sin(time*speed+modelPosition.x*noise.x*100.0)*0.2;modelPosition.z+=cos(time*speed+modelPosition.x*noise.y*100.0)*0.2;modelPosition.x+=cos(time*speed+modelPosition.x*noise.z*100.0)*0.2;vec4 viewPosition=viewMatrix*modelPosition;vec4 projectionPostion=projectionMatrix*viewPosition;gl_Position=projectionPostion;gl_PointSize=size*25.*pixelRatio;gl_PointSize*=(1.0/-viewPosition.z);vColor=color;vOpacity=opacity;}`;const A_e=i0({time:0,pixelRatio:1},g_e,m_e),$9=t=>t&&t.constructor===Float32Array,v_e=t=>[t.r,t.g,t.b],Z9=t=>t instanceof Ae||t instanceof F||t instanceof Pt,eG=t=>Array.isArray(t)?t:Z9(t)?t.toArray():[t,t,t];function hp(t,e,n){return R.exports.useMemo(()=>{if(e!==void 0){if($9(e))return e;if(e instanceof ze){const i=Array.from({length:t*3},()=>v_e(e)).flat();return Float32Array.from(i)}else if(Z9(e)||Array.isArray(e)){const i=Array.from({length:t*3},()=>eG(e)).flat();return Float32Array.from(i)}return Float32Array.from({length:t},()=>e)}return Float32Array.from({length:t},n)},[e])}const __e=R.exports.forwardRef(({noise:t=1,count:e=100,speed:n=1,opacity:i=1,scale:r=1,size:s,color:o,...a},l)=>{R.exports.useMemo(()=>Vr({SparklesMaterial:A_e}),[]);const c=R.exports.useRef(),u=Me(v=>v.viewport.dpr),f=R.exports.useMemo(()=>Float32Array.from(Array.from({length:e},()=>eG(r).map(ut.randFloatSpread)).flat()),[e,r]),h=hp(e,s,Math.random),d=hp(e,i),p=hp(e,n),m=hp(e*3,t),A=hp(o===void 0?e*3:e,$9(o)?o:new ze(o),()=>1);return Ct(v=>c.current.uniforms.time.value=v.clock.elapsedTime),it("points",{...a,ref:l,children:[it("bufferGeometry",{children:[$("bufferAttribute",{attach:"attributes-position",args:[f,3]}),$("bufferAttribute",{attach:"attributes-size",args:[h,1]}),$("bufferAttribute",{attach:"attributes-opacity",args:[d,1]}),$("bufferAttribute",{attach:"attributes-speed",args:[p,1]}),$("bufferAttribute",{attach:"attributes-color",args:[A,3]}),$("bufferAttribute",{attach:"attributes-noise",args:[m,3]})]}),$("sparklesMaterial",{ref:c,transparent:!0,pixelRatio:u,depthWrite:!1})]},`particle-${e}-${JSON.stringify(r)}`)});function y_e(t){switch(t){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const x_e="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",w_e="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function E_e(t=0,e=1024,n){const i=Sf(()=>fetch(x_e).then(u=>u.json()),["matcapList"]),r=i[0],s=R.exports.useMemo(()=>Object.keys(i).length,[]),a=`${R.exports.useMemo(()=>typeof t=="string"?t:typeof t=="number"?i[t]:null,[t])||r}${y_e(e)}.png`,l=`${w_e}/${e}/${a}`;return[If(l,n),l,s]}const b_e="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",S_e="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function C_e(t=0,e={},n){const{repeat:i=[1,1],anisotropy:r=1,offset:s=[0,0]}=e,o=Sf(()=>fetch(S_e).then(h=>h.json()),["normalsList"]),a=R.exports.useMemo(()=>Object.keys(o).length,[]),l=o[0],c=o[t]||l,u=`${b_e}/normals/${c}`,f=If(u,n);return R.exports.useLayoutEffect(()=>{!f||(f.wrapS=f.wrapT=Rs,f.repeat=new Ae(i[0],i[1]),f.offset=new Ae(s[0],s[1]),f.anisotropy=r)},[f,r,i,s]),[f,u,a]}const mF=new Ne,YE=new Ho,gF=new zi,XE=new F;class tG extends ts{constructor(){super(),this.size=0,this.color=new ze("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){var i,r;const s=this.instance.current;if(!s||!s.geometry)return;const o=s.userData.instances.indexOf(this.instanceKey);if(o===-1||o>s.geometry.drawRange.count)return;const a=(i=(r=e.params.Points)==null?void 0:r.threshold)!==null&&i!==void 0?i:1;if(gF.set(this.getWorldPosition(XE),a),e.ray.intersectsSphere(gF)===!1)return;mF.copy(s.matrixWorld).invert(),YE.copy(e.ray).applyMatrix4(mF);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=YE.distanceSqToPoint(XE);if(u<c){const f=new F;YE.closestPointToPoint(XE,f),f.applyMatrix4(this.matrixWorld);const h=e.ray.origin.distanceTo(f);if(h<e.near||h>e.far)return;n.push({distance:h,distanceToRay:Math.sqrt(u),point:f,index:o,face:null,object:this})}}}let ru,dp;const nG=R.exports.createContext(null),AF=new Ne,vF=new F,M_e=R.exports.forwardRef(({children:t,range:e,limit:n=1e3,...i},r)=>{const s=R.exports.useRef(null),[o,a]=R.exports.useState([]),[[l,c,u]]=R.exports.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);R.exports.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Ct(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),AF.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(n,e!==void 0?e:n,o.length),ru=0;ru<o.length;ru++)dp=o[ru].current,dp.getWorldPosition(vF).applyMatrix4(AF),vF.toArray(l,ru*3),s.current.geometry.attributes.position.needsUpdate=!0,dp.matrixWorldNeedsUpdate=!0,dp.color.toArray(c,ru*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([dp.size],ru),s.current.geometry.attributes.size.needsUpdate=!0});const f=R.exports.useMemo(()=>({getParent:()=>s,subscribe:h=>(a(d=>[...d,h]),()=>a(d=>d.filter(p=>p.current!==h.current)))}),[]);return R.exports.createElement("points",cf({userData:{instances:o},matrixAutoUpdate:!1,ref:jn([r,s]),raycast:()=>null},i),it("bufferGeometry",{children:[$("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:bs}),$("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:bs}),$("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:bs})]}),R.exports.createElement(nG.Provider,{value:f},t))}),I_e=R.exports.forwardRef(({children:t,...e},n)=>{R.exports.useMemo(()=>Vr({PositionPoint:tG}),[]);const i=R.exports.useRef(),{subscribe:r,getParent:s}=R.exports.useContext(nG);return R.exports.useLayoutEffect(()=>r(i),[]),$("positionPoint",{instance:s(),instanceKey:i,ref:jn([n,i]),...e,children:t})}),iG=R.exports.forwardRef(({children:t,positions:e,colors:n,sizes:i,stride:r=3,...s},o)=>{const a=R.exports.useRef(null);return Ct(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,n&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),it("points",{ref:jn([o,a]),...s,children:[it("bufferGeometry",{children:[$("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:bs}),n&&$("bufferAttribute",{attach:"attributes-color",count:n.length/r,array:n,itemSize:3,usage:bs}),i&&$("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:bs})]}),t]})}),T_e=R.exports.forwardRef((t,e)=>t.positions instanceof Float32Array?$(iG,{...t,ref:e}):$(M_e,{...t,ref:e}));var Dh={exports:{}},B_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",R_e=B_e,P_e=R_e;function rG(){}function sG(){}sG.resetWarningCache=rG;var D_e=function(){function t(i,r,s,o,a,l){if(l!==P_e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sG,resetWarningCache:rG};return n.PropTypes=n,n};Dh.exports=D_e();function oG(t){return aG(t.children,t.components)}oG.propTypes={children:Dh.exports.func.isRequired,components:Dh.exports.arrayOf(Dh.exports.oneOfType([Dh.exports.element,Dh.exports.func])).isRequired};function aG(t,e,n){if(n=n||[],!e[0])return t(n);function i(r){return aG(t,e.slice(1),n.concat([r]))}return typeof e[0]=="function"?e[0]({results:n,render:i}):R.exports.cloneElement(e[0],{children:i})}const _F=new Ne,yF=new Ne,KA=[],JE=new $e;class L_e extends ts{constructor(){super(),this.color=new ze("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;JE.geometry=i.geometry;const r=i.matrixWorld,s=i.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>i.count)){i.getMatrixAt(s,_F),yF.multiplyMatrices(r,_F),JE.matrixWorld=yF,JE.raycast(e,KA);for(let o=0,a=KA.length;o<a;o++){const l=KA[o];l.instanceId=s,l.object=this,n.push(l)}KA.length=0}}}const lG=R.exports.createContext(null),xF=new Ne,wF=new Ne,F_e=new Ne,EF=new F,bF=new St,SF=new F,cG=R.exports.forwardRef(({context:t,children:e,...n},i)=>{R.exports.useMemo(()=>Vr({PositionMesh:L_e}),[]);const r=R.exports.useRef(),{subscribe:s,getParent:o}=R.exports.useContext(t||lG);return R.exports.useLayoutEffect(()=>s(r),[]),$("positionMesh",{instance:o(),instanceKey:r,ref:jn([i,r]),...n,children:e})}),uG=R.exports.forwardRef(({children:t,range:e,limit:n=1e3,frames:i=1/0,...r},s)=>{const[{context:o,instance:a}]=R.exports.useState(()=>{const A=R.exports.createContext(null);return{context:A,instance:R.exports.forwardRef((v,y)=>$(cG,{context:A,...v,ref:y}))}}),l=R.exports.useRef(null),[c,u]=R.exports.useState([]),[[f,h]]=R.exports.useState(()=>{const A=new Float32Array(n*16);for(let v=0;v<n;v++)F_e.identity().toArray(A,v*16);return[A,new Float32Array([...new Array(n*3)].map(()=>1))]});R.exports.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let d=0,p=0;Ct(()=>{if(i===1/0||d<i){l.current.updateMatrix(),l.current.updateMatrixWorld(),xF.copy(l.current.matrixWorld).invert(),p=Math.min(n,e!==void 0?e:n,c.length),l.current.count=p,l.current.instanceMatrix.updateRange.count=p*16,l.current.instanceColor.updateRange.count=p*3;for(let A=0;A<c.length;A++){const v=c[A].current;v.matrixWorld.decompose(EF,bF,SF),wF.compose(EF,bF,SF).premultiply(xF),wF.toArray(f,A*16),l.current.instanceMatrix.needsUpdate=!0,v.color.toArray(h,A*3),l.current.instanceColor.needsUpdate=!0}d++}});const m=R.exports.useMemo(()=>({getParent:()=>l,subscribe:A=>(u(v=>[...v,A]),()=>u(v=>v.filter(y=>y.current!==A.current)))}),[]);return it("instancedMesh",{userData:{instances:c},matrixAutoUpdate:!1,ref:jn([s,l]),args:[null,null,0],raycast:()=>null,...r,children:[$("instancedBufferAttribute",{attach:"instanceMatrix",count:f.length/16,array:f,itemSize:16,usage:bs}),$("instancedBufferAttribute",{attach:"instanceColor",count:h.length/3,array:h,itemSize:3,usage:bs}),typeof t=="function"?R.exports.createElement(o.Provider,{value:m},t(a)):R.exports.createElement(lG.Provider,{value:m},t)]})}),k_e=R.exports.forwardRef(function({meshes:e,children:n,...i},r){const s=Array.isArray(e);if(!s)for(const o of Object.keys(e))e[o].isMesh||delete e[o];return $("group",{ref:r,children:$(oG,{components:(s?e:Object.values(e)).map(({geometry:o,material:a})=>$(uG,{geometry:o,material:a,...i},o.uuid)),children:o=>s?n(...o):n(Object.keys(e).filter(a=>e[a].isMesh).reduce((a,l,c)=>({...a,[l]:o[c]}),{}))})})}),fG=R.exports.createContext(null),O_e=R.exports.forwardRef((t,e)=>{R.exports.useMemo(()=>Vr({SegmentObject:hG}),[]);const{limit:n=1e3,lineWidth:i=1,children:r,...s}=t,[o,a]=R.exports.useState([]),[l]=R.exports.useState(()=>new Kz),[c]=R.exports.useState(()=>new hx),[u]=R.exports.useState(()=>new PI),[f]=R.exports.useState(()=>new Ae(512,512)),[h]=R.exports.useState(()=>Array(n*6).fill(0)),[d]=R.exports.useState(()=>Array(n*6).fill(0)),p=R.exports.useMemo(()=>({subscribe:m=>(a(A=>[...A,m]),()=>a(A=>A.filter(v=>v.current!==m.current)))}),[]);return Ct(()=>{for(let A=0;A<n;A++){var m;const v=(m=o[A])==null?void 0:m.current;v&&(h[A*6+0]=v.start.x,h[A*6+1]=v.start.y,h[A*6+2]=v.start.z,h[A*6+3]=v.end.x,h[A*6+4]=v.end.y,h[A*6+5]=v.end.z,d[A*6+0]=v.color.r,d[A*6+1]=v.color.g,d[A*6+2]=v.color.b,d[A*6+3]=v.color.r,d[A*6+4]=v.color.g,d[A*6+5]=v.color.b)}u.setColors(d),u.setPositions(h),l.computeLineDistances()}),R.exports.createElement("primitive",{object:l,ref:e},$("primitive",{object:u,attach:"geometry"}),$("primitive",{object:c,attach:"material",vertexColors:!0,resolution:f,linewidth:i,...s}),R.exports.createElement(fG.Provider,{value:p},r))});class hG{constructor(){this.color=new ze("white"),this.start=new F(0,0,0),this.end=new F(0,0,0)}}const CF=t=>t instanceof F?t:new F(...typeof t=="number"?[t,t,t]:t),U_e=R.exports.forwardRef(({color:t,start:e,end:n},i)=>{const r=R.exports.useContext(fG);if(!r)throw"Segment must used inside Segments component.";const s=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>r.subscribe(s),[]),$("segmentObject",{ref:jn([s,i]),color:t,start:CF(e),end:CF(n)})}),N_e=R.exports.forwardRef(({children:t,distances:e,...n},i)=>{const r=R.exports.useRef(null);return R.exports.useLayoutEffect(()=>{const{current:s}=r;s.levels.length=0,s.children.forEach((o,a)=>s.levels.push({object:o,distance:e[a]}))}),Ct(s=>{var o;return(o=r.current)==null?void 0:o.update(s.camera)}),$("lOD",{ref:jn([r,i]),...n,children:t})});function z_e({all:t,scene:e,camera:n}){const i=Me(({gl:o})=>o),r=Me(({camera:o})=>o),s=Me(({scene:o})=>o);return R.exports.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,n||r);const a=new tg(128);new g3(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function G_e(){const t=Me(e=>e.gl);return R.exports.useEffect(()=>(t.shadowMap.autoUpdate=!1,t.shadowMap.needsUpdate=!0,()=>{t.shadowMap.autoUpdate=t.shadowMap.needsUpdate=!0}),[t.shadowMap]),null}const MF=new Ne,IF=new Ho,KE=new zi,$E=new F;function Q_e(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),KE.copy(n.boundingSphere),KE.applyMatrix4(r),t.ray.intersectsSphere(KE)!==!1&&(MF.copy(r).invert(),IF.copy(t.ray).applyMatrix4(MF),!(n.boundingBox!==null&&IF.intersectBox(n.boundingBox,$E)===null)&&e.push({distance:$E.distanceTo(t.ray.origin),point:$E.clone(),object:this})))}function H_e({pixelated:t}){const e=Me(o=>o.gl),n=Me(o=>o.internal.active),i=Me(o=>o.performance.current),r=Me(o=>o.viewport.initialDpr),s=Me(o=>o.setDpr);return R.exports.useEffect(()=>{const o=e.domElement;return()=>{n&&s(r),t&&o&&(o.style.imageRendering="auto")}},[]),R.exports.useEffect(()=>{s(i*r),t&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function V_e(){const t=Me(i=>i.get),e=Me(i=>i.setEvents),n=Me(i=>i.performance.current);return R.exports.useEffect(()=>{const i=t().events.enabled;return()=>e({enabled:i})},[]),R.exports.useEffect(()=>e({enabled:n===1}),[n]),null}const dG=R.exports.createContext(null);function W_e({iterations:t=10,ms:e=250,threshold:n=.75,step:i=.1,factor:r=.5,flipflops:s=1/0,bounds:o=h=>h>100?[60,100]:[40,60],onIncline:a,onDecline:l,onChange:c,onFallback:u,children:f}){const h=Math.pow(10,0),[d,p]=R.exports.useState(()=>({fps:0,index:0,factor:r,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:A=>{const v=Symbol();return d.subscriptions.set(v,A.current),()=>void d.subscriptions.delete(v)}}));let m=0;return Ct(()=>{const{frames:A,averages:v}=d;if(!d.fallback&&v.length<t){A.push(performance.now());const y=A[A.length-1]-A[0];if(y>=e){if(d.fps=Math.round(A.length/y*1e3*h)/h,d.refreshrate=Math.max(d.refreshrate,d.fps),v[d.index++%t]=d.fps,v.length===t){const[x,w]=o(d.refreshrate),E=v.filter(M=>M>=w),S=v.filter(M=>M<x);E.length>t*n&&(d.factor=Math.min(1,d.factor+i),d.flipped++,a&&a(d),d.subscriptions.forEach(M=>M.onIncline&&M.onIncline(d))),S.length>t*n&&(d.factor=Math.max(0,d.factor-i),d.flipped++,l&&l(d),d.subscriptions.forEach(M=>M.onDecline&&M.onDecline(d))),m!==d.factor&&(m=d.factor,c&&c(d),d.subscriptions.forEach(M=>M.onChange&&M.onChange(d))),d.flipped>s&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(M=>M.onFallback&&M.onFallback(d))),d.averages=[]}d.frames=[]}}}),R.exports.createElement(dG.Provider,{value:d},f)}function j_e({onIncline:t,onDecline:e,onChange:n,onFallback:i}){const r=R.exports.useContext(dG),s=R.exports.useRef({onIncline:t,onDecline:e,onChange:n,onFallback:i});R.exports.useLayoutEffect(()=>{s.current.onIncline=t,s.current.onDecline=e,s.current.onChange=n,s.current.onFallback=i},[t,e,n,i]),R.exports.useLayoutEffect(()=>r.subscribe(s),[r])}const q_e=R.exports.forwardRef(({children:t,width:e,height:n,samples:i=8,renderPriority:r=0,eventPriority:s=0,frames:o=1/0,...a},l)=>{const{size:c,viewport:u}=Me(),f=jI((e||c.width)*u.dpr,(n||c.height)*u.dpr,{samples:i}),[h]=R.exports.useState(()=>new ml),d=R.exports.useCallback((p,m,A)=>{var v,y;let x=(v=f.texture)==null?void 0:v.__r3f.parent;for(;x&&!(x instanceof It);)x=x.__r3f.parent;if(!x)return!1;A.raycaster.camera||A.events.compute(p,A,(y=A.previousRoot)==null?void 0:y.getState());const[w]=A.raycaster.intersectObject(x);if(!w)return!1;const E=w.uv;if(!E)return!1;m.raycaster.setFromCamera(m.pointer.set(E.x*2-1,E.y*2-1),m.camera)},[]);return R.exports.useImperativeHandle(l,()=>f.texture,[f]),it(Sr,{children:[e0($(Y_e,{renderPriority:r,frames:o,fbo:f,children:t}),h,{events:{compute:d,priority:s}}),$("primitive",{object:f.texture,...a})]})});function Y_e({frames:t,renderPriority:e,children:n,fbo:i}){let r=0;return Ct(s=>{(t===1/0||r<t)&&(s.gl.setRenderTarget(i),s.gl.render(s.scene,s.camera),s.gl.setRenderTarget(null),r++)},e),$(Sr,{children:n})}function X_e({id:t=1,children:e,colorWrite:n=!1,depthWrite:i=!1,...r}){const s=R.exports.useMemo(()=>({colorWrite:n,depthWrite:i,stencilWrite:!0,stencilRef:t,stencilFunc:h3,stencilFail:Bv,stencilZFail:Bv,stencilZPass:Bv}),[t,n,i]);return it("mesh",{renderOrder:-t,...r,children:[$("meshBasicMaterial",{...s}),typeof e=="function"?e(s):e]})}function J_e(t,e=!1){return{stencilWrite:!0,stencilRef:t,stencilFunc:e?nU:tU,stencilFail:ku,stencilZFail:ku,stencilZPass:ku}}const K_e=t=>t&&t.isOrthographicCamera,TF=new ze;function $_e({canvasSize:t,scene:e,index:n,children:i,frames:r,rect:s,track:o}){const a=Me(h=>h.get),l=Me(h=>h.camera),c=Me(h=>h.scene),u=Me(h=>h.setEvents);let f=0;return Ct(h=>{if(r===1/0||f<=r){var d;s.current=(d=o.current)==null?void 0:d.getBoundingClientRect(),f++}if(s.current){const{left:p,right:m,top:A,bottom:v,width:y,height:x}=s.current,w=v<0||A>t.height||m<0||p>t.width,E=t.height-v,S=y/x;if(K_e(l)?(l.left!==y/-2||l.right!==y/2||l.top!==x/2||l.bottom!==x/-2)&&(Object.assign(l,{left:y/-2,right:y/2,top:x/2,bottom:x/-2}),l.updateProjectionMatrix()):l.aspect!==S&&(l.aspect=S,l.updateProjectionMatrix()),h.gl.setViewport(p,E,y,x),h.gl.setScissor(p,E,y,x),h.gl.setScissorTest(!0),w){h.gl.getClearColor(TF),h.gl.setClearColor(TF,h.gl.getClearAlpha()),h.gl.clear(!0,!0);return}h.gl.render(i?c:e,l)}},n),R.exports.useEffect(()=>{const h=a().events.connected;return u({connected:o.current}),()=>u({connected:h})},[]),$(Sr,{children:i})}const Z_e=({track:t,index:e=1,frames:n=1/0,children:i})=>{const r=R.exports.useRef(null),{size:s,scene:o}=Me(),[a]=R.exports.useState(()=>new ml),l=R.exports.useCallback((f,h)=>{if(t.current&&f.target===t.current){const{width:d,height:p,left:m,top:A}=r.current,v=f.clientX-m,y=f.clientY-A;h.pointer.set(v/d*2-1,-(y/p)*2+1),h.raycaster.setFromCamera(h.pointer,h.camera)}},[r]),[c,u]=R.exports.useReducer(()=>!0,!1);return R.exports.useEffect(()=>{var f;r.current=(f=t.current)==null?void 0:f.getBoundingClientRect(),u()},[]),$(Sr,{children:c&&e0($($_e,{canvasSize:s,frames:n,scene:o,track:t,rect:r,index:e,children:i}),a,{events:{compute:l,priority:e},size:{width:r.current.width,height:r.current.height}})})},_x=R.exports.createContext(null),$A=new F,BF=new F,eye=(t,e,n,i)=>{const r=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(i);return o===0?-s/r:($A.copy(i).multiplyScalar(r/o).sub(e),BF.copy(i).multiplyScalar(s/o).add(n).sub(t),-$A.dot(BF)/$A.dot($A))},tye=new F(0,1,0),RF=new Ne,ZE=({direction:t,axis:e})=>{const{translation:n,translationLimits:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,displayValues:f,opacity:h,onDragStart:d,onDrag:p,onDragEnd:m,userData:A}=R.exports.useContext(_x),v=Me(K=>K.controls),y=R.exports.useRef(null),x=R.exports.useRef(null),w=R.exports.useRef(null),E=R.exports.useRef(0),[S,M]=R.exports.useState(!1),b=R.exports.useCallback(K=>{f&&(y.current.innerText=`${n.current[e].toFixed(2)}`,y.current.style.display="block"),K.stopPropagation();const z=new Ne().extractRotation(x.current.matrixWorld),U=K.point.clone(),Q=new F().setFromMatrixPosition(x.current.matrixWorld),H=t.clone().applyMatrix4(z).normalize();w.current={clickPoint:U,dir:H},E.current=n.current[e],d({component:"Arrow",axis:e,origin:Q,directions:[H]}),v&&(v.enabled=!1),K.target.setPointerCapture(K.pointerId)},[t,v,d,n,e]),B=R.exports.useCallback(K=>{if(K.stopPropagation(),S||M(!0),w.current){const{clickPoint:z,dir:U}=w.current,[Q,H]=(i==null?void 0:i[e])||[void 0,void 0];let V=eye(z,U,K.ray.origin,K.ray.direction);Q!==void 0&&(V=Math.max(V,Q-E.current)),H!==void 0&&(V=Math.min(V,H-E.current)),n.current[e]=E.current+V,f&&(y.current.innerText=`${n.current[e].toFixed(2)}`),RF.makeTranslation(U.x*V,U.y*V,U.z*V),p(RF)}},[p,S,n,i,e]),T=R.exports.useCallback(K=>{f&&(y.current.style.display="none"),K.stopPropagation(),w.current=null,m(),v&&(v.enabled=!0),K.target.releasePointerCapture(K.pointerId)},[v,m]),k=R.exports.useCallback(K=>{K.stopPropagation(),M(!1)},[]),{cylinderLength:D,coneWidth:N,coneLength:O,matrixL:Y}=R.exports.useMemo(()=>{const K=l?a/o*1.6:o/20,z=l?.2:o/5,U=l?1-z:o-z,Q=new St().setFromUnitVectors(tye,t.clone().normalize()),H=new Ne().makeRotationFromQuaternion(Q);return{cylinderLength:U,coneWidth:K,coneLength:z,matrixL:H}},[t,o,a,l]),q=S?u:c[e];return $("group",{ref:x,children:it("group",{matrix:Y,matrixAutoUpdate:!1,onPointerDown:b,onPointerMove:B,onPointerUp:T,onPointerOut:k,children:[$(nx,{position:[0,-O,0],children:$("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:y})}),$("mesh",{visible:!1,position:[0,(D+O)/2,0],userData:A,children:$("cylinderGeometry",{args:[N*1.4,N*1.4,D+O,8,1]})}),$(Ec,{transparent:!0,raycast:()=>null,depthTest:s,points:[0,0,0,0,D,0],lineWidth:a,color:q,opacity:h,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10}),it("mesh",{raycast:()=>null,position:[0,D+O/2,0],renderOrder:500,children:[$("coneGeometry",{args:[N,O,24,1]}),$("meshBasicMaterial",{transparent:!0,depthTest:s,color:q,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10})]})]})})},nye=(t,e,n)=>{const i=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,r=[0,1,2].sort((p,m)=>Math.abs(e.getComponent(m))-Math.abs(e.getComponent(p))),s=i===r[0]?r[1]:r[0],o=t.getComponent(i),a=t.getComponent(s),l=e.getComponent(i),c=e.getComponent(s),u=n.getComponent(i),h=(n.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-h*l)/o,h]},ZA=new Ho,ev=new F,PF=new Ne,eb=({dir1:t,dir2:e,axis:n})=>{const{translation:i,translationLimits:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,displayValues:h,opacity:d,onDragStart:p,onDrag:m,onDragEnd:A,userData:v}=R.exports.useContext(_x),y=Me(U=>U.controls),x=R.exports.useRef(null),w=R.exports.useRef(null),E=R.exports.useRef(null),S=R.exports.useRef(0),M=R.exports.useRef(0),[b,B]=R.exports.useState(!1),T=R.exports.useCallback(U=>{h&&(x.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`,x.current.style.display="block"),U.stopPropagation();const Q=U.point.clone(),H=new F().setFromMatrixPosition(w.current.matrixWorld),V=new F().setFromMatrixColumn(w.current.matrixWorld,0).normalize(),J=new F().setFromMatrixColumn(w.current.matrixWorld,1).normalize(),j=new F().setFromMatrixColumn(w.current.matrixWorld,2).normalize(),re=new Zr().setFromNormalAndCoplanarPoint(j,H);E.current={clickPoint:Q,e1:V,e2:J,plane:re},S.current=i.current[(n+1)%3],M.current=i.current[(n+2)%3],p({component:"Slider",axis:n,origin:H,directions:[V,J,j]}),y&&(y.enabled=!1),U.target.setPointerCapture(U.pointerId)},[y,p,n]),k=R.exports.useCallback(U=>{if(U.stopPropagation(),b||B(!0),E.current){const{clickPoint:Q,e1:H,e2:V,plane:J}=E.current,[j,re]=(r==null?void 0:r[(n+1)%3])||[void 0,void 0],[ee,ae]=(r==null?void 0:r[(n+2)%3])||[void 0,void 0];ZA.copy(U.ray),ZA.intersectPlane(J,ev),ZA.direction.negate(),ZA.intersectPlane(J,ev),ev.sub(Q);let[ce,ge]=nye(H,V,ev);j!==void 0&&(ce=Math.max(ce,j-S.current)),re!==void 0&&(ce=Math.min(ce,re-S.current)),ee!==void 0&&(ge=Math.max(ge,ee-M.current)),ae!==void 0&&(ge=Math.min(ge,ae-M.current)),i.current[(n+1)%3]=S.current+ce,i.current[(n+2)%3]=M.current+ge,h&&(x.current.innerText=`${i.current[(n+1)%3].toFixed(2)}, ${i.current[(n+2)%3].toFixed(2)}`),PF.makeTranslation(ce*H.x+ge*V.x,ce*H.y+ge*V.y,ce*H.z+ge*V.z),m(PF)}},[m,b,i,r,n]),D=R.exports.useCallback(U=>{h&&(x.current.style.display="none"),U.stopPropagation(),E.current=null,A(),y&&(y.enabled=!0),U.target.releasePointerCapture(U.pointerId)},[y,A]),N=R.exports.useCallback(U=>{U.stopPropagation(),B(!1)},[]),O=R.exports.useMemo(()=>{const U=t.clone().normalize(),Q=e.clone().normalize();return new Ne().makeBasis(U,Q,U.clone().cross(Q))},[t,e]),Y=c?1/7:a/7,q=c?.225:a*.225,K=b?f:u[n],z=R.exports.useMemo(()=>[new F(0,0,0),new F(0,q,0),new F(q,q,0),new F(q,0,0),new F(0,0,0)],[q]);return it("group",{ref:w,matrix:O,matrixAutoUpdate:!1,children:[$(nx,{position:[0,0,0],children:$("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:x})}),it("group",{position:[Y*1.7,Y*1.7,0],children:[it("mesh",{visible:!0,onPointerDown:T,onPointerMove:k,onPointerUp:D,onPointerOut:N,scale:q,userData:v,children:[$("planeGeometry",{}),$("meshBasicMaterial",{transparent:!0,depthTest:o,color:K,polygonOffset:!0,polygonOffsetFactor:-10,side:bi})]}),$(Ec,{position:[-q/2,-q/2,0],transparent:!0,depthTest:o,points:z,lineWidth:l,color:K,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:v})]})]})};var DF=0/0,iye="[object Symbol]",rye=/^\s+|\s+$/g,sye=/^[-+]0x[0-9a-f]+$/i,oye=/^0b[01]+$/i,aye=/^0o[0-7]+$/i,lye=parseInt,cye=Object.prototype,uye=cye.toString;function fye(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function LF(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function hye(t){return!!t&&typeof t=="object"}function dye(t){return typeof t=="symbol"||hye(t)&&uye.call(t)==iye}function tb(t){if(typeof t=="number")return t;if(dye(t))return DF;if(LF(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=LF(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(rye,"");var n=oye.test(t);return n||aye.test(t)?lye(t.slice(2),n?2:8):sye.test(t)?DF:+t}function pye(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=tb(n),n=n===n?n:0),e!==void 0&&(e=tb(e),e=e===e?e:0),fye(tb(t),e,n)}var mye=pye;const nb=new F,ib=new F,rb=t=>t*180/Math.PI,gye=t=>t*Math.PI/180,Aye=(t,e,n,i,r)=>{nb.copy(t).sub(n),ib.copy(e).sub(n);const s=i.dot(i),o=r.dot(r),a=nb.dot(i)/s,l=nb.dot(r)/o,c=ib.dot(i)/s,u=ib.dot(r)/o,f=Math.atan2(l,a);return Math.atan2(u,c)-f},vye=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},FF=t=>{let e=vye(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},tv=new Ne,kF=new F,nv=new Ho,sb=new F,ob=({dir1:t,dir2:e,axis:n})=>{const{rotationLimits:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,displayValues:f,opacity:h,onDragStart:d,onDrag:p,onDragEnd:m,userData:A}=R.exports.useContext(_x),v=Me(q=>q.controls),y=R.exports.useRef(null),x=R.exports.useRef(null),w=R.exports.useRef(0),E=R.exports.useRef(0),S=R.exports.useRef(null),[M,b]=R.exports.useState(!1),B=R.exports.useCallback(q=>{f&&(y.current.innerText=`${rb(E.current).toFixed(0)}\xBA`,y.current.style.display="block"),q.stopPropagation();const K=q.point.clone(),z=new F().setFromMatrixPosition(x.current.matrixWorld),U=new F().setFromMatrixColumn(x.current.matrixWorld,0).normalize(),Q=new F().setFromMatrixColumn(x.current.matrixWorld,1).normalize(),H=new F().setFromMatrixColumn(x.current.matrixWorld,2).normalize(),V=new Zr().setFromNormalAndCoplanarPoint(H,z);S.current={clickPoint:K,origin:z,e1:U,e2:Q,normal:H,plane:V},d({component:"Rotator",axis:n,origin:z,directions:[U,Q,H]}),v&&(v.enabled=!1),q.target.setPointerCapture(q.pointerId)},[v,d,n]),T=R.exports.useCallback(q=>{if(q.stopPropagation(),M||b(!0),S.current){const{clickPoint:K,origin:z,e1:U,e2:Q,normal:H,plane:V}=S.current,[J,j]=(i==null?void 0:i[n])||[void 0,void 0];nv.copy(q.ray),nv.intersectPlane(V,sb),nv.direction.negate(),nv.intersectPlane(V,sb);let re=Aye(K,sb,z,U,Q),ee=rb(re);q.shiftKey&&(ee=Math.round(ee/10)*10,re=gye(ee)),J!==void 0&&j!==void 0&&j-J<2*Math.PI?(re=FF(re),re=re>Math.PI?re-2*Math.PI:re,re=mye(re,J-w.current,j-w.current),E.current=w.current+re):(E.current=FF(w.current+re),E.current=E.current>Math.PI?E.current-2*Math.PI:E.current),f&&(ee=rb(E.current),y.current.innerText=`${ee.toFixed(0)}\xBA`),tv.makeRotationAxis(H,re),kF.copy(z).applyMatrix4(tv).sub(z).negate(),tv.setPosition(kF),p(tv)}},[p,M,i,n]),k=R.exports.useCallback(q=>{f&&(y.current.style.display="none"),q.stopPropagation(),w.current=E.current,S.current=null,m(),v&&(v.enabled=!0),q.target.releasePointerCapture(q.pointerId)},[v,m]),D=R.exports.useCallback(q=>{q.stopPropagation(),b(!1)},[]),N=R.exports.useMemo(()=>{const q=t.clone().normalize(),K=e.clone().normalize();return new Ne().makeBasis(q,K,q.clone().cross(K))},[t,e]),O=l?.65:o*.65,Y=R.exports.useMemo(()=>{const K=[];for(let z=0;z<=32;z++){const U=z*(Math.PI/2)/32;K.push(new F(Math.cos(U)*O,Math.sin(U)*O,0))}return K},[O]);return it("group",{ref:x,onPointerDown:B,onPointerMove:T,onPointerUp:k,onPointerOut:D,matrix:N,matrixAutoUpdate:!1,children:[$(nx,{position:[O,O,0],children:$("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:y})}),$(Ec,{points:Y,lineWidth:a*4,visible:!1,userData:A}),$(Ec,{transparent:!0,raycast:()=>null,depthTest:s,points:Y,lineWidth:a,color:M?u:c[n],opacity:h,polygonOffset:!0,polygonOffsetFactor:-10})]})},_ye=new F,yye=new F,xye=new F,wye=(t,e,n)=>{const i=n.width/2,r=n.height/2;e.updateMatrixWorld(!1);const s=t.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},Eye=(t,e,n,i=1)=>{const r=_ye.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,i);return r.unproject(e),r},pG=(t,e,n,i)=>{const r=wye(xye.copy(t),n,i);let s=0;for(let o=0;o<2;++o){const a=yye.copy(r).setComponent(o,r.getComponent(o)+e),l=Eye(a,n,i,a.z);s=Math.max(s,t.distanceTo(l))}return s},OF=new Ne,UF=new Ne,NF=new Ne,iv=new Ne,ab=new Ne,Mh=new Ne,zF=new Ne,GF=new Ne,Ih=new Sn,lb=new Sn,QF=new F,HF=new F,VF=new F,WF=new F,pp=new F(1,0,0),mp=new F(0,1,0),gp=new F(0,0,1),bye=R.exports.forwardRef(({matrix:t,onDragStart:e,onDrag:n,onDragEnd:i,autoTransform:r=!0,anchor:s,disableAxes:o=!1,disableSliders:a=!1,disableRotations:l=!1,activeAxes:c=[!0,!0,!0],offset:u=[0,0,0],rotation:f=[0,0,0],scale:h=1,lineWidth:d=4,fixed:p=!1,translationLimits:m,rotationLimits:A,depthTest:v=!0,axisColors:y=["#ff2060","#20df80","#2080ff"],hoveredColor:x="#ffff40",displayValues:w=!0,opacity:E=1,visible:S=!0,userData:M,children:b},B)=>{Vr({MeshLine:l9,MeshLineMaterial:c9});const T=Me(z=>z.invalidate),k=R.exports.useRef(null),D=R.exports.useRef(null),N=R.exports.useRef(null),O=R.exports.useRef(null),Y=R.exports.useRef([0,0,0]);R.exports.useLayoutEffect(()=>{!s||(O.current.updateWorldMatrix(!0,!0),iv.copy(O.current.matrixWorld).invert(),Ih.makeEmpty(),O.current.traverse(z=>{!z.geometry||(z.geometry.boundingBox||z.geometry.computeBoundingBox(),Mh.copy(z.matrixWorld).premultiply(iv),lb.copy(z.geometry.boundingBox),lb.applyMatrix4(Mh),Ih.union(lb))}),QF.copy(Ih.max).add(Ih.min).multiplyScalar(.5),HF.copy(Ih.max).sub(Ih.min).multiplyScalar(.5),VF.copy(HF).multiply(new F(...s)).add(QF),WF.set(...u).add(VF),N.current.position.copy(WF),T())});const q=R.exports.useMemo(()=>({onDragStart:z=>{OF.copy(D.current.matrix),UF.copy(D.current.matrixWorld),e&&e(z),T()},onDrag:z=>{NF.copy(k.current.matrixWorld),iv.copy(NF).invert(),ab.copy(UF).premultiply(z),Mh.copy(ab).premultiply(iv),zF.copy(OF).invert(),GF.copy(Mh).multiply(zF),r&&D.current.matrix.copy(Mh),n&&n(Mh,GF,ab,z),T()},onDragEnd:()=>{i&&i(),T()},translation:Y,translationLimits:m,rotationLimits:A,axisColors:y,hoveredColor:x,opacity:E,scale:h,lineWidth:d,fixed:p,displayValues:w,depthTest:v,userData:M}),[e,n,i,Y,m,A,v,h,d,p,...y,x,E,w,M,r]),K=new F;return Ct(z=>{if(p){const V=pG(N.current.getWorldPosition(K),h,z.camera,z.size);if(N.current){var U,Q,H;(((U=N.current)==null?void 0:U.scale.x)!==V||((Q=N.current)==null?void 0:Q.scale.y)!==V||((H=N.current)==null?void 0:H.scale.z)!==V)&&(N.current.scale.setScalar(V),z.invalidate())}}}),R.exports.useImperativeHandle(B,()=>D.current,[]),R.exports.createElement(_x.Provider,{value:q},$("group",{ref:k,children:it("group",{ref:D,matrix:t,matrixAutoUpdate:!1,children:[it("group",{visible:S,ref:N,position:u,rotation:f,children:[!o&&c[0]&&$(ZE,{axis:0,direction:pp}),!o&&c[1]&&$(ZE,{axis:1,direction:mp}),!o&&c[2]&&$(ZE,{axis:2,direction:gp}),!a&&c[0]&&c[1]&&$(eb,{axis:2,dir1:pp,dir2:mp}),!a&&c[0]&&c[2]&&$(eb,{axis:1,dir1:gp,dir2:pp}),!a&&c[2]&&c[1]&&$(eb,{axis:0,dir1:mp,dir2:gp}),!l&&c[0]&&c[1]&&$(ob,{axis:2,dir1:pp,dir2:mp}),!l&&c[0]&&c[2]&&$(ob,{axis:1,dir1:gp,dir2:pp}),!l&&c[2]&&c[1]&&$(ob,{axis:0,dir1:mp,dir2:gp})]}),$("group",{ref:O,children:b})]})}))}),Sye=Object.freeze(Object.defineProperty({__proto__:null,Html:nx,CycleRaycast:Lue,useCursor:Fue,Loader:Oue,Scroll:Gue,ScrollControls:Uue,useScroll:lI,PresentationControls:hde,KeyboardControls:pde,useKeyboardControls:mde,Select:Epe,useSelect:bpe,Billboard:Zz,QuadraticBezierLine:Cpe,CubicBezierLine:Mpe,CatmullRomLine:Ipe,Line:Ec,PositionalAudio:Tpe,Text:pme,Text3D:Ame,Effects:_me,isWebGL2Available:vme,GradientTexture:yme,Image:bme,Edges:Sme,Trail:Ime,useTrail:f9,Sampler:Tme,useSurfaceSampler:h9,ComputedAttribute:Bme,Clone:wC,MarchingCube:oge,MarchingCubes:sge,MarchingPlane:age,Decal:cge,OrthographicCamera:g9,PerspectiveCamera:uge,CubeCamera:fge,DeviceOrientationControls:hge,FlyControls:dge,MapControls:pge,OrbitControls:mge,TrackballControls:gge,ArcballControls:Age,TransformControls:k1e,PointerLockControls:O1e,FirstPersonControls:U1e,GizmoHelper:G1e,useGizmoContext:Ax,GizmoViewcube:Y1e,GizmoViewport:X1e,useCubeTexture:P9,useFBX:HI,useGLTF:VI,useKTX2:WI,useProgress:ON,IsObject:zm,useTexture:If,useVideoTexture:J1e,Stats:Z1e,useDepthBuffer:eAe,useAspect:tAe,useCamera:I9,useDetectGPU:aAe,useHelper:lAe,useBVH:jAe,useContextBridge:qAe,useAnimations:YAe,useFBO:jI,useIntersect:XAe,useBoxProjectedEnv:tve,BBAnchor:nve,CurveModifier:ive,MeshDistortMaterial:ove,MeshWobbleMaterial:lve,MeshReflectorMaterial:uve,MeshRefractionMaterial:dve,PointMaterial:pve,PointMaterialImpl:W9,shaderMaterial:i0,softShadows:gve,Box:Ave,Capsule:Dve,Circle:vve,Cone:_ve,Cylinder:yve,Dodecahedron:Bve,Extrude:Rve,Icosahedron:Ive,Lathe:Pve,Octahedron:Tve,Plane:j9,Polyhedron:Mve,Ring:Cve,Sphere:xve,Tetrahedron:Sve,Torus:Eve,TorusKnot:bve,Tube:wve,RoundedBox:Fve,ScreenQuad:Ove,Center:Uve,Bounds:zve,useBounds:Gve,CameraShake:Qve,Float:Hve,Stage:Yve,Backdrop:Jve,Shadow:Kve,ContactShadows:J9,AccumulativeShadows:n_e,RandomizedLight:i_e,accumulativeContext:KI,Reflector:s_e,SpotLight:a_e,Environment:X9,EnvironmentCube:JI,EnvironmentMap:vx,EnvironmentPortal:Y9,useEnvironment:XI,Lightformer:l_e,Sky:c_e,calcPosFromAngles:K9,Stars:h_e,Cloud:p_e,Sparkles:__e,useMatcapTexture:E_e,useNormalTexture:C_e,Point:I_e,Points:T_e,PointsBuffer:iG,PositionPoint:tG,Instance:cG,Instances:uG,Merged:k_e,Segment:U_e,SegmentObject:hG,Segments:O_e,Detailed:N_e,Preload:z_e,BakeShadows:G_e,meshBounds:Q_e,AdaptiveDpr:H_e,AdaptiveEvents:V_e,PerformanceMonitor:W_e,usePerformanceMonitor:j_e,RenderTexture:q_e,Mask:X_e,useMask:J_e,View:Z_e,PivotControls:bye,calculateScaleFactor:pG},Symbol.toStringTag,{value:"Module"})),Cye=df(Sye);var Mye=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Iye=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tye=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Mye(e,t,n);return Iye(e,t),e};Object.defineProperty(sI,"__esModule",{value:!0});const su=Tye(R.exports),Bye=Cye,Rye={position:"absolute",bottom:"5%",width:"200px",left:"calc(50% - 100px)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",textAlign:"center",fontFamily:"sans-serif",padding:"10px",userSelect:"none",borderRadius:"5px"};function Pye({onInteract:t,placementType:e}){const[n,i]=(0,su.useState)(!0),[r,s]=(0,su.useState)(!1);return(0,su.useLayoutEffect)(()=>{t(n)},[n]),(0,su.useEffect)(()=>{s(!0)},[]),!r||e==="placement-only"&&!n?null:su.default.createElement(Bye.Html,{fullscreen:!0,style:{left:"0px",top:"0px"}},su.default.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.1)"}},su.default.createElement("div",{id:"ZapparPlacementUIHelper",role:"button",style:Rye,tabIndex:0,onKeyPress:()=>{i(o=>!o)},onClick:()=>{i(o=>!o)}},"Tap here to",n?" place ":" pick up ","the object")))}sI.default=Pye;var Dye=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Lye=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mG=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Dye(e,t,n);return Lye(e,t),e},yx=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rI,"__esModule",{value:!0});const gG=mG(Fs()),bo=mG(R.exports),AG=Rc,Fye=yx(Bc),kye=yx(Cf),Oye=yx(sI),Uye=yx(yg),{InstantWorldAnchorGroup:Nye}=gG;(0,AG.extend)({InstantWorldAnchorGroup:Nye});const zye=(0,bo.forwardRef)((t,e)=>{const{camera:n,placementMode:i,children:r,placementCameraOffset:s,pipeline:o,placementUI:a,useInstantTracker:l,enabled:c}=t,u=(0,bo.useRef)(),[f,h]=(0,bo.useState)(i);(0,bo.useEffect)(()=>{h(i)},[i,a]);const[d,p]=(0,bo.useState)();(0,bo.useEffect)(()=>{p(new gG.InstantWorldTracker(o))},[o]);const m=kye.default.camera(x=>x),A=n!=null&&n.current?n.current:m.object,v=s||{x:0,y:0,z:-5};if((0,bo.useEffect)(()=>{d&&l&&l(d)},[l,d]),(0,AG.useFrame)(()=>{f&&d&&(Array.isArray(v)?d.setAnchorPoseFromCameraOffset(v[0],v[1],v[2]):typeof v=="number"?d.setAnchorPoseFromCameraOffset(0,0,v):v.x!==void 0&&d.setAnchorPoseFromCameraOffset(v.x,v.y,v.z))}),(0,Uye.default)(d,c),!A||!d)return null;const y=a?bo.default.createElement(Oye.default,{placementType:a,onInteract:async x=>h(x)}):void 0;return bo.default.createElement(bo.default.Fragment,null,y,bo.default.createElement("instantWorldAnchorGroup",Object.assign({ref:(0,Fye.default)([u,e]),args:[A,d]},t),r))});rI.default=zye;var $I={},Gye=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Qye=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vG=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Gye(e,t,n);return Qye(e,t),e},_G=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($I,"__esModule",{value:!0});const Jr=vG(Fs()),Ji=vG(R.exports),Hye=YU(),Vye=_G(Bc),jF=Rc,Wye=_G(Cf),jye=(0,Ji.forwardRef)((t,e)=>{const{userFacing:n=!1,rearCameraMirrorMode:i,userCameraMirrorMode:r,poseMode:s,poseAnchorOrigin:o,pipeline:a,sources:l,makeDefault:c=!0,renderPriority:u=-1,environmentMap:f=!1,permissionRequest:h=!0,onFirstFrame:d,start:p=!0,backgroundImageProps:m}=t,{gl:A,set:v}=(0,jF.useThree)(T=>T),y=Ji.default.useRef(!1),[x]=(0,Ji.useState)(new Hye.CameraTexture),w=(0,Ji.useMemo)(()=>f?new Jr.CameraEnvironmentMap:void 0,[f]);(0,Ji.useEffect)(()=>{m&&x&&Object.assign(x,m)},[m,x]);const E=Ji.default.useRef(),[S,M]=(0,Ji.useState)(!1),b={camera:Wye.default.camera(T=>T)};(0,Ji.useEffect)(()=>{(a||Jr).glContextSet(A.getContext())},[a,A]),(0,Ji.useEffect)(()=>{c&&v(()=>({camera:E.current}))},[c]),(0,Ji.useEffect)(()=>{!E.current||(b.camera.set(E.current),p&&(S||!h?E.current.start(n):Jr.permissionRequestUI().then(T=>{M(T),T?E.current.start(n):Jr.permissionDeniedUI()})))},[n,h,p]),(0,Ji.useEffect)(()=>{if(!!E.current){switch(i){case"poses":E.current.rearCameraMirrorMode=Jr.CameraMirrorMode.Poses;break;case"css":E.current.rearCameraMirrorMode=Jr.CameraMirrorMode.CSS;break;case"none":default:E.current.rearCameraMirrorMode=Jr.CameraMirrorMode.None;break}switch(r){case"none":E.current.userCameraMirrorMode=Jr.CameraMirrorMode.None;break;case"css":E.current.userCameraMirrorMode=Jr.CameraMirrorMode.CSS;break;case"poses":default:E.current.userCameraMirrorMode=Jr.CameraMirrorMode.Poses;break}switch(s){case"anchor-origin":E.current.poseMode=Jr.CameraPoseMode.AnchorOrigin,E.current.poseAnchorOrigin=o;break;case"attitude":E.current.poseMode=Jr.CameraPoseMode.Attitude;break;case"default":default:E.current.poseMode=Jr.CameraPoseMode.Default;break}}},[i,r,s,o]),(0,jF.useFrame)(({gl:T,scene:k})=>{!E.current||(d&&!y.current&&E.current.pipeline.frameNumber()>0&&(y.current=!0,d()),w==null||w.update(T,E.current),E.current.updateFrame(T),u>0&&T.render(k,E.current))},u);const B=Ji.default.useMemo(()=>{const T=new Jr.Camera({pipeline:a,userCameraSource:l==null?void 0:l.userCamera,rearCameraSource:l==null?void 0:l.rearCamera,backgroundTexture:x});return T.updateProjectionMatrix=()=>{},T},[a,l,x]);return Ji.default.createElement(Ji.default.Fragment,null,Ji.default.createElement("primitive",{dispose:null,object:x,attach:"background"}),f&&Ji.default.createElement("primitive",{dispose:null,object:w.environmentMap,attach:"environment"}),Ji.default.createElement("primitive",{dispose:null,object:B,ref:(0,Vye.default)([e,E])}))});$I.default=jye;var ZI={},Vu=[],qye=function(){return Vu.some(function(t){return t.activeTargets.length>0})},Yye=function(){return Vu.some(function(t){return t.skippedTargets.length>0})},qF="ResizeObserver loop completed with undelivered notifications.",Xye=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:qF}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=qF),window.dispatchEvent(t)},Hm;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Hm||(Hm={}));var Wu=function(t){return Object.freeze(t)},yG=function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Wu(this)}return t}(),xG=function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Wu(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,s=e.right,o=e.bottom,a=e.left,l=e.width,c=e.height;return{x:n,y:i,top:r,right:s,bottom:o,left:a,width:l,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),eT=function(t){return t instanceof SVGElement&&"getBBox"in t},wG=function(t){if(eT(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,s=r.offsetWidth,o=r.offsetHeight;return!(s||o||t.getClientRects().length)},YF=function(t){var e,n;if(t instanceof Element)return!0;var i=(n=(e=t)===null||e===void 0?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(i&&t instanceof i.Element)},Jye=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Kp=typeof window<"u"?window:{},rv=new WeakMap,XF=/auto|scroll/,Kye=/^tb|vertical/,$ye=/msie|trident/i.test(Kp.navigator&&Kp.navigator.userAgent),ra=function(t){return parseFloat(t||"0")},hd=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new yG((n?e:t)||0,(n?t:e)||0)},JF=Wu({devicePixelContentBoxSize:hd(),borderBoxSize:hd(),contentBoxSize:hd(),contentRect:new xG(0,0,0,0)}),EG=function(t,e){if(e===void 0&&(e=!1),rv.has(t)&&!e)return rv.get(t);if(wG(t))return rv.set(t,JF),JF;var n=getComputedStyle(t),i=eT(t)&&t.ownerSVGElement&&t.getBBox(),r=!$ye&&n.boxSizing==="border-box",s=Kye.test(n.writingMode||""),o=!i&&XF.test(n.overflowY||""),a=!i&&XF.test(n.overflowX||""),l=i?0:ra(n.paddingTop),c=i?0:ra(n.paddingRight),u=i?0:ra(n.paddingBottom),f=i?0:ra(n.paddingLeft),h=i?0:ra(n.borderTopWidth),d=i?0:ra(n.borderRightWidth),p=i?0:ra(n.borderBottomWidth),m=i?0:ra(n.borderLeftWidth),A=f+c,v=l+u,y=m+d,x=h+p,w=a?t.offsetHeight-x-t.clientHeight:0,E=o?t.offsetWidth-y-t.clientWidth:0,S=r?A+y:0,M=r?v+x:0,b=i?i.width:ra(n.width)-S-E,B=i?i.height:ra(n.height)-M-w,T=b+A+E+y,k=B+v+w+x,D=Wu({devicePixelContentBoxSize:hd(Math.round(b*devicePixelRatio),Math.round(B*devicePixelRatio),s),borderBoxSize:hd(T,k,s),contentBoxSize:hd(b,B,s),contentRect:new xG(f,l,b,B)});return rv.set(t,D),D},bG=function(t,e,n){var i=EG(t,n),r=i.borderBoxSize,s=i.contentBoxSize,o=i.devicePixelContentBoxSize;switch(e){case Hm.DEVICE_PIXEL_CONTENT_BOX:return o;case Hm.BORDER_BOX:return r;default:return s}},SG=function(){function t(e){var n=EG(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Wu([n.borderBoxSize]),this.contentBoxSize=Wu([n.contentBoxSize]),this.devicePixelContentBoxSize=Wu([n.devicePixelContentBoxSize])}return t}(),CG=function(t){if(wG(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Zye=function(){var t=1/0,e=[];Vu.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(c){var u=new SG(c.target),f=CG(c.target);a.push(u),c.lastReportedSize=bG(c.target,c.observedBox),f<t&&(t=f)}),e.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},KF=function(t){Vu.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(CG(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},exe=function(){var t=0;for(KF(t);qye();)t=Zye(),KF(t);return Yye()&&Xye(),t>0},cb,MG=[],txe=function(){return MG.splice(0).forEach(function(t){return t()})},nxe=function(t){if(!cb){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return txe()}).observe(n,i),cb=function(){n.textContent=""+(e?e--:e++)}}MG.push(t),cb()},ixe=function(t){nxe(function(){requestAnimationFrame(t)})},Ov=0,rxe=function(){return!!Ov},sxe=250,oxe={attributes:!0,characterData:!0,childList:!0,subtree:!0},$F=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ZF=function(t){return t===void 0&&(t=0),Date.now()+t},ub=!1,axe=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=sxe),!ub){ub=!0;var i=ZF(e);ixe(function(){var r=!1;try{r=exe()}finally{if(ub=!1,e=i-ZF(),!rxe())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,oxe)};document.body?n():Kp.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),$F.forEach(function(n){return Kp.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),$F.forEach(function(n){return Kp.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t}(),IC=new axe,e5=function(t){!Ov&&t>0&&IC.start(),Ov+=t,!Ov&&IC.stop()},lxe=function(t){return!eT(t)&&!Jye(t)&&getComputedStyle(t).display==="inline"},cxe=function(){function t(e,n){this.target=e,this.observedBox=n||Hm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=bG(this.target,this.observedBox,!0);return lxe(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),uxe=function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t}(),sv=new WeakMap,t5=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},ov=function(){function t(){}return t.connect=function(e,n){var i=new uxe(e,n);sv.set(e,i)},t.observe=function(e,n,i){var r=sv.get(e),s=r.observationTargets.length===0;t5(r.observationTargets,n)<0&&(s&&Vu.push(r),r.observationTargets.push(new cxe(n,i&&i.box)),e5(1),IC.schedule())},t.unobserve=function(e,n){var i=sv.get(e),r=t5(i.observationTargets,n),s=i.observationTargets.length===1;r>=0&&(s&&Vu.splice(Vu.indexOf(i),1),i.observationTargets.splice(r,1),e5(-1))},t.disconnect=function(e){var n=this,i=sv.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t}(),fxe=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ov.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!YF(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ov.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!YF(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ov.unobserve(this,e)},t.prototype.disconnect=function(){ov.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const hxe=Object.freeze(Object.defineProperty({__proto__:null,ResizeObserver:fxe,ResizeObserverEntry:SG,ResizeObserverSize:yG},Symbol.toStringTag,{value:"Module"})),dxe=df(hxe);var pxe=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ZI,"__esModule",{value:!0});const mxe=pxe(R.exports),gxe=Rc,Axe=dxe,vxe=t=>{const{children:e}=t;return mxe.default.createElement(gxe.Canvas,Object.assign({flat:!0,resize:{polyfill:Axe.ResizeObserver},linear:!0,dpr:window.devicePixelRatio,id:"zapparCanvas"},t,{gl:Object.assign({antialias:!1},t.gl)}),e)};ZI.default=vxe;var tT={},_xe=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),yxe=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xxe=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&_xe(e,t,n);return yxe(e,t),e};Object.defineProperty(tT,"__esModule",{value:!0});const wxe=R.exports,Exe=xxe(Fs());function bxe(t){const{style:e,onLoad:n}=t;return(0,wxe.useEffect)(()=>{const i=new Exe.DefaultLoaderUI({style:e,onLoad:n});return()=>i.dispose()},[t]),null}tT.default=bxe;var nT={},Sxe=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Cxe=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Mxe=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Sxe(e,t,n);return Cxe(e,t),e};Object.defineProperty(nT,"__esModule",{value:!0});const n5=Mxe(Fs()),i5=R.exports,Ixe=t=>{const{fallback:e}=t,[n,i]=(0,i5.useState)(!0);return(0,i5.useEffect)(()=>{i(!n5.browserIncompatible()),!n&&!e&&n5.browserIncompatibleUI()},[]),e&&!n?e:null};nT.default=Ixe;var iT={},Txe=He&&He.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Bxe=He&&He.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IG=He&&He.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Txe(e,t,n);return Bxe(e,t),e},Rxe=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(iT,"__esModule",{value:!0});const Pxe=IG(Fs()),av=IG(R.exports),Dxe=Rxe(Bc),Lxe=(0,av.forwardRef)((t,e)=>{const{children:n,imageTarget:i}=t,r=av.default.useMemo(()=>new Pxe.TargetImagePreviewMesh(i),[i]),s=av.default.useRef();return av.default.createElement("primitive",Object.assign({object:r,ref:(0,Dxe.default)([s,e])},t),n)});iT.default=Lxe;(function(t){var e=He&&He.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.TargetImagePreviewMesh=t.BrowserCompatibility=t.Loader=t.ZapparCanvas=t.ZapparCamera=t.InstantTracker=t.ImageTracker=t.HeadMaskMesh=t.FaceTracker=t.FaceLandmark=t.FaceBufferGeometry=t.SequenceSource=t.setLogLevel=t.LogLevel=t.Pipeline=t.browserIncompatible=void 0;const n=e(kM);console.log(`Zappar for React Three v${n.default}`);var i=Fs();Object.defineProperty(t,"browserIncompatible",{enumerable:!0,get:function(){return i.browserIncompatible}}),Object.defineProperty(t,"Pipeline",{enumerable:!0,get:function(){return i.Pipeline}}),Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return i.LogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return i.setLogLevel}}),Object.defineProperty(t,"SequenceSource",{enumerable:!0,get:function(){return i.SequenceSource}});var r=W3;Object.defineProperty(t,"FaceBufferGeometry",{enumerable:!0,get:function(){return e(r).default}});var s=$3;Object.defineProperty(t,"FaceLandmark",{enumerable:!0,get:function(){return e(s).default}});var o=Z3;Object.defineProperty(t,"FaceTracker",{enumerable:!0,get:function(){return e(o).default}});var a=tI;Object.defineProperty(t,"HeadMaskMesh",{enumerable:!0,get:function(){return e(a).default}});var l=nI;Object.defineProperty(t,"ImageTracker",{enumerable:!0,get:function(){return e(l).default}});var c=rI;Object.defineProperty(t,"InstantTracker",{enumerable:!0,get:function(){return e(c).default}});var u=$I;Object.defineProperty(t,"ZapparCamera",{enumerable:!0,get:function(){return e(u).default}});var f=ZI;Object.defineProperty(t,"ZapparCanvas",{enumerable:!0,get:function(){return e(f).default}});var h=tT;Object.defineProperty(t,"Loader",{enumerable:!0,get:function(){return e(h).default}});var d=nT;Object.defineProperty(t,"BrowserCompatibility",{enumerable:!0,get:function(){return e(d).default}});var p=iT;Object.defineProperty(t,"TargetImagePreviewMesh",{enumerable:!0,get:function(){return e(p).default}})})(wv);const Fxe=()=>{let[t,e]=R.exports.useState(!0);return console.log("DOC",document),it(Sr,{children:[it(wv.ZapparCanvas,{children:[$(wv.ZapparCamera,{}),$(wv.InstantTracker,{placementMode:t,placementCameraOffset:[0,0,-5],children:it("mesh",{children:[$("sphereBufferGeometry",{}),$("meshStandardMaterial",{color:"hotpink"})]})}),$("directionalLight",{position:[2.5,8,5],intensity:1.5})]}),it("div",{id:"zappar-placement-ui",onClick:()=>{e(n=>!n)},onKeyDown:()=>{e(n=>!n)},role:"button",tabIndex:0,children:["Tap here to",t?" place ":" pick up ","the object"]})]})};function kxe(){JSON.parse(localStorage.getItem("userInfo"));const[t,e]=R.exports.useState("HomeScreen"),n=["Accueil","HomeScreen","Credits","Notifications","Gallery","Customizer","TestAR"],i=[{name:"Accueil",class:"fa-home"},{name:"HomeScreen",class:"fa-home"},{name:"Notifications",class:"fa-envelope"},{name:"Gallery",class:"fa-film"},{name:"Credits",class:"fa-laptop-code"},{name:"Customizer",class:"fa-wand-magic-sparkles"},{name:"TestAR",class:"fa-wand-magic-sparkles"}];R.exports.useEffect(()=>{const a=window.location.pathname.replace("/","");n.includes(a)?e(a):e("404")},[]),R.exports.useEffect(()=>{document.title=t,window.history.pushState(t,"Title","/"+t)},[t]);const r=()=>{const a=document.querySelector(".menuToggle"),l=document.querySelector(".menu");a.classList.toggle("fa-bars"),a.classList.toggle("fa-xmark"),l.classList.toggle("menu-close"),l.classList.toggle("menu-open")},s=a=>{a.preventDefault(),e(a.currentTarget.getAttribute("href")),r()},o=a=>{a.preventDefault(),confirm("Voulez-vous vraiment vous d\xE9connecter ? Vous ne pourrez plus acc\xE9der \xE0 vos personnage sans votre mot de passe ou votre code QR")==!0?(localStorage.removeItem("userInfo"),window.location.href="Accueil"):alert("vous avez choisi de ne pas vous d\xE9conecter")};return it(Sr,{children:[(JSON.parse(localStorage.getItem("userInfo"))===null||t!=="Accueil")&&it("header",{className:"h-24",children:[$("nav",{className:"py-8 px-4 absolute z-50 right-0",children:$("a",{onClick:r,children:$("i",{className:"fa-solid fa-bars fa-3x menuToggle text-white"})})}),it("ul",{className:"menu grid grid-cols-3 pt-32 menu-close grid-rows-5 text-white",children:[i.map((a,l)=>$("li",{children:it("a",{href:a.name,onClick:s,className:"flex-col",children:[$("i",{className:"fa-solid fa-2x  "+a.class}),a.name]},l)},l)),$("li",{className:"li--disconnect",children:it("a",{className:"flex-col",onClick:o,children:[$("i",{className:"fa-solid fa-right-to-bracket fa-2x"}),"D\xE9connexion"]})}),$("li",{className:"li--backToGame",children:it("a",{className:"flex-col",onClick:r,children:[$("i",{className:"fa-solid fa-reply fa-2x"}),"Retour au jeu"]})})]})]}),JSON.parse(localStorage.getItem("userInfo"))===null?window.history.pushState(t,"","Accueil")&&$(c4,{}):window.history.pushState(t,"",t),t==="Accueil"&&$(c4,{}),JSON.parse(localStorage.getItem("userInfo"))!==null&&t==="HomeScreen"&&$(FV,{}),JSON.parse(localStorage.getItem("userInfo"))!==null&&t==="Credits"&&$(kV,{}),JSON.parse(localStorage.getItem("userInfo"))!==null&&t==="Notifications"&&$(OV,{}),JSON.parse(localStorage.getItem("userInfo"))!==null&&t==="Gallery"&&$(UV,{}),JSON.parse(localStorage.getItem("userInfo"))!==null&&t==="Customizer"&&$(oq,{}),t==="TestAR"&&$(Fxe,{})]})}fb.createRoot(document.getElementById("root")).render($(kxe,{}));
